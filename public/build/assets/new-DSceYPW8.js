import{_ as j}from"./AppCardActions-BJyPCjFd.js";import{_ as z}from"./AppAutocomplete-D4Z3zDO1.js";import{k as G,r as u,H,w as C,o as w,c as N,b as l,e as o,d as I,v as b,a6 as F,n as m,a7 as T,z as R,F as O}from"./main-BExmZ2kf.js";import{c as Y}from"./commonFunction-BfWgLDUp.js";import{u as J}from"./recordStore-BRuupE7k.js";import{S as $}from"./sweetalert2-z6gKu1nJ.js";import K from"./course-details-DD8gO6ys.js";import{V as E}from"./VForm-BbNpJMZp.js";import{V as Q,a as v}from"./VRow-BGfSjg9B.js";import{V as W,b as X,c as Z}from"./VCard-BWy6HoPz.js";import{V as ee}from"./VCardText-Cf-pEaEQ.js";import{a as x}from"./VTextField-CEVy12qb.js";import{V as le}from"./VSpacer--EhSoXT7.js";import{V as te}from"./VDialog-B-MGgqHt.js";import"./index-Bj_q85Ts.js";import"./dialog-transition-CbYxp5Cu.js";import"./forwardRefs-D3j0TLhE.js";import"./lazy-DZ-i-Qlv.js";import"./scopeId-Dfe144HE.js";import"./index-KIGaSWeg.js";import"./VSelect-B8JK6cKz.js";import"./VList-CROdwGQN.js";import"./ssrBoot-BNMwvSjN.js";import"./VAvatar-B4kKMTij.js";import"./VImg-ClVMkUI5.js";import"./VDivider-DGSOfiil.js";import"./VMenu-BJx8Sy0I.js";import"./VCheckboxBtn-Ds5tyiho.js";import"./VChip-C7r6BedM.js";import"./VSlideGroup-rtKvT2BM.js";import"./filter-DX8uJgVb.js";import"./api-gXFPZ2Tx.js";import"./index-BYrzgnBV.js";import"./fileStore-C1P57Pkq.js";import"./student-information-ZYkM0HVm.js";import"./validators-BlQl-bA8.js";import"./helpers-enDgjw4j.js";import"./AppDateTimePicker-hfFpXRtK.js";import"./AppTextField-CxuAAbDQ.js";import"./submitApplication-B93aITwL.js";import"./VRadioGroup-6y70moz7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./upload-document-Bif6aAu1.js";import"./vue-filepond.esm-B-EU8-Xk.js";import"./studentStore-ClEuK9s7.js";import"./VWindowItem-Bj47cEKC.js";/* empty css              */const ae={key:0},oe={class:"text-center mt-2 mb-8"},ue={key:1},el={__name:"new",setup(re){G();const r=Y(),P=J(),y=u(!1),A=u(!1),k=u(""),S=u(""),_=u(""),s=a=>!!a||"This field is required",D=u(""),i=u(null),n=u(null),d=u(null),p=u(null),V=u(null),U=u(!0),g=u(!1),q=u(!0),f=u(""),M=["Bangladesh","Nigeria","Sri Lanka","India","Bhutan","Ghana","Pakistan"];H(async()=>{await r.getUniqueCountries(),q.value=!1}),C(f,async a=>{a&&(i.value=null,n.value=null,d.value=null,p.value=null,r.setSelectedCountryId(a),await r.getIntakesByCountry(a))}),C(i,async a=>{a&&(n.value=null,d.value=null,p.value=null,await r.getCourseTypesByCountryIntake(f.value,a))}),C(n,async a=>{a&&(d.value=null,p.value=null,r.selectedCourseType=a,await r.getUniversitiesByCountryIntakeCourseType(f.value,i.value,a))}),C(d,async a=>{a&&(p.value=null,i.value&&n.value&&await r.getCourseDetails(i.value,a,n.value))}),C(p,a=>{a&&(r.selectedCourseDetailsId=a)});const h=()=>{V.value.validate().then(a=>{a.valid&&(g.value=!0,U.value=!1)})},B=async()=>{V.value.validate().then(async a=>{if(a.valid)try{await P.requestForm({universityName:k.value,courseName:S.value,intakeName:_.value}),$.fire("Success!","Your request has been successfully submitted. Our team will review it and get back to you shortly.","success"),y.value=!1,V.value.reset()}catch{$.fire("Error!","Failed to submit the request.","error")}})};return(a,e)=>{const c=z,L=j;return w(),N(O,null,[U.value?(w(),N("div",ae,[l(L,{title:"New Application",loading:q.value,"no-actions":""},{default:o(()=>[I("div",oe,[b(" Don't find your desired record? "),I("a",{href:"#",onClick:e[0]||(e[0]=F(t=>y.value=!0,["prevent"]))},"Click here to request")]),l(m(E),{ref_key:"refForm",ref:V,onSubmit:F(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[l(Q,null,{default:o(()=>[l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),items:m(r).countries,"item-title":"name","item-value":"id",label:"Country to Apply",placeholder:"Select Country",rules:[s]},null,8,["modelValue","items","rules"])]),_:1}),l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:D.value,"onUpdate:modelValue":e[2]||(e[2]=t=>D.value=t),items:M,label:"Country of Student Passport",placeholder:"Select Country of Student's Passport",rules:[s]},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),items:m(r).intakes,"item-title":"intake_name","item-value":"intake_id",label:"Intake",placeholder:"Select Intake",rules:[s],disabled:!f.value},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value=t),items:m(r).courseTypes,"item-title":"name","item-value":"id",label:"Course Type",placeholder:"Select Course Type",rules:[s],disabled:!i.value},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),items:m(r).universities,"item-title":"university_name","item-value":"university_id",label:"University",placeholder:"Select University",rules:[s],disabled:!n.value},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(v,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=t=>p.value=t),items:m(r).courseDetails,"item-title":"course_name","item-value":"id",label:"Course",placeholder:"Select Course",rules:[s],disabled:!d.value},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(v,{cols:"12",class:"d-flex gap-4 justify-end"},{default:o(()=>[l(T,{onClick:e[7]||(e[7]=t=>h()),type:"submit",color:"primary"},{default:o(()=>[b("Next")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1},8,["loading"])])):R("",!0),g.value?(w(),N("div",ue,[l(K,{courseDetails:m(r).getPreparedCourseDetails,"onUpdate:showCourseDetails":e[8]||(e[8]=t=>g.value=t),"onUpdate:showApplicationForm":e[9]||(e[9]=t=>U.value=t)},null,8,["courseDetails"])])):R("",!0),l(te,{modelValue:y.value,"onUpdate:modelValue":e[15]||(e[15]=t=>y.value=t),"max-width":"500px"},{default:o(()=>[l(W,null,{default:o(()=>[l(X,null,{default:o(()=>[b("Request Record")]),_:1}),l(ee,null,{default:o(()=>[l(m(E),{ref_key:"refForm",ref:V,modelValue:A.value,"onUpdate:modelValue":e[13]||(e[13]=t=>A.value=t),onSubmit:F(B,["prevent"])},{default:o(()=>[l(x,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=t=>k.value=t),rules:[s],label:"University Name",placeholder:"Enter university name",class:"mt-2"},null,8,["modelValue","rules"]),l(x,{modelValue:S.value,"onUpdate:modelValue":e[11]||(e[11]=t=>S.value=t),rules:[s],label:"Course Name",placeholder:"Enter course name",class:"mt-2"},null,8,["modelValue","rules"]),l(x,{modelValue:_.value,"onUpdate:modelValue":e[12]||(e[12]=t=>_.value=t),rules:[s],label:"Intake",placeholder:"Enter intake",class:"mt-2"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(Z,null,{default:o(()=>[l(le),l(T,{color:"primary",onClick:B},{default:o(()=>[b("Submit")]),_:1}),l(T,{onClick:e[14]||(e[14]=t=>y.value=!1)},{default:o(()=>[b("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{el as default};
