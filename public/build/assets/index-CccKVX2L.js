import{r as m}from"./validators-C0LWqc1Z.js";import{r as n,H as E,o as v,c as y,b as l,e as o,a6 as N,n as i,F as P,z as B,a7 as V,v as w}from"./main-CpHMRegI.js";import{_ as T}from"./AppTextField-CnwEBVtQ.js";import{u as K}from"./user-WVXKLY_S.js";import{S as p}from"./sweetalert2-z6gKu1nJ.js";import{V as C}from"./VCardText-DYJRXWiR.js";import{V as q}from"./VForm-DyQZbs93.js";import{V as U,a as d}from"./VRow-GarAn6Y_.js";import{V as h}from"./VCard-DU323yw9.js";import"./helpers-D3Qj9y7W.js";import"./form-Dqk-cy2_.js";import"./VTextField-BFFogjJp.js";/* empty css                   */import"./VCounter-R0U17ePR.js";import"./index-D1wMhv3I.js";import"./index-TmvMI5Gh.js";import"./VField-BpyQI-aa.js";import"./easing-CjukEv2V.js";import"./VInput-CuZICg9D.js";import"./forwardRefs-C-GTDzx5.js";import"./api-C2cEv5EJ.js";import"./index-Dz1rBMAR.js";import"./VAvatar-ByK8TLfF.js";import"./VImg-VuDMeB_W.js";/* empty css              */const te={__name:"index",setup(O){const f=K(),c=n(!1),b=n(),t=n({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:""}),u=n({currentPassword:"",newPassword:"",confirmPassword:""}),g=n("");E(async()=>{const e=await f.getUserProfile();e&&(t.value={...t.value,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role},g.value=e.role)});const F=async()=>{var e;(e=b.value)==null||e.validate().then(async({valid:a})=>{var s;if(a)try{await f.updateUserProfile(t.value),p.fire({icon:"success",title:"Profile Updated Successfully",text:"Your profile details have been updated!",confirmButtonText:"OK"})}catch(r){console.error("Error updating profile:",r),p.fire({icon:"error",title:"Update Failed",text:((s=r.response)==null?void 0:s.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},S=async()=>{if(u.value.newPassword!==u.value.confirmPassword){p.fire({icon:"error",title:"Password Mismatch",text:"New password and confirm password do not match.",confirmButtonText:"OK"});return}try{await f.changePassword({current_password:u.value.currentPassword,new_password:u.value.newPassword}),p.fire({icon:"success",title:"Password Changed Successfully",text:"Your password has been updated!",confirmButtonText:"OK"})}catch(e){p.fire({icon:"error",title:"Change Password Failed",text:e,confirmButtonText:"OK"})}};return(e,a)=>{const s=T;return v(),y(P,null,[l(h,{title:"General Information"},{default:o(()=>[l(C,null,{default:o(()=>[l(q,{ref_key:"refForm",ref:b,modelValue:c.value,"onUpdate:modelValue":a[9]||(a[9]=r=>c.value=r),onSubmit:N(F,["prevent"])},{default:o(()=>[l(U,null,{default:o(()=>[l(d,{cols:"12",md:"6"},{default:o(()=>[l(s,{modelValue:t.value.firstName,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value.firstName=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"6"},{default:o(()=>[l(s,{modelValue:t.value.lastName,"onUpdate:modelValue":a[1]||(a[1]=r=>t.value.lastName=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.mobileNumber,"onUpdate:modelValue":a[2]||(a[2]=r=>t.value.mobileNumber=r),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.whatsappNumber,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.whatsappNumber=r),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),t.value.role==="channel partner"?(v(),y(P,{key:0},[l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.companyName,"onUpdate:modelValue":a[4]||(a[4]=r=>t.value.companyName=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.website,"onUpdate:modelValue":a[5]||(a[5]=r=>t.value.website=r),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.address,"onUpdate:modelValue":a[6]||(a[6]=r=>t.value.address=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.city,"onUpdate:modelValue":a[7]||(a[7]=r=>t.value.city=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.postCode,"onUpdate:modelValue":a[8]||(a[8]=r=>t.value.postCode=r),rules:["requiredValidator"in e?e.requiredValidator:i(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1})],64)):B("",!0),l(d,{cols:"12"},{default:o(()=>[l(V,{type:"submit",class:"me-3"},{default:o(()=>[w(" Save Changes ")]),_:1}),l(V,{type:"reset",variant:"tonal",color:"error"},{default:o(()=>[w(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(h,{title:"Change Password",class:"mt-4"},{default:o(()=>[l(C,null,{default:o(()=>[l(q,{onSubmit:N(S,["prevent"])},{default:o(()=>[l(U,null,{default:o(()=>[l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.currentPassword,"onUpdate:modelValue":a[10]||(a[10]=r=>u.value.currentPassword=r),label:"Current Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:i(m)],placeholder:"Enter current password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.newPassword,"onUpdate:modelValue":a[11]||(a[11]=r=>u.value.newPassword=r),label:"New Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:i(m)],placeholder:"Enter new password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.confirmPassword,"onUpdate:modelValue":a[12]||(a[12]=r=>u.value.confirmPassword=r),label:"Confirm New Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:i(m)],placeholder:"Confirm new password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(V,{type:"submit",class:"me-3"},{default:o(()=>[w(" Change Password ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{te as default};
