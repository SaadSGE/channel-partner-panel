import{r as m,e as L}from"./validators-C0LWqc1Z.js";import{r as V,w as T,H as P,o as U,f as $,e as t,b as r,a6 as I,n as d,c as M,F as G,z as W,a7 as y,v as w,d as h}from"./main-CpHMRegI.js";import{_ as j}from"./AppAutocomplete-hC5ObjDt.js";import{_ as H}from"./AppSelect-BSpIYbp3.js";import{_ as J}from"./AppTextField-CnwEBVtQ.js";import{_ as K}from"./AppDrawerHeaderSection-t0608HzJ.js";import{u as z}from"./auth-djocGcb8.js";import{u as _}from"./rolePermission-B3iSjbEr.js";import{S}from"./sweetalert2-z6gKu1nJ.js";import{P as Q}from"./vue3-perfect-scrollbar.esm-DibPumEX.js";import{V as X}from"./VNavigationDrawer-AO4v7cm8.js";import{V as Y}from"./VDivider-BWvdxqvf.js";import{V as Z}from"./VCard-DU323yw9.js";import{V as x}from"./VCardText-DYJRXWiR.js";import{V as ee}from"./VForm-DyQZbs93.js";import{V as le,a as u}from"./VRow-GarAn6Y_.js";import{V as q}from"./VFileInput-CrrvVU5I.js";import{V as s}from"./VCheckbox-C-EYiMAI.js";import"./helpers-D3Qj9y7W.js";import"./form-Dqk-cy2_.js";import"./VSelect-Cak2_UbP.js";import"./VTextField-BFFogjJp.js";/* empty css                   */import"./VCounter-R0U17ePR.js";import"./index-D1wMhv3I.js";import"./index-TmvMI5Gh.js";import"./VField-BpyQI-aa.js";import"./easing-CjukEv2V.js";import"./VInput-CuZICg9D.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-bDO2Ywqj.js";import"./ssrBoot-BpFV9X_u.js";import"./VAvatar-ByK8TLfF.js";import"./VImg-VuDMeB_W.js";import"./dialog-transition-DXaOTSrz.js";import"./VMenu-i0yaDKOL.js";import"./VOverlay-DgCCgKW9.js";import"./lazy-CZ7hBknW.js";import"./scopeId-11ZwAH7l.js";import"./VCheckboxBtn-Bzg3yol5.js";import"./VSelectionControl-BoobZPwM.js";import"./VChip-C15vJjjm.js";import"./VSlideGroup-CstMTfmr.js";import"./filter-g7_iZzEX.js";import"./VSpacer-yMLGQxEy.js";/* empty css              */import"./api-C2cEv5EJ.js";import"./index-Dz1rBMAR.js";const ae=h("label",null,"Country Recruit For",-1),Ye={__name:"EditNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},editedUser:{type:Object}},emits:["update:isDrawerOpen","userUpdated"],setup(g,{emit:B}){const f=g,n=B,v=_(),D=z(),b=V(!1),c=V(),N=V([]),a=V({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[],agreement:null,commission_structure:null}),F=e=>{e&&(a.value={...a.value,id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role,plan:e.plan||"",status:e.status,recruitCountries:typeof e.recruit_countries=="string"?JSON.parse(e.recruit_countries):e.recruit_countries||[]})};T(()=>f.editedUser,e=>{console.log("props.editedUser:",e),F(e)},{immediate:!0}),P(async()=>{await v.getAllRoles(),N.value=v.roles});const C=()=>{n("update:isDrawerOpen",!1)},A=async()=>{var e;(e=c.value)==null||e.validate().then(async({valid:o})=>{var p;if(o)try{const i=await D.updateUser(a.value);S.fire({icon:"success",title:"User Updated Successfully",text:"The user details have been updated!",confirmButtonText:"OK"}),n("userUpdated",i),n("update:isDrawerOpen",!1)}catch(i){console.error("Error updating user:",i),S.fire({icon:"error",title:"Update Failed",text:((p=i.response)==null?void 0:p.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},E=e=>{n("update:isDrawerOpen",e)},k=e=>e?e.toLowerCase():"";return(e,o)=>{const p=K,i=J,O=H,R=j;return U(),$(X,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":E},{default:t(()=>[r(p,{title:"Edit User",onCancel:C}),r(Y),r(d(Q),{options:{wheelPropagation:!1}},{default:t(()=>[r(Z,{flat:""},{default:t(()=>[r(x,null,{default:t(()=>[r(ee,{ref_key:"refForm",ref:c,modelValue:b.value,"onUpdate:modelValue":o[21]||(o[21]=l=>b.value=l),onSubmit:I(A,["prevent"])},{default:t(()=>[r(le,null,{default:t(()=>[r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.firstName,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.firstName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.lastName,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.lastName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.email=l),rules:["requiredValidator"in e?e.requiredValidator:d(m),"emailValidator"in e?e.emailValidator:d(L)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.mobileNumber,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.mobileNumber=l),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.whatsappNumber,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.whatsappNumber=l),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(O,{modelValue:a.value.role,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.role=l),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:N.value,"item-title":l=>l.role,"item-value":l=>l.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),k(a.value.role)==="channel partner"?(U(),M(G,{key:0},[r(u,{cols:"12"},{default:t(()=>[r(q,{modelValue:a.value.agreement,"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.agreement=l),label:"Upload Agreement"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(q,{modelValue:a.value.commission_structure,"onUpdate:modelValue":o[7]||(o[7]=l=>a.value.commission_structure=l),label:"Upload Commission Structure"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.companyName,"onUpdate:modelValue":o[8]||(o[8]=l=>a.value.companyName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.website,"onUpdate:modelValue":o[9]||(o[9]=l=>a.value.website=l),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.address,"onUpdate:modelValue":o[10]||(o[10]=l=>a.value.address=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.city,"onUpdate:modelValue":o[11]||(o[11]=l=>a.value.city=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.postCode,"onUpdate:modelValue":o[12]||(o[12]=l=>a.value.postCode=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(R,{modelValue:a.value.country,"onUpdate:modelValue":o[13]||(o[13]=l=>a.value.country=l),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[ae,r(s,{value:"Nigeria",label:"Nigeria",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[14]||(o[14]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"India",label:"India",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[15]||(o[15]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Bangladesh",label:"Bangladesh",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[16]||(o[16]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Nepal",label:"Nepal",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[17]||(o[17]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Bhutan",label:"Bhutan",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[18]||(o[18]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Ghana",label:"Ghana",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[19]||(o[19]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Sri Lanka",label:"Sri Lanka",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[20]||(o[20]=l=>a.value.recruitCountries=l)},null,8,["modelValue"])]),_:1})],64)):W("",!0),r(u,{cols:"12"},{default:t(()=>[r(y,{type:"submit",class:"me-3"},{default:t(()=>[w(" Submit ")]),_:1}),r(y,{type:"reset",variant:"tonal",color:"error",onClick:C},{default:t(()=>[w(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{Ye as default};
