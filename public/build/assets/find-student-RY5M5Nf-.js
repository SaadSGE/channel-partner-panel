import{_ as w}from"./AppAutocomplete-DVX6hFXO.js";import{c as B}from"./commonFunction-C4n_HNA0.js";import{u as I}from"./fileStore-7ZM7YJmf.js";import{u as V}from"./submitApplication-9osF5lDh.js";import{u as k}from"./studentStore-DeuFqf2N.js";import{S as c}from"./sweetalert2-z6gKu1nJ.js";import{r as s,k as g,w as A,H as T,o as _,f as N,e as i,b as r,v as u,n as a,a4 as F,c as D,x as E,z as U,d as K,a9 as S}from"./main-Z3go8Xzc.js";import{b as M,V as O}from"./VCard-B6jmDFyP.js";import{V as P}from"./VCardText-Bjotn_eE.js";import"./VInput-KBboyctu.js";import"./index-BgvB69-2.js";import"./index-CJOm_KJi.js";import"./forwardRefs-D3j0TLhE.js";import"./VSelect-DZ8I6LSD.js";import"./VTextField-B1_fIF9I.js";import"./VList-CuZQ3pYZ.js";import"./ssrBoot-CoAt9jNJ.js";import"./VAvatar-DFwpysqo.js";import"./VImg-DvovO2d-.js";import"./VDivider-SUUc1KGp.js";import"./dialog-transition-6CoWjX9C.js";import"./scopeId-Brt4yQ2W.js";import"./VMenu-CiscxyXl.js";import"./VCheckboxBtn-GLY3abaH.js";import"./VChip-CISZQW4c.js";import"./filter-CBgIupOh.js";import"./helpers-Bzg9TCNL.js";const R={key:0,class:"text-error"},Y={class:"d-flex justify-space-between mt-4"},St={__name:"find-student",setup($){s(0);const C=V(),m=I(),x=s([]),l=s(null),y=k(),t=B(),e=s(null),p=s([]),d=g();x.value=m.files,A(e,o=>{o&&console.log("Selected student:",o)}),T(async()=>{p.value=await y.search()});const h=()=>{d.push("/application/new")},b=async()=>{try{if(!e.value){l.value="Please select a student before submitting the application.";return}(await c.fire({title:"Confirm Submission",text:"Are you sure you want to submit this application?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit it!"})).isConfirmed&&(await C.submitApplication(null,t.selectedCourseId,t.selectedIntakeId,t.selectedUniversityId,t.selectedCountryId,t.selectedCourseDetailsId,m.filePaths,e.value),c.fire({icon:"success",title:"Application Successful",text:"You have submitted the application successfully!",confirmButtonText:"OK"}),t.selectedCourseId=null,t.selectedIntakeId=null,t.selectedUniversityId=null,t.selectedCountryId=null,t.selectedCourseDetailsId=null,d.push({name:"application"}))}catch(o){c.fire({icon:"error",title:"Application Failed",text:o,confirmButtonText:"OK"})}};return(o,n)=>{const v=w;return _(),N(O,{class:"mb-6"},{default:i(()=>[r(M,null,{default:i(()=>[u("Select Existing Student")]),_:1}),r(P,null,{default:i(()=>[r(v,{modelValue:a(e),"onUpdate:modelValue":n[0]||(n[0]=f=>F(e)?e.value=f:null),items:a(p),"item-title":"student_name_with_email","item-value":"id",label:"Search Existing Student",placeholder:"Start typing to search..."},null,8,["modelValue","items"]),a(l)?(_(),D("p",R,E(a(l)),1)):U("",!0),K("div",Y,[r(S,{color:"secondary",onClick:n[1]||(n[1]=f=>h())},{default:i(()=>[u("Back")]),_:1}),r(S,{color:"primary",onClick:b},{default:i(()=>[u("Next")]),_:1})])]),_:1})]),_:1})}}};export{St as default};
