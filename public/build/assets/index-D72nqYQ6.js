import{r as m}from"./validators-DpYrMFzk.js";import{r,a5 as oe,H as re,o as _,c as z,d as U,x as qe,a6 as O,k as Ce,a as Z,f as G,e as o,b as t,J as ke,a1 as x,z as N,K as we,L as he,n as s,v as F,a7 as ee}from"./main-BZdTJTQS.js";import{_ as Te}from"./TablePagination-DCNnn60o.js";import{_ as Ue}from"./AppSelect-B7-7xzwY.js";import{_ as _e}from"./AppTextField-BWwtM8zs.js";import{_ as Se}from"./AppAutocomplete-Bphkh6Vh.js";import{_ as Fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Re}from"./commonFunction-B9a_s1z6.js";import{u as Ee}from"./vue-quill.bubble-Z0OTtytS.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{V as te,a as u}from"./VRow-D9ObOfH2.js";import{V as $}from"./form-iVNTQlDz.js";import{V as le}from"./VForm-Dq2geWoA.js";import{V as K,b as Ie}from"./VCard-DdrdCYgD.js";import{V as Ae}from"./VCardText-CziOn49e.js";import{V as De}from"./VDataTableServer-BGO3xfkj.js";import"./helpers-DK5QwNv0.js";import"./VDivider-BpcQlLhl.js";import"./VPagination-DbThns_P.js";import"./VSelect-DkkRH9GO.js";import"./VTextField-CgzEq2Oq.js";/* empty css                   */import"./VCounter-CCBhokM5.js";import"./index-BLpQBSj-.js";import"./index-CZL_5zwN.js";import"./VField-CkK1m4xz.js";import"./easing-CjukEv2V.js";import"./VInput-DzmDE6o8.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CZZ6Kq7l.js";import"./ssrBoot-CdrAjHln.js";import"./VAvatar-CyZhc4FN.js";import"./VImg-CmHmZYx9.js";import"./dialog-transition-BSzC7WXP.js";import"./VMenu-DPi9xYXV.js";import"./VOverlay-DIg5rQT_.js";import"./lazy-BvM-4oVY.js";import"./scopeId-xlc7wlYu.js";import"./VCheckboxBtn-RkCE5cXo.js";import"./VSelectionControl-BZz_qkFT.js";import"./VChip-DjnLU2qC.js";import"./VSlideGroup-B8y_5e9j.js";import"./filter-BxKo60fW.js";import"./api-BK8xeDAc.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-CPOof4Ut.js";import"./VTable-BHD90ftN.js";const Me={props:{text:{type:String,required:!0},lines:{type:Number,default:3},characters:{type:Number,default:200}},setup(w){const i=r(!1),d=r(""),n=r(w.text),p=oe(()=>1.2),V=()=>{i.value=!i.value},c=()=>{const f=w.lines,y=w.characters,v=w.text.split(" ");let S=0,h=1;d.value="";for(let g=0;g<v.length;g++){if(S+=v[g].length+1,S>y||h>f){d.value+="...";break}d.value+=v[g]+" ",v[g].includes(`
`)&&h++}h<=f&&S<=y&&(d.value=w.text)};return re(()=>{c()}),{isExpanded:i,truncatedText:d,fullText:n,toggle:V,lineHeight:p}}},Be=["innerHTML"],Le=["innerHTML"];function xe(w,i,d,n,p,V){return _(),z("div",null,[n.isExpanded?(_(),z("div",{key:1,innerHTML:n.fullText},null,8,Le)):(_(),z("div",{key:0,innerHTML:n.truncatedText},null,8,Be)),U("a",{onClick:i[0]||(i[0]=O((...c)=>n.toggle&&n.toggle(...c),["prevent"]))},qe(n.isExpanded?"Show Less":"Show More"),1)])}const ae=Fe(Me,[["render",xe],["__scopeId","data-v-3371d4c9"]]),Ne={key:0},$e=U("span",null,"Edit Record",-1),ze={class:"d-flex justify-space-between flex-wrap gap-6"},He={class:"d-flex flex-row gap-4 align-center flex-wrap"},Pe={class:"d-flex gap-1"},xt={__name:"index",setup(w){Ce();const i=Re(),d=Ee(),n=r("");r("");const p=r(""),V=r(""),c=r(""),f=r(""),y=r(""),v=r(""),S=r(null);r();const h=r(),g=r(),H=r(),ie=r(),C=r(""),k=r(""),Y=r(),P=r(),R=r(10),D=r(1);r(),r();const M=r(!0),B=r(!1),E=r(!0),I=r(null),W=r(null),ue=r(!0);r(!1);const X=["Graduate","Post Graduate"],ne=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}];oe(()=>i.getFilteredCourseDetails(n.value,f.value,p.value,c.value));const A=async(a=1)=>{const l=await d.fetchRecord(a,j.value);Y.value=l.data,P.value=l.total},Q=async()=>{n.value="",p.value="",V.value="",c.value="",f.value="",y.value="",v.value="",C.value=`
`,k.value=`
`,await I.value.resetValidation()},se=async()=>{if(await I.value.validate()){try{const l={countryId:n.value,intakeId:p.value,courseType:V.value,universityId:c.value,course:f.value,tutionFee:y.value,courseDuration:v.value,academicRequirement:C.value,englishRequirement:k.value};await d.submitApplication(l)&&(console.log(d.successMessage),await Q(),A(),E.value=!0)}catch(l){console.error("Form submission error:",d.errors,l)}await I.value.resetValidation()}},de=async()=>{if(await W.value.validate()){try{const l={countryId:n.value,intakeId:p.value,courseType:V.value,universityId:c.value,course:f.value,tutionFee:y.value,courseDuration:v.value,academicRequirement:C.value,englishRequirement:k.value},b=await d.submitEditApplication(S.value,l);b&&(console.log(b),Q(),B.value=!1,M.value=!0,A())}catch(l){console.error("Form submission error:",d.errors,l)}await I.value.resetValidation()}},me=a=>{M.value=!1,S.value=a.id,n.value=a.country_id,p.value=a.intake_id,V.value=a.course.type,c.value=a.university_id,f.value=a.course.name,y.value=a.tuition_fee,v.value=a.course_duration,C.value=a.academic_requirement,k.value=a.english_requirement,B.value=!0},ce=()=>{B.value=!1,M.value=!0,Q()},ve=()=>{E.value=!E.value},pe=async a=>{const l={...a};if((await J.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await d.deleteRecord(l.id),A(),J.fire("Deleted!","The item has been deleted.","success")}catch{J.fire("Error!","There was an error deleting the item.","error")}},fe=r(!1),j=r(""),Ve=a=>{A(a.page)};return re(async()=>{i.countries.length===0&&await i.getCountries(),i.courses.length===0&&await i.getCourses(),i.intakes.length===0&&await i.getIntakes(),i.universities.length===0&&await i.getUniversities(),i.courseDetails.length===0&&await i.getCourseDetails(),h.value=i.countries,ie.value=i.courses,g.value=i.intakes,H.value=i.universities,await A()}),(a,l)=>{const b=Z("IconBtn"),q=Se,T=_e,L=Z("QuillEditor"),ye=Ue,ge=Te;return ue.value?(_(),z("div",Ne,[M.value?(_(),G(K,{key:0,title:"Add Record"},{append:o(()=>[U("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(_(),G(b,{key:0,onClick:ve},{default:o(()=>[t(x,{size:"20",icon:"tabler-chevron-up",style:ke([{transform:E.value?"rotate(-180deg)":void 0},{"transition-duration":"0.28s"}])},null,8,["style"])]),_:1})):N("",!0)])]),default:o(()=>[we(t(s(le),{ref_key:"refForm",ref:I,onSubmit:O(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(te,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=e=>p.value=e),items:g.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),items:X,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=e=>f.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=e=>v.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[F("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[7]||(l[7]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[F("English Requirement")]),_:1}),t(L,{theme:"snow",content:k.value,"onUpdate:content":l[8]||(l[8]=e=>k.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(ee,{onClick:l[9]||(l[9]=e=>se()),type:"submit",color:"primary",block:""},{default:o(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[he,!E.value]])]),_:1})):N("",!0),B.value?(_(),G(K,{key:1,class:"mt-2"},{default:o(()=>[t(Ie,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[$e,t(b,{onClick:ce},{default:o(()=>[t(x,{icon:"tabler-x"})]),_:1})]),_:1}),t(s(le),{ref_key:"refFormEdit",ref:W,onSubmit:O(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(te,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:n.value,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:p.value,"onUpdate:modelValue":l[11]||(l[11]=e=>p.value=e),items:g.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),items:X,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:c.value,"onUpdate:modelValue":l[13]||(l[13]=e=>c.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:f.value,"onUpdate:modelValue":l[14]||(l[14]=e=>f.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:v.value,"onUpdate:modelValue":l[16]||(l[16]=e=>v.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[F("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[17]||(l[17]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[F("English Requirement")]),_:1}),t(L,{theme:"snow",content:k.value,"onUpdate:content":l[18]||(l[18]=e=>k.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(ee,{onClick:l[19]||(l[19]=e=>de()),type:"submit",color:"primary",block:""},{default:o(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):N("",!0),t(K,{title:"Course Details",class:"mt-2"},{default:o(()=>[t(Ae,null,{default:o(()=>[U("div",ze,[U("div",null,[t(T,{modelValue:j.value,"onUpdate:modelValue":l[20]||(l[20]=e=>j.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Review"},null,8,["modelValue"])]),U("div",He,[t(ye,{modelValue:R.value,"onUpdate:modelValue":l[21]||(l[21]=e=>R.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(De,{"items-per-page":R.value,"onUpdate:itemsPerPage":l[23]||(l[23]=e=>R.value=e),page:D.value,"onUpdate:page":l[24]||(l[24]=e=>D.value=e),loading:fe.value,"items-length":P.value,headers:ne,items:Y.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":Ve},{"item.academic_requirement":o(({item:e})=>[t(ae,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":o(({item:e})=>[t(ae,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:o(()=>[t(ge,{page:D.value,"onUpdate:page":l[22]||(l[22]=e=>D.value=e),"items-per-page":R.value,"total-items":P.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[U("div",Pe,[t(b,{onClick:be=>me(e)},{default:o(()=>[t(x,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(b,{onClick:be=>pe(e)},{default:o(()=>[t(x,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items"])]),_:1})])):N("",!0)}}};export{xt as default};
