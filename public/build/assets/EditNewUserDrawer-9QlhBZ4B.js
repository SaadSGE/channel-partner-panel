import{r as m,e as _}from"./validators-CjND4f0J.js";import{r as V,w as R,H as L,o as C,f as T,e as t,b as r,a8 as P,n as d,c as $,F as I,z as M,a9 as w,v as S,d as G}from"./main-BuHbEuHJ.js";import{_ as W}from"./AppAutocomplete-Bn-2fWgc.js";import{_ as j}from"./AppSelect-BPFu3huP.js";import{_ as H}from"./AppTextField-CJNePmKO.js";import{_ as J}from"./AppDrawerHeaderSection-BJoPL348.js";import{u as K}from"./auth-CPH6WkkM.js";import{u as z}from"./rolePermission-Dod6lric.js";import{S as q}from"./sweetalert2-z6gKu1nJ.js";import{P as Q}from"./vue3-perfect-scrollbar.esm-CGeJr4SF.js";import{V as X}from"./VNavigationDrawer-IwbTI5RT.js";import{V as Y}from"./VDivider-DMuXb6qS.js";import{V as Z}from"./VCard-Dhty15tX.js";import{V as x}from"./VCardText-DQAZyNzv.js";import{V as ee}from"./VForm-G6b_bIRX.js";import{V as le,a as u}from"./VRow-D11-WciL.js";import{V as g}from"./VFileInput-BKYO_b9Q.js";import{V as n}from"./VCheckbox-nh8scFBn.js";import"./helpers-Bh74cNn2.js";import"./VInput-CCox_OUa.js";import"./index-CSShtD91.js";import"./index-DaC6jyKz.js";import"./forwardRefs-D3j0TLhE.js";import"./VSelect-DtCOCXg9.js";import"./VTextField-B_-rMKcI.js";import"./VList-BVGy6Px1.js";import"./ssrBoot-Bn-b0LnU.js";import"./VAvatar-BNyCSDbn.js";import"./VImg-DCopR1T8.js";import"./dialog-transition-DlI8lVmf.js";import"./scopeId-eRg5DMNb.js";import"./VMenu-BzEZUkU1.js";import"./VCheckboxBtn-pYHs74bi.js";import"./VChip-BGt3DX3B.js";import"./filter-DIwO9oFD.js";import"./VSpacer-4HAGcX4M.js";/* empty css              */const ae=G("label",null,"Country Recruit For",-1),Ie={__name:"EditNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},editedUser:{type:Object},branches:{type:Array,default:()=>[]}},emits:["update:isDrawerOpen","userUpdated"],setup(B,{emit:D}){const f=B,s=D,v=z(),h=K(),b=V(!1),c=V(),y=V([]),a=V({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",branch_id:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[],agreement:null,commission_structure:null}),A=l=>{l&&(a.value={...a.value,id:l.id,firstName:l.first_name,lastName:l.last_name,email:l.email,mobileNumber:l.mobile_number,branch_id:l.branch_id,whatsappNumber:l.whatsapp_number,companyName:l.company_name,website:l.website,address:l.address,city:l.city,postCode:l.post_code,country:l.country,role:l.role,plan:l.plan||"",status:l.status,recruitCountries:typeof l.recruit_countries=="string"?JSON.parse(l.recruit_countries):l.recruit_countries||[]})};R(()=>f.editedUser,l=>{console.log("props.editedUser:",l),A(l)},{immediate:!0}),L(async()=>{await v.getAllRoles(),y.value=v.roles});const N=()=>{s("update:isDrawerOpen",!1)},F=async()=>{var l;(l=c.value)==null||l.validate().then(async({valid:o})=>{var p;if(o)try{const i=await h.updateUser(a.value);q.fire({icon:"success",title:"User Updated Successfully",text:"The user details have been updated!",confirmButtonText:"OK"}),s("userUpdated",i),s("update:isDrawerOpen",!1)}catch(i){console.error("Error updating user:",i),q.fire({icon:"error",title:"Update Failed",text:((p=i.response)==null?void 0:p.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},E=l=>{s("update:isDrawerOpen",l)},k=l=>l?l.toLowerCase():"";return(l,o)=>{const p=J,i=H,U=j,O=W;return C(),T(X,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":E},{default:t(()=>[r(p,{title:"Edit User",onCancel:N}),r(Y),r(d(Q),{options:{wheelPropagation:!1}},{default:t(()=>[r(Z,{flat:""},{default:t(()=>[r(x,null,{default:t(()=>[r(ee,{ref_key:"refForm",ref:c,modelValue:b.value,"onUpdate:modelValue":o[22]||(o[22]=e=>b.value=e),onSubmit:P(F,["prevent"])},{default:t(()=>[r(le,null,{default:t(()=>[r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.firstName,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.firstName=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.lastName,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.lastName=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.email=e),rules:["requiredValidator"in l?l.requiredValidator:d(m),"emailValidator"in l?l.emailValidator:d(_)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.mobileNumber,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.mobileNumber=e),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.whatsappNumber,"onUpdate:modelValue":o[4]||(o[4]=e=>a.value.whatsappNumber=e),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(U,{modelValue:a.value.branch_id,"onUpdate:modelValue":o[5]||(o[5]=e=>a.value.branch_id=e),label:"Select Branch",placeholder:"Select Branch",items:f.branches,"item-title":e=>e.branch_name_with_country,"item-value":e=>e.id},null,8,["modelValue","items","item-title","item-value"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(U,{modelValue:a.value.role,"onUpdate:modelValue":o[6]||(o[6]=e=>a.value.role=e),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in l?l.requiredValidator:d(m)],items:y.value,"item-title":e=>e.role,"item-value":e=>e.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),k(a.value.role)==="channel partner"?(C(),$(I,{key:0},[r(u,{cols:"12"},{default:t(()=>[r(g,{modelValue:a.value.agreement,"onUpdate:modelValue":o[7]||(o[7]=e=>a.value.agreement=e),label:"Upload Agreement"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(g,{modelValue:a.value.commission_structure,"onUpdate:modelValue":o[8]||(o[8]=e=>a.value.commission_structure=e),label:"Upload Commission Structure"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.companyName,"onUpdate:modelValue":o[9]||(o[9]=e=>a.value.companyName=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.website,"onUpdate:modelValue":o[10]||(o[10]=e=>a.value.website=e),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.address,"onUpdate:modelValue":o[11]||(o[11]=e=>a.value.address=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.city,"onUpdate:modelValue":o[12]||(o[12]=e=>a.value.city=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.postCode,"onUpdate:modelValue":o[13]||(o[13]=e=>a.value.postCode=e),rules:["requiredValidator"in l?l.requiredValidator:d(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(O,{modelValue:a.value.country,"onUpdate:modelValue":o[14]||(o[14]=e=>a.value.country=e),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in l?l.requiredValidator:d(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[ae,r(n,{value:"Nigeria",label:"Nigeria",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[15]||(o[15]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"India",label:"India",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[16]||(o[16]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"Bangladesh",label:"Bangladesh",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[17]||(o[17]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"Nepal",label:"Nepal",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[18]||(o[18]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"Bhutan",label:"Bhutan",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[19]||(o[19]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"Ghana",label:"Ghana",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[20]||(o[20]=e=>a.value.recruitCountries=e)},null,8,["modelValue"]),r(n,{value:"Sri Lanka",label:"Sri Lanka",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[21]||(o[21]=e=>a.value.recruitCountries=e)},null,8,["modelValue"])]),_:1})],64)):M("",!0),r(u,{cols:"12"},{default:t(()=>[r(w,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),r(w,{type:"reset",variant:"tonal",color:"error",onClick:N},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{Ie as default};
