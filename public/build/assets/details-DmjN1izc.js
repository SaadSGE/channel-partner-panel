import{r as ke}from"./validators-CRl0EgXd.js";import{r as s,w as de,H as X,o as i,f as O,e as t,b as e,d as a,v as l,x as r,n as E,c as S,F as M,z as N,a7 as L,a1 as ie,i as Y,a6 as ae,an as ce,a5 as G,R as me,U as pe,j as xe,k as Oe}from"./main-CzNoHbqN.js";import{_ as $e}from"./AppTextarea-DajJU651.js";import{_ as fe}from"./AppAutocomplete-a0z5hhvr.js";import{u as Z}from"./applicationList-D1153b8I.js";import{_ as Le}from"./TablePagination-Csf6IQrP.js";import{_ as Ue}from"./AppSelect-8w3RUbpc.js";import{u as Te,f as Ae}from"./format-Dr2potqQ.js";import{f as De,g as Ie}from"./helpers-CUhfE0Jo.js";import{V as D}from"./VCardText-CBiZsCPa.js";import{V as Me}from"./VDivider-ClsRDwIn.js";import{V as je}from"./VDataTableServer-D5UZbnqm.js";import{V as _e}from"./VChip-CxeSYNoR.js";import{V as j,b as P,d as le}from"./VCard-D7hUr899.js";/* empty css                         */import{a as T,V as q}from"./VRow-KaI4S0g3.js";import{V as be,a as he}from"./VTimelineItem-Clw1HMOr.js";import{V as oe}from"./VForm-DSfN8ehb.js";import{V as K}from"./form-Qx03VFj1.js";import{V as ne}from"./VSpacer-CqG_QhaE.js";import{V as se}from"./VDialog-CJjn0WJY.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as re}from"./VTable-DhxpNVj_.js";import{V as Ve}from"./VAlert-nDY5yxSy.js";import Be from"./details-document-CIC79Mf1.js";import{V as Ne}from"./VFileInput-KeuB0yKn.js";import{V as Pe}from"./VTextField-BvlbGLmJ.js";import{V as He,a as z}from"./VTabs-Blplx4YD.js";import{V as Ee,a as F}from"./VWindowItem-BTUCTYjx.js";/* empty css                   */import"./VCounter-D96dur5T.js";import"./index-DkrrJdO_.js";import"./index-DyRSbq9J.js";import"./VField-CknJfTOn.js";import"./easing-CjukEv2V.js";import"./VInput-CC-SAcS-.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-zZP-Wg9U.js";import"./VList-Cq0RG60r.js";import"./ssrBoot-DDjK4blm.js";import"./VAvatar-B6qESV0B.js";import"./VImg-DQ0txL0h.js";import"./dialog-transition-C_ai9fwt.js";import"./VMenu-CavvVOAa.js";import"./VOverlay-SWpy4sgz.js";import"./lazy-D4jdO0KC.js";import"./scopeId-CY5SS4eB.js";import"./VCheckboxBtn-oVFfFg4f.js";import"./VSelectionControl-D6Q_2AAo.js";import"./filter-COxUwF_Y.js";import"./api-bzJUuY09.js";import"./index-Dz1rBMAR.js";import"./VPagination-CA3IpAoE.js";import"./VDataTable-DKgOeIlt.js";import"./VSlideGroup-zBjTXzyX.js";/* empty css              */import"./submitApplication-rpUpkD26.js";import"./vue-filepond.esm-Bcypuboe.js";const ze={class:"d-flex justify-space-between flex-wrap gap-6"},Fe={class:"me-3 d-flex gap-3"},qe=a("br",null,null,-1),Re={key:0},Ke={__name:"ApplicationActivityLog",props:{applicationId:{type:String,required:!0}},setup(V){const U=V,C=Te(),u=s([]),m=s(!1),k=s(0),_=s(1),w=s(10),$=s(""),x=s(null),g=[{title:"Date",key:"created_at",sortable:!0},{title:"User",key:"user",sortable:!0},{title:"Activity Type",key:"description",sortable:!0},{title:"Details",key:"details",sortable:!1},{title:"IP Address",key:"ip_address",sortable:!1}],f=async()=>{m.value=!0;try{C.setPage(_.value),C.setPerPage(w.value),C.setActivityType(x.value),C.setSearchQuery($.value);const v=await C.fetchApplicationActivityLogs(U.applicationId);u.value=v.data.data.map(b=>({...b,created_at:Ae(new Date(b.created_at),"yyyy-MM-dd HH:mm:ss"),ip_address:b.properties.ip||"N/A",details:p(b),user:b.user?b.user.name:"System"})),k.value=v.data.total}catch(v){console.error("Error fetching activity logs:",v)}finally{m.value=!1}},y=Z(),n=s([]),p=v=>{switch(v.description){case"application_submit":return`Submitted application #${v.properties.application_id}`;case"application_update":return`Updated application #${v.properties.application_id}`;case"document_upload":return`Uploaded document: ${v.properties.document_name||"Unknown"}`;case"comment_added":return`Added comment to application #${v.properties.application_id||"Unknown"}`;case"application_status_update":const b=I(v.properties.old_status),R=I(v.properties.new_status);return`Updated status from ${b} to ${R}`;default:return v.description||"Performed an action"}},I=v=>{const b=n.value.find(R=>R.id===parseInt(v));return b?b.name:"Unknown"},A=v=>{switch(v){case"application_submit":return"primary";case"application_update":return"info";case"document_upload":return"success";case"comment_added":return"warning";case"application_status_update":return"error";default:return"default"}},H=v=>{_.value=v.page,w.value=v.itemsPerPage,v.sortBy&&v.sortBy.length>0&&C.setSorting(v.sortBy[0].key,v.sortBy[0].order),f()};de([$,x],()=>{_.value=1,f()}),X(async()=>{await f(),await ue()});const ue=async()=>{const v=await y.getAllApplicationStatuses();n.value=v.data};return(v,b)=>{const R=Ue,Q=Le;return i(),O(j,{title:"Application Activity Log",class:"mt-5"},{default:t(()=>[e(D,null,{default:t(()=>[a("div",ze,[a("div",Fe,[e(R,{modelValue:w.value,"onUpdate:modelValue":[b[0]||(b[0]=d=>w.value=d),b[1]||(b[1]=d=>w.value=parseInt(d,10))],items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),e(Me),e(je,{"items-per-page":w.value,"onUpdate:itemsPerPage":b[3]||(b[3]=d=>w.value=d),page:_.value,"onUpdate:page":b[4]||(b[4]=d=>_.value=d),items:u.value,"items-length":k.value,headers:g,loading:m.value,class:"text-no-wrap","onUpdate:options":H},{"item.description":t(({item:d})=>[e(_e,{color:A(d.description),size:"small"},{default:t(()=>[l(r(E(De)(d.description)),1)]),_:2},1032,["color"])]),"item.user":t(({item:d})=>[l(r(d.user),1)]),"item.created_at":t(({item:d})=>[l(r(E(Ae)(new Date(d.created_at),"dd MMM yyyy HH:mm:ss")),1)]),"item.ip_address":t(({item:d})=>[l(r(d.properties.ip),1)]),"item.details":t(({item:d})=>[d.description==="application_status_update"?(i(),S(M,{key:0},[l(" Updated "+r(d.properties.old_status)+" to "+r(d.properties.new_status)+" ",1),qe,d.properties.comment?(i(),S("span",Re," Comment: "+r(d.properties.comment),1)):N("",!0)],64)):d.description==="comment_added"?(i(),S(M,{key:1},[l(r(d.properties.comment),1)],64)):d.description==="university_communication_added"?(i(),S(M,{key:2},[l(" Subject: "+r(d.properties.subject),1)],64)):(i(),S(M,{key:3},[l(r(d.properties.details||"N/A"),1)],64))]),bottom:t(()=>[e(Q,{page:_.value,"onUpdate:page":b[2]||(b[2]=d=>_.value=d),"items-per-page":w.value,"total-items":k.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})}}},Ye={class:"comment-section"},Qe={class:"text-caption"},We=["innerHTML"],Ge={__name:"AcoAoCommunication",props:{applicationId:{type:String,required:!0}},setup(V){const U=V,C=Z(),u=s(!1),m=s(""),k=s([]),_=s(!1),w=async()=>{try{_.value=!0,await C.addAcoAoCommunication(U.applicationId,m.value),m.value="",u.value=!1,await $()}catch(g){console.error("Error adding ACO & AO communication:",g)}finally{_.value=!1}},$=async()=>{await C.getAcoAoCommunications(U.applicationId),k.value=C.acoAoCommunications},x=g=>new Date(g).toLocaleDateString();return X($),(g,f)=>(i(),S(M,null,[e(q,null,{default:t(()=>[e(T,{cols:"12",class:"d-flex justify-end mb-4"},{default:t(()=>[e(L,{color:"primary",onClick:f[0]||(f[0]=y=>u.value=!0)},{default:t(()=>[e(ie,{start:"",icon:"mdi-plus"}),l(" Add New Communication ")]),_:1})]),_:1}),e(T,{cols:"12"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l(" ACO & AO Communications ")]),_:1}),e(D,null,{default:t(()=>[a("div",Ye,[e(be,{density:g.dense},{default:t(()=>[(i(!0),S(M,null,Y(k.value,(y,n)=>(i(),O(he,{key:n,"dot-color":"primary",size:"small"},{opposite:t(()=>[a("div",Qe,r(x(y.created_at)),1)]),default:t(()=>[e(j,{class:"elevation-1"},{default:t(()=>[e(P,{class:"text-subtitle-1"},{default:t(()=>[l(r(y.user.full_name),1)]),_:2},1024),e(D,null,{default:t(()=>[a("div",{innerHTML:y.message},null,8,We)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{modelValue:u.value,"onUpdate:modelValue":f[3]||(f[3]=y=>u.value=y),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l("Add a New ACO & AO Communication")]),_:1}),e(D,null,{default:t(()=>[e(oe,{onSubmit:ae(w,["prevent"])},{default:t(()=>[e(K,{class:"text-body-1 font-weight-medium mb-2"},{default:t(()=>[l(" Message ")]),_:1}),e(E(ce),{content:m.value,"onUpdate:content":f[1]||(f[1]=y=>m.value=y),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,{class:"pa-4"},{default:t(()=>[e(ne),e(L,{color:"primary",loading:_.value,disabled:_.value,onClick:w},{default:t(()=>[e(ie,{start:"",icon:"mdi-send"}),l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e(L,{color:"secondary",disabled:_.value,onClick:f[2]||(f[2]=y=>u.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Je={class:"comment-section"},Xe={class:"text-caption"},Ze=["innerHTML"],et={__name:"AcoCoCommunication",props:{applicationId:{type:String,required:!0}},setup(V){const U=V,C=Z(),u=s(!1),m=s(""),k=s([]),_=s(!1),w=async()=>{try{_.value=!0,await C.addAcoCoCommunication(U.applicationId,m.value),m.value="",u.value=!1,await $()}catch(g){console.error("Error adding ACO & CO communication:",g)}finally{_.value=!1}},$=async()=>{await C.getAcoCoCommunications(U.applicationId),k.value=C.acoCoCommunications},x=g=>new Date(g).toLocaleDateString();return X($),(g,f)=>(i(),S(M,null,[e(q,null,{default:t(()=>[e(T,{cols:"12",class:"d-flex justify-end mb-4"},{default:t(()=>[e(L,{color:"primary",onClick:f[0]||(f[0]=y=>u.value=!0)},{default:t(()=>[e(ie,{start:"",icon:"mdi-plus"}),l(" Add New Communication ")]),_:1})]),_:1}),e(T,{cols:"12"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l(" ACO & CO Communications ")]),_:1}),e(D,null,{default:t(()=>[a("div",Je,[e(be,{density:g.dense},{default:t(()=>[(i(!0),S(M,null,Y(k.value,(y,n)=>(i(),O(he,{key:n,"dot-color":"primary",size:"small"},{opposite:t(()=>[a("div",Xe,r(x(y.created_at)),1)]),default:t(()=>[e(j,{class:"elevation-1"},{default:t(()=>[e(P,{class:"text-subtitle-1"},{default:t(()=>[l(r(y.user.full_name),1)]),_:2},1024),e(D,null,{default:t(()=>[a("div",{innerHTML:y.message},null,8,Ze)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{modelValue:u.value,"onUpdate:modelValue":f[3]||(f[3]=y=>u.value=y),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l("Add a New ACO & CO Communication")]),_:1}),e(D,null,{default:t(()=>[e(oe,{onSubmit:ae(w,["prevent"])},{default:t(()=>[e(K,{class:"text-body-1 font-weight-medium mb-2"},{default:t(()=>[l(" Message ")]),_:1}),e(E(ce),{content:m.value,"onUpdate:content":f[1]||(f[1]=y=>m.value=y),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,{class:"pa-4"},{default:t(()=>[e(ne),e(L,{color:"primary",loading:_.value,disabled:_.value,onClick:w},{default:t(()=>[e(ie,{start:"",icon:"mdi-send"}),l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e(L,{color:"secondary",disabled:_.value,onClick:f[2]||(f[2]=y=>u.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},tt=V=>(me("data-v-eca9312f"),V=V(),pe(),V),at=tt(()=>a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Status")])],-1)),lt={__name:"ApplicationOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(V){const U=V,C=Z(),u=s(null),m=s(""),k=G(()=>C.applicationOfficerOptions),_=G(()=>C.applicationOfficers),w=G(()=>{if(!m.value)return _.value;const n=m.value.toLowerCase();return _.value.filter(p=>p.full_name.toLowerCase().includes(n)||p.email.toLowerCase().includes(n)||p.pivot.status.toLowerCase().includes(n))}),$=async()=>{try{if(!u.value){errorMessage.value="Please select an officer before assigning.";return}if((await J.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this application officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const p=await C.assignApplicationOfficer(U.applicationId,u.value);if(p&&!p.status)throw console.log("hello"),console.log(p),new Error(p);J.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the application officer successfully!",confirmButtonText:"OK"}),u.value=null,await x()}}catch(n){console.log(n),J.fire({icon:"error",title:"Assignment Failed",text:n,confirmButtonText:"OK"})}},x=async()=>{await C.fetchApplicationOfficers(U.applicationId)};X(async()=>{await Promise.all([x(),C.loadAllApplicationOfficers()])}),de(()=>U.applicationId,x);const g=n=>({accepted:"success",rejected:"error",pending:"warning"})[n.toLowerCase()]||"secondary",f=n=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[n.toLowerCase()]||n,y=n=>({success:"white",error:"white",warning:"black",secondary:"white"})[n]||"white";return(n,p)=>{const I=fe;return i(),O(j,null,{default:t(()=>[e(P,null,{default:t(()=>[l("Application Officer Assignments")]),_:1}),e(D,null,{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=A=>u.value=A),items:k.value,"item-title":"full_name","item-value":"id",label:"Select Application Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[e(L,{class:"mt-6",color:"primary",disabled:!u.value,onClick:$},{default:t(()=>[l(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(q,{class:"mt-4"},{default:t(()=>[e(T,{cols:"12"},{default:t(()=>[w.value.length?(i(),O(re,{key:0},{default:t(()=>[at,a("tbody",null,[(i(!0),S(M,null,Y(w.value,A=>(i(),S("tr",{key:A.id},[a("td",null,r(A.user.full_name),1),a("td",null,r(A.user.email),1),a("td",null,[e(_e,{color:g(A.status),"text-color":y(g(A.status)),size:"small",label:""},{default:t(()=>[l(r(f(A.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(i(),O(Ve,{key:1,type:"info",class:"mt-2"},{default:t(()=>[l(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},ot=ve(lt,[["__scopeId","data-v-eca9312f"]]),nt=V=>(me("data-v-aa458ed5"),V=V(),pe(),V),st=nt(()=>a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Status")])],-1)),it={__name:"ComplianceOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(V){const U=V,C=Z(),u=s(null),m=s(""),k=G(()=>C.complianceOfficerOptions),_=G(()=>C.complianceOfficers),w=G(()=>{if(!m.value)return _.value;const n=m.value.toLowerCase();return _.value.filter(p=>p.full_name.toLowerCase().includes(n)||p.email.toLowerCase().includes(n)||p.pivot.status.toLowerCase().includes(n))}),$=async()=>{try{if(!u.value){errorMessage.value="Please select an officer before assigning.";return}if((await J.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this compliance officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const p=await C.assignComplianceOfficer(U.applicationId,u.value);if(p&&!p.status)throw new Error(p);J.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the compliance officer successfully!",confirmButtonText:"OK"}),u.value=null,await x()}}catch(n){console.log(n),J.fire({icon:"error",title:"Assignment Failed",text:n,confirmButtonText:"OK"})}},x=async()=>{await C.fetchComplianceOfficers(U.applicationId)};X(async()=>{await Promise.all([x(),C.loadAllComplianceOfficers()])}),de(()=>U.applicationId,x);const g=n=>({accepted:"success",rejected:"error",pending:"warning"})[n.toLowerCase()]||"secondary",f=n=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[n.toLowerCase()]||n,y=n=>({success:"white",error:"white",warning:"black",secondary:"white"})[n]||"white";return(n,p)=>{const I=fe;return i(),O(j,null,{default:t(()=>[e(P,null,{default:t(()=>[l("Compliance Officer Assignments")]),_:1}),e(D,null,{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=A=>u.value=A),items:k.value,"item-title":"full_name","item-value":"id",label:"Select Compliance Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),e(T,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[e(L,{class:"mt-6",color:"primary",disabled:!u.value,onClick:$},{default:t(()=>[l(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(q,{class:"mt-4"},{default:t(()=>[e(T,{cols:"12"},{default:t(()=>[w.value.length?(i(),O(re,{key:0},{default:t(()=>[st,a("tbody",null,[(i(!0),S(M,null,Y(w.value,A=>(i(),S("tr",{key:A.id},[a("td",null,r(A.user.full_name),1),a("td",null,r(A.user.email),1),a("td",null,[e(_e,{color:g(A.status),"text-color":y(g(A.status)),size:"small",label:""},{default:t(()=>[l(r(f(A.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(i(),O(Ve,{key:1,type:"info",class:"mt-2"},{default:t(()=>[l(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},ut=ve(it,[["__scopeId","data-v-aa458ed5"]]),B=V=>(me("data-v-b86989ea"),V=V(),pe(),V),rt=B(()=>a("div",null,"Application Details",-1)),dt=B(()=>a("td",null,[a("strong",null,"Application Id")],-1)),ct=B(()=>a("td",null,[a("strong",null,"Date Added")],-1)),mt=B(()=>a("td",null,[a("strong",null,"Student ID")],-1)),pt=B(()=>a("td",null,[a("strong",null,"Student Passport No.")],-1)),ft=B(()=>a("td",null,[a("strong",null,"Student Name")],-1)),_t=B(()=>a("td",null,[a("strong",null,"Student Date of Birth")],-1)),vt=B(()=>a("td",null,[a("strong",null,"Student E-Mail")],-1)),gt=B(()=>a("td",null,[a("strong",null,"Student Phone No.")],-1)),yt=B(()=>a("td",null,[a("strong",null,"Communication E-Mail ID")],-1)),Ct=B(()=>a("td",null,[a("strong",null,"Communication Phone No.")],-1)),wt=B(()=>a("thead",null,[a("tr",null,[a("th",null,"Date Added"),a("th",null,"Comment"),a("th",null,"Status and Document")])],-1)),At=["innerHTML"],bt={key:0,class:"current-status-label"},ht={key:1},Vt=["href"],St={class:"comment-section"},kt={class:"comment-header"},xt={class:"comment-date"},Ot=["innerHTML"],$t={class:"comment-section"},Lt={class:"comment-header"},Ut={class:"comment-date"},Tt={class:"communication-subject"},Dt=B(()=>a("strong",null,"Subject:",-1)),It={class:"comment-body"},Mt=["innerHTML"],jt={__name:"details",setup(V){const U=s(Ie()==="admin"),u=xe().params.id,m=Z(),k=s("student-course-details"),_=s(!1),w=s(!1),$=s(!1),x=s(""),g=s(""),f=s({subject:"",message:""});s([{name:"Document1.pdf",progress:100},{name:"Document2.pdf",progress:100},{name:"Document3.pdf",progress:100},{name:"Document4.pdf",progress:100}]);const y=s([]),n=s([]),p=s([{created_at:"",comment:"",status_text:""}]),I=s({application_id:"",created_at:"",counsellor_email:"",counsellor_number:""}),A=s();s(!0);const H=s({id:null,student_id:null,first_name:null,last_name:null,passport_no:null,date_of_birth:null,whatsapp_number:null,email:null,address:null,city:null,country:null,region:null,state:null,gender:null,visa_refusal:null,created_at:null,updated_at:null,document:[{id:null,student_id:null,path:null,created_at:null,updated_at:null}]}),ue=s([]),v=s([]),b=Oe(),R=()=>{b.back()};X(async()=>{await Q()});const Q=async()=>{await m.getApplicationDetails(u),await m.getApplicationStatusses(u),await m.getApplicationAllStatuses(),I.value=m.applicationData,ue.value=m.documents,H.value=m.students,p.value=m.statuses,y.value=m.comments,n.value=m.universityCommunications,v.value=m.allStatuses.filter(h=>h.id!==I.value.status)},d=s(!1),ee=s(!1),te=s(!1),ge=async()=>{try{d.value=!0;let h=new FormData;h.append("status",x.value),h.append("comment",g.value),A.value&&h.append("file",A.value[0]),await m.updateStatus(u,h),_.value=!1,x.value="",g.value="",A.value=null,await Q()}catch(h){console.error("Error updating status:",h)}finally{d.value=!1}},ye=async()=>{try{ee.value=!0,await m.addComment(u,g.value),g.value="",w.value=!1,await Q()}catch(h){console.error("Error adding comment:",h)}finally{ee.value=!1}},Ce=async()=>{try{te.value=!0,await m.addUniversityCommunication(u,f.value),f.value={subject:"",message:""},$.value=!1,await Q()}catch(h){console.error("Error adding university communication:",h)}finally{te.value=!1}};return(h,c)=>{const Se=fe,we=$e;return i(),O(j,null,{default:t(()=>[e(P,{class:"d-flex justify-space-between align-center"},{default:t(()=>[rt,e(L,{color:"primary",onClick:R},{default:t(()=>[e(ie,{icon:"tabler-arrow-left",class:"mr-2"}),l(" Back ")]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(se,{modelValue:_.value,"onUpdate:modelValue":c[4]||(c[4]=o=>_.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,null,{default:t(()=>[l("Change Current Status")]),_:1}),e(D,null,{default:t(()=>[e(oe,{onSubmit:ae(ge,["prevent"])},{default:t(()=>[e(Se,{modelValue:x.value,"onUpdate:modelValue":c[0]||(c[0]=o=>x.value=o),items:v.value,"item-title":o=>o.name,"item-value":o=>o.id,label:"Status",placeholder:"Select Status",rules:["requiredValidator"in h?h.requiredValidator:E(ke)]},null,8,["modelValue","items","item-title","item-value","rules"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Add any necessary file (Optional) ")]),_:1}),e(Ne,{modelValue:A.value,"onUpdate:modelValue":c[1]||(c[1]=o=>A.value=o),color:"primary",label:"File input",variant:"outlined",class:"mt-2"},null,8,["modelValue"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Comment (Optional) ")]),_:1}),e(we,{modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=o=>g.value=o),placeholder:"Place any comment regarding status"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e(L,{color:"primary",loading:d.value,disabled:d.value,onClick:ge},{default:t(()=>[l(" Submit ")]),_:1},8,["loading","disabled"]),e(L,{disabled:d.value,onClick:c[3]||(c[3]=o=>_.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:w.value,"onUpdate:modelValue":c[7]||(c[7]=o=>w.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,null,{default:t(()=>[l("Add a New Comment")]),_:1}),e(D,null,{default:t(()=>[e(oe,{onSubmit:ae(ye,["prevent"])},{default:t(()=>[e(K,{class:"mt-2"},{default:t(()=>[l(" New Comment ")]),_:1}),e(we,{modelValue:g.value,"onUpdate:modelValue":c[5]||(c[5]=o=>g.value=o),placeholder:"Add a new comment",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e(L,{color:"primary",loading:ee.value,disabled:ee.value,onClick:ye},{default:t(()=>[l(" Submit Comment ")]),_:1},8,["loading","disabled"]),e(L,{disabled:ee.value,onClick:c[6]||(c[6]=o=>w.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:$.value,"onUpdate:modelValue":c[11]||(c[11]=o=>$.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(P,null,{default:t(()=>[l("Add a New University Communication")]),_:1}),e(D,null,{default:t(()=>[e(oe,{onSubmit:ae(Ce,["prevent"])},{default:t(()=>[e(K,{class:"mt-2"},{default:t(()=>[l(" Subject ")]),_:1}),e(Pe,{modelValue:f.value.subject,"onUpdate:modelValue":c[8]||(c[8]=o=>f.value.subject=o),placeholder:"Subject",class:"mt-2"},null,8,["modelValue"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Message ")]),_:1}),e(E(ce),{content:f.value.message,"onUpdate:content":c[9]||(c[9]=o=>f.value.message=o),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e(L,{color:"primary",loading:te.value,disabled:te.value,onClick:Ce},{default:t(()=>[l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e(L,{disabled:te.value,onClick:c[10]||(c[10]=o=>$.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(He,{modelValue:k.value,"onUpdate:modelValue":c[12]||(c[12]=o=>k.value=o)},{default:t(()=>[e(z,{value:"student-course-details"},{default:t(()=>[l(" Student/Course Details ")]),_:1}),e(z,{value:"upload-download"},{default:t(()=>[l(" Upload/Download ")]),_:1}),e(z,{value:"status"},{default:t(()=>[l(" Status ")]),_:1}),e(z,{value:"comments"},{default:t(()=>[l(" Comments ")]),_:1}),e(z,{value:"university-communication"},{default:t(()=>[l(" University Communication ")]),_:1}),h.$can("enable","aco-ao-communication")?(i(),O(z,{key:0,value:"aco-ao-communication"},{default:t(()=>[l(" ACO & AO Communication ")]),_:1})):N("",!0),h.$can("assign","application-officer")?(i(),O(z,{key:1,value:"assign-officer"},{default:t(()=>[l(" Assign Application Officer ")]),_:1})):N("",!0),h.$can("assign","compliance-officer")?(i(),O(z,{key:2,value:"assign-compliance-officer"},{default:t(()=>[l("Assign Compliance Officer ")]),_:1})):N("",!0),h.$can("enable","aco-co-communication")?(i(),O(z,{key:3,value:"aco-co-communication"},{default:t(()=>[l("ACO & CO Communication")]),_:1})):N("",!0),U.value?(i(),O(z,{key:4,value:"activity-logs"},{default:t(()=>[l(" Activity Logs ")]),_:1})):N("",!0)]),_:1},8,["modelValue"]),e(D,null,{default:t(()=>[e(Ee,{modelValue:k.value,"onUpdate:modelValue":c[16]||(c[16]=o=>k.value=o)},{default:t(()=>[e(F,{value:"student-course-details"},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12"},{default:t(()=>[e(re,null,{default:t(()=>[a("tbody",null,[a("tr",null,[dt,a("td",null,r(I.value.application_id),1),ct,a("td",null,r(I.value.created_at),1)]),a("tr",null,[mt,a("td",null,r(H.value.student_id??""),1),pt,a("td",null,r(H.value.passport_no),1)]),a("tr",null,[ft,a("td",null,r(H.value.first_name)+" "+r(H.value.last_name),1),_t,a("td",null,r(H.value.date_of_birth),1)]),a("tr",null,[vt,a("td",null,r(H.value.email),1),gt,a("td",null,r(H.value.whatsapp_number),1)]),a("tr",null,[yt,a("td",null,r(I.value.counsellor_email),1),Ct,a("td",null,r(I.value.counsellor_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{value:"upload-download"},{default:t(()=>[e(Be,{"existing-documents":ue.value,"zip-link":H.value.document_zip_link},null,8,["existing-documents","zip-link"])]),_:1}),e(F,{value:"status"},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[k.value==="status"&&h.$can("status","application")?(i(),O(L,{key:0,color:"primary",onClick:c[13]||(c[13]=o=>_.value=!0)},{default:t(()=>[l(" Change Current Status ")]),_:1})):N("",!0)]),_:1}),e(T,{cols:"12"},{default:t(()=>[e(re,null,{default:t(()=>[wt,a("tbody",null,[(i(!0),S(M,null,Y(p.value,(o,W)=>(i(),S("tr",{key:W},[a("td",null,r(o.created_at),1),a("td",null,r(o.comment),1),a("td",null,[a("div",null,[a("span",{innerHTML:o.status_text},null,8,At),W===0?(i(),S("span",bt,"(Current Status)")):N("",!0),o.document?(i(),S("div",ht,[a("div",null,r(o.file_name),1),a("a",{href:o.document,target:"_blank",class:"download-link"},"Document",8,Vt)])):N("",!0)])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{value:"comments"},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[h.$can("comment","application")?(i(),O(L,{key:0,color:"primary",onClick:c[14]||(c[14]=o=>w.value=!0)},{default:t(()=>[l(" Add New Comment ")]),_:1})):N("",!0)]),_:1}),e(T,{cols:"12"},{default:t(()=>[a("div",St,[(i(!0),S(M,null,Y(y.value,(o,W)=>(i(),S("div",{key:W,class:"comment"},[a("div",kt,[a("span",xt,r(o.created_at),1)]),a("div",{class:"comment-body",innerHTML:o.comment_with_user},null,8,Ot)]))),128))])]),_:1})]),_:1})]),_:1}),e(F,{value:"university-communication"},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[h.$can("university_communication","application")?(i(),O(L,{key:0,color:"primary",onClick:c[15]||(c[15]=o=>$.value=!0)},{default:t(()=>[l(" Add New Communication ")]),_:1})):N("",!0)]),_:1}),e(T,{cols:"12"},{default:t(()=>[a("div",$t,[(i(!0),S(M,null,Y(n.value,(o,W)=>(i(),S("div",{key:W,class:"comment"},[a("div",Lt,[a("span",Ut,r(o.created_at),1)]),a("div",Tt,[Dt,l(" "+r(o.subject),1)]),a("div",It,[a("div",{innerHTML:o.message},null,8,Mt)])]))),128))])]),_:1})]),_:1})]),_:1}),h.$can("enable","aco-ao-communication")?(i(),O(F,{key:0,value:"aco-ao-communication"},{default:t(()=>[e(Ge,{"application-id":E(u)},null,8,["application-id"])]),_:1})):N("",!0),e(F,{value:"activity-logs"},{default:t(()=>[e(Ke,{"application-id":E(u)},null,8,["application-id"])]),_:1}),e(F,{value:"assign-officer"},{default:t(()=>[e(ot,{"application-id":E(u)},null,8,["application-id"])]),_:1}),e(F,{value:"assign-compliance-officer"},{default:t(()=>[e(ut,{"application-id":E(u)},null,8,["application-id"])]),_:1}),e(F,{value:"aco-co-communication"},{default:t(()=>[e(et,{"application-id":E(u)},null,8,["application-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},za=ve(jt,[["__scopeId","data-v-b86989ea"]]);export{za as default};
