import{r as lt}from"./validators-IgT9dpV5.js";import{j as at,r as s,H as ot,o as r,f as N,e,b as t,v as n,a6 as B,n as nt,a7 as c,d as l,x as d,z as D,c as _,i as E,F as P,R as ut,U as st}from"./main-C4H_aAPa.js";import{_ as dt}from"./AppTextarea-JPEkairE.js";import{_ as it}from"./AppAutocomplete-BtGVEtgy.js";import{u as rt}from"./applicationList-BTpO5Vl0.js";import mt from"./details-document-YyBp6T3k.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as $,V as I,d as q}from"./VCard-DoTFoNk5.js";import{V as R}from"./VDialog-C2EqvI1d.js";import{V as k}from"./VCardText-Bhio1wW5.js";import{V as O}from"./VForm-Dw2H7zhP.js";import{V as A}from"./form-DkfOYF43.js";import{V as pt}from"./VFileInput-Bf_YBqH-.js";import{V as W}from"./VSpacer-DuR7DSFa.js";import{V as _t}from"./VTextField-CeJKI7Tf.js";import{V as ft,a as U}from"./VTabs-CGFX__j6.js";import{V as vt,a as x}from"./VWindowItem-jhgG86mQ.js";import{V as L,a as v}from"./VRow-Cp0Mf5wf.js";import{V as tt}from"./VTable-CcsT52BF.js";import"./helpers-CK0esMst.js";/* empty css                   */import"./VCounter-DpUHeUNo.js";import"./index-MnUENuId.js";import"./index-Datp2PP_.js";import"./VField-Bwr37GOJ.js";import"./easing-CjukEv2V.js";import"./VInput-BUsuNnQb.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-Nbm5n_22.js";import"./VList-BdKxrQit.js";import"./ssrBoot-BimPHYgT.js";import"./VAvatar-BbTok92G.js";import"./VImg-BcZf5OIA.js";import"./VDivider-DOTucSXQ.js";import"./dialog-transition-1gm64aQb.js";import"./VMenu-DQOlkt7C.js";import"./VOverlay-LfA_Sks2.js";import"./lazy-CHY0ltdR.js";import"./scopeId-Dd6QYKlO.js";import"./VCheckboxBtn-rXtjrvL0.js";import"./VSelectionControl-DLlK2Rd0.js";import"./VChip-CXJkOmnO.js";import"./VSlideGroup-Da_F3j7_.js";import"./filter-Fo3HCTsN.js";import"./api-CoQFY6CW.js";import"./index-B3bPRkoL.js";import"./fileStore-CUYQengY.js";import"./submitApplication-BASMX71_.js";import"./filepond-plugin-image-preview.esm-8dRHZgFM.js";import"./sweetalert2-z6gKu1nJ.js";/* empty css              */const m=M=>(ut("data-v-cd2f0ed2"),M=M(),st(),M),Vt=m(()=>l("td",null,[l("strong",null,"Application Id")],-1)),Ct=m(()=>l("td",null,[l("strong",null,"Date Added")],-1)),yt=m(()=>l("td",null,[l("strong",null,"Student ID")],-1)),gt=m(()=>l("td",null,[l("strong",null,"Student Passport No.")],-1)),wt=m(()=>l("td",null,[l("strong",null,"Student Name")],-1)),St=m(()=>l("td",null,[l("strong",null,"Student Date of Birth")],-1)),bt=m(()=>l("td",null,[l("strong",null,"Student E-Mail")],-1)),ht=m(()=>l("td",null,[l("strong",null,"Student Phone No.")],-1)),Dt=m(()=>l("td",null,[l("strong",null,"Communication E-Mail ID")],-1)),kt=m(()=>l("td",null,[l("strong",null,"Communication Phone No.")],-1)),At=m(()=>l("thead",null,[l("tr",null,[l("th",null,"Date Added"),l("th",null,"Comment"),l("th",null,"Status and Document")])],-1)),Ut=["innerHTML"],xt={key:0,class:"current-status-label"},Mt={key:1},Tt=["href"],jt={class:"comment-section"},Nt={class:"comment-header"},$t={class:"comment-date"},It=["innerHTML"],Lt={class:"comment-section"},Ft={class:"comment-header"},Ht={class:"comment-date"},Bt={class:"communication-subject"},Et=m(()=>l("strong",null,"Subject:",-1)),Pt={class:"comment-body"},qt=["innerHTML"],Rt={__name:"details",setup(M){const g=at().params.id,i=rt(),w=s("student-course-details"),S=s(!1),b=s(!1),h=s(!1),F=s(""),f=s(""),V=s({subject:"",message:""});s([{name:"Document1.pdf",progress:100},{name:"Document2.pdf",progress:100},{name:"Document3.pdf",progress:100},{name:"Document4.pdf",progress:100}]);const z=s([]),G=s([]),J=s([{created_at:"",comment:"",status_text:""}]),C=s({application_id:"",created_at:"",counsellor_email:"",counsellor_number:""}),T=s();s(!0);const p=s({id:null,student_id:null,first_name:null,last_name:null,passport_no:null,date_of_birth:null,whatsapp_number:null,email:null,address:null,city:null,country:null,region:null,state:null,gender:null,visa_refusal:null,created_at:null,updated_at:null,document:[{id:null,student_id:null,path:null,created_at:null,updated_at:null}]}),K=s([]),Q=s([]);ot(async()=>{await j()});const j=async()=>{await i.getApplicationDetails(g),await i.getApplicationStatusses(g),await i.getApplicationAllStatuses(),C.value=i.applicationData,K.value=i.documents,p.value=i.students,J.value=i.statuses,z.value=i.comments,G.value=i.universityCommunications,Q.value=i.allStatuses.filter(u=>u.id!==C.value.status)},X=async()=>{try{let u=new FormData;u.append("status",F.value),u.append("comment",f.value),T.value&&u.append("file",T.value[0]),await i.updateStatus(g,u),S.value=!1,await j()}catch(u){console.error("Error updating status:",u)}},Y=async()=>{try{await i.addComment(g,f.value),f.value="",b.value=!1,await j()}catch(u){console.error("Error adding comment:",u)}},Z=async()=>{try{await i.addUniversityCommunication(g,V.value),V.value={subject:"",message:""},h.value=!1,await j()}catch(u){console.error("Error adding university communication:",u)}};return(u,o)=>{const et=it,H=dt;return r(),N(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Application Details")]),_:1}),t(k,null,{default:e(()=>[t(R,{modelValue:S.value,"onUpdate:modelValue":o[4]||(o[4]=a=>S.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Change Current Status")]),_:1}),t(k,null,{default:e(()=>[t(O,{onSubmit:B(X,["prevent"])},{default:e(()=>[t(et,{modelValue:F.value,"onUpdate:modelValue":o[0]||(o[0]=a=>F.value=a),items:Q.value,"item-title":a=>a.name,"item-value":a=>a.id,label:"Status",placeholder:"Select Status",rules:["requiredValidator"in u?u.requiredValidator:nt(lt)]},null,8,["modelValue","items","item-title","item-value","rules"]),t(A,{class:"mt-2"},{default:e(()=>[n("Add any necessary file (Optional)")]),_:1}),t(pt,{modelValue:T.value,"onUpdate:modelValue":o[1]||(o[1]=a=>T.value=a),color:"primary",label:"File input",variant:"outlined",class:"mt-2"},null,8,["modelValue"]),t(A,{class:"mt-2"},{default:e(()=>[n("Comment (Optional)")]),_:1}),t(H,{modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=a=>f.value=a),placeholder:"Place any comment regarding status"},null,8,["modelValue"])]),_:1})]),_:1}),t(q,null,{default:e(()=>[t(W),t(c,{color:"primary",onClick:X},{default:e(()=>[n("Submit")]),_:1}),t(c,{onClick:o[3]||(o[3]=a=>S.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(R,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=a=>b.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Add a New Comment")]),_:1}),t(k,null,{default:e(()=>[t(O,{onSubmit:B(Y,["prevent"])},{default:e(()=>[t(A,{class:"mt-2"},{default:e(()=>[n("New Comment")]),_:1}),t(H,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=a=>f.value=a),placeholder:"Add a new comment",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),t(q,null,{default:e(()=>[t(W),t(c,{color:"primary",onClick:Y},{default:e(()=>[n("Submit Comment")]),_:1}),t(c,{onClick:o[6]||(o[6]=a=>b.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(R,{modelValue:h.value,"onUpdate:modelValue":o[11]||(o[11]=a=>h.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Add a New University Communication")]),_:1}),t(k,null,{default:e(()=>[t(O,{onSubmit:B(Z,["prevent"])},{default:e(()=>[t(A,{class:"mt-2"},{default:e(()=>[n("Subject")]),_:1}),t(_t,{modelValue:V.value.subject,"onUpdate:modelValue":o[8]||(o[8]=a=>V.value.subject=a),placeholder:"Subject",class:"mt-2"},null,8,["modelValue"]),t(A,{class:"mt-2"},{default:e(()=>[n("Message")]),_:1}),t(H,{modelValue:V.value.message,"onUpdate:modelValue":o[9]||(o[9]=a=>V.value.message=a),placeholder:"Message",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),t(q,null,{default:e(()=>[t(W),t(c,{color:"primary",onClick:Z},{default:e(()=>[n("Submit Communication")]),_:1}),t(c,{onClick:o[10]||(o[10]=a=>h.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ft,{modelValue:w.value,"onUpdate:modelValue":o[12]||(o[12]=a=>w.value=a)},{default:e(()=>[t(U,{value:"student-course-details"},{default:e(()=>[n("Student/Course Details")]),_:1}),t(U,{value:"upload-download"},{default:e(()=>[n("Upload/Download")]),_:1}),t(U,{value:"status"},{default:e(()=>[n("Status")]),_:1}),t(U,{value:"comments"},{default:e(()=>[n("Comments")]),_:1}),t(U,{value:"university-communication"},{default:e(()=>[n("University Communication")]),_:1})]),_:1},8,["modelValue"]),t(k,null,{default:e(()=>[t(vt,{modelValue:w.value,"onUpdate:modelValue":o[16]||(o[16]=a=>w.value=a)},{default:e(()=>[t(x,{value:"student-course-details"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(tt,null,{default:e(()=>[l("tbody",null,[l("tr",null,[Vt,l("td",null,d(C.value.application_id),1),Ct,l("td",null,d(C.value.created_at),1)]),l("tr",null,[yt,l("td",null,d(p.value.student_id??""),1),gt,l("td",null,d(p.value.passport_no),1)]),l("tr",null,[wt,l("td",null,d(p.value.first_name)+" "+d(p.value.last_name),1),St,l("td",null,d(p.value.date_of_birth),1)]),l("tr",null,[bt,l("td",null,d(p.value.email),1),ht,l("td",null,d(p.value.whatsapp_number),1)]),l("tr",null,[Dt,l("td",null,d(C.value.counsellor_email),1),kt,l("td",null,d(C.value.counsellor_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(x,{value:"upload-download"},{default:e(()=>[t(mt,{"existing-documents":K.value},null,8,["existing-documents"])]),_:1}),t(x,{value:"status"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[w.value==="status"&&u.$can("status","application")?(r(),N(c,{key:0,onClick:o[13]||(o[13]=a=>S.value=!0),color:"primary"},{default:e(()=>[n(" Change Current Status ")]),_:1})):D("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[t(tt,null,{default:e(()=>[At,l("tbody",null,[(r(!0),_(P,null,E(J.value,(a,y)=>(r(),_("tr",{key:y},[l("td",null,d(a.created_at),1),l("td",null,d(a.comment),1),l("td",null,[l("div",null,[l("span",{innerHTML:a.status_text},null,8,Ut),y===0?(r(),_("span",xt,"(Current Status)")):D("",!0),a.document?(r(),_("div",Mt,[l("div",null,d(a.file_name),1),l("a",{href:a.document,target:"_blank",class:"download-link"},"Document",8,Tt)])):D("",!0)])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),t(x,{value:"comments"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[u.$can("comment","application")?(r(),N(c,{key:0,onClick:o[14]||(o[14]=a=>b.value=!0),color:"primary"},{default:e(()=>[n("Add New Comment")]),_:1})):D("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[l("div",jt,[(r(!0),_(P,null,E(z.value,(a,y)=>(r(),_("div",{key:y,class:"comment"},[l("div",Nt,[l("span",$t,d(a.created_at),1)]),l("div",{class:"comment-body",innerHTML:a.comment_with_user},null,8,It)]))),128))])]),_:1})]),_:1})]),_:1}),t(x,{value:"university-communication"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[u.$can("university_communication","application")?(r(),N(c,{key:0,onClick:o[15]||(o[15]=a=>h.value=!0),color:"primary"},{default:e(()=>[n("Add New Communication")]),_:1})):D("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[l("div",Lt,[(r(!0),_(P,null,E(G.value,(a,y)=>(r(),_("div",{key:y,class:"comment"},[l("div",Ft,[l("span",Ht,d(a.created_at),1)]),l("div",Bt,[Et,n(" "+d(a.subject),1)]),l("div",Pt,[l("div",{innerHTML:a.message},null,8,qt)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},qe=ct(Rt,[["__scopeId","data-v-cd2f0ed2"]]);export{qe as default};
