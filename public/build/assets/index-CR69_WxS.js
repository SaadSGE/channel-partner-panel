import{_ as M}from"./AppCardActions-BeLO71aj.js";import{_ as Y}from"./TablePagination-BjRK5CJk.js";import{_ as G}from"./AppTextField-BucKdSFj.js";import{_ as J}from"./AppSelect-D__6Lg39.js";import{u as K}from"./applicationList-BjDRNQ-O.js";import{g as Q}from"./helpers-CqAd6P0K.js";import{S as y}from"./sweetalert2-z6gKu1nJ.js";import{k as W,r as o,w as X,H as Z,a as ee,o as k,c as te,b as a,e as s,d as i,x as m,y as ae,v as le,a1 as P,f as oe,z as se}from"./main-CPBgCmnf.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as b}from"./VCardText-B4waBk1l.js";import{V as ne,a as x}from"./VRow-ql2ec7Cj.js";import{V as re}from"./VCard-BhoYiTzk.js";import{V as me}from"./VSpacer-ChnL5aT2.js";import{V as ue}from"./VDataTableServer-Bd2uiP-A.js";import{V as ce}from"./VChip-B_fwr1p3.js";import"./index-BV6yvkW4.js";import"./VOverlay-H5EtLqYd.js";import"./easing-CjukEv2V.js";import"./lazy-b-OcEv-P.js";import"./scopeId-o2wus_cA.js";import"./index-l59abwL_.js";import"./VDivider-uYSKJiCq.js";import"./VPagination-DVaaUI1Z.js";import"./form-Dx402bF1.js";import"./VTextField-CYnXyEXS.js";/* empty css                   */import"./VCounter-DtJtCASG.js";import"./VField-D-9_VJ51.js";import"./VInput-DmfSKO13.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-82xZ__xy.js";import"./VList-9XCGdkXT.js";import"./ssrBoot-CYu4DA5h.js";import"./VAvatar-BdXO6gfP.js";import"./VImg-_7y3vkdl.js";import"./dialog-transition-BIuh_FSB.js";import"./VMenu-BFQhWSQa.js";import"./VCheckboxBtn-DC5S2ml0.js";import"./VSelectionControl-D0CKm2R1.js";import"./api-BoyzkkFl.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-BeVOEyiv.js";import"./VTable-DtyqgpFW.js";import"./filter-Cw3ragW7.js";import"./VSlideGroup-B_YX5rPM.js";const pe={class:"me-3 d-flex gap-3"},de={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ve={style:{"inline-size":"15.625rem"}},fe={class:"d-flex flex-column ms-3"},_e={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ge={class:"text-md"},ye={class:"text-md"},xe={class:"d-flex flex-column ms-3"},Ve={__name:"index",props:{userId:{type:String,default:null}},setup(I){const V=K(),U=W(),B=o(Q()==="admin"),A=o([]),_=o(0),r=o(10),u=o(1),C=o(),h=o(),c=o(""),p=o(),d=o(null),v=o(null),g=o(!1),D=o([]),N=o([]),R=o([{value:0,name:"Application Processing"},{value:1,name:"Application Submitted"},{value:2,name:"Pending Docs"},{value:3,name:"Offer Issue Conditional"},{value:4,name:"Offer Issue Unconditional"},{value:5,name:"Need Payment"},{value:6,name:"CAS Issued"},{value:7,name:"Additional Doc Needed"},{value:8,name:"Refund Required"},{value:9,name:"Application Rejected"},{value:10,name:"Session Expired"},{value:11,name:"Doc Received"},{value:12,name:"Partial Payment"}]),T=I,f=async()=>{g.value=!0;try{const l=await V.getApplicationList(T.userId,u.value,r.value,c.value,C.value,h.value,p.value,d.value,v.value);A.value=l.data,_.value=l.total}catch(l){console.error("Error fetching applications:",l)}finally{g.value=!1}},$=l=>{var t,n;C.value=(t=l.sortBy[0])==null?void 0:t.key,h.value=(n=l.sortBy[0])==null?void 0:n.order,f()},O=l=>{U.push({name:"application-details",params:{id:l}})},E=async l=>{if((await y.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await V.deleteItem(l),f(),y.fire("Deleted!","The item has been deleted.","success")}catch{y.fire("Error!","There was an error deleting the item.","error")}};X([c,p,d,v],()=>{f()}),Z(()=>{f()});const L=o([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...B.value?[{title:"Application Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),S=l=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[l]||"secondary",z=l=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[l]||"Unknown Status";return o(!0),(l,t)=>{const n=J,j=G,w=ee("IconBtn"),q=Y,F=M;return k(),te("div",null,[a(re,{class:"mb-4",title:"Filter"},{default:s(()=>[a(b,null,{default:s(()=>[a(ne,null,{default:s(()=>[a(x,{cols:"12",sm:"4"},{default:s(()=>[a(n,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),placeholder:"Select Status",items:R.value,clearable:"","clear-icon":"tabler-x","item-title":e=>e.name,"item-value":e=>e.value},null,8,["modelValue","items","item-title","item-value"])]),_:1}),a(x,{cols:"12",sm:"4"},{default:s(()=>[a(n,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),placeholder:"Select University",items:D.value,clearable:"","clear-icon":"tabler-x","item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","item-title","item-value"])]),_:1}),a(x,{cols:"12",sm:"4"},{default:s(()=>[a(n,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),placeholder:"Select Channel Partner",items:N.value,clearable:"","clear-icon":"tabler-x","item-title":e=>e.email,"item-value":e=>e.id},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1})]),_:1})]),_:1}),a(F,{title:"New Application",loading:g.value,"no-actions":""},{default:s(()=>[a(b,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",pe,[a(n,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),a(me),i("div",de,[i("div",ve,[a(j,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),a(ue,{"items-per-page":r.value,"onUpdate:itemsPerPage":t[6]||(t[6]=e=>r.value=e),page:u.value,"onUpdate:page":t[7]||(t[7]=e=>u.value=e),items:A.value,"items-length":_.value,headers:L.value,class:"text-no-wrap color-black","onUpdate:options":$},{"item.student.name":s(({item:e})=>[i("p",null,m(e.student.first_name)+" "+m(e.student.last_name),1)]),"item.university.name":s(({item:e})=>[i("div",fe,[i("span",_e,m(e.university.name),1),i("span",ge,m(e.course.name),1),i("span",ye,m(e.intake.name),1)])]),"item.status":s(({item:e})=>[a(ce,{color:S(e.status),class:ae([`text-${S(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[le(m(z(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",xe,[a(w,{onClick:H=>O(e.id)},{default:s(()=>[a(P,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),l.$can("delete","application")?(k(),oe(w,{key:0,onClick:H=>E(e.id)},{default:s(()=>[a(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):se("",!0)])]),bottom:s(()=>[a(q,{page:u.value,"onUpdate:page":t[5]||(t[5]=e=>u.value=e),"items-per-page":r.value,"total-items":_.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers"])]),_:1},8,["loading"])])}}},dt=ie(Ve,[["__scopeId","data-v-399be763"]]);export{dt as default};
