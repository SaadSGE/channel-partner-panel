import{r as s,e as R,c as T}from"./validators-DOkm11CL.js";import{r as c,H as L,w as _,a as G,o as C,f as $,e as t,b as l,a6 as I,n as u,c as M,F as W,z as j,a7 as q,v as S,d as H,aA as h}from"./main-DSNTdqfI.js";import{_ as J}from"./AppAutocomplete-BWUIdE1U.js";import{_ as K}from"./AppSelect-BvJgpPN4.js";import{_ as z}from"./AppTextField-IXOudmAp.js";import{_ as Q}from"./AppDrawerHeaderSection-B0M5N8_p.js";import{u as X}from"./auth-CKGzNO71.js";import{u as Y}from"./rolePermission-BuKT4AOY.js";import{S as g}from"./sweetalert2-z6gKu1nJ.js";import{P as Z}from"./vue3-perfect-scrollbar.esm-DeUGRsx7.js";import{V as x}from"./VNavigationDrawer-Czp2PjLa.js";import{V as ee}from"./VDivider-CuU-sNL5.js";import{V as le}from"./VCard-W6-ISte3.js";import{V as ae}from"./VCardText-CUKtcGdo.js";import{V as oe}from"./VForm-BG69z5M8.js";import{V as re,a as i}from"./VRow-BJPEDC92.js";import{V as m}from"./VCheckbox-B_jxJzOv.js";import"./helpers-DK5QwNv0.js";import"./form-CuK0KRh9.js";import"./VSelect-LmiIPZ6l.js";import"./VTextField-D0s4ZZU9.js";/* empty css                   */import"./VCounter-LnP5o_uM.js";import"./index-CNHnkn1q.js";import"./index-CTsV22kn.js";import"./VField-C38lytQU.js";import"./easing-CjukEv2V.js";import"./VInput-VWWdFsL6.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CFW_GVtk.js";import"./ssrBoot-D7WTX-ha.js";import"./VAvatar-DQLuKVV9.js";import"./VImg-BiL3cvZl.js";import"./dialog-transition-CstwnWTF.js";import"./VMenu-CR65-HvD.js";import"./VOverlay-BJfRArLG.js";import"./lazy--JOl1iq4.js";import"./scopeId-BFJ-_8ki.js";import"./VCheckboxBtn-CcG-epRn.js";import"./VSelectionControl-DAAzweAU.js";import"./VChip-BKcEHiL2.js";import"./VSlideGroup-CZBKg-wd.js";import"./filter-V5WMaev1.js";import"./VSpacer-BrkdUHa4.js";/* empty css              */import"./api-ywob-iov.js";import"./index-B3bPRkoL.js";const te=H("label",null,"Country Recruit For",-1),xe={__name:"EditNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},editedUser:{type:Object,default:()=>({})}},emits:["update:isDrawerOpen","userUpdated"],setup(B,{emit:k}){const p=B,V=k,b=Y(),D=X(),w=c(!1),n=c(),y=c([]),a=c({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[]}),N=e=>{e&&(a.value={...a.value,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role,plan:"",status:e.status,recruitCountries:e.recruit_countries?JSON.parse(e.recruit_countries):[]})};L(async()=>{console.log("Initial editedUser:",p.editedUser),await b.getAllRoles(),y.value=b.roles,N(p.editedUser)}),_(()=>p.editedUser,e=>{console.log("Updated editedUser:",e),N(e)},{immediate:!0});const U=()=>{V("update:isDrawerOpen",!1),h(()=>{var e,o;(e=n.value)==null||e.reset(),(o=n.value)==null||o.resetValidation()})},E=e=>e?e.toLowerCase():"",A=async()=>{var e;(e=n.value)==null||e.validate().then(async({valid:o})=>{var f;if(o)try{await D.updateUser(a.value),g.fire({icon:"success",title:"User Updated Successfully",text:"The user details have been updated!",confirmButtonText:"OK"}),V("userUpdated",a.value),V("update:isDrawerOpen",!1),h(()=>{var d,v;(d=n.value)==null||d.reset(),(v=n.value)==null||v.resetValidation()})}catch(d){console.error("Error updating user:",d),g.fire({icon:"error",title:"Update Failed",text:((f=d.response)==null?void 0:f.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},F=e=>{V("update:isDrawerOpen",e)};return(e,o)=>{const f=Q,d=z,v=K,O=J,P=G("VCheckboxGroup");return C(),$(x,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":p.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[l(f,{title:"Edit User",onCancel:U}),l(ee),l(u(Z),{options:{wheelPropagation:!1}},{default:t(()=>[l(le,{flat:""},{default:t(()=>[l(ae,null,{default:t(()=>[l(oe,{ref_key:"refForm",ref:n,modelValue:w.value,"onUpdate:modelValue":o[15]||(o[15]=r=>w.value=r),onSubmit:I(A,["prevent"])},{default:t(()=>[l(re,null,{default:t(()=>[l(i,{cols:"12",md:"6"},{default:t(()=>[l(d,{modelValue:a.value.firstName,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.firstName=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:t(()=>[l(d,{modelValue:a.value.lastName,"onUpdate:modelValue":o[1]||(o[1]=r=>a.value.lastName=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=r=>a.value.email=r),rules:["requiredValidator"in e?e.requiredValidator:u(s),"emailValidator"in e?e.emailValidator:u(R)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:t(()=>[l(d,{modelValue:a.value.password,"onUpdate:modelValue":o[3]||(o[3]=r=>a.value.password=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"Password",type:"password",placeholder:"Enter your password"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:t(()=>[l(d,{modelValue:a.value.confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=r=>a.value.confirmPassword=r),rules:["requiredValidator"in e?e.requiredValidator:u(s),("confirmedValidator"in e?e.confirmedValidator:u(T))(a.value.confirmPassword,a.value.password)],label:"Confirm Password",type:"password",placeholder:"Confirm your password"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.mobileNumber,"onUpdate:modelValue":o[5]||(o[5]=r=>a.value.mobileNumber=r),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.whatsappNumber,"onUpdate:modelValue":o[6]||(o[6]=r=>a.value.whatsappNumber=r),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(v,{modelValue:a.value.role,"onUpdate:modelValue":o[7]||(o[7]=r=>a.value.role=r),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in e?e.requiredValidator:u(s)],items:y.value,"item-title":r=>r.role,"item-value":r=>r.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),E(a.value.role)==="channel partner"?(C(),M(W,{key:0},[l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.companyName,"onUpdate:modelValue":o[8]||(o[8]=r=>a.value.companyName=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.website,"onUpdate:modelValue":o[9]||(o[9]=r=>a.value.website=r),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.address,"onUpdate:modelValue":o[10]||(o[10]=r=>a.value.address=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.city,"onUpdate:modelValue":o[11]||(o[11]=r=>a.value.city=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(d,{modelValue:a.value.postCode,"onUpdate:modelValue":o[12]||(o[12]=r=>a.value.postCode=r),rules:["requiredValidator"in e?e.requiredValidator:u(s)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(O,{modelValue:a.value.country,"onUpdate:modelValue":o[13]||(o[13]=r=>a.value.country=r),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in e?e.requiredValidator:u(s)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[te,l(P,{modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[14]||(o[14]=r=>a.value.recruitCountries=r)},{default:t(()=>[l(m,{value:"Nigeria",label:"Nigeria"}),l(m,{value:"India",label:"India"}),l(m,{value:"Bangladesh",label:"Bangladesh"}),l(m,{value:"Nepal",label:"Nepal"}),l(m,{value:"Bhutan",label:"Bhutan"}),l(m,{value:"Ghana",label:"Ghana"}),l(m,{value:"Sri Lanka",label:"Sri Lanka"})]),_:1},8,["modelValue"])]),_:1})],64)):j("",!0),l(i,{cols:"12"},{default:t(()=>[l(q,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),l(q,{type:"reset",variant:"tonal",color:"error",onClick:U},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{xe as default};
