import{r as Oe}from"./validators-BmfWnwf1.js";import{r as n,w as de,H as X,o as s,f as O,e as t,b as e,d as a,v as l,x as r,n as I,c as S,F as M,z as P,a7 as $,a1 as ie,i as Y,a6 as ae,an as ce,a5 as G,R as me,U as pe,j as xe,k as $e}from"./main-DEXLFq5-.js";import{_ as Le}from"./AppTextarea-IcPzd49D.js";import{_ as fe}from"./AppAutocomplete-BrYzYM3q.js";import{u as Z}from"./applicationList-CGO93p15.js";import{_ as Ue}from"./TablePagination-CvNNTtuJ.js";import{_ as Te}from"./AppSelect-BSnVakoD.js";import{u as De,f as Ae}from"./format-SnmCjYxx.js";import{f as Ie,g as Me}from"./helpers-fLnzIySp.js";import{V as T}from"./VCardText-CEHG5Us3.js";import{V as je}from"./VDivider-BGznFT5b.js";import{V as Be}from"./VDataTableServer-jwLqUrql.js";import{V as _e}from"./VChip-BSo4JJOl.js";import{V as j,b as H,d as le}from"./VCard-BQ9pbwZy.js";import{b as be}from"./formatters-lemdAz7z.js";/* empty css                         */import{a as U,V as q}from"./VRow-DKkqacc7.js";import{V as he,a as Ve}from"./VTimelineItem-qvqswBVT.js";import{V as oe}from"./VForm-BKwayuHd.js";import{V as K}from"./form-B1xJlf5M.js";import{V as ne}from"./VSpacer-Cc-cMN1O.js";import{V as se}from"./VDialog-BWDml2hg.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as re}from"./VTable-CgQReiGh.js";import{V as Se}from"./VAlert-BS3XFoiL.js";import Ne from"./details-document-DpiuMuaO.js";import{V as Pe}from"./VFileInput-B8PwrcyV.js";import{V as He}from"./VTextField-YMVwCEg-.js";import{V as Ee,a as z}from"./VTabs-1LrdHi6e.js";import{V as ze,a as F}from"./VWindowItem-rqjhWebw.js";/* empty css                   */import"./VCounter-DAizO-YE.js";import"./index-dXcoFe5c.js";import"./index-UZWnqimo.js";import"./VField-tGKhD_Vg.js";import"./easing-CjukEv2V.js";import"./VInput-GP-yT9Tv.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-rPk05iDq.js";import"./VList-DKU5_qd-.js";import"./ssrBoot-D7sdtyqv.js";import"./VAvatar-BaU-tpmv.js";import"./VImg-BwxQFvJc.js";import"./dialog-transition-OLWOH0ts.js";import"./VMenu-Bwz97Y1a.js";import"./VOverlay-D3a_JeIA.js";import"./lazy-BlycEKg-.js";import"./scopeId-gfVHp0yK.js";import"./VCheckboxBtn-DE8plL2h.js";import"./VSelectionControl-BkLZjsBe.js";import"./filter-CRYCQMRS.js";import"./api-CQno0kML.js";import"./index-Dz1rBMAR.js";import"./VPagination-Cz1XtQip.js";import"./VDataTable-DaZWUfDZ.js";import"./VSlideGroup-CbIPENnS.js";/* empty css              */import"./submitApplication-CZMO8W1x.js";import"./vue-filepond.esm-Dbl-zFRl.js";const Fe={class:"d-flex justify-space-between flex-wrap gap-6"},qe={class:"me-3 d-flex gap-3"},Re=a("br",null,null,-1),Ke={key:0},Ye={__name:"ApplicationActivityLog",props:{applicationId:{type:String,required:!0}},setup(V){const L=V,y=De(),i=n([]),f=n(!1),k=n(0),v=n(1),w=n(10),x=n(""),C=n(null),c=[{title:"Date",key:"created_at",sortable:!0},{title:"User",key:"user",sortable:!0},{title:"Activity Type",key:"description",sortable:!0},{title:"Details",key:"details",sortable:!1},{title:"IP Address",key:"ip_address",sortable:!1}],m=async()=>{f.value=!0;try{y.setPage(v.value),y.setPerPage(w.value),y.setActivityType(C.value),y.setSearchQuery(x.value);const g=await y.fetchApplicationActivityLogs(L.applicationId);i.value=g.data.data.map(b=>({...b,created_at:Ae(new Date(b.created_at),"yyyy-MM-dd HH:mm:ss"),ip_address:b.properties.ip||"N/A",details:_(b),user:b.user?b.user.name:"System"})),k.value=g.data.total}catch(g){console.error("Error fetching activity logs:",g)}finally{f.value=!1}},N=Z(),u=n([]),_=g=>{switch(g.description){case"application_submit":return`Submitted application #${g.properties.application_id}`;case"application_update":return`Updated application #${g.properties.application_id}`;case"document_upload":return`Uploaded document: ${g.properties.document_name||"Unknown"}`;case"comment_added":return`Added comment to application #${g.properties.application_id||"Unknown"}`;case"application_status_update":const b=D(g.properties.old_status),R=D(g.properties.new_status);return`Updated status from ${b} to ${R}`;default:return g.description||"Performed an action"}},D=g=>{const b=u.value.find(R=>R.id===parseInt(g));return b?b.name:"Unknown"},A=g=>{switch(g){case"application_submit":return"primary";case"application_update":return"info";case"document_upload":return"success";case"comment_added":return"warning";case"application_status_update":return"error";default:return"default"}},E=g=>{v.value=g.page,w.value=g.itemsPerPage,g.sortBy&&g.sortBy.length>0&&y.setSorting(g.sortBy[0].key,g.sortBy[0].order),m()};de([x,C],()=>{v.value=1,m()}),X(async()=>{await m(),await ue()});const ue=async()=>{const g=await N.getAllApplicationStatuses();u.value=g.data};return(g,b)=>{const R=Te,Q=Ue;return s(),O(j,{title:"Application Activity Log",class:"mt-5"},{default:t(()=>[e(T,null,{default:t(()=>[a("div",Fe,[a("div",qe,[e(R,{modelValue:w.value,"onUpdate:modelValue":[b[0]||(b[0]=d=>w.value=d),b[1]||(b[1]=d=>w.value=parseInt(d,10))],items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),e(je),e(Be,{"items-per-page":w.value,"onUpdate:itemsPerPage":b[3]||(b[3]=d=>w.value=d),page:v.value,"onUpdate:page":b[4]||(b[4]=d=>v.value=d),items:i.value,"items-length":k.value,headers:c,loading:f.value,class:"text-no-wrap","onUpdate:options":E},{"item.description":t(({item:d})=>[e(_e,{color:A(d.description),size:"small"},{default:t(()=>[l(r(I(Ie)(d.description)),1)]),_:2},1032,["color"])]),"item.user":t(({item:d})=>[l(r(d.user),1)]),"item.created_at":t(({item:d})=>[l(r(I(Ae)(new Date(d.created_at),"dd MMM yyyy HH:mm:ss")),1)]),"item.ip_address":t(({item:d})=>[l(r(d.properties.ip),1)]),"item.details":t(({item:d})=>[d.description==="application_status_update"?(s(),S(M,{key:0},[l(" Updated "+r(d.properties.old_status)+" to "+r(d.properties.new_status)+" ",1),Re,d.properties.comment?(s(),S("span",Ke," Comment: "+r(d.properties.comment),1)):P("",!0)],64)):d.description==="comment_added"?(s(),S(M,{key:1},[l(r(d.properties.comment),1)],64)):d.description==="university_communication_added"?(s(),S(M,{key:2},[l(" Subject: "+r(d.properties.subject),1)],64)):(s(),S(M,{key:3},[l(r(d.properties.details||"N/A"),1)],64))]),bottom:t(()=>[e(Q,{page:v.value,"onUpdate:page":b[2]||(b[2]=d=>v.value=d),"items-per-page":w.value,"total-items":k.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})}}},Qe={class:"comment-section"},We={class:"text-caption"},Ge=["innerHTML"],Je={__name:"AcoAoCommunication",props:{applicationId:{type:String,required:!0}},setup(V){const L=V,y=Z(),i=n(!1),f=n(""),k=n([]),v=n(!1),w=async()=>{try{v.value=!0,await y.addAcoAoCommunication(L.applicationId,f.value),f.value="",i.value=!1,await x()}catch(C){console.error("Error adding ACO & AO communication:",C)}finally{v.value=!1}},x=async()=>{await y.getAcoAoCommunications(L.applicationId),k.value=y.acoAoCommunications};return X(x),(C,c)=>(s(),S(M,null,[e(q,null,{default:t(()=>[e(U,{cols:"12",class:"d-flex justify-end mb-4"},{default:t(()=>[e($,{color:"primary",onClick:c[0]||(c[0]=m=>i.value=!0)},{default:t(()=>[e(ie,{start:"",icon:"mdi-plus"}),l(" Add New Communication ")]),_:1})]),_:1}),e(U,{cols:"12"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l(" ACO & AO Communications ")]),_:1}),e(T,null,{default:t(()=>[a("div",Qe,[e(he,{density:C.dense},{default:t(()=>[(s(!0),S(M,null,Y(k.value,(m,N)=>(s(),O(Ve,{key:N,"dot-color":"primary",size:"small"},{opposite:t(()=>[a("div",We,r(("formatDate"in C?C.formatDate:I(be))(m.created_at)),1)]),default:t(()=>[e(j,{class:"elevation-1"},{default:t(()=>[e(H,{class:"text-subtitle-1"},{default:t(()=>[l(r(m.user.full_name),1)]),_:2},1024),e(T,null,{default:t(()=>[a("div",{innerHTML:m.message},null,8,Ge)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=m=>i.value=m),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l("Add a New ACO & AO Communication")]),_:1}),e(T,null,{default:t(()=>[e(oe,{onSubmit:ae(w,["prevent"])},{default:t(()=>[e(K,{class:"text-body-1 font-weight-medium mb-2"},{default:t(()=>[l(" Message ")]),_:1}),e(I(ce),{content:f.value,"onUpdate:content":c[1]||(c[1]=m=>f.value=m),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,{class:"pa-4"},{default:t(()=>[e(ne),e($,{color:"primary",loading:v.value,disabled:v.value,onClick:w},{default:t(()=>[e(ie,{start:"",icon:"mdi-send"}),l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e($,{color:"secondary",disabled:v.value,onClick:c[2]||(c[2]=m=>i.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Xe={class:"comment-section"},Ze={class:"text-caption"},et=["innerHTML"],tt={__name:"AcoCoCommunication",props:{applicationId:{type:String,required:!0}},setup(V){const L=V,y=Z(),i=n(!1),f=n(""),k=n([]),v=n(!1),w=async()=>{try{v.value=!0,await y.addAcoCoCommunication(L.applicationId,f.value),f.value="",i.value=!1,await x()}catch(C){console.error("Error adding ACO & CO communication:",C)}finally{v.value=!1}},x=async()=>{await y.getAcoCoCommunications(L.applicationId),k.value=y.acoCoCommunications};return X(x),(C,c)=>(s(),S(M,null,[e(q,null,{default:t(()=>[e(U,{cols:"12",class:"d-flex justify-end mb-4"},{default:t(()=>[e($,{color:"primary",onClick:c[0]||(c[0]=m=>i.value=!0)},{default:t(()=>[e(ie,{start:"",icon:"mdi-plus"}),l(" Add New Communication ")]),_:1})]),_:1}),e(U,{cols:"12"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l(" ACO & CO Communications ")]),_:1}),e(T,null,{default:t(()=>[a("div",Xe,[e(he,{density:C.dense},{default:t(()=>[(s(!0),S(M,null,Y(k.value,(m,N)=>(s(),O(Ve,{key:N,"dot-color":"primary",size:"small"},{opposite:t(()=>[a("div",Ze,r(("formatDate"in C?C.formatDate:I(be))(m.created_at)),1)]),default:t(()=>[e(j,{class:"elevation-1"},{default:t(()=>[e(H,{class:"text-subtitle-1"},{default:t(()=>[l(r(m.user.full_name),1)]),_:2},1024),e(T,null,{default:t(()=>[a("div",{innerHTML:m.message},null,8,et)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=m=>i.value=m),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,{class:"text-h6 font-weight-bold pa-4"},{default:t(()=>[l("Add a New ACO & CO Communication")]),_:1}),e(T,null,{default:t(()=>[e(oe,{onSubmit:ae(w,["prevent"])},{default:t(()=>[e(K,{class:"text-body-1 font-weight-medium mb-2"},{default:t(()=>[l(" Message ")]),_:1}),e(I(ce),{content:f.value,"onUpdate:content":c[1]||(c[1]=m=>f.value=m),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,{class:"pa-4"},{default:t(()=>[e(ne),e($,{color:"primary",loading:v.value,disabled:v.value,onClick:w},{default:t(()=>[e(ie,{start:"",icon:"mdi-send"}),l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e($,{color:"secondary",disabled:v.value,onClick:c[2]||(c[2]=m=>i.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},at=V=>(me("data-v-eca9312f"),V=V(),pe(),V),lt=at(()=>a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Status")])],-1)),ot={__name:"ApplicationOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(V){const L=V,y=Z(),i=n(null),f=n(""),k=G(()=>y.applicationOfficerOptions),v=G(()=>y.applicationOfficers),w=G(()=>{if(!f.value)return v.value;const u=f.value.toLowerCase();return v.value.filter(_=>_.full_name.toLowerCase().includes(u)||_.email.toLowerCase().includes(u)||_.pivot.status.toLowerCase().includes(u))}),x=async()=>{try{if(!i.value){errorMessage.value="Please select an officer before assigning.";return}if((await J.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this application officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const _=await y.assignApplicationOfficer(L.applicationId,i.value);if(_&&!_.status)throw console.log("hello"),console.log(_),new Error(_);J.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the application officer successfully!",confirmButtonText:"OK"}),i.value=null,await C()}}catch(u){console.log(u),J.fire({icon:"error",title:"Assignment Failed",text:u,confirmButtonText:"OK"})}},C=async()=>{await y.fetchApplicationOfficers(L.applicationId)};X(async()=>{await Promise.all([C(),y.loadAllApplicationOfficers()])}),de(()=>L.applicationId,C);const c=u=>({accepted:"success",rejected:"error",pending:"warning"})[u.toLowerCase()]||"secondary",m=u=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[u.toLowerCase()]||u,N=u=>({success:"white",error:"white",warning:"black",secondary:"white"})[u]||"white";return(u,_)=>{const D=fe;return s(),O(j,null,{default:t(()=>[e(H,null,{default:t(()=>[l("Application Officer Assignments")]),_:1}),e(T,null,{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=A=>i.value=A),items:k.value,"item-title":"full_name","item-value":"id",label:"Select Application Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[e($,{class:"mt-6",color:"primary",disabled:!i.value,onClick:x},{default:t(()=>[l(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(q,{class:"mt-4"},{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[w.value.length?(s(),O(re,{key:0},{default:t(()=>[lt,a("tbody",null,[(s(!0),S(M,null,Y(w.value,A=>(s(),S("tr",{key:A.id},[a("td",null,r(A.user.full_name),1),a("td",null,r(A.user.email),1),a("td",null,[e(_e,{color:c(A.status),"text-color":N(c(A.status)),size:"small",label:""},{default:t(()=>[l(r(m(A.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(s(),O(Se,{key:1,type:"info",class:"mt-2"},{default:t(()=>[l(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},nt=ve(ot,[["__scopeId","data-v-eca9312f"]]),st=V=>(me("data-v-aa458ed5"),V=V(),pe(),V),it=st(()=>a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Status")])],-1)),ut={__name:"ComplianceOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(V){const L=V,y=Z(),i=n(null),f=n(""),k=G(()=>y.complianceOfficerOptions),v=G(()=>y.complianceOfficers),w=G(()=>{if(!f.value)return v.value;const u=f.value.toLowerCase();return v.value.filter(_=>_.full_name.toLowerCase().includes(u)||_.email.toLowerCase().includes(u)||_.pivot.status.toLowerCase().includes(u))}),x=async()=>{try{if(!i.value){errorMessage.value="Please select an officer before assigning.";return}if((await J.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this compliance officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const _=await y.assignComplianceOfficer(L.applicationId,i.value);if(_&&!_.status)throw new Error(_);J.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the compliance officer successfully!",confirmButtonText:"OK"}),i.value=null,await C()}}catch(u){console.log(u),J.fire({icon:"error",title:"Assignment Failed",text:u,confirmButtonText:"OK"})}},C=async()=>{await y.fetchComplianceOfficers(L.applicationId)};X(async()=>{await Promise.all([C(),y.loadAllComplianceOfficers()])}),de(()=>L.applicationId,C);const c=u=>({accepted:"success",rejected:"error",pending:"warning"})[u.toLowerCase()]||"secondary",m=u=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[u.toLowerCase()]||u,N=u=>({success:"white",error:"white",warning:"black",secondary:"white"})[u]||"white";return(u,_)=>{const D=fe;return s(),O(j,null,{default:t(()=>[e(H,null,{default:t(()=>[l("Compliance Officer Assignments")]),_:1}),e(T,null,{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=A=>i.value=A),items:k.value,"item-title":"full_name","item-value":"id",label:"Select Compliance Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[e($,{class:"mt-6",color:"primary",disabled:!i.value,onClick:x},{default:t(()=>[l(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(q,{class:"mt-4"},{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[w.value.length?(s(),O(re,{key:0},{default:t(()=>[it,a("tbody",null,[(s(!0),S(M,null,Y(w.value,A=>(s(),S("tr",{key:A.id},[a("td",null,r(A.user.full_name),1),a("td",null,r(A.user.email),1),a("td",null,[e(_e,{color:c(A.status),"text-color":N(c(A.status)),size:"small",label:""},{default:t(()=>[l(r(m(A.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(s(),O(Se,{key:1,type:"info",class:"mt-2"},{default:t(()=>[l(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},rt=ve(ut,[["__scopeId","data-v-aa458ed5"]]),B=V=>(me("data-v-b86989ea"),V=V(),pe(),V),dt=B(()=>a("div",null,"Application Details",-1)),ct=B(()=>a("td",null,[a("strong",null,"Application Id")],-1)),mt=B(()=>a("td",null,[a("strong",null,"Date Added")],-1)),pt=B(()=>a("td",null,[a("strong",null,"Student ID")],-1)),ft=B(()=>a("td",null,[a("strong",null,"Student Passport No.")],-1)),_t=B(()=>a("td",null,[a("strong",null,"Student Name")],-1)),vt=B(()=>a("td",null,[a("strong",null,"Student Date of Birth")],-1)),gt=B(()=>a("td",null,[a("strong",null,"Student E-Mail")],-1)),yt=B(()=>a("td",null,[a("strong",null,"Student Phone No.")],-1)),Ct=B(()=>a("td",null,[a("strong",null,"Communication E-Mail ID")],-1)),wt=B(()=>a("td",null,[a("strong",null,"Communication Phone No.")],-1)),At=B(()=>a("thead",null,[a("tr",null,[a("th",null,"Date Added"),a("th",null,"Comment"),a("th",null,"Status and Document")])],-1)),bt=["innerHTML"],ht={key:0,class:"current-status-label"},Vt={key:1},St=["href"],kt={class:"comment-section"},Ot={class:"comment-header"},xt={class:"comment-date"},$t=["innerHTML"],Lt={class:"comment-section"},Ut={class:"comment-header"},Tt={class:"comment-date"},Dt={class:"communication-subject"},It=B(()=>a("strong",null,"Subject:",-1)),Mt={class:"comment-body"},jt=["innerHTML"],Bt={__name:"details",setup(V){const L=n(Me()==="admin"),i=xe().params.id,f=Z(),k=n("student-course-details"),v=n(!1),w=n(!1),x=n(!1),C=n(""),c=n(""),m=n({subject:"",message:""});n([{name:"Document1.pdf",progress:100},{name:"Document2.pdf",progress:100},{name:"Document3.pdf",progress:100},{name:"Document4.pdf",progress:100}]);const N=n([]),u=n([]),_=n([{created_at:"",comment:"",status_text:""}]),D=n({application_id:"",created_at:"",counsellor_email:"",counsellor_number:""}),A=n();n(!0);const E=n({id:null,student_id:null,first_name:null,last_name:null,passport_no:null,date_of_birth:null,whatsapp_number:null,email:null,address:null,city:null,country:null,region:null,state:null,gender:null,visa_refusal:null,created_at:null,updated_at:null,document:[{id:null,student_id:null,path:null,created_at:null,updated_at:null}]}),ue=n([]),g=n([]),b=$e(),R=()=>{b.back()};X(async()=>{await Q()});const Q=async()=>{await f.getApplicationDetails(i),await f.getApplicationStatusses(i),await f.getApplicationAllStatuses(),D.value=f.applicationData,ue.value=f.documents,E.value=f.students,_.value=f.statuses,N.value=f.comments,u.value=f.universityCommunications,g.value=f.allStatuses.filter(h=>h.id!==D.value.status)},d=n(!1),ee=n(!1),te=n(!1),ge=async()=>{try{d.value=!0;let h=new FormData;h.append("status",C.value),h.append("comment",c.value),A.value&&h.append("file",A.value[0]),await f.updateStatus(i,h),v.value=!1,C.value="",c.value="",A.value=null,await Q()}catch(h){console.error("Error updating status:",h)}finally{d.value=!1}},ye=async()=>{try{ee.value=!0,await f.addComment(i,c.value),c.value="",w.value=!1,await Q()}catch(h){console.error("Error adding comment:",h)}finally{ee.value=!1}},Ce=async()=>{try{te.value=!0,await f.addUniversityCommunication(i,m.value),m.value={subject:"",message:""},x.value=!1,await Q()}catch(h){console.error("Error adding university communication:",h)}finally{te.value=!1}};return(h,p)=>{const ke=fe,we=Le;return s(),O(j,null,{default:t(()=>[e(H,{class:"d-flex justify-space-between align-center"},{default:t(()=>[dt,e($,{color:"primary",onClick:R},{default:t(()=>[e(ie,{icon:"tabler-arrow-left",class:"mr-2"}),l(" Back ")]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(se,{modelValue:v.value,"onUpdate:modelValue":p[4]||(p[4]=o=>v.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,null,{default:t(()=>[l("Change Current Status")]),_:1}),e(T,null,{default:t(()=>[e(oe,{onSubmit:ae(ge,["prevent"])},{default:t(()=>[e(ke,{modelValue:C.value,"onUpdate:modelValue":p[0]||(p[0]=o=>C.value=o),items:g.value,"item-title":o=>o.name,"item-value":o=>o.id,label:"Status",placeholder:"Select Status",rules:["requiredValidator"in h?h.requiredValidator:I(Oe)]},null,8,["modelValue","items","item-title","item-value","rules"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Add any necessary file (Optional) ")]),_:1}),e(Pe,{modelValue:A.value,"onUpdate:modelValue":p[1]||(p[1]=o=>A.value=o),color:"primary",label:"File input",variant:"outlined",class:"mt-2"},null,8,["modelValue"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Comment (Optional) ")]),_:1}),e(we,{modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=o=>c.value=o),placeholder:"Place any comment regarding status"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e($,{color:"primary",loading:d.value,disabled:d.value,onClick:ge},{default:t(()=>[l(" Submit ")]),_:1},8,["loading","disabled"]),e($,{disabled:d.value,onClick:p[3]||(p[3]=o=>v.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:w.value,"onUpdate:modelValue":p[7]||(p[7]=o=>w.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,null,{default:t(()=>[l("Add a New Comment")]),_:1}),e(T,null,{default:t(()=>[e(oe,{onSubmit:ae(ye,["prevent"])},{default:t(()=>[e(K,{class:"mt-2"},{default:t(()=>[l(" New Comment ")]),_:1}),e(we,{modelValue:c.value,"onUpdate:modelValue":p[5]||(p[5]=o=>c.value=o),placeholder:"Add a new comment",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e($,{color:"primary",loading:ee.value,disabled:ee.value,onClick:ye},{default:t(()=>[l(" Submit Comment ")]),_:1},8,["loading","disabled"]),e($,{disabled:ee.value,onClick:p[6]||(p[6]=o=>w.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:x.value,"onUpdate:modelValue":p[11]||(p[11]=o=>x.value=o),"max-width":"500px"},{default:t(()=>[e(j,null,{default:t(()=>[e(H,null,{default:t(()=>[l("Add a New University Communication")]),_:1}),e(T,null,{default:t(()=>[e(oe,{onSubmit:ae(Ce,["prevent"])},{default:t(()=>[e(K,{class:"mt-2"},{default:t(()=>[l(" Subject ")]),_:1}),e(He,{modelValue:m.value.subject,"onUpdate:modelValue":p[8]||(p[8]=o=>m.value.subject=o),placeholder:"Subject",class:"mt-2"},null,8,["modelValue"]),e(K,{class:"mt-2"},{default:t(()=>[l(" Message ")]),_:1}),e(I(ce),{content:m.value.message,"onUpdate:content":p[9]||(p[9]=o=>m.value.message=o),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(le,null,{default:t(()=>[e(ne),e($,{color:"primary",loading:te.value,disabled:te.value,onClick:Ce},{default:t(()=>[l(" Submit Communication ")]),_:1},8,["loading","disabled"]),e($,{disabled:te.value,onClick:p[10]||(p[10]=o=>x.value=!1)},{default:t(()=>[l(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ee,{modelValue:k.value,"onUpdate:modelValue":p[12]||(p[12]=o=>k.value=o)},{default:t(()=>[e(z,{value:"student-course-details"},{default:t(()=>[l(" Student/Course Details ")]),_:1}),e(z,{value:"upload-download"},{default:t(()=>[l(" Upload/Download ")]),_:1}),e(z,{value:"status"},{default:t(()=>[l(" Status ")]),_:1}),e(z,{value:"comments"},{default:t(()=>[l(" Comments ")]),_:1}),e(z,{value:"university-communication"},{default:t(()=>[l(" University Communication ")]),_:1}),h.$can("enable","aco-ao-communication")?(s(),O(z,{key:0,value:"aco-ao-communication"},{default:t(()=>[l(" ACO & AO Communication ")]),_:1})):P("",!0),h.$can("assign","application-officer")?(s(),O(z,{key:1,value:"assign-officer"},{default:t(()=>[l(" Assign Application Officer ")]),_:1})):P("",!0),h.$can("assign","compliance-officer")?(s(),O(z,{key:2,value:"assign-compliance-officer"},{default:t(()=>[l("Assign Compliance Officer ")]),_:1})):P("",!0),h.$can("enable","aco-co-communication")?(s(),O(z,{key:3,value:"aco-co-communication"},{default:t(()=>[l("ACO & CO Communication")]),_:1})):P("",!0),L.value?(s(),O(z,{key:4,value:"activity-logs"},{default:t(()=>[l(" Activity Logs ")]),_:1})):P("",!0)]),_:1},8,["modelValue"]),e(T,null,{default:t(()=>[e(ze,{modelValue:k.value,"onUpdate:modelValue":p[16]||(p[16]=o=>k.value=o)},{default:t(()=>[e(F,{value:"student-course-details"},{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[e(re,null,{default:t(()=>[a("tbody",null,[a("tr",null,[ct,a("td",null,r(D.value.application_id),1),mt,a("td",null,r(D.value.created_at),1)]),a("tr",null,[pt,a("td",null,r(E.value.student_id??""),1),ft,a("td",null,r(E.value.passport_no),1)]),a("tr",null,[_t,a("td",null,r(E.value.first_name)+" "+r(E.value.last_name),1),vt,a("td",null,r(E.value.date_of_birth),1)]),a("tr",null,[gt,a("td",null,r(E.value.email),1),yt,a("td",null,r(E.value.whatsapp_number),1)]),a("tr",null,[Ct,a("td",null,r(D.value.counsellor_email),1),wt,a("td",null,r(D.value.counsellor_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{value:"upload-download"},{default:t(()=>[e(Ne,{"existing-documents":ue.value,"zip-link":E.value.document_zip_link},null,8,["existing-documents","zip-link"])]),_:1}),e(F,{value:"status"},{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[k.value==="status"&&h.$can("status","application")?(s(),O($,{key:0,color:"primary",onClick:p[13]||(p[13]=o=>v.value=!0)},{default:t(()=>[l(" Change Current Status ")]),_:1})):P("",!0)]),_:1}),e(U,{cols:"12"},{default:t(()=>[e(re,null,{default:t(()=>[At,a("tbody",null,[(s(!0),S(M,null,Y(_.value,(o,W)=>(s(),S("tr",{key:W},[a("td",null,r(o.created_at),1),a("td",null,r(o.comment),1),a("td",null,[a("div",null,[a("span",{innerHTML:o.status_text},null,8,bt),W===0?(s(),S("span",ht,"(Current Status)")):P("",!0),o.document?(s(),S("div",Vt,[a("div",null,r(o.file_name),1),a("a",{href:o.document,target:"_blank",class:"download-link"},"Document",8,St)])):P("",!0)])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{value:"comments"},{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[h.$can("comment","application")?(s(),O($,{key:0,color:"primary",onClick:p[14]||(p[14]=o=>w.value=!0)},{default:t(()=>[l(" Add New Comment ")]),_:1})):P("",!0)]),_:1}),e(U,{cols:"12"},{default:t(()=>[a("div",kt,[(s(!0),S(M,null,Y(N.value,(o,W)=>(s(),S("div",{key:W,class:"comment"},[a("div",Ot,[a("span",xt,r(o.created_at),1)]),a("div",{class:"comment-body",innerHTML:o.comment_with_user},null,8,$t)]))),128))])]),_:1})]),_:1})]),_:1}),e(F,{value:"university-communication"},{default:t(()=>[e(q,null,{default:t(()=>[e(U,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[h.$can("university_communication","application")?(s(),O($,{key:0,color:"primary",onClick:p[15]||(p[15]=o=>x.value=!0)},{default:t(()=>[l(" Add New Communication ")]),_:1})):P("",!0)]),_:1}),e(U,{cols:"12"},{default:t(()=>[a("div",Lt,[(s(!0),S(M,null,Y(u.value,(o,W)=>(s(),S("div",{key:W,class:"comment"},[a("div",Ut,[a("span",Tt,r(o.created_at),1)]),a("div",Dt,[It,l(" "+r(o.subject),1)]),a("div",Mt,[a("div",{innerHTML:o.message},null,8,jt)])]))),128))])]),_:1})]),_:1})]),_:1}),h.$can("enable","aco-ao-communication")?(s(),O(F,{key:0,value:"aco-ao-communication"},{default:t(()=>[e(Je,{"application-id":I(i)},null,8,["application-id"])]),_:1})):P("",!0),e(F,{value:"activity-logs"},{default:t(()=>[e(Ye,{"application-id":I(i)},null,8,["application-id"])]),_:1}),e(F,{value:"assign-officer"},{default:t(()=>[e(nt,{"application-id":I(i)},null,8,["application-id"])]),_:1}),e(F,{value:"assign-compliance-officer"},{default:t(()=>[e(rt,{"application-id":I(i)},null,8,["application-id"])]),_:1}),e(F,{value:"aco-co-communication"},{default:t(()=>[e(tt,{"application-id":I(i)},null,8,["application-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},qa=ve(Bt,[["__scopeId","data-v-b86989ea"]]);export{qa as default};
