import{g as ct,ao as hi,ap as Xl,M as Yl,aq as Kl,ar as sn,a5 as cs,r as Ql,H as Jl,w as on,as as Zl,N as ds,y as un,at as ec}from"./main-vt969jOT.js";var Tr;typeof window<"u"?Tr=window:typeof hi<"u"?Tr=hi:typeof self<"u"?Tr=self:Tr={};var Gn=Tr;const k=ct(Gn),tc={},rc=Object.freeze(Object.defineProperty({__proto__:null,default:tc},Symbol.toStringTag,{value:"Module"})),ic=Xl(rc);var hs=typeof hi<"u"?hi:typeof window<"u"?window:{},nc=ic,br;typeof document<"u"?br=document:(br=hs["__GLOBAL_DOCUMENT_CACHE@4"],br||(br=hs["__GLOBAL_DOCUMENT_CACHE@4"]=nc));var ac=br;const j=ct(ac);function sc(n){return n.replace(/\n\r?\s*/g,"")}var oc=function(t){for(var r="",e=0;e<arguments.length;e++)r+=sc(t[e])+(arguments[e+1]||"");return r};const zn=ct(oc);var uc=cc,lc=Object.prototype.toString;function cc(n){if(!n)return!1;var t=lc.call(n);return t==="[object Function]"||typeof n=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}var ln=function(n){return n.replace(/^\s+|\s+$/g,"")},dc=function(n){return Object.prototype.toString.call(n)==="[object Array]"},hc=function(n){if(!n)return{};for(var t={},r=ln(n).split(`
`),e=0;e<r.length;e++){var i=r[e],a=i.indexOf(":"),s=ln(i.slice(0,a)).toLowerCase(),o=ln(i.slice(a+1));typeof t[s]>"u"?t[s]=o:dc(t[s])?t[s].push(o):t[s]=[t[s],o]}return t},fc=mc,pc=Object.prototype.hasOwnProperty;function mc(){for(var n={},t=0;t<arguments.length;t++){var r=arguments[t];for(var e in r)pc.call(r,e)&&(n[e]=r[e])}return n}var go=Gn,gc=uc,vc=hc,yc=fc,_c=vt;vt.XMLHttpRequest=go.XMLHttpRequest||xc;vt.XDomainRequest="withCredentials"in new vt.XMLHttpRequest?vt.XMLHttpRequest:go.XDomainRequest;Tc(["get","put","post","patch","head","delete"],function(n){vt[n==="delete"?"del":n]=function(t,r,e){return r=vo(t,r,e),r.method=n.toUpperCase(),yo(r)}});function Tc(n,t){for(var r=0;r<n.length;r++)t(n[r])}function bc(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function vo(n,t,r){var e=n;return gc(t)?(r=t,typeof n=="string"&&(e={uri:n})):e=yc(t,{uri:n}),e.callback=r,e}function vt(n,t,r){return t=vo(n,t,r),yo(t)}function yo(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var t=!1,r=function(Y,te,le){t||(t=!0,n.callback(Y,te,le))};function e(){o.readyState===4&&setTimeout(s,0)}function i(){var B=void 0;if(o.response?B=o.response:B=o.responseText||Sc(o),P)try{B=JSON.parse(B)}catch{}return B}function a(B){return clearTimeout(w),B instanceof Error||(B=new Error(""+(B||"Unknown XMLHttpRequest Error"))),B.statusCode=0,r(B,A)}function s(){if(!l){var B;clearTimeout(w),n.useXDR&&o.status===void 0?B=200:B=o.status===1223?204:o.status;var Y=A,te=null;return B!==0?(Y={body:i(),statusCode:B,method:d,headers:{},url:h,rawRequest:o},o.getAllResponseHeaders&&(Y.headers=vc(o.getAllResponseHeaders()))):te=new Error("Internal XMLHttpRequest Error"),r(te,Y,Y.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new vt.XDomainRequest:o=new vt.XMLHttpRequest);var u,l,h=o.url=n.uri||n.url,d=o.method=n.method||"GET",p=n.body||n.data,y=o.headers=n.headers||{},b=!!n.sync,P=!1,w,A={body:void 0,headers:{},statusCode:0,method:d,url:h,rawRequest:o};if("json"in n&&n.json!==!1&&(P=!0,y.accept||y.Accept||(y.Accept="application/json"),d!=="GET"&&d!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),p=JSON.stringify(n.json===!0?p:n.json))),o.onreadystatechange=e,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=a,o.open(d,h,!b,n.username,n.password),b||(o.withCredentials=!!n.withCredentials),!b&&n.timeout>0&&(w=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var B=new Error("XMLHttpRequest timeout");B.code="ETIMEDOUT",a(B)}},n.timeout)),o.setRequestHeader)for(u in y)y.hasOwnProperty(u)&&o.setRequestHeader(u,y[u]);else if(n.headers&&!bc(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(p||null),o}function Sc(n){if(n.responseType==="document")return n.responseXML;var t=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";return n.responseType===""&&!t?n.responseXML:null}function xc(){}const _o=ct(_c);var To={exports:{}},qn=Object.create||function(){function n(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=t,new n}}();function Re(n,t){this.name="ParsingError",this.code=n.code,this.message=t||n.message}Re.prototype=qn(Error.prototype);Re.prototype.constructor=Re;Re.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Xn(n){function t(e,i,a,s){return(e|0)*3600+(i|0)*60+(a|0)+(s|0)/1e3}var r=n.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function Er(){this.values=qn(null)}Er.prototype={set:function(n,t){!this.get(n)&&t!==""&&(this.values[n]=t)},get:function(n,t,r){return r?this.has(n)?this.values[n]:t[r]:this.has(n)?this.values[n]:t},has:function(n){return n in this.values},alt:function(n,t,r){for(var e=0;e<r.length;++e)if(t===r[e]){this.set(n,t);break}},integer:function(n,t){/^-?\d+$/.test(t)&&this.set(n,parseInt(t,10))},percent:function(n,t){return t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(n,t),!0):!1}};function Sr(n,t,r,e){var i=e?n.split(e):[n];for(var a in i)if(typeof i[a]=="string"){var s=i[a].split(r);if(s.length===2){var o=s[0],u=s[1];t(o,u)}}}function Ec(n,t,r){var e=n;function i(){var o=Xn(n);if(o===null)throw new Re(Re.Errors.BadTimeStamp,"Malformed timestamp: "+e);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,u){var l=new Er;Sr(o,function(h,d){switch(h){case"region":for(var p=r.length-1;p>=0;p--)if(r[p].id===d){l.set(h,r[p].region);break}break;case"vertical":l.alt(h,d,["rl","lr"]);break;case"line":var y=d.split(","),b=y[0];l.integer(h,b),l.percent(h,b)&&l.set("snapToLines",!1),l.alt(h,b,["auto"]),y.length===2&&l.alt("lineAlign",y[1],["start","middle","end"]);break;case"position":y=d.split(","),l.percent(h,y[0]),y.length===2&&l.alt("positionAlign",y[1],["start","middle","end"]);break;case"size":l.percent(h,d);break;case"align":l.alt(h,d,["start","middle","end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical",""),u.line=l.get("line","auto"),u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align","middle"),u.position=l.get("position",{start:0,left:0,middle:50,end:100,right:100},u.align),u.positionAlign=l.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},u.align)}function s(){n=n.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),n.substr(0,3)!=="-->")throw new Re(Re.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+e);n=n.substr(3),s(),t.endTime=i(),s(),a(n,t)}var Cc={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},kc={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},wc={v:"title",lang:"lang"},fs={rt:"ruby"};function bo(n,t){function r(){if(!t)return null;function b(w){return t=t.substr(w.length),w}var P=t.match(/^([^<]*)(<[^>]*>?)?/);return b(P[1]?P[1]:P[2])}function e(b){return Cc[b]}function i(b){for(;y=b.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)b=b.replace(y[0],e);return b}function a(b,P){return!fs[P.localName]||fs[P.localName]===b.localName}function s(b,P){var w=kc[b];if(!w)return null;var A=n.document.createElement(w);A.localName=w;var B=wc[b];return B&&P&&(A[B]=P.trim()),A}for(var o=n.document.createElement("div"),u=o,l,h=[];(l=r())!==null;){if(l[0]==="<"){if(l[1]==="/"){h.length&&h[h.length-1]===l.substr(2).replace(">","")&&(h.pop(),u=u.parentNode);continue}var d=Xn(l.substr(1,l.length-2)),p;if(d){p=n.document.createProcessingInstruction("timestamp",d),u.appendChild(p);continue}var y=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y||(p=s(y[1],y[3]),!p)||!a(u,p))continue;y[2]&&(p.className=y[2].substr(1).replace("."," ")),h.push(y[1]),u.appendChild(p),u=p;continue}u.appendChild(n.document.createTextNode(i(l)))}return o}var ps=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ac(n){for(var t=0;t<ps.length;t++){var r=ps[t];if(n>=r[0]&&n<=r[1])return!0}return!1}function Pc(n){var t=[],r="",e;if(!n||!n.childNodes)return"ltr";function i(o,u){for(var l=u.childNodes.length-1;l>=0;l--)o.push(u.childNodes[l])}function a(o){if(!o||!o.length)return null;var u=o.pop(),l=u.textContent||u.innerText;if(l){var h=l.match(/^.*(\n|\r)/);return h?(o.length=0,h[0]):l}if(u.tagName==="ruby")return a(o);if(u.childNodes)return i(o,u),a(o)}for(i(t,n);r=a(t);)for(var s=0;s<r.length;s++)if(e=r.charCodeAt(s),Ac(e))return"rtl";return"ltr"}function Oc(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var t=n.track,r=t.textTrackList,e=0,i=0;i<r.length&&r[i]!==t;i++)r[i].mode==="showing"&&e++;return++e*-1}function wi(){}wi.prototype.applyStyles=function(n,t){t=t||this.div;for(var r in n)n.hasOwnProperty(r)&&(t.style[r]=n[r])};wi.prototype.formatStyle=function(n,t){return n===0?0:n+t};function fi(n,t,r){wi.call(this),this.cue=t,this.cueDiv=bo(n,t.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv),this.div=n.document.createElement("div"),e={direction:Pc(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(e),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size;break}t.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}fi.prototype=qn(wi.prototype);fi.prototype.constructor=fi;function we(n){var t,r,e,i;if(n.div){r=n.div.offsetHeight,e=n.div.offsetWidth,i=n.div.offsetTop;var a=(a=n.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();n=n.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,n.height/a.length):0}this.left=n.left,this.right=n.right,this.top=n.top||i,this.height=n.height||r,this.bottom=n.bottom||i+(n.height||r),this.width=n.width||e,this.lineHeight=t!==void 0?t:n.lineHeight}we.prototype.move=function(n,t){switch(t=t!==void 0?t:this.lineHeight,n){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}};we.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};we.prototype.overlapsAny=function(n){for(var t=0;t<n.length;t++)if(this.overlaps(n[t]))return!0;return!1};we.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};we.prototype.overlapsOppositeAxis=function(n,t){switch(t){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};we.prototype.intersectPercentage=function(n){var t=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),r=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),e=t*r;return e/(this.height*this.width)};we.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};we.getSimpleBoxPosition=function(n){var t=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,r=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,e=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var i={left:n.left,right:n.right,top:n.top||e,height:n.height||t,bottom:n.bottom||e+(n.height||t),width:n.width||r};return i};function Lc(n,t,r,e){function i(w,A){for(var B,Y=new we(w),te=1,le=0;le<A.length;le++){for(;w.overlapsOppositeAxis(r,A[le])||w.within(r)&&w.overlapsAny(e);)w.move(A[le]);if(w.within(r))return w;var q=w.intersectPercentage(r);te>q&&(B=new we(w),te=q),w=new we(Y)}return B||Y}var a=new we(t),s=t.cue,o=Oc(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width";break}var h=a.lineHeight,d=h*Math.round(o),p=r[l]+h,y=u[0];Math.abs(d)>p&&(d=d<0?-1:1,d*=Math.ceil(p/h)*h),o<0&&(d+=s.vertical===""?r.height:r.width,u=u.reverse()),a.move(y,d)}else{var b=a.lineHeight/r.height*100;switch(s.lineAlign){case"middle":o-=b/2;break;case"end":o-=b;break}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"],a=new we(t)}var P=i(a,u);t.move(P.toCSSCompatValues(r))}function nr(){}nr.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};nr.convertCueToDOMTree=function(n,t){return!n||!t?null:bo(n,t)};var Ic=.05,Rc="sans-serif",Dc="1.5%";nr.processCues=function(n,t,r){if(!n||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var e=n.document.createElement("div");e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=Dc,r.appendChild(e);function i(h){for(var d=0;d<h.length;d++)if(h[d].hasBeenReset||!h[d].displayState)return!0;return!1}if(!i(t)){for(var a=0;a<t.length;a++)e.appendChild(t[a].displayState);return}var s=[],o=we.getSimpleBoxPosition(e),u=Math.round(o.height*Ic*100)/100,l={font:u+"px "+Rc};(function(){for(var h,d,p=0;p<t.length;p++)d=t[p],h=new fi(n,d,l),e.appendChild(h.div),Lc(n,h,o,s),d.displayState=h.div,s.push(we.getSimpleBoxPosition(h))})()};nr.Parser=function(n,t,r){r||(r=t,t={}),t||(t={}),this.window=n,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};nr.Parser.prototype={reportOrThrowError:function(n){if(n instanceof Re)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var t=this;n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));function r(){for(var h=t.buffer,d=0;d<h.length&&h[d]!=="\r"&&h[d]!==`
`;)++d;var p=h.substr(0,d);return h[d]==="\r"&&++d,h[d]===`
`&&++d,t.buffer=h.substr(d),p}function e(h){var d=new Er;if(Sr(h,function(y,b){switch(y){case"id":d.set(y,b);break;case"width":d.percent(y,b);break;case"lines":d.integer(y,b);break;case"regionanchor":case"viewportanchor":var P=b.split(",");if(P.length!==2)break;var w=new Er;if(w.percent("x",P[0]),w.percent("y",P[1]),!w.has("x")||!w.has("y"))break;d.set(y+"X",w.get("x")),d.set(y+"Y",w.get("y"));break;case"scroll":d.alt(y,b,["up"]);break}},/=/,/\s/),d.has("id")){var p=new(t.vttjs.VTTRegion||t.window.VTTRegion);p.width=d.get("width",100),p.lines=d.get("lines",3),p.regionAnchorX=d.get("regionanchorX",0),p.regionAnchorY=d.get("regionanchorY",100),p.viewportAnchorX=d.get("viewportanchorX",0),p.viewportAnchorY=d.get("viewportanchorY",100),p.scroll=d.get("scroll",""),t.onregion&&t.onregion(p),t.regionList.push({id:d.get("id"),region:p})}}function i(h){var d=new Er;Sr(h,function(p,y){switch(p){case"MPEGT":d.integer(p+"S",y);break;case"LOCA":d.set(p+"L",Xn(y));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(h){h.match(/X-TIMESTAMP-MAP/)?Sr(h,function(d,p){switch(d){case"X-TIMESTAMP-MAP":i(p);break}},/=/):Sr(h,function(d,p){switch(d){case"Region":e(p);break}},/:/)}try{var s;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Re(Re.Errors.BadSignature);t.state="HEADER"}for(var u=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(u?u=!1:s=r(),t.state){case"HEADER":/:/.test(s)?a(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":try{Ec(s,t.cue,t.regionList)}catch(h){t.reportOrThrowError(h),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(u=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s;continue;case"BADCUE":s||(t.state="ID");continue}}}catch(h){t.reportOrThrowError(h),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new Re(Re.Errors.BadSignature)}catch(t){n.reportOrThrowError(t)}return n.onflush&&n.onflush(),this}};var Mc=nr,Fc="auto",Bc={"":1,lr:1,rl:1},Nc={start:1,middle:1,end:1,left:1,right:1};function Uc(n){if(typeof n!="string")return!1;var t=Bc[n.toLowerCase()];return t?n.toLowerCase():!1}function cn(n){if(typeof n!="string")return!1;var t=Nc[n.toLowerCase()];return t?n.toLowerCase():!1}function So(n,t,r){this.hasBeenReset=!1;var e="",i=!1,a=n,s=t,o=r,u=null,l="",h=!0,d="auto",p="start",y=50,b="middle",P=50,w="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(A){e=""+A}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(A){i=!!A}},startTime:{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number")throw new TypeError("Start time must be set to a number.");a=A,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(A){if(typeof A!="number")throw new TypeError("End time must be set to a number.");s=A,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(A){o=""+A,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(A){u=A,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(A){var B=Uc(A);if(B===!1)throw new SyntaxError("An invalid or illegal string was specified.");l=B,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(A){h=!!A,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(A){if(typeof A!="number"&&A!==Fc)throw new SyntaxError("An invalid number or illegal string was specified.");d=A,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(A){var B=cn(A);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");p=B,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return y},set:function(A){if(A<0||A>100)throw new Error("Position must be between 0 and 100.");y=A,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return b},set:function(A){var B=cn(A);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");b=B,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return P},set:function(A){if(A<0||A>100)throw new Error("Size must be between 0 and 100.");P=A,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return w},set:function(A){var B=cn(A);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");w=B,this.hasBeenReset=!0}}}),this.displayState=void 0}So.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var jc=So,$c={"":!0,up:!0};function Hc(n){if(typeof n!="string")return!1;var t=$c[n.toLowerCase()];return t?n.toLowerCase():!1}function mr(n){return typeof n=="number"&&n>=0&&n<=100}function Vc(){var n=100,t=3,r=0,e=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!mr(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return t},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");t=o}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(o){if(!mr(o))throw new Error("RegionAnchorX must be between 0 and 100.");e=o}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!mr(o))throw new Error("RegionAnchorY must be between 0 and 100.");r=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!mr(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!mr(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var u=Hc(o);if(u===!1)throw new SyntaxError("An invalid or illegal string was specified.");s=u}}})}var Wc=Vc,ut=Gn,Mt=To.exports={WebVTT:Mc,VTTCue:jc,VTTRegion:Wc};ut.vttjs=Mt;ut.WebVTT=Mt.WebVTT;var Gc=Mt.VTTCue,zc=Mt.VTTRegion,qc=ut.VTTCue,Xc=ut.VTTRegion;Mt.shim=function(){ut.VTTCue=Gc,ut.VTTRegion=zc};Mt.restore=function(){ut.VTTCue=qc,ut.VTTRegion=Xc};ut.VTTCue||Mt.shim();var Yc=To.exports;const ms=ct(Yc);var Kc=Qc;function Qc(n,t){var r,e=null;try{r=JSON.parse(n,t)}catch(i){e=i}return[e,r]}const Jc=ct(Kc);var xo={exports:{}};(function(n,t){(function(r){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,l,h){if(h=h||{},u=u.trim(),l=l.trim(),!l){if(!h.alwaysNormalize)return u;var d=o.parseURL(u);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var p=o.parseURL(l);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return h.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):l;var y=o.parseURL(u);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var b=i.exec(y.path);y.netLoc=b[1],y.path=b[2]}y.netLoc&&!y.path&&(y.path="/");var P={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(P.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)P.path=y.path,p.params||(P.params=y.params,p.query||(P.query=y.query));else{var w=y.path,A=w.substring(0,w.lastIndexOf("/")+1)+p.path;P.path=o.normalizePath(A)}return P.path===null&&(P.path=h.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(P)},parseURL:function(u){var l=e.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(a,"");u.length!==(u=u.replace(s,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};n.exports=o})()})(xo);var Zc=xo.exports;const pi=ct(Zc);var Ai=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},ed=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},Yn=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},Kn=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},Qn=function(){function n(){Ai(this,n),this.listeners={}}return n.prototype.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},n.prototype.off=function(r,e){if(!this.listeners[r])return!1;var i=this.listeners[r].indexOf(e);return this.listeners[r].splice(i,1),i>-1},n.prototype.trigger=function(r){var e=this.listeners[r],i=void 0,a=void 0,s=void 0;if(e)if(arguments.length===2)for(a=e.length,i=0;i<a;++i)e[i].call(this,arguments[1]);else for(s=Array.prototype.slice.call(arguments,1),a=e.length,i=0;i<a;++i)e[i].apply(this,s)},n.prototype.dispose=function(){this.listeners={}},n.prototype.pipe=function(r){this.on("data",function(e){r.push(e)})},n}(),td=function(n){Yn(t,n);function t(){Ai(this,t);var r=Kn(this,n.call(this));return r.buffer="",r}return t.prototype.push=function(e){var i=void 0;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)},t}(Qn),rd=function(){var t="[^=]*",r='"[^"]*"|[^,]*',e="(?:"+t+")=(?:"+r+")";return new RegExp("(?:^|,)("+e+")")},gr=function(t){for(var r=t.split(rd()),e={},i=r.length,a=void 0;i--;)r[i]!==""&&(a=/([^=]*)=(.*)/.exec(r[i]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),e[a[0]]=a[1]);return e},id=function(n){Yn(t,n);function t(){Ai(this,t);var r=Kn(this,n.call(this));return r.customParsers=[],r}return t.prototype.push=function(e){var i=void 0,a=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),e.length!==0){if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}for(var s=0;s<this.customParsers.length;s++)if(this.customParsers[s].call(this,e))return;if(e.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:e.slice(1)});return}if(e=e.replace("\r",""),i=/^#EXTM3U/.exec(e),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e),i){a={type:"tag",tagType:"inf"},i[1]&&(a.duration=parseFloat(i[1])),i[2]&&(a.title=i[2]),this.trigger("data",a);return}if(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"targetduration"},i[1]&&(a.duration=parseInt(i[1],10)),this.trigger("data",a);return}if(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"totalduration"},i[1]&&(a.duration=parseInt(i[1],10)),this.trigger("data",a);return}if(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"version"},i[1]&&(a.version=parseInt(i[1],10)),this.trigger("data",a);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"media-sequence"},i[1]&&(a.number=parseInt(i[1],10)),this.trigger("data",a);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(a.number=parseInt(i[1],10)),this.trigger("data",a);return}if(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e),i){a={type:"tag",tagType:"playlist-type"},i[1]&&(a.playlistType=i[1]),this.trigger("data",a);return}if(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e),i){a={type:"tag",tagType:"byterange"},i[1]&&(a.length=parseInt(i[1],10)),i[2]&&(a.offset=parseInt(i[2],10)),this.trigger("data",a);return}if(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e),i){a={type:"tag",tagType:"allow-cache"},i[1]&&(a.allowed=!/NO/.test(i[1])),this.trigger("data",a);return}if(i=/^#EXT-X-MAP:?(.*)$/.exec(e),i){if(a={type:"tag",tagType:"map"},i[1]){var o=gr(i[1]);if(o.URI&&(a.uri=o.URI),o.BYTERANGE){var u=o.BYTERANGE.split("@"),l=u[0],h=u[1];a.byterange={},l&&(a.byterange.length=parseInt(l,10)),h&&(a.byterange.offset=parseInt(h,10))}}this.trigger("data",a);return}if(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e),i){if(a={type:"tag",tagType:"stream-inf"},i[1]){if(a.attributes=gr(i[1]),a.attributes.RESOLUTION){var d=a.attributes.RESOLUTION.split("x"),p={};d[0]&&(p.width=parseInt(d[0],10)),d[1]&&(p.height=parseInt(d[1],10)),a.attributes.RESOLUTION=p}a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))}this.trigger("data",a);return}if(i=/^#EXT-X-MEDIA:?(.*)$/.exec(e),i){a={type:"tag",tagType:"media"},i[1]&&(a.attributes=gr(i[1])),this.trigger("data",a);return}if(i=/^#EXT-X-ENDLIST/.exec(e),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(e),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e),i){a={type:"tag",tagType:"program-date-time"},i[1]&&(a.dateTimeString=i[1],a.dateTimeObject=new Date(i[1])),this.trigger("data",a);return}if(i=/^#EXT-X-KEY:?(.*)$/.exec(e),i){a={type:"tag",tagType:"key"},i[1]&&(a.attributes=gr(i[1]),a.attributes.IV&&(a.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),this.trigger("data",a);return}if(i=/^#EXT-X-START:?(.*)$/.exec(e),i){a={type:"tag",tagType:"start"},i[1]&&(a.attributes=gr(i[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),this.trigger("data",a);return}if(i=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e),i){a={type:"tag",tagType:"cue-out-cont"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);return}if(i=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e),i){a={type:"tag",tagType:"cue-out"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);return}if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e),i){a={type:"tag",tagType:"cue-in"},i[1]?a.data=i[1]:a.data="",this.trigger("data",a);return}this.trigger("data",{type:"tag",data:e.slice(4)})}},t.prototype.addParser=function(e){var i=this,a=e.expression,s=e.customType,o=e.dataParser,u=e.segment;typeof o!="function"&&(o=function(h){return h}),this.customParsers.push(function(l){var h=a.exec(l);if(h)return i.trigger("data",{type:"custom",data:o(l),customType:s,segment:u}),!0})},t}(Qn),gs=function(n){Yn(t,n);function t(){Ai(this,t);var r=Kn(this,n.call(this));r.lineStream=new td,r.parseStream=new id,r.lineStream.pipe(r.parseStream);var e=r,i=[],a={},s=void 0,o=void 0,u=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;return r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},r.parseStream.on("data",function(d){var p=void 0,y=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=d.allowed,"allowed"in d||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var w={};"length"in d&&(a.byterange=w,w.length=d.length,"offset"in d||(this.trigger("info",{message:"defaulting offset to zero"}),d.offset=0)),"offset"in d&&(a.byterange=w,w.offset=d.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),d.duration>0&&(a.duration=d.duration),d.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key:function(){if(!d.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(d.attributes.METHOD==="NONE"){o=null;return}if(!d.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}d.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:d.attributes.METHOD||"AES-128",uri:d.attributes.URI},typeof d.attributes.IV<"u"&&(o.iv=d.attributes.IV)},"media-sequence":function(){if(!isFinite(d.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+d.number});return}this.manifest.mediaSequence=d.number},"discontinuity-sequence":function(){if(!isFinite(d.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+d.number});return}this.manifest.discontinuitySequence=d.number,h=d.number},"playlist-type":function(){if(!/VOD|EVENT/.test(d.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+d.playlist});return}this.manifest.playlistType=d.playlistType},map:function(){s={},d.uri&&(s.uri=d.uri),d.byterange&&(s.byterange=d.byterange)},"stream-inf":function(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||l,!d.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),ed(a.attributes,d.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(d.attributes&&d.attributes.TYPE&&d.attributes["GROUP-ID"]&&d.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var w=this.manifest.mediaGroups[d.attributes.TYPE];w[d.attributes["GROUP-ID"]]=w[d.attributes["GROUP-ID"]]||{},p=w[d.attributes["GROUP-ID"]],y={default:/yes/i.test(d.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(d.attributes.AUTOSELECT),d.attributes.LANGUAGE&&(y.language=d.attributes.LANGUAGE),d.attributes.URI&&(y.uri=d.attributes.URI),d.attributes["INSTREAM-ID"]&&(y.instreamId=d.attributes["INSTREAM-ID"]),d.attributes.CHARACTERISTICS&&(y.characteristics=d.attributes.CHARACTERISTICS),d.attributes.FORCED&&(y.forced=/yes/i.test(d.attributes.FORCED)),p[d.attributes.NAME]=y},discontinuity:function(){h+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=d.dateTimeString,this.manifest.dateTimeObject=d.dateTimeObject),a.dateTimeString=d.dateTimeString,a.dateTimeObject=d.dateTimeObject},targetduration:function(){if(!isFinite(d.duration)||d.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+d.duration});return}this.manifest.targetDuration=d.duration},totalduration:function(){if(!isFinite(d.duration)||d.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+d.duration});return}this.manifest.totalDuration=d.duration},start:function(){if(!d.attributes||isNaN(d.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:d.attributes["TIME-OFFSET"],precise:d.attributes.PRECISE}},"cue-out":function(){a.cueOut=d.data},"cue-out-cont":function(){a.cueOutCont=d.data},"cue-in":function(){a.cueIn=d.data}}[d.tagType]||u).call(e)},uri:function(){a.uri=d.uri,i.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),o&&(a.key=o),a.timeline=h,s&&(a.map=s),a={}},comment:function(){},custom:function(){d.segment?(a.custom=a.custom||{},a.custom[d.customType]=d.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[d.customType]=d.data)}})[d.type].call(e)}),r}return t.prototype.push=function(e){this.lineStream.push(e)},t.prototype.end=function(){this.lineStream.push(`
`)},t.prototype.addParser=function(e){this.parseStream.addParser(e)},t}(Qn);/**
 * mpd-parser
 * @version 0.6.1
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */var nd=function(t){var r,e=t.attributes,i=t.segments,a={attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:(e.type||"static")==="static",timeline:e.periodIndex,resolvedUri:"",targetDuration:e.duration,segments:i,mediaSequence:i.length?i[0].number:1};return e.contentProtection&&(a.contentProtection=e.contentProtection),a},ad=function(t){var r,e=t.attributes,i=t.segments;return typeof i>"u"&&(i=[{uri:e.baseUrl,timeline:e.periodIndex,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration),{attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:(e.type||"static")==="static",timeline:e.periodIndex,resolvedUri:e.baseUrl||"",targetDuration:e.duration,segments:i,mediaSequence:i.length?i[0].number:1}},sd=function(t){return t.reduce(function(r,e){var i=e.attributes.role&&e.attributes.role.value||"main",a=e.attributes.lang||"",s="main";return a&&(s=e.attributes.lang+" ("+i+")"),r[s]&&r[s].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth||(r[s]={language:a,autoselect:!0,default:i==="main",playlists:[nd(e)],uri:""}),r},{})},od=function(t){return t.reduce(function(r,e){var i=e.attributes.lang||"text";return r[i]||(r[i]={language:i,default:!1,autoselect:!1,playlists:[ad(e)],uri:""}),r},{})},ud=function(t){var r,e=t.attributes,i=t.segments,a={attributes:(r={NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:(e.type||"static")==="static",timeline:e.periodIndex,resolvedUri:"",targetDuration:e.duration,segments:i,mediaSequence:i.length?i[0].number:1};return e.contentProtection&&(a.contentProtection=e.contentProtection),a},ld=function(t){var r;if(!t.length)return{};var e=t[0].attributes,i=e.sourceDuration,a=e.minimumUpdatePeriod,s=a===void 0?0:a,o=function(P){var w=P.attributes;return w.mimeType==="video/mp4"||w.contentType==="video"},u=function(P){var w=P.attributes;return w.mimeType==="audio/mp4"||w.contentType==="audio"},l=function(P){var w=P.attributes;return w.mimeType==="text/vtt"||w.contentType==="text"},h=t.filter(o).map(ud),d=t.filter(u),p=t.filter(l),y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:i,playlists:h,minimumUpdatePeriod:s*1e3};return d.length&&(y.mediaGroups.AUDIO.audio=sd(d)),p.length&&(y.mediaGroups.SUBTITLES.subs=od(p)),y},cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vs=function(t){return!!t&&(typeof t>"u"?"undefined":cd(t))==="object"},Fe=function n(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.reduce(function(i,a){return Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):vs(i[s])&&vs(a[s])?i[s]=n(i[s],a[s]):i[s]=a[s]}),i},{})},Jn=function(t,r){return/^[a-z]+:/i.test(r)?r:(/\/\//i.test(t)||(t=pi.buildAbsoluteURL(k.location.href,t)),pi.buildAbsoluteURL(t,r))},wr=function(t){var r=t.baseUrl,e=r===void 0?"":r,i=t.source,a=i===void 0?"":i,s=t.range,o=s===void 0?"":s,u={uri:a,resolvedUri:Jn(e||"",a)};if(o){var l=o.split("-"),h=parseInt(l[0],10),d=parseInt(l[1],10);u.byterange={length:d-h,offset:h}}return u},dd=function(t,r,e){var i=t.NOW,a=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,u=o===void 0?1:o,l=t.start,h=l===void 0?0:l,d=t.minimumUpdatePeriod,p=d===void 0?0:d,y=(i+a)/1e3,b=s+h,P=y+p,w=P-b;return Math.ceil((w*u-r)/e)},Eo=function(t,r){for(var e=t.type,i=e===void 0?"static":e,a=t.minimumUpdatePeriod,s=a===void 0?0:a,o=t.media,u=o===void 0?"":o,l=t.sourceDuration,h=t.timescale,d=h===void 0?1:h,p=t.startNumber,y=p===void 0?1:p,b=t.periodIndex,P=[],w=-1,A=0;A<r.length;A++){var B=r[A],Y=B.d,te=B.r||0,le=B.t||0;w<0&&(w=le),le&&le>w&&(w=le);var q=void 0;if(te<0){var H=A+1;H===r.length?i==="dynamic"&&s>0&&u.indexOf("$Number$")>0?q=dd(t,w,Y):q=(l*d-w)/Y:q=(r[H].t-w)/Y}else q=te+1;for(var R=y+P.length+q,U=y+P.length;U<R;)P.push({number:U,duration:Y/d,time:w,timeline:b}),w+=Y,U++}return P},hd=function(t,r){for(var e=[],i=t;i<r;i++)e.push(i);return e},Pi=function(t){return t.reduce(function(r,e){return r.concat(e)},[])},Co=function(t){if(!t.length)return[];for(var r=[],e=0;e<t.length;e++)r.push(t[e]);return r},fd={static:function(t){var r=t.duration,e=t.timescale,i=e===void 0?1:e,a=t.sourceDuration;return{start:0,end:Math.ceil(a/(r/i))}},dynamic:function(t){var r=t.NOW,e=t.clientOffset,i=t.availabilityStartTime,a=t.timescale,s=a===void 0?1:a,o=t.duration,u=t.start,l=u===void 0?0:u,h=t.minimumUpdatePeriod,d=h===void 0?0:h,p=t.timeShiftBufferDepth,y=p===void 0?1/0:p,b=(r+e)/1e3,P=i+l,w=b+d,A=w-P,B=Math.ceil(A*s/o),Y=Math.floor((b-P-y)*s/o),te=Math.floor((b-P)*s/o);return{start:Math.max(0,Y),end:Math.min(B,te)}}},pd=function(t){return function(r,e){var i=t.duration,a=t.timescale,s=a===void 0?1:a,o=t.periodIndex,u=t.startNumber,l=u===void 0?1:u;return{number:l+r,duration:i/s,timeline:o,time:e*i}}},Zn=function(t){var r=t.type,e=r===void 0?"static":r,i=t.duration,a=t.timescale,s=a===void 0?1:a,o=t.sourceDuration,u=fd[e](t),l=u.start,h=u.end,d=hd(l,h).map(pd(t));if(e==="static"){var p=d.length-1;d[p].duration=o-i/s*p}return d},md=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,gd=function(t){return function(r,e,i,a){if(r==="$$")return"$";if(typeof t[e]>"u")return r;var s=""+t[e];return e==="RepresentationID"||(i?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},ys=function(t,r){return t.replace(md,gd(r))},vd=function(t,r){return!t.duration&&!r?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]:t.duration?Zn(t):Eo(t,r)},yd=function(t,r){var e={RepresentationID:t.id,Bandwidth:t.bandwidth||0},i=t.initialization,a=i===void 0?{sourceURL:"",range:""}:i,s=wr({baseUrl:t.baseUrl,source:ys(a.sourceURL,e),range:a.range}),o=vd(t,r);return o.map(function(u){e.Number=u.number,e.Time=u.time;var l=ys(t.media||"",e);return{uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:Jn(t.baseUrl||"",l),map:s,number:u.number}})},Kt={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},_d=function(t,r){var e=t.baseUrl,i=t.initialization,a=i===void 0?{}:i,s=wr({baseUrl:e,source:a.sourceURL,range:a.range}),o=wr({baseUrl:e,source:r.media,range:r.mediaRange});return o.map=s,o},Td=function(t,r){var e=t.duration,i=t.segmentUrls,a=i===void 0?[]:i;if(!e&&!r||e&&r)throw new Error(Kt.SEGMENT_TIME_UNSPECIFIED);var s=a.map(function(l){return _d(t,l)}),o=void 0;e&&(o=Zn(t)),r&&(o=Eo(t,r));var u=o.map(function(l,h){if(s[h]){var d=s[h];return d.timeline=l.timeline,d.duration=l.duration,d.number=l.number,d}}).filter(function(l){return l});return u},bd=function(t){var r=t.baseUrl,e=t.initialization,i=e===void 0?{}:e,a=t.sourceDuration,s=t.timescale,o=s===void 0?1:s,u=t.indexRange,l=u===void 0?"":u,h=t.duration;if(!r)throw new Error(Kt.NO_BASE_URL);var d=wr({baseUrl:r,source:i.sourceURL,range:i.range}),p=wr({baseUrl:r,source:r,range:l});if(p.map=d,h){var y=Zn(t);y.length&&(p.duration=y[0].duration,p.timeline=y[0].timeline)}else a&&(p.duration=a/o,p.timeline=0);return p.number=0,[p]},Sd=function(t){var r=t.attributes,e=t.segmentInfo,i=void 0,a=void 0;if(e.template?(a=yd,i=Fe(r,e.template)):e.base?(a=bd,i=Fe(r,e.base)):e.list&&(a=Td,i=Fe(r,e.list)),!a)return{attributes:r};var s=a(i,e.timeline);if(i.duration){var o=i,u=o.duration,l=o.timescale,h=l===void 0?1:l;i.duration=u/h}else s.length?i.duration=s.reduce(function(d,p){return Math.max(d,Math.ceil(p.duration))},0):i.duration=0;return{attributes:i,segments:s}},xd=function(t){return t.map(Sd)},_e=function(t,r){return Co(t.childNodes).filter(function(e){var i=e.tagName;return i===r})},ko=function(t){return t.textContent.trim()},vr=function(t){var r=31536e3,e=30*24*60*60,i=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(t);if(!u)return 0;var l=u.slice(1),h=l[0],d=l[1],p=l[2],y=l[3],b=l[4],P=l[5];return parseFloat(h||0)*r+parseFloat(d||0)*e+parseFloat(p||0)*i+parseFloat(y||0)*a+parseFloat(b||0)*s+parseFloat(P||0)},Ed=function(t){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return r.test(t)&&(t+="Z"),Date.parse(t)},_s={mediaPresentationDuration:function(t){return vr(t)},availabilityStartTime:function(t){return Ed(t)/1e3},minimumUpdatePeriod:function(t){return vr(t)},timeShiftBufferDepth:function(t){return vr(t)},start:function(t){return vr(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var r=parseInt(t,10);return isNaN(r)?vr(t):r},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Ce=function(t){return t&&t.attributes?Co(t.attributes).reduce(function(r,e){var i=_s[e.name]||_s.DEFAULT;return r[e.name]=i(e.value),r},{}):{}};function Cd(n){for(var t=k.atob(n),r=new Uint8Array(t.length),e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}var kd={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Oi=function(t,r){return r.length?Pi(t.map(function(e){return r.map(function(i){return Jn(e,ko(i))})})):t},ea=function(t){var r=_e(t,"SegmentTemplate")[0],e=_e(t,"SegmentList")[0],i=e&&_e(e,"SegmentURL").map(function(p){return Fe({tag:"SegmentURL"},Ce(p))}),a=_e(t,"SegmentBase")[0],s=e||r,o=s&&_e(s,"SegmentTimeline")[0],u=e||a||r,l=u&&_e(u,"Initialization")[0],h=r&&Ce(r);h&&l?h.initialization=l&&Ce(l):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});var d={template:h,timeline:o&&_e(o,"S").map(function(p){return Ce(p)}),list:e&&Fe(Ce(e),{segmentUrls:i,initialization:Ce(l)}),base:a&&Fe(Ce(a),{initialization:Ce(l)})};return Object.keys(d).forEach(function(p){d[p]||delete d[p]}),d},wd=function(t,r,e){return function(i){var a=_e(i,"BaseURL"),s=Oi(r,a),o=Fe(t,Ce(i)),u=ea(i);return s.map(function(l){return{segmentInfo:Fe(e,u),attributes:Fe(o,{baseUrl:l})}})}},Ad=function(t){return t.reduce(function(r,e){var i=Ce(e),a=kd[i.schemeIdUri];if(a){r[a]={attributes:i};var s=_e(e,"cenc:pssh")[0];if(s){var o=ko(s),u=o&&Cd(o);r[a].pssh=u}}return r},{})},Pd=function(t,r,e){return function(i){var a=Ce(i),s=Oi(r,_e(i,"BaseURL")),o=_e(i,"Role")[0],u={role:Ce(o)},l=Fe(t,a,u),h=Ad(_e(i,"ContentProtection"));Object.keys(h).length&&(l=Fe(l,{contentProtection:h}));var d=ea(i),p=_e(i,"Representation"),y=Fe(e,d);return Pi(p.map(wd(l,s,y)))}},Od=function(t,r){return function(e,i){var a=Oi(r,_e(e,"BaseURL")),s=Ce(e),o=Fe(t,s,{periodIndex:i}),u=_e(e,"AdaptationSet"),l=ea(e);return Pi(u.map(Pd(o,a,l)))}},Ld=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.manifestUri,i=e===void 0?"":e,a=r.NOW,s=a===void 0?Date.now():a,o=r.clientOffset,u=o===void 0?0:o,l=_e(t,"Period");if(l.length!==1)throw new Error(Kt.INVALID_NUMBER_OF_PERIOD);var h=Ce(t),d=Oi([i],_e(t,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=s,h.clientOffset=u,Pi(l.map(Od(h,d)))},wo=function(t){if(t==="")throw new Error(Kt.DASH_EMPTY_MANIFEST);var r=new k.DOMParser,e=r.parseFromString(t,"application/xml"),i=e&&e.documentElement.tagName==="MPD"?e.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Kt.DASH_INVALID_XML);return i},Id=function(t){var r=_e(t,"UTCTiming")[0];if(!r)return null;var e=Ce(r);switch(e.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":e.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":e.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":e.method="DIRECT",e.value=Date.parse(e.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Kt.UNSUPPORTED_UTC_TIMING_SCHEME)}return e},Rd=function(t,r){return ld(xd(Ld(wo(t),r)))},Dd=function(t){return Id(wo(t))},Md=function(n){return n>>>0},Fd={toUnsigned:Md},Gt=Fd.toUnsigned,yt,ta,Ao,Po;yt=function(n,t){var r=[],e,i,a,s,o;if(!t.length)return null;for(e=0;e<n.byteLength;)i=Gt(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]),a=ta(n.subarray(e+4,e+8)),s=i>1?e+i:n.byteLength,a===t[0]&&(t.length===1?r.push(n.subarray(e+8,s)):(o=yt(n.subarray(e+8,s),t.slice(1)),o.length&&(r=r.concat(o)))),e=s;return r};ta=function(n){var t="";return t+=String.fromCharCode(n[0]),t+=String.fromCharCode(n[1]),t+=String.fromCharCode(n[2]),t+=String.fromCharCode(n[3]),t};Ao=function(n){var t={},r=yt(n,["moov","trak"]);return r.reduce(function(e,i){var a,s,o,u,l;return a=yt(i,["tkhd"])[0],!a||(s=a[0],o=s===0?12:20,u=Gt(a[o]<<24|a[o+1]<<16|a[o+2]<<8|a[o+3]),l=yt(i,["mdia","mdhd"])[0],!l)?null:(s=l[0],o=s===0?12:20,e[u]=Gt(l[o]<<24|l[o+1]<<16|l[o+2]<<8|l[o+3]),e)},t)};Po=function(n,t){var r,e,i;return r=yt(t,["moof","traf"]),e=[].concat.apply([],r.map(function(a){return yt(a,["tfhd"]).map(function(s){var o,u,l;return o=Gt(s[4]<<24|s[5]<<16|s[6]<<8|s[7]),u=n[o]||9e4,l=yt(a,["tfdt"]).map(function(h){var d,p;return d=h[0],p=Gt(h[4]<<24|h[5]<<16|h[6]<<8|h[7]),d===1&&(p*=Math.pow(2,32),p+=Gt(h[8]<<24|h[9]<<16|h[10]<<8|h[11])),p})[0],l=l||1/0,l/u})})),i=Math.min.apply(null,e),isFinite(i)?i:0};var Bd={parseType:ta,timescale:Ao,startTime:Po};const Ts=ct(Bd);var Oo={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Li=function(){this.init=function(){var n={};this.on=function(t,r){n[t]||(n[t]=[]),n[t]=n[t].concat(r)},this.off=function(t,r){var e;return n[t]?(e=n[t].indexOf(r),n[t]=n[t].slice(),n[t].splice(e,1),e>-1):!1},this.trigger=function(t){var r,e,i,a;if(r=n[t],!!r)if(arguments.length===2)for(i=r.length,e=0;e<i;++e)r[e].call(this,arguments[1]);else{for(a=[],e=arguments.length,e=1;e<arguments.length;++e)a.push(arguments[e]);for(i=r.length,e=0;e<i;++e)r[e].apply(this,a)}},this.dispose=function(){n={}}}};Li.prototype.pipe=function(n){return this.on("data",function(t){n.push(t)}),this.on("done",function(t){n.flush(t)}),n};Li.prototype.push=function(n){this.trigger("data",n)};Li.prototype.flush=function(n){this.trigger("done",n)};var Nd=Li,Ud=Nd,jd=8589934592,$d=4294967296,Pn=function(n,t){var r=1;for(n>t&&(r=-1);Math.abs(t-n)>$d;)n+=r*jd;return n},ra=function(n){var t,r;ra.prototype.init.call(this),this.type_=n,this.push=function(e){e.type===this.type_&&(r===void 0&&(r=e.dts),e.dts=Pn(e.dts,r),e.pts=Pn(e.pts,r),t=e.dts,this.trigger("data",e))},this.flush=function(){r=t,this.trigger("done")},this.discontinuity=function(){r=void 0,t=void 0}};ra.prototype=new Ud;var Hd={TimestampRolloverStream:ra,handleRollover:Pn},dn=Oo,Lo=function(n){var t=n[1]&31;return t<<=8,t|=n[2],t},Ii=function(n){return!!(n[1]&64)},Ri=function(n){var t=0;return(n[3]&48)>>>4>1&&(t+=n[4]+1),t},Vd=function(n,t){var r=Lo(n);return r===0?"pat":r===t?"pmt":t?"pes":null},Wd=function(n){var t=Ii(n),r=4+Ri(n);return t&&(r+=n[r]+1),(n[r+10]&31)<<8|n[r+11]},Gd=function(n){var t={},r=Ii(n),e=4+Ri(n);if(r&&(e+=n[e]+1),!!(n[e+5]&1)){var i,a,s;i=(n[e+1]&15)<<8|n[e+2],a=3+i-4,s=(n[e+10]&15)<<8|n[e+11];for(var o=12+s;o<a;){var u=e+o;t[(n[u+1]&31)<<8|n[u+2]]=n[u],o+=((n[u+3]&15)<<8|n[u+4])+5}return t}},zd=function(n,t){var r=Lo(n),e=t[r];switch(e){case dn.H264_STREAM_TYPE:return"video";case dn.ADTS_STREAM_TYPE:return"audio";case dn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},qd=function(n){var t=Ii(n);if(!t)return null;var r=4+Ri(n);if(r>=n.byteLength)return null;var e=null,i;return i=n[r+7],i&192&&(e={},e.pts=(n[r+9]&14)<<27|(n[r+10]&255)<<20|(n[r+11]&254)<<12|(n[r+12]&255)<<5|(n[r+13]&254)>>>3,e.pts*=4,e.pts+=(n[r+13]&6)>>>1,e.dts=e.pts,i&64&&(e.dts=(n[r+14]&14)<<27|(n[r+15]&255)<<20|(n[r+16]&254)<<12|(n[r+17]&255)<<5|(n[r+18]&254)>>>3,e.dts*=4,e.dts+=(n[r+18]&6)>>>1)),e},hn=function(n){switch(n){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Xd=function(n){for(var t=4+Ri(n),r=n.subarray(t),e=0,i=0,a=!1,s;i<r.byteLength-3;i++)if(r[i+2]===1){e=i+5;break}for(;e<r.byteLength;)switch(r[e]){case 0:if(r[e-1]!==0){e+=2;break}else if(r[e-2]!==0){e++;break}i+3!==e-2&&(s=hn(r[i+3]&31),s==="slice_layer_without_partitioning_rbsp_idr"&&(a=!0));do e++;while(r[e]!==1&&e<r.length);i=e-2,e+=3;break;case 1:if(r[e-1]!==0||r[e-2]!==0){e+=3;break}s=hn(r[i+3]&31),s==="slice_layer_without_partitioning_rbsp_idr"&&(a=!0),i=e-2,e+=3;break;default:e+=3;break}return r=r.subarray(i),e-=i,i=0,r&&r.byteLength>3&&(s=hn(r[i+3]&31),s==="slice_layer_without_partitioning_rbsp_idr"&&(a=!0)),a},Yd={parseType:Vd,parsePat:Wd,parsePmt:Gd,parsePayloadUnitStartIndicator:Ii,parsePesType:zd,parsePesTime:qd,videoPacketContainsKeyFrame:Xd},Kd=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],bs=function(n){return n[0]<<21|n[1]<<14|n[2]<<7|n[3]},Qd=function(n,t,r){var e,i="";for(e=t;e<r;e++)i+="%"+("00"+n[e].toString(16)).slice(-2);return i},Jd=function(n,t,r){return unescape(Qd(n,t,r))},Zd=function(n,t){var r=n[t+6]<<21|n[t+7]<<14|n[t+8]<<7|n[t+9],e=n[t+5],i=(e&16)>>4;return i?r+20:r+10},eh=function(n,t){var r=(n[t+5]&224)>>5,e=n[t+4]<<3,i=n[t+3]&6144;return i|e|r},th=function(n,t){return n[t]===73&&n[t+1]===68&&n[t+2]===51?"timed-metadata":n[t]&!0&&(n[t+1]&240)===240?"audio":null},rh=function(n){for(var t=0;t+5<n.length;){if(n[t]!==255||(n[t+1]&246)!==240){t++;continue}return Kd[(n[t+2]&60)>>>2]}return null},ih=function(n){var t,r,e,i;t=10,n[5]&64&&(t+=4,t+=bs(n.subarray(10,14)));do{if(r=bs(n.subarray(t+4,t+8)),r<1)return null;if(i=String.fromCharCode(n[t],n[t+1],n[t+2],n[t+3]),i==="PRIV"){e=n.subarray(t+10,t+r+10);for(var a=0;a<e.byteLength;a++)if(e[a]===0){var s=Jd(e,0,a);if(s==="com.apple.streaming.transportStreamTimestamp"){var o=e.subarray(a+1),u=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return u*=4,u+=o[7]&3,u}break}}t+=10,t+=r}while(t<n.byteLength);return null},nh={parseId3TagSize:Zd,parseAdtsSize:eh,parseType:th,parseSampleRate:rh,parseAacTimestamp:ih},Ss=Oo,Ht=Hd.handleRollover,se={};se.ts=Yd;se.aac=nh;var kt=9e4,ke=188,Je=71,ah=function(n){return n[0]===73&&n[1]===68&&n[2]===51},sh=function(n,t){for(var r=0,e=ke,i,a;e<n.byteLength;){if(n[r]===Je&&n[e]===Je){switch(i=n.subarray(r,e),a=se.ts.parseType(i,t.pid),a){case"pat":t.pid||(t.pid=se.ts.parsePat(i));break;case"pmt":t.table||(t.table=se.ts.parsePmt(i));break}if(t.pid&&t.table)return;r+=ke,e+=ke;continue}r++,e++}},oh=function(n,t,r){for(var e=0,i=ke,a,s,o,u,l,h=!1;i<n.byteLength;){if(n[e]===Je&&n[i]===Je){switch(a=n.subarray(e,i),s=se.ts.parseType(a,t.pid),s){case"pes":o=se.ts.parsePesType(a,t.table),u=se.ts.parsePayloadUnitStartIndicator(a),o==="audio"&&u&&(l=se.ts.parsePesTime(a),l&&(l.type="audio",r.audio.push(l),h=!0));break}if(h)break;e+=ke,i+=ke;continue}e++,i++}for(i=n.byteLength,e=i-ke,h=!1;e>=0;){if(n[e]===Je&&n[i]===Je){switch(a=n.subarray(e,i),s=se.ts.parseType(a,t.pid),s){case"pes":o=se.ts.parsePesType(a,t.table),u=se.ts.parsePayloadUnitStartIndicator(a),o==="audio"&&u&&(l=se.ts.parsePesTime(a),l&&(l.type="audio",r.audio.push(l),h=!0));break}if(h)break;e-=ke,i-=ke;continue}e--,i--}},uh=function(n,t,r){for(var e=0,i=ke,a,s,o,u,l,h,d,p,y=!1,b={data:[],size:0};i<n.byteLength;){if(n[e]===Je&&n[i]===Je){switch(a=n.subarray(e,i),s=se.ts.parseType(a,t.pid),s){case"pes":if(o=se.ts.parsePesType(a,t.table),u=se.ts.parsePayloadUnitStartIndicator(a),o==="video"&&(u&&!y&&(l=se.ts.parsePesTime(a),l&&(l.type="video",r.video.push(l),y=!0)),!r.firstKeyFrame)){if(u&&b.size!==0){for(h=new Uint8Array(b.size),d=0;b.data.length;)p=b.data.shift(),h.set(p,d),d+=p.byteLength;se.ts.videoPacketContainsKeyFrame(h)&&(r.firstKeyFrame=se.ts.parsePesTime(h),r.firstKeyFrame.type="video"),b.size=0}b.data.push(a),b.size+=a.byteLength}break}if(y&&r.firstKeyFrame)break;e+=ke,i+=ke;continue}e++,i++}for(i=n.byteLength,e=i-ke,y=!1;e>=0;){if(n[e]===Je&&n[i]===Je){switch(a=n.subarray(e,i),s=se.ts.parseType(a,t.pid),s){case"pes":o=se.ts.parsePesType(a,t.table),u=se.ts.parsePayloadUnitStartIndicator(a),o==="video"&&u&&(l=se.ts.parsePesTime(a),l&&(l.type="video",r.video.push(l),y=!0));break}if(y)break;e-=ke,i-=ke;continue}e--,i--}},lh=function(n,t){if(n.audio&&n.audio.length){var r=t;typeof r>"u"&&(r=n.audio[0].dts),n.audio.forEach(function(a){a.dts=Ht(a.dts,r),a.pts=Ht(a.pts,r),a.dtsTime=a.dts/kt,a.ptsTime=a.pts/kt})}if(n.video&&n.video.length){var e=t;if(typeof e>"u"&&(e=n.video[0].dts),n.video.forEach(function(a){a.dts=Ht(a.dts,e),a.pts=Ht(a.pts,e),a.dtsTime=a.dts/kt,a.ptsTime=a.pts/kt}),n.firstKeyFrame){var i=n.firstKeyFrame;i.dts=Ht(i.dts,e),i.pts=Ht(i.pts,e),i.dtsTime=i.dts/kt,i.ptsTime=i.dts/kt}}},ch=function(n){for(var t=!1,r=0,e=null,i=null,a=0,s=0,o;n.length-s>=3;){var u=se.aac.parseType(n,s);switch(u){case"timed-metadata":if(n.length-s<10){t=!0;break}if(a=se.aac.parseId3TagSize(n,s),a>n.length){t=!0;break}i===null&&(o=n.subarray(s,s+a),i=se.aac.parseAacTimestamp(o)),s+=a;break;case"audio":if(n.length-s<7){t=!0;break}if(a=se.aac.parseAdtsSize(n,s),a>n.length){t=!0;break}e===null&&(o=n.subarray(s,s+a),e=se.aac.parseSampleRate(o)),r++,s+=a;break;default:s++;break}if(t)return null}if(e===null||i===null)return null;var l=kt/e,h={audio:[{type:"audio",dts:i,pts:i},{type:"audio",dts:i+r*1024*l,pts:i+r*1024*l}]};return h},dh=function(n){var t={pid:null,table:null},r={};sh(n,t);for(var e in t.table)if(t.table.hasOwnProperty(e)){var i=t.table[e];switch(i){case Ss.H264_STREAM_TYPE:r.video=[],uh(n,t,r),r.video.length===0&&delete r.video;break;case Ss.ADTS_STREAM_TYPE:r.audio=[],oh(n,t,r),r.audio.length===0&&delete r.audio;break}}return r},hh=function(n,t){var r=ah(n),e;return r?e=ch(n):e=dh(n),!e||!e.audio&&!e.video?null:(lh(e,t),e)},fh={inspect:hh};const ph=ct(fh);/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function mh(n){return n.subarray(0,n.byteLength-n[n.byteLength-1])}var Di=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},gh=function(){function n(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),vh=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},yh=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},_h=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],r=t[0],e=t[1],i=r[4],a=e[4],s=void 0,o=void 0,u=void 0,l=[],h=[],d=void 0,p=void 0,y=void 0,b=void 0,P=void 0,w=void 0;for(s=0;s<256;s++)h[(l[s]=s<<1^(s>>7)*283)^s]=s;for(o=u=0;!i[o];o^=d||1,u=h[u]||1)for(b=u^u<<1^u<<2^u<<3^u<<4,b=b>>8^b&255^99,i[o]=b,a[b]=o,y=l[p=l[d=l[o]]],w=y*16843009^p*65537^d*257^o*16843008,P=l[b]*257^b*16843008,s=0;s<4;s++)r[s][o]=P=P<<24^P>>>8,e[s][b]=w=w<<24^w>>>8;for(s=0;s<5;s++)r[s]=r[s].slice(0),e[s]=e[s].slice(0);return t},je=null,Th=function(){function n(t){Di(this,n),je||(je=_h()),this._tables=[[je[0][0].slice(),je[0][1].slice(),je[0][2].slice(),je[0][3].slice(),je[0][4].slice()],[je[1][0].slice(),je[1][1].slice(),je[1][2].slice(),je[1][3].slice(),je[1][4].slice()]];var r=void 0,e=void 0,i=void 0,a=void 0,s=void 0,o=this._tables[0][4],u=this._tables[1],l=t.length,h=1;if(l!==4&&l!==6&&l!==8)throw new Error("Invalid aes key size");for(a=t.slice(0),s=[],this._key=[a,s],r=l;r<4*l+28;r++)i=a[r-1],(r%l===0||l===8&&r%l===4)&&(i=o[i>>>24]<<24^o[i>>16&255]<<16^o[i>>8&255]<<8^o[i&255],r%l===0&&(i=i<<8^i>>>24^h<<24,h=h<<1^(h>>7)*283)),a[r]=a[r-l]^i;for(e=0;r;e++,r--)i=a[e&3?r:r-4],r<=4||e<4?s[e]=i:s[e]=u[0][o[i>>>24]]^u[1][o[i>>16&255]]^u[2][o[i>>8&255]]^u[3][o[i&255]]}return n.prototype.decrypt=function(r,e,i,a,s,o){var u=this._key[1],l=r^u[0],h=a^u[1],d=i^u[2],p=e^u[3],y=void 0,b=void 0,P=void 0,w=u.length/4-2,A=void 0,B=4,Y=this._tables[1],te=Y[0],le=Y[1],q=Y[2],H=Y[3],R=Y[4];for(A=0;A<w;A++)y=te[l>>>24]^le[h>>16&255]^q[d>>8&255]^H[p&255]^u[B],b=te[h>>>24]^le[d>>16&255]^q[p>>8&255]^H[l&255]^u[B+1],P=te[d>>>24]^le[p>>16&255]^q[l>>8&255]^H[h&255]^u[B+2],p=te[p>>>24]^le[l>>16&255]^q[h>>8&255]^H[d&255]^u[B+3],B+=4,l=y,h=b,d=P;for(A=0;A<4;A++)s[(3&-A)+o]=R[l>>>24]<<24^R[h>>16&255]<<16^R[d>>8&255]<<8^R[p&255]^u[B++],y=l,l=h,h=d,d=p,p=y},n}(),xs=function(){function n(){Di(this,n),this.listeners={}}return n.prototype.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},n.prototype.off=function(r,e){if(!this.listeners[r])return!1;var i=this.listeners[r].indexOf(e);return this.listeners[r].splice(i,1),i>-1},n.prototype.trigger=function(r){var e=this.listeners[r];if(e)if(arguments.length===2)for(var i=e.length,a=0;a<i;++a)e[a].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),o=e.length,u=0;u<o;++u)e[u].apply(this,s)},n.prototype.dispose=function(){this.listeners={}},n.prototype.pipe=function(r){this.on("data",function(e){r.push(e)})},n}(),Io=function(n){vh(t,n);function t(){Di(this,t);var r=yh(this,n.call(this,xs));return r.jobs=[],r.delay=1,r.timeout_=null,r}return t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(xs),He=function(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24},Ro=function(t,r,e){var i=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),a=new Th(Array.prototype.slice.call(r)),s=new Uint8Array(t.byteLength),o=new Int32Array(s.buffer),u=void 0,l=void 0,h=void 0,d=void 0,p=void 0,y=void 0,b=void 0,P=void 0,w=void 0;for(u=e[0],l=e[1],h=e[2],d=e[3],w=0;w<i.length;w+=4)p=He(i[w]),y=He(i[w+1]),b=He(i[w+2]),P=He(i[w+3]),a.decrypt(p,y,b,P,o,w),o[w]=He(o[w]^u),o[w+1]=He(o[w+1]^l),o[w+2]=He(o[w+2]^h),o[w+3]=He(o[w+3]^d),u=p,l=y,h=b,d=P;return s},bh=function(){function n(t,r,e,i){Di(this,n);var a=n.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new Io,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,e,o)),u=a;u<s.length;u+=a)e=new Uint32Array([He(s[u-4]),He(s[u-3]),He(s[u-2]),He(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,e,o));this.asyncStream_.push(function(){i(null,mh(o))})}return n.prototype.decryptChunk_=function(r,e,i,a){return function(){var s=Ro(r,e,i);a.set(s,r.byteOffset)}},gh(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}();/**
 * @license
 * Video.js 7.1.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */var Do="7.1.0",Ne=void 0,mi="info",Xe=[],Mi=function(t,r){var e=Ne.levels[mi],i=new RegExp("^("+e+")$");if(t!=="log"&&r.unshift(t.toUpperCase()+":"),Xe&&Xe.push([].concat(r)),r.unshift("VIDEOJS:"),!!k.console){var a=k.console[t];!a&&t==="debug"&&(a=k.console.info||k.console.log),!(!a||!e||!i.test(t))&&a[Array.isArray(r)?"apply":"call"](k.console,r)}};Ne=function(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];Mi("log",r)};Ne.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:mi};Ne.level=function(n){if(typeof n=="string"){if(!Ne.levels.hasOwnProperty(n))throw new Error('"'+n+'" in not a valid log level');mi=n}return mi};Ne.history=function(){return Xe?[].concat(Xe):[]};Ne.history.clear=function(){Xe&&(Xe.length=0)};Ne.history.disable=function(){Xe!==null&&(Xe.length=0,Xe=null)};Ne.history.enable=function(){Xe===null&&(Xe=[])};Ne.error=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return Mi("error",t)};Ne.warn=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return Mi("warn",t)};Ne.debug=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return Mi("debug",t)};var ie=Ne,Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},G=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},V=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},ia=function(n,t){return n.raw=t,n},Sh=Object.prototype.toString,Mo=function(t){return Tt(t)?Object.keys(t):[]};function zt(n,t){Mo(n).forEach(function(r){return t(n[r],r)})}function xh(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mo(n).reduce(function(e,i){return t(e,n[i],i)},r)}function pe(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return Object.assign?Object.assign.apply(Object,[n].concat(r)):(r.forEach(function(i){i&&zt(i,function(a,s){n[s]=a})}),n)}function Tt(n){return!!n&&(typeof n>"u"?"undefined":Ze(n))==="object"}function Ar(n){return Tt(n)&&Sh.call(n)==="[object Object]"&&n.constructor===Object}function On(n,t){if(!n||!t)return"";if(typeof k.getComputedStyle=="function"){var r=k.getComputedStyle(n);return r?r[t]:""}return""}var Eh=ia([`Setting attributes in the second argument of createEl()
                has been deprecated. Use the third argument instead.
                createEl(type, properties, attributes). Attempting to set `," to ","."],[`Setting attributes in the second argument of createEl()
                has been deprecated. Use the third argument instead.
                createEl(type, properties, attributes). Attempting to set `," to ","."]);function Es(n){return typeof n=="string"&&/\S/.test(n)}function Fo(n){if(/\s/.test(n))throw new Error("class has illegal whitespace characters")}function Ch(n){return new RegExp("(^|\\s)"+n+"($|\\s)")}function ar(){return j===k.document}function Br(n){return Tt(n)&&n.nodeType===1}function Bo(){try{return k.parent!==k.self}catch{return!0}}function No(n){return function(t,r){if(!Es(t))return j[n](null);Es(r)&&(r=j.querySelector(r));var e=Br(r)?r:j;return e[n]&&e[n](t)}}function Te(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=arguments[3],i=j.createElement(n);return Object.getOwnPropertyNames(t).forEach(function(a){var s=t[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(ie.warn(zn(Eh,a,s)),i.setAttribute(a,s)):a==="textContent"?Nr(i,s):i[a]=s}),Object.getOwnPropertyNames(r).forEach(function(a){i.setAttribute(a,r[a])}),e&&sa(i,e),i}function Nr(n,t){return typeof n.textContent>"u"?n.innerText=t:n.textContent=t,n}function gi(n,t){t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}function Qt(n,t){return Fo(t),n.classList?n.classList.contains(t):Ch(t).test(n.className)}function It(n,t){return n.classList?n.classList.add(t):Qt(n,t)||(n.className=(n.className+" "+t).trim()),n}function Ur(n,t){return n.classList?n.classList.remove(t):(Fo(t),n.className=n.className.split(/\s+/).filter(function(r){return r!==t}).join(" ")),n}function Uo(n,t,r){var e=Qt(n,t);if(typeof r=="function"&&(r=r(n,t)),typeof r!="boolean"&&(r=!e),r!==e)return r?It(n,t):Ur(n,t),n}function jo(n,t){Object.getOwnPropertyNames(t).forEach(function(r){var e=t[r];e===null||typeof e>"u"||e===!1?n.removeAttribute(r):n.setAttribute(r,e===!0?"":e)})}function at(n){var t={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(n&&n.attributes&&n.attributes.length>0)for(var e=n.attributes,i=e.length-1;i>=0;i--){var a=e[i].name,s=e[i].value;(typeof n[a]=="boolean"||r.indexOf(","+a+",")!==-1)&&(s=s!==null),t[a]=s}return t}function $o(n,t){return n.getAttribute(t)}function Pr(n,t,r){n.setAttribute(t,r)}function Fi(n,t){n.removeAttribute(t)}function Ho(){j.body.focus(),j.onselectstart=function(){return!1}}function Vo(){j.onselectstart=function(){return!0}}function Or(n){if(n&&n.getBoundingClientRect&&n.parentNode){var t=n.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(e){t[e]!==void 0&&(r[e]=t[e])}),r.height||(r.height=parseFloat(On(n,"height"))),r.width||(r.width=parseFloat(On(n,"width"))),r}}function Wo(n){var t=void 0;if(n.getBoundingClientRect&&n.parentNode&&(t=n.getBoundingClientRect()),!t)return{left:0,top:0};var r=j.documentElement,e=j.body,i=r.clientLeft||e.clientLeft||0,a=k.pageXOffset||e.scrollLeft,s=t.left+a-i,o=r.clientTop||e.clientTop||0,u=k.pageYOffset||e.scrollTop,l=t.top+u-o;return{left:Math.round(s),top:Math.round(l)}}function na(n,t){var r={},e=Wo(n),i=n.offsetWidth,a=n.offsetHeight,s=e.top,o=e.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-u+a)/a)),r.x=Math.max(0,Math.min(1,(l-o)/i)),r}function Go(n){return Tt(n)&&n.nodeType===3}function aa(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function zo(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(function(t){if(typeof t=="function"&&(t=t()),Br(t)||Go(t))return t;if(typeof t=="string"&&/\S/.test(t))return j.createTextNode(t)}).filter(function(t){return t})}function sa(n,t){return zo(t).forEach(function(r){return n.appendChild(r)}),n}function qo(n,t){return sa(aa(n),t)}function Jt(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0?!0:!(n.button!==0||n.buttons!==1)}var bt=No("querySelector"),Xo=No("querySelectorAll"),Yo=Object.freeze({isReal:ar,isEl:Br,isInFrame:Bo,createEl:Te,textContent:Nr,prependTo:gi,hasClass:Qt,addClass:It,removeClass:Ur,toggleClass:Uo,setAttributes:jo,getAttributes:at,getAttribute:$o,setAttribute:Pr,removeAttribute:Fi,blockTextSelection:Ho,unblockTextSelection:Vo,getBoundingClientRect:Or,findPosition:Wo,getPointerPosition:na,isTextNode:Go,emptyEl:aa,normalizeContent:zo,appendContent:sa,insertContent:qo,isSingleLeftClick:Jt,$:bt,$$:Xo}),kh=1;function Ft(){return kh++}var Cr={},Pt="vdata"+new Date().getTime();function Lr(n){var t=n[Pt];return t||(t=n[Pt]=Ft()),Cr[t]||(Cr[t]={}),Cr[t]}function Ko(n){var t=n[Pt];return t?!!Object.getOwnPropertyNames(Cr[t]).length:!1}function Qo(n){var t=n[Pt];if(t){delete Cr[t];try{delete n[Pt]}catch{n.removeAttribute?n.removeAttribute(Pt):n[Pt]=null}}}function Cs(n,t){var r=Lr(n);r.handlers[t].length===0&&(delete r.handlers[t],n.removeEventListener?n.removeEventListener(t,r.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),Object.getOwnPropertyNames(r).length===0&&Qo(n)}function oa(n,t,r,e){r.forEach(function(i){n(t,i,e)})}function Bi(n){function t(){return!0}function r(){return!1}if(!n||!n.isPropagationStopped){var e=n||k.event;n={};for(var i in e)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&(i==="returnValue"&&e.preventDefault||(n[i]=e[i]));if(n.target||(n.target=n.srcElement||j),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){e.preventDefault&&e.preventDefault(),n.returnValue=!1,e.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){e.stopPropagation&&e.stopPropagation(),n.cancelBubble=!0,e.cancelBubble=!0,n.isPropagationStopped=t},n.isPropagationStopped=r,n.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation(),n.isImmediatePropagationStopped=t,n.stopPropagation()},n.isImmediatePropagationStopped=r,n.clientX!==null&&n.clientX!==void 0){var a=j.documentElement,s=j.body;n.pageX=n.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n}var Jo=!1;(function(){try{var n=Object.defineProperty({},"passive",{get:function(){Jo=!0}});k.addEventListener("test",null,n),k.removeEventListener("test",null,n)}catch{}})();var wh=["touchstart","touchmove"];function Ye(n,t,r){if(Array.isArray(t))return oa(Ye,n,t,r);var e=Lr(n);if(e.handlers||(e.handlers={}),e.handlers[t]||(e.handlers[t]=[]),r.guid||(r.guid=Ft()),e.handlers[t].push(r),e.dispatcher||(e.disabled=!1,e.dispatcher=function(a,s){if(!e.disabled){a=Bi(a);var o=e.handlers[a.type];if(o)for(var u=o.slice(0),l=0,h=u.length;l<h&&!a.isImmediatePropagationStopped();l++)try{u[l].call(n,a,s)}catch(d){ie.error(d)}}}),e.handlers[t].length===1)if(n.addEventListener){var i=!1;Jo&&wh.indexOf(t)>-1&&(i={passive:!0}),n.addEventListener(t,e.dispatcher,i)}else n.attachEvent&&n.attachEvent("on"+t,e.dispatcher)}function Be(n,t,r){if(Ko(n)){var e=Lr(n);if(e.handlers){if(Array.isArray(t))return oa(Be,n,t,r);var i=function(l,h){e.handlers[h]=[],Cs(l,h)};if(t===void 0){for(var a in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},a)&&i(n,a);return}var s=e.handlers[t];if(s){if(!r){i(n,t);return}if(r.guid)for(var o=0;o<s.length;o++)s[o].guid===r.guid&&s.splice(o--,1);Cs(n,t)}}}}function sr(n,t,r){var e=Ko(n)?Lr(n):{},i=n.parentNode||n.ownerDocument;if(typeof t=="string"?t={type:t,target:n}:t.target||(t.target=n),t=Bi(t),e.dispatcher&&e.dispatcher.call(n,t,r),i&&!t.isPropagationStopped()&&t.bubbles===!0)sr.call(null,i,t,r);else if(!i&&!t.defaultPrevented){var a=Lr(t.target);t.target[t.type]&&(a.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function jr(n,t,r){if(Array.isArray(t))return oa(jr,n,t,r);var e=function i(){Be(n,t,i),r.apply(this,arguments)};e.guid=r.guid=r.guid||Ft(),Ye(n,t,e)}var Ah=Object.freeze({fixEvent:Bi,on:Ye,off:Be,trigger:sr,one:jr}),Ln=!1,In=void 0,Ph=function(){if(!(!ar()||In.options.autoSetup===!1)){var t=Array.prototype.slice.call(j.getElementsByTagName("video")),r=Array.prototype.slice.call(j.getElementsByTagName("audio")),e=Array.prototype.slice.call(j.getElementsByTagName("video-js")),i=t.concat(r,e);if(i&&i.length>0)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&In(o)}}else{Rn(1);break}}else Ln||Rn(1)}};function Rn(n,t){t&&(In=t),k.setTimeout(Ph,n)}ar()&&j.readyState==="complete"?Ln=!0:jr(k,"load",function(){Ln=!0});var Zo=function(t){var r=j.createElement("style");return r.className=t,r},eu=function(t,r){t.styleSheet?t.styleSheet.cssText=r:t.textContent=r},ee=function(t,r,e){r.guid||(r.guid=Ft());var i=function(){return r.apply(t,arguments)};return i.guid=e?e+"_"+r.guid:r.guid,i},Zt=function(t,r){var e=Date.now(),i=function(){var s=Date.now();s-e>=r&&(t.apply(void 0,arguments),e=s)};return i},Oh=function(t,r,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,a=void 0;return function(){var s=this,o=arguments,u=function(){a=null,u=null,t.apply(s,o)};!a&&e&&t.apply(s,o),i.clearTimeout(a),a=i.setTimeout(u,r)}},xe=function(){};xe.prototype.allowedEvents_={};xe.prototype.on=function(n,t){var r=this.addEventListener;this.addEventListener=function(){},Ye(this,n,t),this.addEventListener=r};xe.prototype.addEventListener=xe.prototype.on;xe.prototype.off=function(n,t){Be(this,n,t)};xe.prototype.removeEventListener=xe.prototype.off;xe.prototype.one=function(n,t){var r=this.addEventListener;this.addEventListener=function(){},jr(this,n,t),this.addEventListener=r};xe.prototype.trigger=function(n){var t=n.type||n;typeof n=="string"&&(n={type:t}),n=Bi(n),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](n),sr(this,n)};xe.prototype.dispatchEvent=xe.prototype.trigger;var Ni=function(t){return t instanceof xe||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(r){return typeof t[r]=="function"})},tu=function(t){return typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length},ua=function(t){if(!t.nodeName&&!Ni(t))throw new Error("Invalid target; must be a DOM node or evented object.")},ru=function(t){if(!tu(t))throw new Error("Invalid event type; must be a non-empty string or array.")},iu=function(t){if(typeof t!="function")throw new Error("Invalid listener; must be a function.")},ks=function(t,r){var e=r.length<3||r[0]===t||r[0]===t.eventBusEl_,i=void 0,a=void 0,s=void 0;return e?(i=t.eventBusEl_,r.length>=3&&r.shift(),a=r[0],s=r[1]):(i=r[0],a=r[1],s=r[2]),ua(i),ru(a),iu(s),s=ee(t,s),{isTargetingSelf:e,target:i,type:a,listener:s}},yr=function(t,r,e,i){ua(t),t.nodeName?Ah[r](t,e,i):t[r](e,i)},Lh={on:function(){for(var t=this,r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];var a=ks(this,e),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(yr(o,"on",u,l),!s){var h=function(){return t.off(o,u,l)};h.guid=l.guid;var d=function(){return t.off("dispose",h)};d.guid=l.guid,yr(this,"on","dispose",h),yr(o,"on","dispose",d)}},one:function(){for(var t=this,r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];var a=ks(this,e),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)yr(o,"one",u,l);else{var h=function d(){for(var p=arguments.length,y=Array(p),b=0;b<p;b++)y[b]=arguments[b];t.off(o,u,d),l.apply(null,y)};h.guid=l.guid,yr(o,"one",u,h)}},off:function(t,r,e){if(!t||tu(t))Be(this.eventBusEl_,t,r);else{var i=t,a=r;ua(i),ru(a),iu(e),e=ee(this,e),this.off("dispose",e),i.nodeName?(Be(i,a,e),Be(i,"dispose",e)):Ni(i)&&(i.off(a,e),i.off("dispose",e))}},trigger:function(t,r){return sr(this.eventBusEl_,t,r)}};function la(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.eventBusKey;if(r){if(!n[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');n.eventBusEl_=n[r]}else n.eventBusEl_=Te("span",{className:"vjs-event-bus"});return pe(n,Lh),n.on("dispose",function(){n.off(),k.setTimeout(function(){n.eventBusEl_=null},0)}),n}var Ih={state:{},setState:function(t){var r=this;typeof t=="function"&&(t=t());var e=void 0;return zt(t,function(i,a){r.state[a]!==i&&(e=e||{},e[a]={from:r.state[a],to:i}),r.state[a]=i}),e&&Ni(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function nu(n,t){return pe(n,Ih),n.state=pe({},n.state,t),typeof n.handleStateChanged=="function"&&Ni(n)&&n.on("statechanged",n.handleStateChanged),n}function fe(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}function Rh(n,t){return fe(n)===fe(t)}function ce(){for(var n={},t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.forEach(function(i){i&&zt(i,function(a,s){if(!Ar(a)){n[s]=a;return}Ar(n[s])||(n[s]={}),n[s]=ce(n[s],a)})}),n}var M=function(){function n(t,r,e){if($(this,n),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=ce({},this.options_),r=this.options_=ce(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+Ft()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.evented!==!1&&la(this,{eventBusKey:this.el_?"el_":null}),nu(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},r.initChildren!==!1&&this.initChildren(),this.ready(e),r.reportTouchActivity!==!1&&this.enableTouchActivity()}return n.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var r=this.children_.length-1;r>=0;r--)this.children_[r].dispose&&this.children_[r].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Qo(this.el_),this.el_=null),this.player_=null},n.prototype.player=function(){return this.player_},n.prototype.options=function(r){return ie.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),r?(this.options_=ce(this.options_,r),this.options_):this.options_},n.prototype.el=function(){return this.el_},n.prototype.createEl=function(r,e,i){return Te(r,e,i)},n.prototype.localize=function(r,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r,a=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),o=s&&s[a],u=a&&a.split("-")[0],l=s&&s[u],h=i;return o&&o[r]?h=o[r]:l&&l[r]&&(h=l[r]),e&&(h=h.replace(/\{(\d+)\}/g,function(d,p){var y=e[p-1],b=y;return typeof y>"u"&&(b=d),b})),h},n.prototype.contentEl=function(){return this.contentEl_||this.el_},n.prototype.id=function(){return this.id_},n.prototype.name=function(){return this.name_},n.prototype.children=function(){return this.children_},n.prototype.getChildById=function(r){return this.childIndex_[r]},n.prototype.getChild=function(r){if(r)return r=fe(r),this.childNameIndex_[r]},n.prototype.addChild=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.children_.length,a=void 0,s=void 0;if(typeof r=="string"){s=fe(r);var o=e.componentClass||s;e.name=s;var u=n.getComponent(o);if(!u)throw new Error("Component "+o+" does not exist");if(typeof u!="function")return null;a=new u(this.player_||this,e)}else a=r;if(this.children_.splice(i,0,a),typeof a.id=="function"&&(this.childIndex_[a.id()]=a),s=s||a.name&&fe(a.name()),s&&(this.childNameIndex_[s]=a),typeof a.el=="function"&&a.el()){var l=this.contentEl().children,h=l[i]||null;this.contentEl().insertBefore(a.el(),h)}return a},n.prototype.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var e=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===r){e=!0,this.children_.splice(i,1);break}if(e){this.childIndex_[r.id()]=null,this.childNameIndex_[r.name()]=null;var a=r.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},n.prototype.initChildren=function(){var r=this,e=this.options_.children;if(e){var i=this.options_,a=function(l){var h=l.name,d=l.opts;if(i[h]!==void 0&&(d=i[h]),d!==!1){d===!0&&(d={}),d.playerOptions=r.options_.playerOptions;var p=r.addChild(h,d);p&&(r[h]=p)}},s=void 0,o=n.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(u){return!s.some(function(l){return typeof l=="string"?u===l:u===l.name})})).map(function(u){var l=void 0,h=void 0;return typeof u=="string"?(l=u,h=e[l]||r.options_[l]||{}):(l=u.name,h=u),{name:l,opts:h}}).filter(function(u){var l=n.getComponent(u.opts.componentClass||fe(u.name));return l&&!o.isTech(l)}).forEach(a)}},n.prototype.buildCSSClass=function(){return""},n.prototype.ready=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}e?r.call(this):this.setTimeout(r,1)}},n.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},n.prototype.$=function(r,e){return bt(r,e||this.contentEl())},n.prototype.$$=function(r,e){return Xo(r,e||this.contentEl())},n.prototype.hasClass=function(r){return Qt(this.el_,r)},n.prototype.addClass=function(r){It(this.el_,r)},n.prototype.removeClass=function(r){Ur(this.el_,r)},n.prototype.toggleClass=function(r,e){Uo(this.el_,r,e)},n.prototype.show=function(){this.removeClass("vjs-hidden")},n.prototype.hide=function(){this.addClass("vjs-hidden")},n.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},n.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.prototype.getAttribute=function(r){return $o(this.el_,r)},n.prototype.setAttribute=function(r,e){Pr(this.el_,r,e)},n.prototype.removeAttribute=function(r){Fi(this.el_,r)},n.prototype.width=function(r,e){return this.dimension("width",r,e)},n.prototype.height=function(r,e){return this.dimension("height",r,e)},n.prototype.dimensions=function(r,e){this.width(r,!0),this.height(e)},n.prototype.dimension=function(r,e,i){if(e!==void 0){(e===null||e!==e)&&(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[r]=e:e==="auto"?this.el_.style[r]="":this.el_.style[r]=e+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[r],s=a.indexOf("px");return parseInt(s!==-1?a.slice(0,s):this.el_["offset"+fe(r)],10)},n.prototype.currentDimension=function(r){var e=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(typeof k.getComputedStyle=="function"){var i=k.getComputedStyle(this.el_);e=i.getPropertyValue(r)||i[r]}if(e=parseFloat(e),e===0){var a="offset"+fe(r);e=this.el_[a]}return e},n.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.prototype.currentWidth=function(){return this.currentDimension("width")},n.prototype.currentHeight=function(){return this.currentDimension("height")},n.prototype.focus=function(){this.el_.focus()},n.prototype.blur=function(){this.el_.blur()},n.prototype.emitTapEvents=function(){var r=0,e=null,i=10,a=200,s=void 0;this.on("touchstart",function(u){u.touches.length===1&&(e={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},r=new Date().getTime(),s=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)s=!1;else if(e){var l=u.touches[0].pageX-e.pageX,h=u.touches[0].pageY-e.pageY,d=Math.sqrt(l*l+h*h);d>i&&(s=!1)}});var o=function(){s=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(u){if(e=null,s===!0){var l=new Date().getTime()-r;l<a&&(u.preventDefault(),this.trigger("tap"))}})},n.prototype.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=ee(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)});var i=function(s){r(),this.clearInterval(e)};this.on("touchmove",r),this.on("touchend",i),this.on("touchcancel",i)}},n.prototype.setTimeout=function(r,e){var i=this,a,s;return r=ee(this,r),a=k.setTimeout(function(){i.off("dispose",s),r()},e),s=function(){return i.clearTimeout(a)},s.guid="vjs-timeout-"+a,this.on("dispose",s),a},n.prototype.clearTimeout=function(r){k.clearTimeout(r);var e=function(){};return e.guid="vjs-timeout-"+r,this.off("dispose",e),r},n.prototype.setInterval=function(r,e){var i=this;r=ee(this,r);var a=k.setInterval(r,e),s=function(){return i.clearInterval(a)};return s.guid="vjs-interval-"+a,this.on("dispose",s),a},n.prototype.clearInterval=function(r){k.clearInterval(r);var e=function(){};return e.guid="vjs-interval-"+r,this.off("dispose",e),r},n.prototype.requestAnimationFrame=function(r){var e=this,i,a;return this.supportsRaf_?(r=ee(this,r),i=k.requestAnimationFrame(function(){e.off("dispose",a),r()}),a=function(){return e.cancelAnimationFrame(i)},a.guid="vjs-raf-"+i,this.on("dispose",a),i):this.setTimeout(r,1e3/60)},n.prototype.cancelAnimationFrame=function(r){if(this.supportsRaf_){k.cancelAnimationFrame(r);var e=function(){};return e.guid="vjs-raf-"+r,this.off("dispose",e),r}return this.clearTimeout(r)},n.registerComponent=function(r,e){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var i=n.getComponent("Tech"),a=i&&i.isTech(e),s=n===e||n.prototype.isPrototypeOf(e.prototype);if(a||!s){var o=void 0;throw a?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+o+".")}r=fe(r),n.components_||(n.components_={});var u=n.getComponent("Player");if(r==="Player"&&u&&u.players){var l=u.players,h=Object.keys(l);if(l&&h.length>0&&h.map(function(d){return l[d]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return n.components_[r]=e,e},n.getComponent=function(r){if(r&&(r=fe(r),n.components_&&n.components_[r]))return n.components_[r]},n}();M.prototype.supportsRaf_=typeof k.requestAnimationFrame=="function"&&typeof k.cancelAnimationFrame=="function";M.registerComponent("Component",M);var Se=k.navigator&&k.navigator.userAgent||"",ws=/AppleWebKit\/([\d.]+)/i.exec(Se),Dh=ws?parseFloat(ws.pop()):null,ca=/iPad/i.test(Se),da=/iPhone/i.test(Se)&&!ca,au=/iPod/i.test(Se),dt=da||ca||au,Mh=function(){var n=Se.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),Bt=/Android/i.test(Se),ha=function(){var n=Se.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!n)return null;var t=n[1]&&parseFloat(n[1]),r=n[2]&&parseFloat(n[2]);return t&&r?parseFloat(n[1]+"."+n[2]):t||null}(),su=Bt&&ha<5&&Dh<537,ou=/Firefox/i.test(Se),fa=/Edge/i.test(Se),St=!fa&&(/Chrome/i.test(Se)||/CriOS/i.test(Se)),uu=function(){var n=Se.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),lu=function(){var n=/MSIE\s(\d+)\.\d/.exec(Se),t=n&&parseFloat(n[1]);return!t&&/Trident\/7.0/i.test(Se)&&/rv:11.0/.test(Se)&&(t=11),t}(),cu=/Safari/i.test(Se)&&!St&&!Bt&&!fa,du=(cu||dt)&&!St,vi=ar()&&("ontouchstart"in k||k.navigator.maxTouchPoints||k.DocumentTouch&&k.document instanceof k.DocumentTouch),Fh=Object.freeze({IS_IPAD:ca,IS_IPHONE:da,IS_IPOD:au,IS_IOS:dt,IOS_VERSION:Mh,IS_ANDROID:Bt,ANDROID_VERSION:ha,IS_NATIVE_ANDROID:su,IS_FIREFOX:ou,IS_EDGE:fa,IS_CHROME:St,CHROME_VERSION:uu,IE_VERSION:lu,IS_SAFARI:cu,IS_ANY_SAFARI:du,TOUCH_ENABLED:vi});function Bh(n,t,r){if(typeof t!="number"||t<0||t>r)throw new Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}function As(n,t,r,e){return Bh(n,e,r.length-1),r[e][t]}function fn(n){return n===void 0||n.length===0?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:n.length,start:As.bind(null,"start",0,n),end:As.bind(null,"end",1,n)}}function Rt(n,t){return Array.isArray(n)?fn(n):n===void 0||t===void 0?fn():fn([[n,t]])}function hu(n,t){var r=0,e=void 0,i=void 0;if(!t)return 0;(!n||!n.length)&&(n=Rt(0,0));for(var a=0;a<n.length;a++)e=n.start(a),i=n.end(a),i>t&&(i=t),r+=i-e;return r/t}var yi={},li=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Nh=li[0],ci=void 0;for(var ni=0;ni<li.length;ni++)if(li[ni][1]in j){ci=li[ni];break}if(ci)for(var ai=0;ai<ci.length;ai++)yi[Nh[ai]]=ci[ai];function Ae(n){if(n instanceof Ae)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:Tt(n)&&(typeof n.code=="number"&&(this.code=n.code),pe(this,n)),this.message||(this.message=Ae.defaultMessages[this.code]||"")}Ae.prototype.code=0;Ae.prototype.message="";Ae.prototype.status=null;Ae.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ae.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Vt=0;Vt<Ae.errorTypes.length;Vt++)Ae[Ae.errorTypes[Vt]]=Vt,Ae.prototype[Ae.errorTypes[Vt]]=Vt;function fu(n){return n!=null&&typeof n.then=="function"}function qt(n){fu(n)&&n.then(null,function(t){})}var Dn=function(t){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,i,a){return t[i]&&(e[i]=t[i]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return r},Uh=function(t){var r=t.$$("track"),e=Array.prototype.map.call(r,function(a){return a.track}),i=Array.prototype.map.call(r,function(a){var s=Dn(a.track);return a.src&&(s.src=a.src),s});return i.concat(Array.prototype.filter.call(t.textTracks(),function(a){return e.indexOf(a)===-1}).map(Dn))},jh=function(t,r){return t.forEach(function(e){var i=r.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(a){return i.addCue(a)})}),r.textTracks()},Ps={textTracksToJson:Uh,jsonToTextTracks:jh,trackToJson_:Dn},pn="vjs-modal-dialog",$h=27,or=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=Te("div",{className:pn+"-content"},{role:"document"}),i.descEl_=Te("p",{className:pn+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Nr(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return pn+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===$h&&this.closeable()&&this.close()},t.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",ee(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.prototype.opened=function(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",ee(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.prototype.closeable=function(e){if(typeof e=="boolean"){var i=this.closeable_=!!e,a=this.getChild("closeButton");if(i&&!a){var s=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(a,"close",this.close)}!i&&a&&(this.off(a,"close",this.close),this.removeChild(a),a.dispose())}return this.closeable_},t.prototype.fill=function(){this.fillWith(this.content())},t.prototype.fillWith=function(e){var i=this.contentEl(),a=i.parentNode,s=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(i),this.empty(),qo(i,e),this.trigger("modalfill"),s?a.insertBefore(i,s):a.appendChild(i);var o=this.getChild("closeButton");o&&a.appendChild(o.el_)},t.prototype.empty=function(){this.trigger("beforemodalempty"),aa(this.contentEl()),this.trigger("modalempty")},t.prototype.content=function(e){return typeof e<"u"&&(this.content_=e),this.content_},t.prototype.conditionalFocus_=function(){var e=j.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(j,"keydown",this.handleKeyDown))},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(j,"keydown",this.handleKeyDown)},t.prototype.handleKeyDown=function(e){if(e.which===9){for(var i=this.focusableEls_(),a=this.el_.querySelector(":focus"),s=void 0,o=0;o<i.length;o++)if(a===i[o]){s=o;break}j.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===i.length-1&&(i[0].focus(),e.preventDefault())}},t.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(i){return(i instanceof k.HTMLAnchorElement||i instanceof k.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof k.HTMLInputElement||i instanceof k.HTMLSelectElement||i instanceof k.HTMLTextAreaElement||i instanceof k.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof k.HTMLIFrameElement||i instanceof k.HTMLObjectElement||i instanceof k.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable")})},t}(M);or.prototype.options_={pauseOnOpen:!0,temporary:!0};M.registerComponent("ModalDialog",or);var er=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];$(this,t);var e=V(this,n.call(this));e.tracks_=[],Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<r.length;i++)e.addTrack(r[i]);return e}return t.prototype.addTrack=function(e){var i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack=function(e){for(var i=void 0,a=0,s=this.length;a<s;a++)if(this[a]===e){i=this[a],i.off&&i.off(),this.tracks_.splice(a,1);break}i&&this.trigger({track:i,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var i=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===e){i=o;break}}return i},t}(xe);er.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Hh in er.prototype.allowedEvents_)er.prototype["on"+Hh]=null;var mn=function(t,r){for(var e=0;e<t.length;e++)!Object.keys(t[e]).length||r.id===t[e].id||(t[e].enabled=!1)},Vh=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];$(this,t);for(var e=r.length-1;e>=0;e--)if(r[e].enabled){mn(r,r[e]);break}var i=V(this,n.call(this,r));return i.changing_=!1,i}return t.prototype.addTrack=function(e){var i=this;e.enabled&&mn(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,mn(i,e),i.changing_=!1,i.trigger("change"))})},t}(er),gn=function(t,r){for(var e=0;e<t.length;e++)!Object.keys(t[e]).length||r.id===t[e].id||(t[e].selected=!1)},Wh=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];$(this,t);for(var e=r.length-1;e>=0;e--)if(r[e].selected){gn(r,r[e]);break}var i=V(this,n.call(this,r));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var s=0;s<this.length;s++)if(this[s].selected)return s;return-1},set:function(){}}),i}return t.prototype.addTrack=function(e){var i=this;e.selected&&gn(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,gn(i,e),i.changing_=!1,i.trigger("change"))})},t}(er),pu=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.addTrack=function(e){n.prototype.addTrack.call(this,e),e.addEventListener("modechange",ee(this,function(){this.trigger("change")}));var i=["metadata","chapters"];i.indexOf(e.kind)===-1&&e.addEventListener("modechange",ee(this,function(){this.trigger("selectedlanguagechange")}))},t}(er),Gh=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];$(this,n),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,e=t.length;r<e;r++)this.addTrackElement_(t[r])}return n.prototype.addTrackElement_=function(r){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},n.prototype.getTrackElementByTrack_=function(r){for(var e=void 0,i=0,a=this.trackElements_.length;i<a;i++)if(r===this.trackElements_[i].track){e=this.trackElements_[i];break}return e},n.prototype.removeTrackElement_=function(r){for(var e=0,i=this.trackElements_.length;e<i;e++)if(r===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},n}(),Os=function(){function n(t){$(this,n),n.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return n.prototype.setCues_=function(r){var e=this.length||0,i=0,a=r.length;this.cues_=r,this.length_=r.length;var s=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(e<a)for(i=e;i<a;i++)s.call(this,i)},n.prototype.getCueById=function(r){for(var e=null,i=0,a=this.length;i<a;i++){var s=this[i];if(s.id===r){e=s;break}}return e},n}(),zh={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},qh={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Xh={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ls={disabled:"disabled",hidden:"hidden",showing:"showing"},pa=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t);var e=V(this,n.call(this)),i={id:r.id||"vjs_track_"+Ft(),kind:r.kind||"",label:r.label||"",language:r.language||""},a=function(u){Object.defineProperty(e,u,{get:function(){return i[u]},set:function(){}})};for(var s in i)a(s);return e}return t}(xe),ma=function(t){var r=["protocol","hostname","port","pathname","search","hash","host"],e=j.createElement("a");e.href=t;var i=e.host===""&&e.protocol!=="file:",a=void 0;i&&(a=j.createElement("div"),a.innerHTML='<a href="'+t+'"></a>',e=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),j.body.appendChild(a));for(var s={},o=0;o<r.length;o++)s[r[o]]=e[r[o]];return s.protocol==="http:"&&(s.host=s.host.replace(/:80$/,"")),s.protocol==="https:"&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=k.location.protocol),i&&j.body.removeChild(a),s},mu=function(t){if(!t.match(/^https?:\/\//)){var r=j.createElement("div");r.innerHTML='<a href="'+t+'">x</a>',t=r.firstChild.href}return t},ga=function(t){if(typeof t=="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,e=r.exec(t);if(e)return e.pop().toLowerCase()}return""},Ui=function(t){var r=k.location,e=ma(t),i=e.protocol===":"?r.protocol:e.protocol,a=i+e.host!==r.protocol+r.host;return a},Yh=Object.freeze({parseUrl:ma,getAbsoluteURL:mu,getFileExtension:ga,isCrossOrigin:Ui}),Is=function(t,r){var e=new k.WebVTT.Parser(k,k.vttjs,k.WebVTT.StringDecoder()),i=[];e.oncue=function(a){r.addCue(a)},e.onparsingerror=function(a){i.push(a)},e.onflush=function(){r.trigger({type:"loadeddata",target:r})},e.parse(t),i.length>0&&(k.console&&k.console.groupCollapsed&&k.console.groupCollapsed("Text Track parsing errors for "+r.src),i.forEach(function(a){return ie.error(a)}),k.console&&k.console.groupEnd&&k.console.groupEnd()),e.flush()},Kh=function(t,r){var e={uri:t},i=Ui(t);i&&(e.cors=i),_o(e,ee(this,function(a,s,o){if(a)return ie.error(a,s);if(r.loaded_=!0,typeof k.WebVTT!="function"){if(r.tech_){var u=function(){return Is(o,r)};r.tech_.on("vttjsloaded",u),r.tech_.on("vttjserror",function(){ie.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",u)})}}else Is(o,r)}))},$r=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if($(this,t),!r.tech)throw new Error("A tech was not provided.");var e=ce(r,{kind:Xh[r.kind]||"subtitles",language:r.language||r.srclang||""}),i=Ls[e.mode]||"disabled",a=e.default;(e.kind==="metadata"||e.kind==="chapters")&&(i="hidden");var s=V(this,n.call(this,e));s.tech_=e.tech,s.cues_=[],s.activeCues_=[];var o=new Os(s.cues_),u=new Os(s.activeCues_),l=!1,h=ee(s,function(){this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return i!=="disabled"&&s.tech_.ready(function(){s.tech_.on("timeupdate",h)},!0),Object.defineProperties(s,{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(p){var y=this;Ls[p]&&(i=p,i==="showing"&&this.tech_.ready(function(){y.tech_.on("timeupdate",h)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var p=this.tech_.currentTime(),y=[],b=0,P=this.cues.length;b<P;b++){var w=this.cues[b];(w.startTime<=p&&w.endTime>=p||w.startTime===w.endTime&&w.startTime<=p&&w.startTime+.5>=p)&&y.push(w)}if(l=!1,y.length!==this.activeCues_.length)l=!0;else for(var A=0;A<y.length;A++)this.activeCues_.indexOf(y[A])===-1&&(l=!0);return this.activeCues_=y,u.setCues_(this.activeCues_),u},set:function(){}}}),e.src?(s.src=e.src,Kh(e.src,s)):s.loaded_=!0,s}return t.prototype.addCue=function(e){var i=e;if(k.vttjs&&!(e instanceof k.vttjs.VTTCue)){i=new k.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var a in e)a in i||(i[a]=e[a]);i.id=e.id,i.originalCue_=e}for(var s=this.tech_.textTracks(),o=0;o<s.length;o++)s[o]!==this&&s[o].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var i=this.cues_.length;i--;){var a=this.cues_[i];if(a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}},t}(pa);$r.prototype.allowedEvents_={cuechange:"cuechange"};var gu=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t);var e=ce(r,{kind:qh[r.kind]||""}),i=V(this,n.call(this,e)),a=!1;return Object.defineProperty(i,"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),e.enabled&&(i.enabled=e.enabled),i.loaded_=!0,i}return t}(pa),vu=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t);var e=ce(r,{kind:zh[r.kind]||""}),i=V(this,n.call(this,e)),a=!1;return Object.defineProperty(i,"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),e.selected&&(i.selected=e.selected),i}return t}(pa),yu=0,Qh=1,_u=2,Jh=3,ur=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t);var e=V(this,n.call(this)),i=void 0,a=new $r(r);return e.kind=a.kind,e.src=a.src,e.srclang=a.language,e.label=a.label,e.default=a.default,Object.defineProperties(e,{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=yu,a.addEventListener("loadeddata",function(){i=_u,e.trigger({type:"load",target:e})}),e}return t}(xe);ur.prototype.allowedEvents_={load:"load"};ur.NONE=yu;ur.LOADING=Qh;ur.LOADED=_u;ur.ERROR=Jh;var Ve={audio:{ListClass:Vh,TrackClass:gu,capitalName:"Audio"},video:{ListClass:Wh,TrackClass:vu,capitalName:"Video"},text:{ListClass:pu,TrackClass:$r,capitalName:"Text"}};Object.keys(Ve).forEach(function(n){Ve[n].getterName=n+"Tracks",Ve[n].privateName=n+"Tracks_"});var Ir={remoteText:{ListClass:pu,TrackClass:$r,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Gh,TrackClass:ur,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Me=ce(Ve,Ir);Ir.names=Object.keys(Ir);Ve.names=Object.keys(Ve);Me.names=[].concat(Ir.names).concat(Ve.names);function Zh(n,t,r,e){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=n.textTracks();i.kind=t,r&&(i.label=r),e&&(i.language=e),i.tech=n;var s=new Me.text.TrackClass(i);return a.addTrack(s),s}var ue=function(n){G(t,n);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};$(this,t),r.reportTouchActivity=!1;var i=V(this,n.call(this,null,r,e));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),Me.names.forEach(function(a){var s=Me[a];r&&r[s.getterName]&&(i[s.privateName]=r[s.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){r["native"+a+"Tracks"]===!1&&(i["featuresNative"+a+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?i.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Me.text.ListClass,i.initTrackListeners(),r.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return t.prototype.triggerSourceset=function(e){var i=this;this.isReady_||this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ee(this,function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return Rt(0,0)},t.prototype.bufferedPercent=function(){return hu(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(Ve.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var i=this;e=[].concat(e),e.forEach(function(a){for(var s=i[a+"Tracks"]()||[],o=s.length;o--;){var u=s[o];a==="text"&&i.removeRemoteTextTrack(u),s.removeTrack(u)}})},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],i=e.length;i--;){var a=e[i];this.removeRemoteTextTrack(a)}},t.prototype.reset=function(){},t.prototype.error=function(e){return e!==void 0&&(this.error_=new Ae(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?Rt(0,0):Rt()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTrackListeners=function(){var e=this;Ve.names.forEach(function(i){var a=Ve[i],s=function(){e.trigger(i+"trackchange")},o=e[a.getterName]();o.addEventListener("removetrack",s),o.addEventListener("addtrack",s),e.on("dispose",function(){o.removeEventListener("removetrack",s),o.removeEventListener("addtrack",s)})})},t.prototype.addWebVttScript_=function(){var e=this;if(!k.WebVTT)if(j.body.contains(this.el())){if(!this.options_["vtt.js"]&&Ar(ms)&&Object.keys(ms).length>0){this.trigger("vttjsloaded");return}var i=j.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=function(){e.trigger("vttjsloaded")},i.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){i.onload=null,i.onerror=null}),k.WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,i=this.textTracks(),a=this.remoteTextTracks(),s=function(d){return i.addTrack(d.track)},o=function(d){return i.removeTrack(d.track)};a.on("addtrack",s),a.on("removetrack",o),this.addWebVttScript_();var u=function(){return e.trigger("texttrackchange")},l=function(){u();for(var d=0;d<i.length;d++){var p=i[d];p.removeEventListener("cuechange",u),p.mode==="showing"&&p.addEventListener("cuechange",u)}};l(),i.addEventListener("change",l),i.addEventListener("addtrack",l),i.addEventListener("removetrack",l),this.on("dispose",function(){a.off("addtrack",s),a.off("removetrack",o),i.removeEventListener("change",l),i.removeEventListener("addtrack",l),i.removeEventListener("removetrack",l);for(var h=0;h<i.length;h++){var d=i[h];d.removeEventListener("cuechange",u)}})},t.prototype.addTextTrack=function(e,i,a){if(!e)throw new Error("TextTrack kind is required but was not provided");return Zh(this,e,i,a)},t.prototype.createRemoteTextTrack=function(e){var i=ce(e,{tech:this});return new Ir.remoteTextEl.TrackClass(i)},t.prototype.addRemoteTextTrack=function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments[1],s=this.createRemoteTextTrack(i);return a!==!0&&a!==!1&&(ie.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),a!==!0&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(s.track)}),s},t.prototype.removeRemoteTextTrack=function(e){var i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.overrideNativeAudioTracks=function(){},t.prototype.overrideNativeVideoTracks=function(){},t.prototype.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=fe(e),t.techs_[e]=i,e!=="Tech"&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e){if(e=fe(e),t.techs_&&t.techs_[e])return t.techs_[e];if(k&&k.videojs&&k.videojs[e])return ie.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),k.videojs[e]}},t}(M);Me.names.forEach(function(n){var t=Me[n];ue.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});ue.prototype.featuresVolumeControl=!0;ue.prototype.featuresMuteControl=!0;ue.prototype.featuresFullscreenResize=!1;ue.prototype.featuresPlaybackRate=!1;ue.prototype.featuresProgressEvents=!1;ue.prototype.featuresSourceset=!1;ue.prototype.featuresTimeupdateEvents=!1;ue.prototype.featuresNativeTextTracks=!1;ue.withSourceHandlers=function(n){n.registerSourceHandler=function(r,e){var i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),e===void 0&&(e=i.length),i.splice(e,0,r)},n.canPlayType=function(r){for(var e=n.sourceHandlers||[],i=void 0,a=0;a<e.length;a++)if(i=e[a].canPlayType(r),i)return i;return""},n.selectSourceHandler=function(r,e){for(var i=n.sourceHandlers||[],a=void 0,s=0;s<i.length;s++)if(a=i[s].canHandleSource(r,e),a)return i[s];return null},n.canPlaySource=function(r,e){var i=n.selectSourceHandler(r,e);return i?i.canHandleSource(r,e):""};var t=["seekable","seeking","duration"];t.forEach(function(r){var e=this[r];typeof e=="function"&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(r){var e=n.selectSourceHandler(r,this.options_);e||(n.nativeSourceHandler?e=n.nativeSourceHandler:ie.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),e!==n.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=e.handleSource(r,this,this.options_),this.on("dispose",this.disposeSourceHandler)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};M.registerComponent("Tech",ue);ue.registerTech("Tech",ue);ue.defaultTechOrder_=[];var Dt={},Mn={},_i={};function ef(n,t){Dt[n]=Dt[n]||[],Dt[n].push(t)}function tf(n,t,r){n.setTimeout(function(){return wt(t,Dt[t.type],r,n)},1)}function rf(n,t){n.forEach(function(r){return r.setTech&&r.setTech(t)})}function nf(n,t,r){return n.reduceRight(va(r),t[r]())}function af(n,t,r,e){return t[r](n.reduce(va(r),e))}function Rs(n,t,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i="call"+fe(r),a=n.reduce(va(i),e),s=a===_i,o=s?null:t[r](a);return uf(n,r,o,s),o}var sf={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},of={setCurrentTime:1},Ds={play:1,pause:1};function va(n){return function(t,r){return t===_i?_i:r[n]?r[n](t):t}}function uf(n,t,r,e){for(var i=n.length-1;i>=0;i--){var a=n[i];a[t]&&a[t](e,r)}}function lf(n){Mn[n.id()]=null}function cf(n,t){var r=Mn[n.id()],e=null;if(r==null)return e=t(n),Mn[n.id()]=[[t,e]],e;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1];s===t&&(e=o)}return e===null&&(e=t(n),r.push([t,e])),e}function wt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments[2],e=arguments[3],i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,s=t[0],o=t.slice(1);if(typeof s=="string")wt(n,Dt[s],r,e,i,a);else if(s){var u=cf(e,s);if(!u.setSource)return i.push(u),wt(n,o,r,e,i,a);u.setSource(pe({},n),function(l,h){if(l)return wt(n,o,r,e,i,a);i.push(u),wt(h,n.type===h.type?o:Dt[h.type],r,e,i,a)})}else o.length?wt(n,o,r,e,i,a):a?r(n,i):wt(n,Dt["*"],r,e,i,!0)}var df={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Tu=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=ga(t),e=df[r.toLowerCase()];return e||""},hf=function(t,r){if(!r)return"";if(t.cache_.source.src===r&&t.cache_.source.type)return t.cache_.source.type;var e=t.cache_.sources.filter(function(o){return o.src===r});if(e.length)return e[0].type;for(var i=t.$$("source"),a=0;a<i.length;a++){var s=i[a];if(s.type&&s.src&&s.src===r)return s.type}return Tu(r)},ff=function n(t){if(Array.isArray(t)){var r=[];t.forEach(function(e){e=n(e),Array.isArray(e)?r=r.concat(e):Tt(e)&&r.push(e)}),t=r}else typeof t=="string"&&t.trim()?t=[Ms({src:t})]:Tt(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[Ms(t)]:t=[];return t};function Ms(n){var t=Tu(n.src);return!n.type&&t&&(n.type=t),n}var pf=function(n){G(t,n);function t(r,e,i){$(this,t);var a=ce({createEl:!1},e),s=V(this,n.call(this,r,a,i));if(!e.playerOptions.sources||e.playerOptions.sources.length===0)for(var o=0,u=e.playerOptions.techOrder;o<u.length;o++){var l=fe(u[o]),h=ue.getTech(l);if(l||(h=M.getComponent(l)),h&&h.isSupported()){r.loadTech_(l);break}}else r.src(e.playerOptions.sources);return s}return t}(M);M.registerComponent("MediaLoader",pf);var ji=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.emitTapEvents(),i.enable(),i}return t.prototype.createEl=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i=pe({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&ie.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),a=pe({role:"button"},a),this.tabIndex_=i.tabIndex;var s=n.prototype.createEl.call(this,e,i,a);return this.createControlTextEl(s),s},t.prototype.dispose=function(){this.controlTextEl_=null,n.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=Te("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.el();if(e===void 0)return this.controlText_||"Need Text";var a=this.localize(e);this.controlText_=e,Nr(this.controlTextEl_,a),this.nonIconControl||i.setAttribute("title",a)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){Ye(j,"keydown",ee(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){e.which===32||e.which===13?(e.preventDefault(),this.trigger("click")):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,e)},t.prototype.handleBlur=function(e){Be(j,"keydown",ee(this,this.handleKeyPress))},t}(M);M.registerComponent("ClickableComponent",ji);var mf=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.update(),r.on("posterchange",ee(i,i.update)),i}return t.prototype.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=Te("div",{className:"vjs-poster",tabIndex:-1});return e},t.prototype.update=function(e){var i=this.player().poster();this.setSrc(i),i?this.show():this.hide()},t.prototype.setSrc=function(e){var i="";e&&(i='url("'+e+'")'),this.el_.style.backgroundImage=i},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?qt(this.player_.play()):this.player_.pause())},t}(ji);M.registerComponent("PosterImage",mf);var $e="#222",Fs="#ccc",gf={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function vn(n,t){var r=void 0;if(n.length===4)r=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)r=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function yn(n,t,r){try{n.style[t]=r}catch{return}}var vf=function(n){G(t,n);function t(r,e,i){$(this,t);var a=V(this,n.call(this,r,e,i));return r.on("loadstart",ee(a,a.toggleDisplay)),r.on("texttrackchange",ee(a,a.updateDisplay)),r.on("loadstart",ee(a,a.preselectTrack)),r.ready(ee(a,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",ee(this,this.updateDisplay));for(var s=this.options_.playerOptions.tracks||[],o=0;o<s.length;o++)this.player_.addRemoteTextTrack(s[o],!0);this.preselectTrack()})),a}return t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=void 0,o=void 0,u=void 0,l=0;l<i.length;l++){var h=i[l];a&&a.enabled&&a.language===h.language?h.kind===a.kind?u=h:u||(u=h):a&&!a.enabled?(u=null,s=null,o=null):h.default&&(h.kind==="descriptions"&&!s?s=h:h.kind in e&&!o&&(o=h))}u?u.mode="showing":o?o.mode="showing":s&&(s.mode="showing")},t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){typeof k.WebVTT=="function"&&k.WebVTT.processCues(k,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var i=null,a=null,s=e.length;s--;){var o=e[s];o.mode==="showing"&&(o.kind==="descriptions"?i=o:a=o)}a?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))},t.prototype.updateForTrack=function(e){if(!(typeof k.WebVTT!="function"||!e.activeCues)){for(var i=[],a=0;a<e.activeCues.length;a++)i.push(e.activeCues[a]);if(k.WebVTT.processCues(k,i,this.el_),!!this.player_.textTrackSettings)for(var s=this.player_.textTrackSettings.getValues(),o=i.length;o--;){var u=i[o];if(u){var l=u.displayState;if(s.color&&(l.firstChild.style.color=s.color),s.textOpacity&&yn(l.firstChild,"color",vn(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(l.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&yn(l.firstChild,"backgroundColor",vn(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?yn(l,"backgroundColor",vn(s.windowColor,s.windowOpacity)):l.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+$e+", 2px 2px 4px "+$e+", 2px 2px 5px "+$e:s.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+$e+", 2px 2px "+$e+", 3px 3px "+$e:s.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+Fs+", 0 1px "+Fs+", -1px -1px "+$e+", 0 -1px "+$e:s.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+$e+", 0 0 4px "+$e+", 0 0 4px "+$e+", 0 0 4px "+$e)),s.fontPercent&&s.fontPercent!==1){var h=k.parseFloat(l.style.fontSize);l.style.fontSize=h*s.fontPercent+"px",l.style.height="auto",l.style.top="auto",l.style.bottom="2px"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=gf[s.fontFamily])}}}},t}(M);M.registerComponent("TextTrackDisplay",vf);var yf=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){var e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),a=Te("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),s=n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(a),s},t}(M);M.registerComponent("LoadingSpinner",yf);var st=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e="button",i=pe({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i),a=pe({type:"button"},a);var s=M.prototype.createEl.call(this,e,i,a);return this.createControlTextEl(s),s},t.prototype.addChild=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.constructor.name;return ie.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),M.prototype.addChild.call(this,e,i)},t.prototype.enable=function(){n.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){n.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(e){e.which===32||e.which===13||n.prototype.handleKeyPress.call(this,e)},t}(ji);M.registerComponent("Button",st);var bu=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var i=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){qt(i);return}var a=this.player_.getChild("controlBar"),s=a&&a.getChild("playToggle");if(!s){this.player_.focus();return}var o=function(){return s.focus()};fu(i)?i.then(o,function(){}):this.setTimeout(o,1)},t.prototype.handleKeyPress=function(e){this.mouseused_=!1,n.prototype.handleKeyPress.call(this,e)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(st);bu.prototype.controlText_="Play Video";M.registerComponent("BigPlayButton",bu);var _f=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.controlText(e&&e.controlText||i.localize("Close")),i}return t.prototype.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(st);M.registerComponent("CloseButton",_f);var Su=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"play",i.handlePlay),i.on(r,"pause",i.handlePause),i.on(r,"ended",i.handleEnded),i}return t.prototype.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(st);Su.prototype.controlText_="Play";M.registerComponent("PlayToggle",Su);var xu=function(t,r){t=t<0?0:t;var e=Math.floor(t%60),i=Math.floor(t/60%60),a=Math.floor(t/3600),s=Math.floor(r/60%60),o=Math.floor(r/3600);return(isNaN(t)||t===1/0)&&(a=i=e="-"),a=a>0||o>0?a+":":"",i=((a||s>=10)&&i<10?"0"+i:i)+":",e=e<10?"0"+e:e,a+i+e},ya=xu;function Tf(n){ya=n}function bf(){ya=xu}function tr(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return ya(n,t)}var lr=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.throttledUpdateContent=Zt(ee(i,i.updateContent),25),i.on(r,"timeupdate",i.throttledUpdateContent),i}return t.prototype.createEl=function(e){var i=this.buildCSSClass(),a=n.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=Te("span",{className:i+"-display"},{"aria-live":"off"}),this.updateTextNode_(),a.appendChild(this.contentEl_),a},t.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=j.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(e){return tr(e)},t.prototype.updateFormattedTime_=function(e){var i=this.formatTime_(e);i!==this.formattedTime_&&(this.formattedTime_=i,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(e){},t}(M);lr.prototype.labelText_="Time";lr.prototype.controlText_="Time";M.registerComponent("TimeDisplay",lr);var _a=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"ended",i.handleEnded),i}return t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(e){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(i)},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(lr);_a.prototype.labelText_="Current Time";_a.prototype.controlText_="Current Time";M.registerComponent("CurrentTimeDisplay",_a);var Ta=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"durationchange",i.updateContent),i.on(r,"loadedmetadata",i.throttledUpdateContent),i}return t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(e){var i=this.player_.duration();i&&this.duration_!==i&&(this.duration_=i,this.updateFormattedTime_(i))},t}(lr);Ta.prototype.labelText_="Duration";Ta.prototype.controlText_="Duration";M.registerComponent("DurationDisplay",Ta);var Sf=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(M);M.registerComponent("TimeDivider",Sf);var ba=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"durationchange",i.throttledUpdateContent),i.on(r,"ended",i.handleEnded),i}return t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(e){return"-"+n.prototype.formatTime_.call(this,e)},t.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(lr);ba.prototype.labelText_="Remaining Time";ba.prototype.controlText_="Remaining Time";M.registerComponent("RemainingTimeDisplay",ba);var xf=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return t.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Te("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.prototype.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(M);M.registerComponent("LiveDisplay",xf);var Sa=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.prototype.createEl=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.className=i.className+" vjs-slider",i=pe({tabIndex:0},i),a=pe({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),n.prototype.createEl.call(this,e,i,a)},t.prototype.handleMouseDown=function(e){var i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!St&&e.preventDefault(),Ho(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchmove",this.handleMouseMove),this.on(i,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Vo(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),i=this.bar;if(i){(typeof e!="number"||e!==e||e<0||e===1/0)&&(e=0);var a=(e*100).toFixed(2)+"%",s=i.el().style;return this.vertical()?s.height=a:s.width=a,e}}},t.prototype.calculateDistance=function(e){var i=na(this.el_,e);return this.vertical()?i.y:i.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){e.which===37||e.which===40?(e.preventDefault(),this.stepBack()):(e.which===38||e.which===39)&&(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(M);M.registerComponent("Slider",Sa);var Ef=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.partEls_=[],i.on(r,"progress",i.update),i}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.dispose=function(){this.partEls_=null,n.prototype.dispose.call(this)},t.prototype.update=function(e){var i=this.player_.buffered(),a=this.player_.duration(),s=this.player_.bufferedEnd(),o=this.partEls_,u=function(P,w){var A=P/w||0;return(A>=1?1:A)*100+"%"};this.el_.style.width=u(s,a);for(var l=0;l<i.length;l++){var h=i.start(l),d=i.end(l),p=o[l];p||(p=this.el_.appendChild(Te()),o[l]=p),p.style.left=u(h,s),p.style.width=u(d-h,s)}for(var y=o.length;y>i.length;y--)this.el_.removeChild(o[y-1]);o.length=i.length},t}(M);M.registerComponent("LoadProgressBar",Ef);var Cf=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,i,a){var s=Or(this.el_),o=Or(this.player_.el()),u=e.width*i;if(!(!o||!s)){var l=e.left-o.left+u,h=e.width-u+(o.right-e.right),d=s.width/2;l<d?d+=d-l:h<d&&(d=h),d<0?d=0:d>s.width&&(d=s.width),this.el_.style.right="-"+d+"px",Nr(this.el_,a)}},t}(M);M.registerComponent("TimeTooltip",Cf);var xa=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(e,i){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var s=a.player_.scrubbing()?a.player_.getCache().currentTime:a.player_.currentTime(),o=tr(s,a.player_.duration()),u=a.getChild("timeTooltip");u&&u.update(e,i,o)})},t}(M);xa.prototype.options_={children:[]};!dt&&!Bt&&xa.prototype.options_.children.push("timeTooltip");M.registerComponent("PlayProgressBar",xa);var Eu=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.update=Zt(ee(i,i.update),25),i}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(e,i){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var s=a.player_.duration(),o=tr(i*s,s);a.el_.style.left=e.width*i+"px",a.getChild("timeTooltip").update(e,i,o)})},t}(M);Eu.prototype.options_={children:["timeTooltip"]};M.registerComponent("MouseTimeDisplay",Eu);var Bs=5,Ns=30,$i=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.setEventHandlers_(),i}return t.prototype.setEventHandlers_=function(){var e=this;this.update=Zt(ee(this,this.update),Ns),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},Ns)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,i){var a=this.player_.duration();this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[tr(e,a),tr(a,a)],"{1} of {2}")),this.bar.update(Or(this.el_),i)},t.prototype.update=function(e){var i=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},t.prototype.handleMouseDown=function(e){Jt(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,e))},t.prototype.handleMouseMove=function(e){if(Jt(e)){var i=this.calculateDistance(e)*this.player_.duration();i===this.player_.duration()&&(i=i-.1),this.player_.currentTime(i)}},t.prototype.enable=function(){n.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.prototype.disable=function(){n.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.prototype.handleMouseUp=function(e){n.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&qt(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+Bs)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-Bs)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(e){e.which===32||e.which===13?(e.preventDefault(),this.handleAction(e)):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,e)},t}(Sa);$i.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!dt&&!Bt&&$i.prototype.options_.children.splice(1,0,"mouseTimeDisplay");$i.prototype.playerEvent="timeupdate";M.registerComponent("SeekBar",$i);var Cu=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.handleMouseMove=Zt(ee(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=Zt(ee(i,i.handleMouseSeek),25),i.enable(),i}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(e){var i=this.getChild("seekBar");if(i){var a=i.getChild("mouseTimeDisplay"),s=i.el(),o=Or(s),u=na(s,e).x;u>1?u=1:u<0&&(u=0),a&&a.update(o,u)}},t.prototype.handleMouseSeek=function(e){var i=this.getChild("seekBar");i&&i.handleMouseMove(e)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.prototype.handleMouseDown=function(e){var i=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var i=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseUp(e),this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},t}(M);Cu.prototype.options_={children:["seekBar"]};M.registerComponent("ProgressControl",Cu);var ku=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"fullscreenchange",i.handleFullscreenChange),j[yi.fullscreenEnabled]===!1&&i.disable(),i}return t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(st);ku.prototype.controlText_="Fullscreen";M.registerComponent("FullscreenToggle",ku);var kf=function(t,r){r.tech_&&!r.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},wf=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(M);M.registerComponent("VolumeLevel",wf);var Ea=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on("slideractive",i.updateLastVolume_),i.on(r,"volumechange",i.updateARIAAttributes),r.ready(function(){return i.updateARIAAttributes()}),i}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(e){Jt(e)&&n.prototype.handleMouseDown.call(this,e)},t.prototype.handleMouseMove=function(e){Jt(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.prototype.updateLastVolume_=function(){var e=this,i=this.player_.volume();this.one("sliderinactive",function(){e.player_.volume()===0&&e.player_.lastVolume_(i)})},t}(Sa);Ea.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};Ea.prototype.playerEvent="volumechange";M.registerComponent("VolumeBar",Ea);var wu=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t),e.vertical=e.vertical||!1,(typeof e.volumeBar>"u"||Ar(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical);var i=V(this,n.call(this,r,e));return kf(i,r),i.throttledHandleMouseMove=Zt(ee(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}return t.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.prototype.handleMouseDown=function(e){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(M);wu.prototype.options_={children:["volumeBar"]};M.registerComponent("VolumeControl",wu);var Af=function(t,r){r.tech_&&!r.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(r,"loadstart",function(){r.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},Au=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return Af(i,r),i.on(r,["loadstart","volumechange"],i.update),i}return t.prototype.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){var i=this.player_.volume(),a=this.player_.lastVolume_();if(i===0){var s=a<.1?.1:a;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},t.prototype.updateIcon_=function(){var e=this.player_.volume(),i=3;dt&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2);for(var a=0;a<4;a++)Ur(this.el_,"vjs-vol-"+a);It(this.el_,"vjs-vol-"+i)},t.prototype.updateControlText_=function(){var e=this.player_.muted()||this.player_.volume()===0,i=e?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},t}(st);Au.prototype.controlText_="Mute";M.registerComponent("MuteToggle",Au);var Pu=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t),typeof e.inline<"u"?e.inline=e.inline:e.inline=!0,(typeof e.volumeControl>"u"||Ar(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline);var i=V(this,n.call(this,r,e));return i.on(r,["loadstart"],i.volumePanelState_),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t}(M);Pu.prototype.options_={children:["muteToggle","volumeControl"]};M.registerComponent("VolumePanel",Pu);var Ca=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return e&&(i.menuButton_=e.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return t.prototype.addItem=function(e){this.addChild(e),e.on("click",ee(this,function(i){this.menuButton_&&(this.menuButton_.unpressButton(),e.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus())}))},t.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=Te(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Ye(i,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),i},t.prototype.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(e){e.which===37||e.which===40?(e.preventDefault(),this.stepForward()):(e.which===38||e.which===39)&&(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=this.children().slice(),a=i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className);a&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())},t}(M);M.registerComponent("Menu",Ca);var ka=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t);var i=V(this,n.call(this,r,e));i.menuButton_=new st(r,e),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var a=st.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+a,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new Ca(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=Te("li",{className:"vjs-menu-title",innerHTML:fe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(i),gi(i,e.contentEl())}if(this.items=this.createItems(),this.items)for(var a=0;a<this.items.length;a++)e.addItem(this.items[a]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";var i=st.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+i+" "+n.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+n.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,i)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",ee(this,function(i){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){Ye(j,"keydown",ee(this,this.handleKeyPress))},t.prototype.handleBlur=function(){Be(j,"keydown",ee(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){e.which===27||e.which===9?(this.buttonPressed_&&this.unpressButton(),e.which!==9&&(e.preventDefault(),this.menuButton_.el_.focus())):(e.which===38||e.which===40)&&(this.buttonPressed_||(this.pressButton(),e.preventDefault()))},t.prototype.handleSubmenuKeyPress=function(e){(e.which===27||e.which===9)&&(this.buttonPressed_&&this.unpressButton(),e.which!==9&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),dt&&Bo())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(M);M.registerComponent("MenuButton",ka);var wa=function(n){G(t,n);function t(r,e){$(this,t);var i=e.tracks,a=V(this,n.call(this,r,e));if(a.items.length<=1&&a.hide(),!i)return V(a);var s=ee(a,a.update);return i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),a.player_.on("ready",s),a.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)}),a}return t}(ka);M.registerComponent("TrackButton",wa);var Hr=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.selectable=e.selectable,i.isSelected_=e.selected||!1,i.multiSelectable=e.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}return t.prototype.createEl=function(e,i,a){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",pe({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),a)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(ji);M.registerComponent("MenuItem",Hr);var Vr=function(n){G(t,n);function t(r,e){$(this,t);var i=e.track,a=r.textTracks();e.label=i.label||i.language||"Unknown",e.selected=i.mode==="showing";var s=V(this,n.call(this,r,e));s.track=i;var o=function(){for(var d=arguments.length,p=Array(d),y=0;y<d;y++)p[y]=arguments[y];s.handleTracksChange.apply(s,p)},u=function(){for(var d=arguments.length,p=Array(d),y=0;y<d;y++)p[y]=arguments[y];s.handleSelectedLanguageChange.apply(s,p)};if(r.on(["loadstart","texttrackchange"],o),a.addEventListener("change",o),a.addEventListener("selectedlanguagechange",u),s.on("dispose",function(){r.off(["loadstart","texttrackchange"],o),a.removeEventListener("change",o),a.removeEventListener("selectedlanguagechange",u)}),a.onchange===void 0){var l=void 0;s.on(["tap","click"],function(){if(Ze(k.Event)!=="object")try{l=new k.Event("change")}catch{}l||(l=j.createEvent("Event"),l.initEvent("change",!0,!0)),a.dispatchEvent(l)})}return s.handleTracksChange(),s}return t.prototype.handleClick=function(e){var i=this.track.kind,a=this.track.kinds,s=this.player_.textTracks();if(a||(a=[i]),n.prototype.handleClick.call(this,e),!!s)for(var o=0;o<s.length;o++){var u=s[o];u===this.track&&a.indexOf(u.kind)>-1?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled")}},t.prototype.handleTracksChange=function(e){var i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)},t.prototype.handleSelectedLanguageChange=function(e){if(this.track.mode==="showing"){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.prototype.dispose=function(){this.track=null,n.prototype.dispose.call(this)},t}(Hr);M.registerComponent("TextTrackMenuItem",Vr);var Ou=function(n){G(t,n);function t(r,e){return $(this,t),e.track={player:r,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,V(this,n.call(this,r,e))}return t.prototype.handleTracksChange=function(e){for(var i=this.player().textTracks(),a=!0,s=0,o=i.length;s<o;s++){var u=i[s];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.prototype.handleSelectedLanguageChange=function(e){for(var i=this.player().textTracks(),a=!0,s=0,o=i.length;s<o;s++){var u=i[s];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Vr);M.registerComponent("OffTextTrackMenuItem",Ou);var cr=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(this,t),e.tracks=r.textTracks(),V(this,n.call(this,r,e))}return t.prototype.createItems=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vr,a=void 0;this.label_&&(a=this.label_+" off"),e.push(new Ou(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<s.length;o++){var u=s[o];if(this.kinds_.indexOf(u.kind)>-1){var l=new i(this.player_,{track:u,selectable:!0,multiSelectable:!1});l.addClass("vjs-"+u.kind+"-menu-item"),e.push(l)}}return e},t}(wa);M.registerComponent("TextTrackButton",cr);var Lu=function(n){G(t,n);function t(r,e){$(this,t);var i=e.track,a=e.cue,s=r.currentTime();e.selectable=!0,e.multiSelectable=!1,e.label=a.text,e.selected=a.startTime<=s&&s<a.endTime;var o=V(this,n.call(this,r,e));return o.track=i,o.cue=a,i.addEventListener("cuechange",ee(o,o.update)),o}return t.prototype.handleClick=function(e){n.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var i=this.cue,a=this.player_.currentTime();this.selected(i.startTime<=a&&a<i.endTime)},t}(Hr);M.registerComponent("ChaptersTrackMenuItem",Lu);var Aa=function(n){G(t,n);function t(r,e,i){return $(this,t),V(this,n.call(this,r,e,i))}return t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(e){(!this.track_||e&&(e.type==="addtrack"||e.type==="removetrack"))&&this.setTrack(this.findChaptersTrack()),n.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],i=e.length-1;i>=0;i--){var a=e[i];if(a.kind===this.kind_)return a}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(fe(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var i=this.track_.cues;if(!i)return e;for(var a=0,s=i.length;a<s;a++){var o=i[a],u=new Lu(this.player_,{track:this.track_,cue:o});e.push(u)}return e},t}(cr);Aa.prototype.kind_="chapters";Aa.prototype.controlText_="Chapters";M.registerComponent("ChaptersButton",Aa);var Pa=function(n){G(t,n);function t(r,e,i){$(this,t);var a=V(this,n.call(this,r,e,i)),s=r.textTracks(),o=ee(a,a.handleTracksChange);return s.addEventListener("change",o),a.on("dispose",function(){s.removeEventListener("change",o)}),a}return t.prototype.handleTracksChange=function(e){for(var i=this.player().textTracks(),a=!1,s=0,o=i.length;s<o;s++){var u=i[s];if(u.kind!==this.kind_&&u.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildWrapperCSSClass.call(this)},t}(cr);Pa.prototype.kind_="descriptions";Pa.prototype.controlText_="Descriptions";M.registerComponent("DescriptionsButton",Pa);var Oa=function(n){G(t,n);function t(r,e,i){return $(this,t),V(this,n.call(this,r,e,i))}return t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},t}(cr);Oa.prototype.kind_="subtitles";Oa.prototype.controlText_="Subtitles";M.registerComponent("SubtitlesButton",Oa);var La=function(n){G(t,n);function t(r,e){$(this,t),e.track={player:r,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem";var i=V(this,n.call(this,r,e));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+e.kind+" settings dialog"),i}return t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Vr);M.registerComponent("CaptionSettingsMenuItem",La);var Ia=function(n){G(t,n);function t(r,e,i){return $(this,t),V(this,n.call(this,r,e,i))}return t.prototype.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new La(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e)},t}(cr);Ia.prototype.kind_="captions";Ia.prototype.controlText_="Captions";M.registerComponent("CaptionsButton",Ia);var Iu=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(e,i,a){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);this.options_.track.kind==="captions"&&(s+=`
        <span aria-hidden="true" class="vjs-icon-placeholder"></span>
        <span class="vjs-control-text"> `+this.localize("Captions")+`</span>
      `),s+="</span>";var o=n.prototype.createEl.call(this,e,pe({innerHTML:s},i),a);return o},t}(Vr);M.registerComponent("SubsCapsMenuItem",Iu);var Ra=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t);var i=V(this,n.call(this,r,e));return i.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(fe(i.label_)),i}return t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new La(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=n.prototype.createItems.call(this,e,Iu),e},t}(cr);Ra.prototype.kinds_=["captions","subtitles"];Ra.prototype.controlText_="Subtitles";M.registerComponent("SubsCapsButton",Ra);var Ru=function(n){G(t,n);function t(r,e){$(this,t);var i=e.track,a=r.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled;var s=V(this,n.call(this,r,e));s.track=i,s.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var l=arguments.length,h=Array(l),d=0;d<l;d++)h[d]=arguments[d];s.handleTracksChange.apply(s,h)};return a.addEventListener("change",o),s.on("dispose",function(){a.removeEventListener("change",o)}),s}return t.prototype.createEl=function(e,i,a){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);this.options_.track.kind==="main-desc"&&(s+=`
        <span aria-hidden="true" class="vjs-icon-placeholder"></span>
        <span class="vjs-control-text"> `+this.localize("Descriptions")+`</span>
      `),s+="</span>";var o=n.prototype.createEl.call(this,e,pe({innerHTML:s},i),a);return o},t.prototype.handleClick=function(e){var i=this.player_.audioTracks();n.prototype.handleClick.call(this,e);for(var a=0;a<i.length;a++){var s=i[a];s.enabled=s===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Hr);M.registerComponent("AudioTrackMenuItem",Ru);var Du=function(n){G(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(this,t),e.tracks=r.audioTracks(),V(this,n.call(this,r,e))}return t.prototype.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.hideThreshold_=1;for(var i=this.player_.audioTracks(),a=0;a<i.length;a++){var s=i[a];e.push(new Ru(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e},t}(wa);Du.prototype.controlText_="Audio Track";M.registerComponent("AudioTrackButton",Du);var Da=function(n){G(t,n);function t(r,e){$(this,t);var i=e.rate,a=parseFloat(i,10);e.label=i,e.selected=a===1,e.selectable=!0,e.multiSelectable=!1;var s=V(this,n.call(this,r,e));return s.label=i,s.rate=a,s.on(r,"ratechange",s.update),s}return t.prototype.handleClick=function(e){n.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Hr);Da.prototype.contentElType="button";M.registerComponent("PlaybackRateMenuItem",Da);var Mu=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.updateVisibility(),i.updateLabel(),i.on(r,"loadstart",i.updateVisibility),i.on(r,"ratechange",i.updateLabel),i}return t.prototype.createEl=function(){var e=n.prototype.createEl.call(this);return this.labelEl_=Te("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.prototype.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var e=new Ca(this.player()),i=this.playbackRates();if(i)for(var a=i.length-1;a>=0;a--)e.addChild(new Da(this.player(),{rate:i[a]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var i=this.player().playbackRate(),a=this.playbackRates(),s=a[0],o=0;o<a.length;o++)if(a[o]>i){s=a[o];break}this.player().playbackRate(s)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(ka);Mu.prototype.controlText_="Playback Rate";M.registerComponent("PlaybackRateMenuButton",Mu);var Fu=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(M);M.registerComponent("Spacer",Fu);var Pf=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var e=n.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},t}(Fu);M.registerComponent("CustomControlSpacer",Pf);var Bu=function(n){G(t,n);function t(){return $(this,t),V(this,n.apply(this,arguments))}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(M);Bu.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};M.registerComponent("ControlBar",Bu);var Nu=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e));return i.on(r,"error",i.open),i}return t.prototype.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(or);Nu.prototype.options_=ce(or.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});M.registerComponent("ErrorDisplay",Nu);var _n="vjs-text-track-settings",Us=["#000","Black"],js=["#00F","Blue"],$s=["#0FF","Cyan"],Hs=["#0F0","Green"],Vs=["#F0F","Magenta"],Ws=["#F00","Red"],Gs=["#FFF","White"],zs=["#FF0","Yellow"],Tn=["1","Opaque"],bn=["0.5","Semi-Transparent"],qs=["0","Transparent"],At={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Us,Gs,Ws,Hs,js,zs,Vs,$s]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Tn,bn,qs]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Gs,Us,Ws,Hs,js,zs,Vs,$s]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Tn,bn]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[qs,bn,Tn]}};At.windowColor.options=At.backgroundColor.options;function Uu(n,t){if(t&&(n=t(n)),n&&n!=="none")return n}function Of(n,t){var r=n.options[n.options.selectedIndex].value;return Uu(r,t)}function Lf(n,t,r){if(t){for(var e=0;e<n.options.length;e++)if(Uu(n.options[e].value,r)===t){n.selectedIndex=e;break}}}var If=function(n){G(t,n);function t(r,e){$(this,t),e.temporary=!1;var i=V(this,n.call(this,r,e));return i.updateDisplay=ee(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=Te("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),e.persistTextTrackSettings===void 0&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),zt(At,function(a){i.on(i.$(a.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return t.prototype.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"label",o=At[e],u=o.id.replace("%s",this.id_),l=[a,u].join(" ").trim();return["<"+s+' id="'+u+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(o.label),"</"+s+">",'<select aria-labelledby="'+l+'">'].concat(o.options.map(function(h){var d=u+"-"+h[1].replace(/\W+/g,"");return['<option id="'+d+'" value="'+h[0]+'" ','aria-labelledby="'+l+" "+d+'">',i.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return Te("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return Te("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Te("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return xh(At,function(i,a,s){var o=Of(e.$(a.selector),a.parser);return o!==void 0&&(i[s]=o),i},{})},t.prototype.setValues=function(e){var i=this;zt(At,function(a,s){Lf(i.$(a.selector),e[s],a.parser)})},t.prototype.setDefaults=function(){var e=this;zt(At,function(i){var a=i.hasOwnProperty("default")?i.default:0;e.$(i.selector).selectedIndex=a})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(k.localStorage.getItem(_n))}catch(i){ie.warn(i)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?k.localStorage.setItem(_n,JSON.stringify(e)):k.localStorage.removeItem(_n)}catch(i){ie.warn(i)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(j,"keydown",this.handleKeyDown);var e=this.player_.controlBar,i=e&&e.subsCapsButton,a=e&&e.captionsButton;i?i.focus():a&&a.focus()},t}(or);M.registerComponent("TextTrackSettings",If);var Rf=function(n){G(t,n);function t(r,e){$(this,t);var i=e.ResizeObserver||k.ResizeObserver;e.ResizeObserver===null&&(i=!1);var a=ce({createEl:!i},e),s=V(this,n.call(this,r,a));return s.ResizeObserver=e.ResizeObserver||k.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=Oh(function(){s.resizeHandler()},100,!1,r),i?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(r.el())):(s.loadListener_=function(){s.el_.contentWindow&&Ye(s.el_.contentWindow,"resize",s.debouncedHandler_),s.off("load",s.loadListener_)},s.on("load",s.loadListener_)),s}return t.prototype.createEl=function(){return n.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},t.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Be(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(M);M.registerComponent("ResizeManager",Rf);var Fn=function(t){var r=t.el();if(r.hasAttribute("src"))return t.triggerSourceset(r.src),!0;var e=t.$$("source"),i=[],a="";if(!e.length)return!1;for(var s=0;s<e.length;s++){var o=e[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(a=i[0]),t.triggerSourceset(a),!0):!1},Df=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var r=j.createElement(this.nodeName.toLowerCase());r.innerHTML=t;for(var e=j.createDocumentFragment();r.childNodes.length;)e.appendChild(r.childNodes[0]);return this.innerText="",k.Element.prototype.appendChild.call(this,e),this.innerHTML}}),ju=function(t,r){for(var e={},i=0;i<t.length&&(e=Object.getOwnPropertyDescriptor(t[i],r),!(e&&e.set&&e.get));i++);return e.enumerable=!0,e.configurable=!0,e},Mf=function(t){return ju([t.el(),k.HTMLMediaElement.prototype,k.Element.prototype,Df],"innerHTML")},Xs=function(t){var r=t.el();if(!r.resetSourceWatch_){var e={},i=Mf(t),a=function(o){return function(){for(var u=arguments.length,l=Array(u),h=0;h<u;h++)l[h]=arguments[h];var d=o.apply(r,l);return Fn(t),d}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){r[s]&&(e[s]=r[s],r[s]=a(e[s]))}),Object.defineProperty(r,"innerHTML",ce(i,{set:a(i.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(e).forEach(function(s){r[s]=e[s]}),Object.defineProperty(r,"innerHTML",i)},t.one("sourceset",r.resetSourceWatch_)}},Ff=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?mu(k.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return k.Element.prototype.setAttribute.call(this,"src",t),t}}),Bf=function(t){return ju([t.el(),k.HTMLMediaElement.prototype,Ff],"src")},Nf=function(t){if(t.featuresSourceset){var r=t.el();if(!r.resetSourceset_){var e=Bf(t),i=r.setAttribute,a=r.load;Object.defineProperty(r,"src",ce(e,{set:function(o){var u=e.set.call(r,o);return t.triggerSourceset(r.src),u}})),r.setAttribute=function(s,o){var u=i.call(r,s,o);return/src/i.test(s)&&t.triggerSourceset(r.src),u},r.load=function(){var s=a.call(r);return Fn(t)||(t.triggerSourceset(""),Xs(t)),s},r.currentSrc?t.triggerSourceset(r.currentSrc):Fn(t)||Xs(t),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=a,r.setAttribute=i,Object.defineProperty(r,"src",e),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},Uf=ia([`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
            This may prevent text tracks from loading.`],[`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
            This may prevent text tracks from loading.`]),N=function(n){G(t,n);function t(r,e){$(this,t);var i=V(this,n.call(this,r,e)),a=r.source,s=!1;if(a&&(i.el_.currentSrc!==a.src||r.tag&&r.tag.initNetworkState_===3)?i.setSource(a):i.handleLateInit_(i.el_),r.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,u=o.length,l=[];u--;){var h=o[u],d=h.nodeName.toLowerCase();d==="track"&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(h),i.remoteTextTracks().addTrack(h.track),i.textTracks().addTrack(h.track),!s&&!i.el_.hasAttribute("crossorigin")&&Ui(h.src)&&(s=!0)):l.push(h))}for(var p=0;p<l.length;p++)i.el_.removeChild(l[p])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&s&&ie.warn(zn(Uf)),i.restoreMetadataTracksInIOSNativePlayer_(),(vi||da||su)&&r.nativeControlsForTouch===!0&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return t.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},t.prototype.setupSourcesetHandling_=function(){Nf(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),i=void 0,a=function(){i=[];for(var u=0;u<e.length;u++){var l=e[u];l.kind==="metadata"&&i.push({track:l,storedMode:l.mode})}};a(),e.addEventListener("change",a),this.on("dispose",function(){return e.removeEventListener("change",a)});var s=function o(){for(var u=0;u<i.length;u++){var l=i[u];l.track.mode==="disabled"&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}e.removeEventListener("change",o)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",a),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",a),e.addEventListener("change",a),e.removeEventListener("change",s)})},t.prototype.overrideNative_=function(e,i){var a=this;if(i===this["featuresNative"+e+"Tracks"]){var s=e.toLowerCase();this[s+"TracksListeners_"]&&Object.keys(this[s+"TracksListeners_"]).forEach(function(o){var u=a.el()[s+"Tracks"];u.removeEventListener(o,a[s+"TracksListeners_"][o])}),this["featuresNative"+e+"Tracks"]=!i,this[s+"TracksListeners_"]=null,this.proxyNativeTracksForType_(s)}},t.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.prototype.proxyNativeTracksForType_=function(e){var i=this,a=Ve[e],s=this.el()[a.getterName],o=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!s||!s.addEventListener)){var u={change:function(d){o.trigger({type:"change",target:o,currentTarget:o,srcElement:o})},addtrack:function(d){o.addTrack(d.track)},removetrack:function(d){o.removeTrack(d.track)}},l=function(){for(var d=[],p=0;p<o.length;p++){for(var y=!1,b=0;b<s.length;b++)if(s[b]===o[p]){y=!0;break}y||d.push(o[p])}for(;d.length;)o.removeTrack(d.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(h){var d=u[h];s.addEventListener(h,d),i.on("dispose",function(p){return s.removeEventListener(h,d)})}),this.on("loadstart",l),this.on("dispose",function(h){return i.off("loadstart",l)})}},t.prototype.proxyNativeTracks_=function(){var e=this;Ve.names.forEach(function(i){e.proxyNativeTracksForType_(i)})},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=j.createElement("video");var a=this.options_.tag&&at(this.options_.tag),s=ce({},a);(!vi||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,jo(e,pe(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Pr(e,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],u=0;u<o.length;u++){var l=o[u],h=this.options_[l];typeof h<"u"&&(h?Pr(e,l,l):Fi(e,l),e[l]=h)}return e},t.prototype.handleLateInit_=function(e){if(!(e.networkState===0||e.networkState===3)){if(e.readyState===0){var i=!1,a=function(){i=!0};this.on("loadstart",a);var s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}var o=["loadstart"];o.push("loadedmetadata"),e.readyState>=2&&o.push("loadeddata"),e.readyState>=3&&o.push("canplay"),e.readyState>=4&&o.push("canplaythrough"),this.ready(function(){o.forEach(function(u){this.trigger(u)},this)})}},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(i){ie(i,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&Bt&&St&&this.el_.currentTime===0){var i=function a(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",a))};return this.on("timeupdate",i),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var i=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){e.off("webkitbeginfullscreen",a),e.off("webkitendfullscreen",i)})}},t.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var e=k.navigator&&k.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(e===void 0)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(e,i,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,a):n.prototype.addTextTrack.call(this,e,i,a)},t.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,e);var i=j.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},t.prototype.addRemoteTextTrack=function(e,i){var a=n.prototype.addRemoteTextTrack.call(this,e,i);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.prototype.removeRemoteTextTrack=function(e){if(n.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var i=this.$$("track"),a=i.length;a--;)(e===i[a]||e===i[a].track)&&this.el().removeChild(i[a])},t.prototype.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),k.performance&&typeof k.performance.now=="function"?e.creationTime=k.performance.now():k.performance&&k.performance.timing&&typeof k.performance.timing.navigationStart=="number"&&(e.creationTime=k.Date.now()-k.performance.timing.navigationStart),e},t}(ue);if(ar()){N.TEST_VID=j.createElement("video");var si=j.createElement("track");si.kind="captions",si.srclang="en",si.label="English",N.TEST_VID.appendChild(si)}N.isSupported=function(){try{N.TEST_VID.volume=.5}catch{return!1}return!!(N.TEST_VID&&N.TEST_VID.canPlayType)};N.canPlayType=function(n){return N.TEST_VID.canPlayType(n)};N.canPlaySource=function(n,t){return N.canPlayType(n.type)};N.canControlVolume=function(){try{var n=N.TEST_VID.volume;return N.TEST_VID.volume=n/2+.1,n!==N.TEST_VID.volume}catch{return!1}};N.canMuteVolume=function(){try{var n=N.TEST_VID.muted;return N.TEST_VID.muted=!n,N.TEST_VID.muted?Pr(N.TEST_VID,"muted","muted"):Fi(N.TEST_VID,"muted","muted"),n!==N.TEST_VID.muted}catch{return!1}};N.canControlPlaybackRate=function(){if(Bt&&St&&uu<58)return!1;try{var n=N.TEST_VID.playbackRate;return N.TEST_VID.playbackRate=n/2+.1,n!==N.TEST_VID.playbackRate}catch{return!1}};N.canOverrideAttributes=function(){try{var n=function(){};Object.defineProperty(j.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(j.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(j.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(j.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};N.supportsNativeTextTracks=function(){return du||dt&&St};N.supportsNativeVideoTracks=function(){return!!(N.TEST_VID&&N.TEST_VID.videoTracks)};N.supportsNativeAudioTracks=function(){return!!(N.TEST_VID&&N.TEST_VID.audioTracks)};N.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];N.prototype.featuresVolumeControl=N.canControlVolume();N.prototype.featuresMuteControl=N.canMuteVolume();N.prototype.featuresPlaybackRate=N.canControlPlaybackRate();N.prototype.featuresSourceset=N.canOverrideAttributes();N.prototype.movingMediaElementInDOM=!dt;N.prototype.featuresFullscreenResize=!0;N.prototype.featuresProgressEvents=!0;N.prototype.featuresTimeupdateEvents=!0;N.prototype.featuresNativeTextTracks=N.supportsNativeTextTracks();N.prototype.featuresNativeVideoTracks=N.supportsNativeVideoTracks();N.prototype.featuresNativeAudioTracks=N.supportsNativeAudioTracks();var $u=N.TEST_VID&&N.TEST_VID.constructor.prototype.canPlayType,jf=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;N.patchCanPlayType=function(){ha>=4&&!ou&&!St&&(N.TEST_VID.constructor.prototype.canPlayType=function(n){return n&&jf.test(n)?"maybe":$u.call(this,n)})};N.unpatchCanPlayType=function(){var n=N.TEST_VID.constructor.prototype.canPlayType;return N.TEST_VID.constructor.prototype.canPlayType=$u,n};N.patchCanPlayType();N.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};N.resetMediaElement=function(n){if(n){for(var t=n.querySelectorAll("source"),r=t.length;r--;)n.removeChild(t[r]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){N.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){N.prototype["set"+fe(n)]=function(t){this.el_[n]=t,t?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(n){N.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(n){N.prototype["set"+fe(n)]=function(t){this.el_[n]=t}});["pause","load","play"].forEach(function(n){N.prototype[n]=function(){return this.el_[n]()}});ue.withSourceHandlers(N);N.nativeSourceHandler={};N.nativeSourceHandler.canPlayType=function(n){try{return N.TEST_VID.canPlayType(n)}catch{return""}};N.nativeSourceHandler.canHandleSource=function(n,t){if(n.type)return N.nativeSourceHandler.canPlayType(n.type);if(n.src){var r=ga(n.src);return N.nativeSourceHandler.canPlayType("video/"+r)}return""};N.nativeSourceHandler.handleSource=function(n,t,r){t.setSrc(n.src)};N.nativeSourceHandler.dispose=function(){};N.registerSourceHandler(N.nativeSourceHandler);ue.registerTech("Html5",N);var $f=ia([`
        Using the tech directly can be dangerous. I hope you know what you're doing.
        See https://github.com/videojs/video.js/issues/2617 for more info.
      `],[`
        Using the tech directly can be dangerous. I hope you know what you're doing.
        See https://github.com/videojs/video.js/issues/2617 for more info.
      `]),Hu=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Sn={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},be=function(n){G(t,n);function t(r,e,i){if($(this,t),r.id=r.id||e.id||"vjs_video_"+Ft(),e=pe(t.getTagSettings(r),e),e.initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if(typeof r.closest=="function"){var a=r.closest("[lang]");a&&a.getAttribute&&(e.language=a.getAttribute("lang"))}else for(var s=r;s&&s.nodeType===1;){if(at(s).hasOwnProperty("lang")){e.language=s.getAttribute("lang");break}s=s.parentNode}var o=V(this,n.call(this,null,e,i));if(o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=r,o.tagAttributes=r&&at(r),o.language(o.options_.language),e.languages){var u={};Object.getOwnPropertyNames(e.languages).forEach(function(p){u[p.toLowerCase()]=e.languages[p]}),o.languages_=u}else o.languages_=t.prototype.options_.languages;o.cache_={},o.poster_=e.poster||"",o.controls_=!!e.controls,o.cache_.lastVolume=1,r.controls=!1,r.removeAttribute("controls"),r.hasAttribute("autoplay")?o.options_.autoplay=!0:o.autoplay(o.options_.autoplay),o.scrubbing_=!1,o.el_=o.createEl(),o.cache_.lastPlaybackRate=o.defaultPlaybackRate(),la(o,{eventBusKey:"el_"});var l=ce(o.options_);if(e.plugins){var h=e.plugins;Object.keys(h).forEach(function(p){if(typeof this[p]=="function")this[p](h[p]);else throw new Error('plugin "'+p+'" does not exist')},o)}o.options_.playerOptions=l,o.middleware_=[],o.initChildren(),o.isAudio(r.nodeName.toLowerCase()==="audio"),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),dt||o.addClass("vjs-workinghover"),t.players[o.id_]=o;var d=Do.split(".")[0];return o.addClass("vjs-v"+d),o.userActive(!0),o.reportUserActivity(),o.one("play",o.listenForUserActivity_),o.on("fullscreenchange",o.handleFullscreenChange_),o.on("stageclick",o.handleStageClick_),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o}return t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),lf(this),n.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.tag,i=void 0,a=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),s=this.tag.tagName.toLowerCase()==="video-js";a?i=this.el_=e.parentNode:s||(i=this.el_=n.prototype.createEl.call(this,"div"));var o=at(e);if(s){for(i=this.el_=e,e=this.tag=j.createElement("video");i.children.length;)e.appendChild(i.firstChild);Qt(i,"video-js")||It(i,"video-js"),i.appendChild(e),a=this.playerElIngest_=i,Object.keys(i).forEach(function(y){e[y]=i[y]})}if(e.setAttribute("tabindex","-1"),lu&&e.setAttribute("role","application"),e.removeAttribute("width"),e.removeAttribute("height"),Object.getOwnPropertyNames(o).forEach(function(y){s&&y==="class"||i.setAttribute(y,o[y]),s&&e.setAttribute(y,o[y])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused"),k.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Zo("vjs-styles-dimensions");var u=bt(".vjs-styles-defaults"),l=bt("head");l.insertBefore(this.styleEl_,u?u.nextSibling:l.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var h=e.getElementsByTagName("a"),d=0;d<h.length;d++){var p=h.item(d);It(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!a&&e.parentNode.insertBefore(i,e),gi(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=i,i},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,i){var a=e+"_";if(i===void 0)return this[a]||0;if(i===""){this[a]=void 0,this.updateStyleEl_();return}var s=parseFloat(i);if(isNaN(s)){ie.error('Improper value "'+i+'" supplied for for '+e);return}this[a]=s,this.updateStyleEl_()},t.prototype.fluid=function(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.prototype.aspectRatio=function(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(k.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e=typeof this.width_=="number"?this.width_:this.options_.width,i=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(e>=0&&(a.width=e),i>=0&&(a.height=i));return}var s=void 0,o=void 0,u=void 0,l=void 0;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var h=u.split(":"),d=h[1]/h[0];this.width_!==void 0?s=this.width_:this.height_!==void 0?s=this.height_/d:s=this.videoWidth()||300,this.height_!==void 0?o=this.height_:o=s*d,/^[^a-zA-Z]/.test(this.id())?l="dimensions-"+this.id():l=this.id()+"-dimensions",this.addClass(l),eu(this.styleEl_,`
      .`+l+` {
        width: `+s+`px;
        height: `+o+`px;
      }

      .`+l+`.vjs-fluid {
        padding-top: `+d*100+`%;
      }
    `)},t.prototype.loadTech_=function(e,i){var a=this;this.tech_&&this.unloadTech_();var s=fe(e),o=e.charAt(0).toLowerCase()+e.slice(1);s!=="Html5"&&this.tag&&(ue.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;var u=typeof this.autoplay()=="string"?!1:this.autoplay(),l={source:i,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+s+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Me.names.forEach(function(d){var p=Me[d];l[p.getterName]=a[p.privateName]}),pe(l,this.options_[s]),pe(l,this.options_[o]),pe(l,this.options_[e.toLowerCase()]),this.tag&&(l.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(l.startTime=this.cache_.currentTime);var h=ue.getTech(e);if(!h)throw new Error("No Tech named '"+s+"' exists! '"+s+"' should be registered using videojs.registerTech()'");this.tech_=new h(l),this.tech_.ready(ee(this,this.handleTechReady_),!0),Ps.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Hu.forEach(function(d){a.on(a.tech_,d,a["handleTech"+fe(d)+"_"])}),Object.keys(Sn).forEach(function(d){a.on(a.tech_,d,function(p){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+Sn[d]+"_"].bind(a),event:p});return}a["handleTech"+Sn[d]+"_"](p)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(s!=="Html5"||!this.tag)&&gi(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){var e=this;Me.names.forEach(function(i){var a=Me[i];e[a.privateName]=e[a.getterName]()}),this.textTracksJson_=Ps.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.prototype.tech=function(e){return e===void 0&&ie.warn(zn($f)),this.tech_},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},t.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},t.prototype.manualAutoplay_=function(e){var i=this;if(!(!this.tech_||typeof e!="string")){var a=function(){var u=i.muted();i.muted(!0);var l=i.play();if(!(!l||!l.then||!l.catch))return l.catch(function(h){i.muted(u)})},s=void 0;if(e==="any"?(s=this.play(),s&&s.then&&s.catch&&s.catch(function(){return a()})):e==="muted"?s=a():s=this.play(),!(!s||!s.then||!s.catch))return s.then(function(){i.trigger({type:"autoplay-success",autoplay:e})}).catch(function(o){i.trigger({type:"autoplay-failure",autoplay:e})})}},t.prototype.updateSourceCaches_=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=e,a="";typeof i!="string"&&(i=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!a&&(a=hf(this,i)),this.cache_.source=ce({},e,{src:i,type:a});for(var s=this.cache_.sources.filter(function(p){return p.src&&p.src===i}),o=[],u=this.$$("source"),l=[],h=0;h<u.length;h++){var d=at(u[h]);o.push(d),d.src&&d.src===i&&l.push(d.src)}l.length&&!s.length?this.cache_.sources=o:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i},t.prototype.handleTechSourceset_=function(e){var i=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src)){var a=function s(o){o.type!=="sourceset"&&i.updateSourceCaches_(i.techGet_("currentSrc")),i.tech_.off(["sourceset","loadstart"],s)};this.tech_.one(["sourceset","loadstart"],a)}this.trigger({src:e.src,type:"sourceset"})},t.prototype.hasStarted=function(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(ie.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){Jt(e)&&this.controls_&&(this.paused()?qt(this.play()):this.pause())},t.prototype.handleTechDoubleClick_=function(e){if(this.controls_){var i=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(e.target)});i||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,i){i&&this.isFullscreen(i.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,i){this.ready(function(){if(e in of)return af(this.middleware_,this.tech_,e,i);if(e in Ds)return Rs(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(a){throw ie(a),a}},!0)},t.prototype.techGet_=function(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in sf)return nf(this.middleware_,this.tech_,e);if(e in Ds)return Rs(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(ie("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",i),i):i.name==="TypeError"?(ie("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i):(ie(i),i)}}},t.prototype.play=function(){var e=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){e.playOnLoadstart_=null,qt(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,qt(e.play())})}},t.prototype.pause=function(){this.techCall_("pause")},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.played=function(){return this.techGet_("played")||Rt(0,0)},t.prototype.scrubbing=function(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.prototype.currentTime=function(e){if(typeof e<"u"){e<0&&(e=0),this.techCall_("setCurrentTime",e);return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.prototype.duration=function(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.prototype.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Rt(0,0)),e},t.prototype.bufferedPercent=function(){return hu(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),i=this.duration(),a=e.end(e.length-1);return a>i&&(a=i),a},t.prototype.volume=function(e){var i=void 0;if(e!==void 0){i=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i},t.prototype.muted=function(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1},t.prototype.defaultMuted=function(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},t.prototype.lastVolume_=function(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){if(e!==void 0){this.isFullscreen_=!!e;return}return!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=yi;this.isFullscreen(!0),e.requestFullscreen?(Ye(j,e.fullscreenchange,ee(this,function i(a){this.isFullscreen(j[e.fullscreenElement]),this.isFullscreen()===!1&&Be(j,e.fullscreenchange,i),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},t.prototype.exitFullscreen=function(){var e=yi;this.isFullscreen(!1),e.requestFullscreen?j[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=j.documentElement.style.overflow,Ye(j,"keydown",ee(this,this.fullWindowOnEscKey)),j.documentElement.style.overflow="hidden",It(j.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){e.keyCode===27&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,Be(j,"keydown",this.fullWindowOnEscKey),j.documentElement.style.overflow=this.docOrigOverflow,Ur(j.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var i=void 0,a=0,s=this.options_.techOrder;a<s.length;a++){var o=s[a],u=ue.getTech(o);if(u||(u=M.getComponent(o)),!u){ie.error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(i=u.canPlayType(e),i))return i}return""},t.prototype.selectSource=function(e){var i=this,a=this.options_.techOrder.map(function(h){return[h,ue.getTech(h)]}).filter(function(h){var d=h[0],p=h[1];return p?p.isSupported():(ie.error('The "'+d+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),s=function(d,p,y){var b=void 0;return d.some(function(P){return p.some(function(w){if(b=y(P,w),b)return!0})}),b},o=void 0,u=function(d){return function(p,y){return d(y,p)}},l=function(d,p){var y=d[0],b=d[1];if(b.canPlaySource(p,i.options_[y.toLowerCase()]))return{source:p,tech:y}};return this.options_.sourceOrder?o=s(e,a,u(l)):o=s(a,e,l),o||!1},t.prototype.src=function(e){var i=this;if(typeof e>"u")return this.cache_.src||"";var a=ff(e);if(!a.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),tf(this,a[0],function(s,o){i.middleware_=o,i.cache_.sources=a,i.updateSourceCaches_(s);var u=i.src_(s);if(u){if(a.length>1)return i.src(a.slice(1));i.changingSrc_=!1,i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),i.triggerReady();return}rf(o,i.tech_)})},t.prototype.src_=function(e){var i=this,a=this.selectSource([e]);return a?Rh(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1):!0},t.prototype.load=function(){this.techCall_("load")},t.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},t.prototype.currentSources=function(){var e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i},t.prototype.currentSource=function(){return this.cache_.source||{}},t.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.prototype.preload=function(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")},t.prototype.autoplay=function(e){if(e===void 0)return this.options_.autoplay||!1;var i=void 0;typeof e=="string"&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=i||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",i)},t.prototype.playsinline=function(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},t.prototype.loop=function(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")},t.prototype.poster=function(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.prototype.controls=function(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.prototype.usingNativeControls=function(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.prototype.error=function(e){if(e===void 0)return this.error_||null;if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ae(e),this.addClass("vjs-error"),ie.error("(CODE:"+this.error_.code+" "+Ae.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},t.prototype.reportUserActivity=function(e){this.userActivity_=!0},t.prototype.userActive=function(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.prototype.listenForUserActivity_=function(){var e=void 0,i=void 0,a=void 0,s=ee(this,this.reportUserActivity),o=function(p){(p.screenX!==i||p.screenY!==a)&&(i=p.screenX,a=p.screenY,s())},u=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},l=function(p){s(),this.clearInterval(e)};this.on("mousedown",u),this.on("mousemove",o),this.on("mouseup",l),this.on("keydown",s),this.on("keyup",s);var h=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);var d=this.options_.inactivityTimeout;d<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))}},250)},t.prototype.playbackRate=function(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.prototype.defaultPlaybackRate=function(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.prototype.isAudio=function(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_},t.prototype.addTextTrack=function(e,i,a){if(this.tech_)return this.tech_.addTextTrack(e,i,a)},t.prototype.addRemoteTextTrack=function(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.track,a=i===void 0?arguments[0]:i;if(this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){if(e===void 0)return this.language_;this.language_=String(e).toLowerCase()},t.prototype.languages=function(){return ce(t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=ce(this.options_),i=e.tracks;e.tracks=[];for(var a=0;a<i.length;a++){var s=i[a];s=ce(s),s.player=void 0,e.tracks[a]=s}return e},t.prototype.createModal=function(e,i){var a=this;i=i||{},i.content=e||"";var s=new or(this,i);return this.addChild(s),s.on("dispose",function(){a.removeChild(s)}),s.open(),s},t.getTagSettings=function(e){var i={sources:[],tracks:[]},a=at(e),s=a["data-setup"];if(Qt(e,"vjs-fluid")&&(a.fluid=!0),s!==null){var o=Jc(s||"{}"),u=o[0],l=o[1];u&&ie.error(u),pe(a,l)}if(pe(i,a),e.hasChildNodes())for(var h=e.childNodes,d=0,p=h.length;d<p;d++){var y=h[d],b=y.nodeName.toLowerCase();b==="source"?i.sources.push(at(y)):b==="track"&&i.tracks.push(at(y))}return i},t.prototype.flexNotSupported_=function(){var e=j.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(M);Me.names.forEach(function(n){var t=Me[n];be.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});be.players={};var _r=k.navigator;be.prototype.options_={techOrder:ue.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:_r&&(_r.languages&&_r.languages[0]||_r.userLanguage||_r.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){be.prototype[n]=function(){return this.techGet_(n)}});Hu.forEach(function(n){be.prototype["handleTech"+fe(n)+"_"]=function(){return this.trigger(n)}});M.registerComponent("Player",be);var Ti="plugin",Xt="activePlugins_",Wt={},bi=function(t){return Wt.hasOwnProperty(t)},di=function(t){return bi(t)?Wt[t]:void 0},Vu=function(t,r){t[Xt]=t[Xt]||{},t[Xt][r]=!0},Si=function(t,r,e){var i=(e?"before":"")+"pluginsetup";t.trigger(i,r),t.trigger(i+":"+r.name,r)},Hf=function(t,r){var e=function(){Si(this,{name:t,plugin:r,instance:null},!0);var a=r.apply(this,arguments);return Vu(this,t),Si(this,{name:t,plugin:r,instance:a}),a};return Object.keys(r).forEach(function(i){e[i]=r[i]}),e},Ys=function(t,r){return r.prototype.name=t,function(){Si(this,{name:t,plugin:r,instance:null},!0);for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];var s=new(Function.prototype.bind.apply(r,[null].concat([this].concat(i))));return this[t]=function(){return s},Si(this,s.getEventHash()),s}},lt=function(){function n(t){if($(this,n),this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,la(this),delete this.trigger,nu(this,this.constructor.defaultState),Vu(t,this.name),this.dispose=ee(this,this.dispose),t.on("dispose",this.dispose)}return n.prototype.version=function(){return this.constructor.VERSION},n.prototype.getEventHash=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.name=this.name,r.plugin=this.constructor,r.instance=this,r},n.prototype.trigger=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sr(this.eventBusEl_,r,this.getEventHash(e))},n.prototype.handleStateChanged=function(r){},n.prototype.dispose=function(){var r=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Xt][r]=!1,this.player=this.state=null,e[r]=Ys(r,Wt[r])},n.isBasic=function(r){var e=typeof r=="string"?di(r):r;return typeof e=="function"&&!n.prototype.isPrototypeOf(e.prototype)},n.registerPlugin=function(r,e){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+(typeof r>"u"?"undefined":Ze(r))+".");if(bi(r))ie.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(be.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof e!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+(typeof e>"u"?"undefined":Ze(e))+".");return Wt[r]=e,r!==Ti&&(n.isBasic(e)?be.prototype[r]=Hf(r,e):be.prototype[r]=Ys(r,e)),e},n.deregisterPlugin=function(r){if(r===Ti)throw new Error("Cannot de-register base plugin.");bi(r)&&(delete Wt[r],delete be.prototype[r])},n.getPlugins=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(Wt),e=void 0;return r.forEach(function(i){var a=di(i);a&&(e=e||{},e[i]=a)}),e},n.getPluginVersion=function(r){var e=di(r);return e&&e.VERSION||""},n}();lt.getPlugin=di;lt.BASE_PLUGIN_NAME=Ti;lt.registerPlugin(Ti,lt);be.prototype.usingPlugin=function(n){return!!this[Xt]&&this[Xt][n]===!0};be.prototype.hasPlugin=function(n){return!!bi(n)};var Vf=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof r>"u"?"undefined":Ze(r)));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(t.super_=r)},Wf=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=function(){t.apply(this,arguments)},i={};(typeof r>"u"?"undefined":Ze(r))==="object"?(r.constructor!==Object.prototype.constructor&&(e=r.constructor),i=r):typeof r=="function"&&(e=r),Vf(e,t);for(var a in i)i.hasOwnProperty(a)&&(e.prototype[a]=i[a]);return e},Wu=function(t){return t.indexOf("#")===0?t.slice(1):t};function x(n,t,r){var e=x.getPlayer(n);if(e)return t&&ie.warn('Player "'+n+'" is already initialised. Options will not be applied.'),r&&e.ready(r),e;var i=typeof n=="string"?bt("#"+Wu(n)):n;if(!Br(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");j.body.contains(i)||ie.warn("The element supplied is not included in the DOM"),t=t||{},x.hooks("beforesetup").forEach(function(s){var o=s(i,ce(t));if(!Tt(o)||Array.isArray(o)){ie.error("please return an object in beforesetup hooks");return}t=ce(t,o)});var a=M.getComponent("Player");return e=new a(i,t,r),x.hooks("setup").forEach(function(s){return s(e)}),e}x.hooks_={};x.hooks=function(n,t){return x.hooks_[n]=x.hooks_[n]||[],t&&(x.hooks_[n]=x.hooks_[n].concat(t)),x.hooks_[n]};x.hook=function(n,t){x.hooks(n,t)};x.hookOnce=function(n,t){x.hooks(n,[].concat(t).map(function(r){var e=function i(){return x.removeHook(n,i),r.apply(void 0,arguments)};return e}))};x.removeHook=function(n,t){var r=x.hooks(n).indexOf(t);return r<=-1?!1:(x.hooks_[n]=x.hooks_[n].slice(),x.hooks_[n].splice(r,1),!0)};if(k.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&ar()){var oi=bt(".vjs-styles-defaults");if(!oi){oi=Zo("vjs-styles-defaults");var xn=bt("head");xn&&xn.insertBefore(oi,xn.firstChild),eu(oi,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    `)}}Rn(1,x);x.VERSION=Do;x.options=be.prototype.options_;x.getPlayers=function(){return be.players};x.getPlayer=function(n){var t=be.players,r=void 0;if(typeof n=="string"){var e=Wu(n),i=t[e];if(i)return i;r=bt("#"+e)}else r=n;if(Br(r)){var a=r,s=a.player,o=a.playerId;if(s||t[o])return s||t[o]}};x.getAllPlayers=function(){return Object.keys(be.players).map(function(n){return be.players[n]}).filter(Boolean)};x.players=be.players;x.getComponent=M.getComponent;x.registerComponent=function(n,t){ue.isTech(t)&&ie.warn("The "+n+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),M.registerComponent.call(M,n,t)};x.getTech=ue.getTech;x.registerTech=ue.registerTech;x.use=ef;Object.defineProperty(x,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(x.middleware,"TERMINATOR",{value:_i,writeable:!1,enumerable:!0});x.browser=Fh;x.TOUCH_ENABLED=vi;x.extend=Wf;x.mergeOptions=ce;x.bind=ee;x.registerPlugin=lt.registerPlugin;x.plugin=function(n,t){return ie.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),lt.registerPlugin(n,t)};x.getPlugins=lt.getPlugins;x.getPlugin=lt.getPlugin;x.getPluginVersion=lt.getPluginVersion;x.addLanguage=function(n,t){var r;return n=(""+n).toLowerCase(),x.options.languages=ce(x.options.languages,(r={},r[n]=t,r)),x.options.languages[n]};x.log=ie;x.createTimeRange=x.createTimeRanges=Rt;x.formatTime=tr;x.setFormatTime=Tf;x.resetFormatTime=bf;x.parseUrl=ma;x.isCrossOrigin=Ui;x.EventTarget=xe;x.on=Ye;x.one=jr;x.off=Be;x.trigger=sr;x.xhr=_o;x.TextTrack=$r;x.AudioTrack=gu;x.VideoTrack=vu;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(n){x[n]=function(){return ie.warn("videojs."+n+"() is deprecated; use videojs.dom."+n+"() instead"),Yo[n].apply(null,arguments)}});x.computedStyle=On;x.dom=Yo;x.url=Yh;/**
 * @videojs/http-streaming
 * @version 1.1.0
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */var ot=function(t,r){return/^[a-z]+:/i.test(r)?r:(/\/\//i.test(t)||(t=pi.buildAbsoluteURL(k.location.href,t)),pi.buildAbsoluteURL(t,r))},We=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},Ke=function(){function n(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),Gf=function n(t,r,e){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===void 0){var a=Object.getPrototypeOf(t);return a===null?void 0:n(a,r,e)}else{if("value"in i)return i.value;var s=i.get;return s===void 0?void 0:s.call(e)}},ht=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof r>"u"?"undefined":Ze(r)));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)},et=function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&((typeof r>"u"?"undefined":Ze(r))==="object"||typeof r=="function")?r:t},zf=function(){function n(t,r){var e=[],i=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),u;!(i=(u=o.next()).done)&&(e.push(u.value),!(r&&e.length===r));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return e}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bn=x.mergeOptions,qf=x.EventTarget,Xf=x.log,Ma=function(t,r){["AUDIO","SUBTITLES"].forEach(function(e){for(var i in t.mediaGroups[e])for(var a in t.mediaGroups[e][i]){var s=t.mediaGroups[e][i][a];r(s,e,i,a)}})},Yf=function(t,r,e){var i=r.slice();e=e||0;for(var a=Math.min(t.length,r.length+e),s=e;s<a;s++)i[s-e]=Bn(t[s],i[s-e]);return i},Kf=function(t,r){t.resolvedUri||(t.resolvedUri=ot(r,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=ot(r,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=ot(r,t.map.uri))},Nn=function(t,r){var e=Bn(t,{}),i=e.playlists[r.uri];if(!i||i.segments&&r.segments&&i.segments.length===r.segments.length&&i.mediaSequence===r.mediaSequence)return null;var a=Bn(i,r);i.segments&&(a.segments=Yf(i.segments,r.segments,r.mediaSequence-i.mediaSequence)),a.segments.forEach(function(o){Kf(o,a.resolvedUri)});for(var s=0;s<e.playlists.length;s++)e.playlists[s].uri===r.uri&&(e.playlists[s]=a);return e.playlists[r.uri]=a,e},Gu=function(t){for(var r=t.playlists.length;r--;){var e=t.playlists[r];t.playlists[e.uri]=e,e.resolvedUri=ot(t.uri,e.uri),e.id=r,e.attributes||(e.attributes={},Xf.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},zu=function(t){Ma(t,function(r){r.uri&&(r.resolvedUri=ot(t.uri,r.uri))})},qu=function(t,r){var e=t.segments[t.segments.length-1],i=void 0;return r&&e&&e.duration?i=e.duration*1e3:i=(t.targetDuration||10)*500,i},xi=function(n){ht(t,n);function t(r,e,i){We(this,t);var a=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.srcUrl=r,a.hls_=e,a.withCredentials=i,!a.srcUrl)throw new Error("A non-empty playlist URL is required");return a.state="HAVE_NOTHING",a.on("mediaupdatetimeout",function(){a.state==="HAVE_METADATA"&&(a.state="HAVE_CURRENT_METADATA",a.request=a.hls_.xhr({uri:ot(a.master.uri,a.media().uri),withCredentials:a.withCredentials},function(s,o){if(a.request){if(s)return a.playlistRequestError(a.request,a.media().uri,"HAVE_METADATA");a.haveMetadata(a.request,a.media().uri)}}))}),a}return Ke(t,[{key:"playlistRequestError",value:function(e,i,a){this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+i,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,i){var a=this;this.request=null,this.state="HAVE_METADATA";var s=new gs;s.push(e.responseText),s.end(),s.manifest.uri=i,s.manifest.attributes=s.manifest.attributes||{};var o=Nn(this.master,s.manifest);this.targetDuration=s.manifest.targetDuration,o?(this.master=o,this.media_=this.master.playlists[s.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=k.setTimeout(function(){a.trigger("mediaupdatetimeout")},qu(this.media(),!!o))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),k.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var i=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var s=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}if(s){if(this.state="SWITCHING_MEDIA",this.request){if(ot(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:ot(this.master.uri,e.uri),withCredentials:this.withCredentials},function(o,u){if(i.request){if(o)return i.playlistRequestError(i.request,e.uri,a);i.haveMetadata(u,e.uri),a==="HAVE_MASTER"?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),k.clearTimeout(this.mediaUpdateTimeout),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var i=this;k.clearTimeout(this.mediaUpdateTimeout);var a=this.media();if(e){var s=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=k.setTimeout(function(){return i.load()},s);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,a){if(e.request){if(e.request=null,i)return e.error={status:a.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:a.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");var s=new gs;if(s.push(a.responseText),s.end(),e.state="HAVE_MASTER",s.manifest.uri=e.srcUrl,s.manifest.playlists){e.master=s.manifest,Gu(e.master),zu(e.master),e.trigger("loadedplaylist"),e.request||e.media(s.manifest.playlists[0]);return}return e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:k.location.href,playlists:[{uri:e.srcUrl,id:0}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.master.playlists[0].resolvedUri=e.srcUrl,e.master.playlists[0].attributes=e.master.playlists[0].attributes||{},e.haveMetadata(a,e.srcUrl),e.trigger("loadedmetadata")}})}}]),t}(qf),Ks=x.createTimeRange,Qf=function(t,r){var e=0,i=r-t.mediaSequence,a=t.segments[i];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;i--;){if(a=t.segments[i],typeof a.end<"u")return{result:e+a.end,precise:!0};if(e+=a.duration,typeof a.start<"u")return{result:e+a.start,precise:!0}}return{result:e,precise:!1}},Jf=function(t,r){for(var e=0,i=void 0,a=r-t.mediaSequence;a<t.segments.length;a++){if(i=t.segments[a],typeof i.start<"u")return{result:i.start-e,precise:!0};if(e+=i.duration,typeof i.end<"u")return{result:i.end-e,precise:!0}}return{result:-1,precise:!1}},Xu=function(t,r,e){var i=void 0,a=void 0;return typeof r>"u"&&(r=t.mediaSequence+t.segments.length),r<t.mediaSequence?0:(i=Qf(t,r),i.precise?i.result:(a=Jf(t,r),a.precise?a.result:i.result+e))},Yu=function(t,r,e){if(!t)return 0;if(typeof e!="number"&&(e=0),typeof r>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return k.Infinity}return Xu(t,r,e)},kr=function(t,r,e){var i=0;if(r>e){var a=[e,r];r=a[0],e=a[1]}if(r<0){for(var s=r;s<Math.min(0,e);s++)i+=t.targetDuration;r=0}for(var o=r;o<e;o++)i+=t.segments[o].duration;return i},Ku=function(t){if(!t.segments.length)return 0;for(var r=t.segments.length-1,e=t.segments[r].duration||t.targetDuration,i=e+t.targetDuration*2;r--&&(e+=t.segments[r].duration,!(e>=i)););return Math.max(0,r)},Qu=function(t,r,e){if(!t||!t.segments)return null;if(t.endList)return Yu(t);if(r===null)return null;r=r||0;var i=e?Ku(t):t.segments.length;return Xu(t,t.mediaSequence+i,r)},Zf=function(t,r){var e=!0,i=r||0,a=Qu(t,r,e);return a===null?Ks():Ks(i,a)},Qs=function(t){return t-Math.floor(t)===0},Ju=function(t,r){if(Qs(r))return r+t*.1;for(var e=r.toString().split(".")[1].length,i=1;i<=e;i++){var a=Math.pow(10,i),s=r*a;if(Qs(s)||i===e)return(s+t)/a}},ep=Ju.bind(null,1),tp=Ju.bind(null,-1),rp=function(t,r,e,i){var a=void 0,s=void 0,o=t.segments.length,u=r-i;if(u<0){if(e>0){for(a=e-1;a>=0;a--)if(s=t.segments[a],u+=tp(s.duration),u>0)return{mediaIndex:a,startTime:i-kr(t,e,a)}}return{mediaIndex:0,startTime:r}}if(e<0){for(a=e;a<0;a++)if(u-=t.targetDuration,u<0)return{mediaIndex:0,startTime:r};e=0}for(a=e;a<o;a++)if(s=t.segments[a],u-=ep(s.duration),u<0)return{mediaIndex:a,startTime:i+kr(t,e,a)};return{mediaIndex:o-1,startTime:r}},Zu=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Fa=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Hi=function(t){var r=Zu(t);return!t.disabled&&!r},ip=function(t){return t.disabled},np=function(t){for(var r=0;r<t.segments.length;r++)if(t.segments[r].key)return!0;return!1},ap=function(t){for(var r=0;r<t.segments.length;r++)if(t.segments[r].map)return!0;return!1},el=function(t,r){return r.attributes&&r.attributes[t]},sp=function(t,r,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(!el("BANDWIDTH",e))return NaN;var a=t*e.attributes.BANDWIDTH;return(a-i*8)/r},Un=function(t,r){if(t.playlists.length===1)return!0;var e=r.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(i){return Hi(i)?(i.attributes.BANDWIDTH||0)<e:!1}).length===0},De={duration:Yu,seekable:Zf,safeLiveIndex:Ku,getMediaInfoForTime:rp,isEnabled:Hi,isDisabled:ip,isBlacklisted:Zu,isIncompatible:Fa,playlistEnd:Qu,isAes:np,isFmp4:ap,hasAttribute:el,estimateSegmentRequestTime:sp,isLowestEnabledRendition:Un},op=x.xhr,up=x.mergeOptions,tl=function(){var t=function r(e,i){e=up({timeout:45e3},e);var a=r.beforeRequest||x.Hls.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(e);s&&(e=s)}var o=op(e,function(l,h){var d=o.response;!l&&d&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=d.byteLength||d.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),h.headers&&(o.responseHeaders=h.headers),l&&l.code==="ETIMEDOUT"&&(o.timedout=!0),!l&&!o.aborted&&h.statusCode!==200&&h.statusCode!==206&&h.statusCode!==0&&(l=new Error("XHR Failed with a response of: "+(o&&(d||o.responseText)))),i(l,o)}),u=o.abort;return o.abort=function(){return o.aborted=!0,u.apply(o,arguments)},o.uri=e.uri,o.requestTime=Date.now(),o};return t},lp=function(t,r){return t.start(r)+"-"+t.end(r)},cp=function(t,r){var e=t.toString(16);return"00".substring(0,2-e.length)+e+(r%2?" ":"")},dp=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},rl=function(t){var r={};return Object.keys(t).forEach(function(e){var i=t[e];ArrayBuffer.isView(i)?r[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:r[e]=i}),r},Ei=function(t){var r=t.byterange||{length:1/0,offset:0};return[r.length,r.offset,t.resolvedUri].join(",")},il=function(t){for(var r=Array.prototype.slice.call(t),e=16,i="",a=void 0,s=void 0,o=0;o<r.length/e;o++)a=r.slice(o*e,o*e+e).map(cp).join(""),s=r.slice(o*e,o*e+e).map(dp).join(""),i+=a+" "+s+`
`;return i},hp=function(t){var r=t.bytes;return il(r)},fp=function(t){var r="",e=void 0;for(e=0;e<t.length;e++)r+=lp(t,e)+" ";return r},pp=Object.freeze({createTransferableMessage:rl,initSegmentId:Ei,hexDump:il,tagDump:hp,textRanges:fp}),rr=1/30,Ot=rr*3,nl=function(t,r){var e=[],i=void 0;if(t&&t.length)for(i=0;i<t.length;i++)r(t.start(i),t.end(i))&&e.push([t.start(i),t.end(i)]);return x.createTimeRanges(e)},al=function(t,r){return nl(t,function(e,i){return e-rr<=r&&i+rr>=r})},Js=function(t,r){return nl(t,function(e){return e-rr>=r})},mp=function(t){if(t.length<2)return x.createTimeRanges();for(var r=[],e=1;e<t.length;e++){var i=t.end(e-1),a=t.start(e);r.push([i,a])}return x.createTimeRanges(r)},Ba=function(t){var r=[];if(!t||!t.length)return"";for(var e=0;e<t.length;e++)r.push(t.start(e)+" => "+t.end(e));return r.join(", ")},gp=function(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=t.length?t.end(t.length-1):0;return(i-r)/e},Zs=function(t){for(var r=[],e=0;e<t.length;e++)r.push({start:t.start(e),end:t.end(e)});return r},vp=function(t,r,e){var i=r.player_;if(e.captions&&e.captions.length){t.inbandTextTracks_||(t.inbandTextTracks_={});for(var a in e.captionStreams)if(!t.inbandTextTracks_[a]){i.tech_.trigger({type:"usage",name:"hls-608"});var s=i.textTracks().getTrackById(a);s?t.inbandTextTracks_[a]=s:t.inbandTextTracks_[a]=i.addRemoteTextTrack({kind:"captions",id:a,label:a},!1).track}}e.metadata&&e.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e.metadata.dispatchType)},Rr=function(t,r,e){var i=void 0,a=void 0;if(e&&e.cues)for(i=e.cues.length;i--;)a=e.cues[i],a.startTime<=r&&a.endTime>=t&&e.removeCue(a)},yp=function(t){Object.defineProperties(t.frame,{id:{get:function(){return x.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return x.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return x.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},sl=function(t){var r=void 0;return isNaN(t)||Math.abs(t)===1/0?r=Number.MAX_VALUE:r=t,r},_p=function(t,r,e){var i=k.WebKitDataCue||k.VTTCue;if(r&&r.forEach(function(d){var p=d.stream;this.inbandTextTracks_[p].addCue(new i(d.startTime+this.timestampOffset,d.endTime+this.timestampOffset,d.text))},t),e){var a=sl(t.mediaSource_.duration);if(e.forEach(function(d){var p=d.cueTime+this.timestampOffset;d.frames.forEach(function(y){var b=new i(p,p,y.value||y.url||y.data||"");b.frame=y,b.value=y,yp(b),this.metadataTrack_.addCue(b)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var s=t.metadataTrack_.cues,o=[],u=0;u<s.length;u++)s[u]&&o.push(s[u]);var l=o.reduce(function(d,p){var y=d[p.startTime]||[];return y.push(p),d[p.startTime]=y,d},{}),h=Object.keys(l).sort(function(d,p){return Number(d)-Number(p)});h.forEach(function(d,p){var y=l[d],b=Number(h[p+1])||a;y.forEach(function(P){P.endTime=b})})}}},Lt=typeof window<"u"?window:{},En=typeof Symbol>"u"?"__target":Symbol(),Tp="application/javascript",bp=Lt.BlobBuilder||Lt.WebKitBlobBuilder||Lt.MozBlobBuilder||Lt.MSBlobBuilder,ir=Lt.URL||Lt.webkitURL||ir&&ir.msURL,Yt=Lt.Worker;function ol(n,t){return function(e){var i=this;if(t)if(Yt&&!e){var a=t.toString().replace(/^function.+?{/,"").slice(0,-1),s=ul(a);return this[En]=new Yt(s),Sp(this[En],s),this[En]}else{var o={postMessage:function(l){i.onmessage&&setTimeout(function(){i.onmessage({data:l,target:o})})}};t.call(o),this.postMessage=function(u){setTimeout(function(){o.onmessage({data:u,target:i})})},this.isThisThread=!0}else return new Yt(n)}}if(Yt){var ui,eo=ul("self.onmessage = function () {}"),to=new Uint8Array(1);try{ui=new Yt(eo),ui.postMessage(to,[to.buffer])}catch{Yt=null}finally{ir.revokeObjectURL(eo),ui&&ui.terminate()}}function ul(n){try{return ir.createObjectURL(new Blob([n],{type:Tp}))}catch{var t=new bp;return t.append(n),ir.createObjectURL(t.getBlob(type))}}function Sp(n,t){if(!(!n||!t)){var r=n.terminate;n.objURL=t,n.terminate=function(){n.objURL&&ir.revokeObjectURL(n.objURL),r.call(n)}}}var xp=new ol("./transmuxer-worker.worker.js",function(n,t){var r=this;(function(){var e=typeof n<"u"?n:typeof global<"u"?global:typeof r<"u"?r:{},i;typeof n<"u"?i=n:typeof e<"u"?i=e:typeof r<"u"?i=r:i={};var a=i,s=Math.pow(2,32)-1,o,u,l,h,d,p,y,b,P,w,A,B,Y,te,le,q,H,R,U,X,re,Q,D,W,Z,ae,de,ye,Pe,ve,Oe,oe,Ue,tt,ft,xt;(function(){var S;if(D={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(S in D)D.hasOwnProperty(S)&&(D[S]=[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]);W=new Uint8Array([105,115,111,109]),ae=new Uint8Array([97,118,99,49]),Z=new Uint8Array([0,0,0,1]),de=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ye=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Pe={video:de,audio:ye},oe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Oe=new Uint8Array([0,0,0,0,0,0,0,0]),Ue=new Uint8Array([0,0,0,0,0,0,0,0]),tt=Ue,ft=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),xt=Ue,ve=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(c){var f=[],m=0,g,T,v;for(g=1;g<arguments.length;g++)f.push(arguments[g]);for(g=f.length;g--;)m+=f[g].byteLength;for(T=new Uint8Array(m+8),v=new DataView(T.buffer,T.byteOffset,T.byteLength),v.setUint32(0,T.byteLength),T.set(c,4),g=0,m=8;g<f.length;g++)T.set(f[g],m),m+=f[g].byteLength;return T},u=function(){return o(D.dinf,o(D.dref,oe))},l=function(c){return o(D.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))},h=function(){return o(D.ftyp,W,Z,W,ae)},q=function(c){return o(D.hdlr,Pe[c])},d=function(c){return o(D.mdat,c)},le=function(c){var f=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,c.duration&255,85,196,0,0]);return c.samplerate&&(f[12]=c.samplerate>>>24&255,f[13]=c.samplerate>>>16&255,f[14]=c.samplerate>>>8&255,f[15]=c.samplerate&255),o(D.mdhd,f)},te=function(c){return o(D.mdia,le(c),q(c.type),y(c))},p=function(c){return o(D.mfhd,new Uint8Array([0,0,0,0,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255]))},y=function(c){return o(D.minf,c.type==="video"?o(D.vmhd,ve):o(D.smhd,Oe),u(),R(c))},b=function(c,f){for(var m=[],g=f.length;g--;)m[g]=X(f[g]);return o.apply(null,[D.moof,p(c)].concat(m))},P=function(c){for(var f=c.length,m=[];f--;)m[f]=B(c[f]);return o.apply(null,[D.moov,A(4294967295)].concat(m).concat(w(c)))},w=function(c){for(var f=c.length,m=[];f--;)m[f]=re(c[f]);return o.apply(null,[D.mvex].concat(m))},A=function(c){var f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(D.mvhd,f)},H=function(c){var f=c.samples||[],m=new Uint8Array(4+f.length),g,T;for(T=0;T<f.length;T++)g=f[T].flags,m[T+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return o(D.sdtp,m)},R=function(c){return o(D.stbl,U(c),o(D.stts,xt),o(D.stsc,tt),o(D.stsz,ft),o(D.stco,Ue))},function(){var S,c;U=function(m){return o(D.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),m.type==="video"?S(m):c(m))},S=function(m){var g=m.sps||[],T=m.pps||[],v=[],E=[],_;for(_=0;_<g.length;_++)v.push((g[_].byteLength&65280)>>>8),v.push(g[_].byteLength&255),v=v.concat(Array.prototype.slice.call(g[_]));for(_=0;_<T.length;_++)E.push((T[_].byteLength&65280)>>>8),E.push(T[_].byteLength&255),E=E.concat(Array.prototype.slice.call(T[_]));return o(D.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(m.width&65280)>>8,m.width&255,(m.height&65280)>>8,m.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(D.avcC,new Uint8Array([1,m.profileIdc,m.profileCompatibility,m.levelIdc,255].concat([g.length]).concat(v).concat([T.length]).concat(E))),o(D.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},c=function(m){return o(D.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(m.channelcount&65280)>>8,m.channelcount&255,(m.samplesize&65280)>>8,m.samplesize&255,0,0,0,0,(m.samplerate&65280)>>8,m.samplerate&255,0,0]),l(m))}}(),Y=function(c){var f=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,0,(c.duration&4278190080)>>24,(c.duration&16711680)>>16,(c.duration&65280)>>8,c.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(c.width&65280)>>8,c.width&255,0,0,(c.height&65280)>>8,c.height&255,0,0]);return o(D.tkhd,f)},X=function(c){var f,m,g,T,v,E,_;return f=o(D.tfhd,new Uint8Array([0,0,0,58,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),E=Math.floor(c.baseMediaDecodeTime/(s+1)),_=Math.floor(c.baseMediaDecodeTime%(s+1)),m=o(D.tfdt,new Uint8Array([1,0,0,0,E>>>24&255,E>>>16&255,E>>>8&255,E&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255])),v=92,c.type==="audio"?(g=Q(c,v),o(D.traf,f,m,g)):(T=H(c),g=Q(c,T.length+v),o(D.traf,f,m,g,T))},B=function(c){return c.duration=c.duration||4294967295,o(D.trak,Y(c),te(c))},re=function(c){var f=new Uint8Array([0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.type!=="video"&&(f[f.length-1]=0),o(D.trex,f)},function(){var S,c,f;f=function(g,T){var v=0,E=0,_=0,C=0;return g.length&&(g[0].duration!==void 0&&(v=1),g[0].size!==void 0&&(E=2),g[0].flags!==void 0&&(_=4),g[0].compositionTimeOffset!==void 0&&(C=8)),[0,0,v|E|_|C,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(T&4278190080)>>>24,(T&16711680)>>>16,(T&65280)>>>8,T&255]},c=function(g,T){var v,E,_,C;for(E=g.samples||[],T+=20+16*E.length,v=f(E,T),C=0;C<E.length;C++)_=E[C],v=v.concat([(_.duration&4278190080)>>>24,(_.duration&16711680)>>>16,(_.duration&65280)>>>8,_.duration&255,(_.size&4278190080)>>>24,(_.size&16711680)>>>16,(_.size&65280)>>>8,_.size&255,_.flags.isLeading<<2|_.flags.dependsOn,_.flags.isDependedOn<<6|_.flags.hasRedundancy<<4|_.flags.paddingValue<<1|_.flags.isNonSyncSample,_.flags.degradationPriority&61440,_.flags.degradationPriority&15,(_.compositionTimeOffset&4278190080)>>>24,(_.compositionTimeOffset&16711680)>>>16,(_.compositionTimeOffset&65280)>>>8,_.compositionTimeOffset&255]);return o(D.trun,new Uint8Array(v))},S=function(g,T){var v,E,_,C;for(E=g.samples||[],T+=20+8*E.length,v=f(E,T),C=0;C<E.length;C++)_=E[C],v=v.concat([(_.duration&4278190080)>>>24,(_.duration&16711680)>>>16,(_.duration&65280)>>>8,_.duration&255,(_.size&4278190080)>>>24,(_.size&16711680)>>>16,(_.size&65280)>>>8,_.size&255]);return o(D.trun,new Uint8Array(v))},Q=function(g,T){return g.type==="audio"?S(g,T):c(g,T)}}();var Ge={ftyp:h,mdat:d,moof:b,moov:P,initSegment:function(c){var f=h(),m=P(c),g;return g=new Uint8Array(f.byteLength+m.byteLength),g.set(f),g.set(m,f.byteLength),g}},rt=function(){this.init=function(){var c={};this.on=function(f,m){c[f]||(c[f]=[]),c[f]=c[f].concat(m)},this.off=function(f,m){var g;return c[f]?(g=c[f].indexOf(m),c[f]=c[f].slice(),c[f].splice(g,1),g>-1):!1},this.trigger=function(f){var m,g,T,v;if(m=c[f],!!m)if(arguments.length===2)for(T=m.length,g=0;g<T;++g)m[g].call(this,arguments[1]);else{for(v=[],g=arguments.length,g=1;g<arguments.length;++g)v.push(arguments[g]);for(T=m.length,g=0;g<T;++g)m[g].apply(this,v)}},this.dispose=function(){c={}}}};rt.prototype.pipe=function(S){return this.on("data",function(c){S.push(c)}),this.on("done",function(c){S.flush(c)}),S},rt.prototype.push=function(S){this.trigger("data",S)},rt.prototype.flush=function(S){this.trigger("done",S)};var me=rt,Et=4,xl=128,El=function(c){for(var f=0,m={payloadType:-1,payloadSize:0},g=0,T=0;f<c.byteLength&&c[f]!==xl;){for(;c[f]===255;)g+=255,f++;for(g+=c[f++];c[f]===255;)T+=255,f++;if(T+=c[f++],!m.payload&&g===Et){m.payloadType=g,m.payloadSize=T,m.payload=c.subarray(f,f+T);break}f+=T,g=0,T=0}return m},Cl=function(c){return c.payload[0]!==181||(c.payload[1]<<8|c.payload[2])!==49||String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])!=="GA94"||c.payload[7]!==3?null:c.payload.subarray(8,c.payload.length-1)},kl=function(c,f){var m=[],g,T,v,E;if(!(f[0]&64))return m;for(T=f[0]&31,g=0;g<T;g++)v=g*3,E={type:f[v+2]&3,pts:c},f[v+2]&4&&(E.ccData=f[v+3]<<8|f[v+4],m.push(E));return m},pt=function S(){S.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new he(0,0),new he(0,1),new he(1,0),new he(1,1)],this.reset(),this.ccStreams_.forEach(function(c){c.on("data",this.trigger.bind(this,"data")),c.on("done",this.trigger.bind(this,"done"))},this)};pt.prototype=new me,pt.prototype.push=function(S){var c,f;if(S.nalUnitType==="sei_rbsp"&&(c=El(S.escapedRBSP),c.payloadType===Et&&(f=Cl(c),!!f))){if(S.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(S.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}this.captionPackets_=this.captionPackets_.concat(kl(S.pts,f)),this.latestDts_!==S.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=S.dts}},pt.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(S){S.flush()},this);return}this.captionPackets_.forEach(function(S,c){S.presortIndex=c}),this.captionPackets_.sort(function(S,c){return S.pts===c.pts?S.presortIndex-c.presortIndex:S.pts-c.pts}),this.captionPackets_.forEach(function(S){S.type<2&&this.dispatchCea608Packet(S)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(S){S.flush()},this)},pt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(S){S.reset()})},pt.prototype.dispatchCea608Packet=function(S){this.setsChannel1Active(S)?this.activeCea608Channel_[S.type]=0:this.setsChannel2Active(S)&&(this.activeCea608Channel_[S.type]=1),this.activeCea608Channel_[S.type]!==null&&this.ccStreams_[(S.type<<1)+this.activeCea608Channel_[S.type]].push(S)},pt.prototype.setsChannel1Active=function(S){return(S.ccData&30720)===4096},pt.prototype.setsChannel2Active=function(S){return(S.ccData&30720)===6144};var wl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},zr=function(c){return c===null?"":(c=wl[c]||c,String.fromCharCode(c))},Ee=14,Al=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],qr=function(){for(var c=[],f=Ee+1;f--;)c.push("");return c},he=function S(c,f){S.prototype.init.call(this),this.field_=c||0,this.dataChannel_=f||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(m){var g,T,v,E,_;if(g=m.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),v=g>>>8,E=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.clearFormatting(m.pts),this.flushDisplayed(m.pts),T=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=T,this.startPts_=m.pts;else if(g===this.ROLL_UP_2_ROWS_)this.topRow_=Ee-1,this.mode_="rollUp";else if(g===this.ROLL_UP_3_ROWS_)this.topRow_=Ee-2,this.mode_="rollUp";else if(g===this.ROLL_UP_4_ROWS_)this.topRow_=Ee-3,this.mode_="rollUp";else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(m.pts),this.flushDisplayed(m.pts),this.shiftRowsUp_(),this.startPts_=m.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[Ee]=this.nonDisplayed_[Ee].slice(0,-1):this.displayed_[Ee]=this.displayed_[Ee].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(m.pts),this.displayed_=qr();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=qr();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(v,E))v=(v&3)<<8,_=zr(v|E),this[this.mode_](m.pts,_),this.column_++;else if(this.isExtCharacter(v,E))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[Ee]=this.displayed_[Ee].slice(0,-1),v=(v&3)<<8,_=zr(v|E),this[this.mode_](m.pts,_),this.column_++;else if(this.isMidRowCode(v,E))this.clearFormatting(m.pts),this[this.mode_](m.pts," "),this.column_++,(E&14)===14&&this.addFormatting(m.pts,["i"]),(E&1)===1&&this.addFormatting(m.pts,["u"]);else if(this.isOffsetControlCode(v,E))this.column_+=E&3;else if(this.isPAC(v,E)){var C=Al.indexOf(g&7968);C!==this.row_&&(this.clearFormatting(m.pts),this.row_=C),E&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(m.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(E)&&(E&14)===14&&this.addFormatting(m.pts,["i"])}else this.isNormalChar(v)&&(E===0&&(E=null),_=zr(v),_+=zr(E),this[this.mode_](m.pts,_),this.column_+=_.length)}};he.prototype=new me,he.prototype.flushDisplayed=function(S){var c=this.displayed_.map(function(f){return f.trim()}).join(`
`).replace(/^\n+|\n+$/g,"");c.length&&this.trigger("data",{startPts:this.startPts_,endPts:S,text:c,stream:this.name_})},he.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=qr(),this.nonDisplayed_=qr(),this.lastControlCode_=null,this.column_=0,this.row_=Ee,this.formatting_=[]},he.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},he.prototype.isSpecialCharacter=function(S,c){return S===this.EXT_&&c>=48&&c<=63},he.prototype.isExtCharacter=function(S,c){return(S===this.EXT_+1||S===this.EXT_+2)&&c>=32&&c<=63},he.prototype.isMidRowCode=function(S,c){return S===this.EXT_&&c>=32&&c<=47},he.prototype.isOffsetControlCode=function(S,c){return S===this.OFFSET_&&c>=33&&c<=35},he.prototype.isPAC=function(S,c){return S>=this.BASE_&&S<this.BASE_+8&&c>=64&&c<=127},he.prototype.isColorPAC=function(S){return S>=64&&S<=79||S>=96&&S<=127},he.prototype.isNormalChar=function(S){return S>=32&&S<=127},he.prototype.addFormatting=function(S,c){this.formatting_=this.formatting_.concat(c);var f=c.reduce(function(m,g){return m+"<"+g+">"},"");this[this.mode_](S,f)},he.prototype.clearFormatting=function(S){if(this.formatting_.length){var c=this.formatting_.reverse().reduce(function(f,m){return f+"</"+m+">"},"");this.formatting_=[],this[this.mode_](S,c)}},he.prototype.popOn=function(S,c){var f=this.nonDisplayed_[this.row_];f+=c,this.nonDisplayed_[this.row_]=f},he.prototype.rollUp=function(S,c){var f=this.displayed_[Ee];f+=c,this.displayed_[Ee]=f},he.prototype.shiftRowsUp_=function(){var S;for(S=0;S<this.topRow_;S++)this.displayed_[S]="";for(S=this.topRow_;S<Ee;S++)this.displayed_[S]=this.displayed_[S+1];this.displayed_[Ee]=""},he.prototype.paintOn=function(){};var Ha={CaptionStream:pt,Cea608Stream:he},Ie={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pl=8589934592,Ol=4294967296,Vi=function(c,f){var m=1;for(c>f&&(m=-1);Math.abs(f-c)>Ol;)c+=m*Pl;return c},Va=function S(c){var f,m;S.prototype.init.call(this),this.type_=c,this.push=function(g){g.type===this.type_&&(m===void 0&&(m=g.dts),g.dts=Vi(g.dts,m),g.pts=Vi(g.pts,m),f=g.dts,this.trigger("data",g))},this.flush=function(){m=f,this.trigger("done")},this.discontinuity=function(){m=void 0,f=void 0}};Va.prototype=new me;var Ll={TimestampRolloverStream:Va,handleRollover:Vi},Wa=function(c,f,m){var g,T="";for(g=f;g<m;g++)T+="%"+("00"+c[g].toString(16)).slice(-2);return T},Xr=function(c,f,m){return decodeURIComponent(Wa(c,f,m))},Il=function(c,f,m){return unescape(Wa(c,f,m))},Yr=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},Ga={TXXX:function(c){var f;if(c.data[0]===3){for(f=1;f<c.data.length;f++)if(c.data[f]===0){c.description=Xr(c.data,1,f),c.value=Xr(c.data,f+1,c.data.length).replace(/\0*$/,"");break}c.data=c.value}},WXXX:function(c){var f;if(c.data[0]===3){for(f=1;f<c.data.length;f++)if(c.data[f]===0){c.description=Xr(c.data,1,f),c.url=Xr(c.data,f+1,c.data.length);break}}},PRIV:function(c){var f;for(f=0;f<c.data.length;f++)if(c.data[f]===0){c.owner=Il(c.data,0,f);break}c.privateData=c.data.subarray(f+1),c.data=c.privateData}},Kr;Kr=function(c){var f={debug:!!(c&&c.debug),descriptor:c&&c.descriptor},m=0,g=[],T=0,v;if(Kr.prototype.init.call(this),this.dispatchType=Ie.METADATA_STREAM_TYPE.toString(16),f.descriptor)for(v=0;v<f.descriptor.length;v++)this.dispatchType+=("00"+f.descriptor[v].toString(16)).slice(-2);this.push=function(E){var _,C,O,L,I,z;if(E.type==="timed-metadata"){if(E.dataAlignmentIndicator&&(T=0,g.length=0),g.length===0&&(E.data.length<10||E.data[0]!==73||E.data[1]!==68||E.data[2]!==51)){f.debug&&console.log("Skipping unrecognized metadata packet");return}if(g.push(E),T+=E.data.byteLength,g.length===1&&(m=Yr(E.data.subarray(6,10)),m+=10),!(T<m)){for(_={data:new Uint8Array(m),frames:[],pts:g[0].pts,dts:g[0].dts},I=0;I<m;)_.data.set(g[0].data.subarray(0,m-I),I),I+=g[0].data.byteLength,T-=g[0].data.byteLength,g.shift();C=10,_.data[5]&64&&(C+=4,C+=Yr(_.data.subarray(10,14)),m-=Yr(_.data.subarray(16,20)));do{if(O=Yr(_.data.subarray(C+4,C+8)),O<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(z=String.fromCharCode(_.data[C],_.data[C+1],_.data[C+2],_.data[C+3]),L={id:z,data:_.data.subarray(C+10,C+O+10)},L.key=L.id,Ga[L.id]&&(Ga[L.id](L),L.owner==="com.apple.streaming.transportStreamTimestamp")){var K=L.data,J=(K[3]&1)<<30|K[4]<<22|K[5]<<14|K[6]<<6|K[7]>>>2;J*=4,J+=K[7]&3,L.timeStamp=J,_.pts===void 0&&_.dts===void 0&&(_.pts=L.timeStamp,_.dts=L.timeStamp),this.trigger("timestamp",L)}_.frames.push(L),C+=10,C+=O}while(C<m);this.trigger("data",_)}}}},Kr.prototype=new me;var Rl=Kr,Dl=Ll.TimestampRolloverStream,Qr,dr,Jr,Nt=188,Wi=71;Qr=function(){var c=new Uint8Array(Nt),f=0;Qr.prototype.init.call(this),this.push=function(m){var g=0,T=Nt,v;for(f?(v=new Uint8Array(m.byteLength+f),v.set(c.subarray(0,f)),v.set(m,f),f=0):v=m;T<v.byteLength;){if(v[g]===Wi&&v[T]===Wi){this.trigger("data",v.subarray(g,T)),g+=Nt,T+=Nt;continue}g++,T++}g<v.byteLength&&(c.set(v.subarray(g),0),f=v.byteLength-g)},this.flush=function(){f===Nt&&c[0]===Wi&&(this.trigger("data",c),f=0),this.trigger("done")}},Qr.prototype=new me,dr=function(){var c,f,m,g;dr.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,c=function(v,E){var _=0;E.payloadUnitStartIndicator&&(_+=v[_]+1),E.type==="pat"?f(v.subarray(_),E):m(v.subarray(_),E)},f=function(v,E){E.section_number=v[7],E.last_section_number=v[8],g.pmtPid=(v[10]&31)<<8|v[11],E.pmtPid=g.pmtPid},m=function(v,E){var _,C,O,L;if(v[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},_=(v[1]&15)<<8|v[2],C=3+_-4,O=(v[10]&15)<<8|v[11],L=12+O;L<C;){var I=v[L],z=(v[L+1]&31)<<8|v[L+2];I===Ie.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=z:I===Ie.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=z:I===Ie.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][z]=I),L+=((v[L+3]&15)<<8|v[L+4])+5}E.programMapTable=g.programMapTable}},this.push=function(T){var v={},E=4;if(v.payloadUnitStartIndicator=!!(T[1]&64),v.pid=T[1]&31,v.pid<<=8,v.pid|=T[2],(T[3]&48)>>>4>1&&(E+=T[E]+1),v.pid===0)v.type="pat",c(T.subarray(E),v),this.trigger("data",v);else if(v.pid===this.pmtPid)for(v.type="pmt",c(T.subarray(E),v),this.trigger("data",v);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([T,E,v]):this.processPes_(T,E,v)},this.processPes_=function(T,v,E){E.pid===this.programMapTable.video?E.streamType=Ie.H264_STREAM_TYPE:E.pid===this.programMapTable.audio?E.streamType=Ie.ADTS_STREAM_TYPE:E.streamType=this.programMapTable["timed-metadata"][E.pid],E.type="pes",E.data=T.subarray(v),this.trigger("data",E)}},dr.prototype=new me,dr.STREAM_TYPES={h264:27,adts:15},Jr=function(){var c=this,f={data:[],size:0},m={data:[],size:0},g={data:[],size:0},T=function(_,C){var O;C.packetLength=6+(_[4]<<8|_[5]),C.dataAlignmentIndicator=(_[6]&4)!==0,O=_[7],O&192&&(C.pts=(_[9]&14)<<27|(_[10]&255)<<20|(_[11]&254)<<12|(_[12]&255)<<5|(_[13]&254)>>>3,C.pts*=4,C.pts+=(_[13]&6)>>>1,C.dts=C.pts,O&64&&(C.dts=(_[14]&14)<<27|(_[15]&255)<<20|(_[16]&254)<<12|(_[17]&255)<<5|(_[18]&254)>>>3,C.dts*=4,C.dts+=(_[18]&6)>>>1)),C.data=_.subarray(9+_[8])},v=function(_,C,O){var L=new Uint8Array(_.size),I={type:C},z=0,K=0,J=!1,F;if(!(!_.data.length||_.size<9)){for(I.trackId=_.data[0].pid,z=0;z<_.data.length;z++)F=_.data[z],L.set(F.data,K),K+=F.data.byteLength;T(L,I),J=C==="video"||I.packetLength<=_.size,(O||J)&&(_.size=0,_.data.length=0),J&&c.trigger("data",I)}};Jr.prototype.init.call(this),this.push=function(E){({pat:function(){},pes:function(){var C,O;switch(E.streamType){case Ie.H264_STREAM_TYPE:case Ie.H264_STREAM_TYPE:C=f,O="video";break;case Ie.ADTS_STREAM_TYPE:C=m,O="audio";break;case Ie.METADATA_STREAM_TYPE:C=g,O="timed-metadata";break;default:return}E.payloadUnitStartIndicator&&v(C,O,!0),C.data.push(E),C.size+=E.data.byteLength},pmt:function(){var C={type:"metadata",tracks:[]},O=E.programMapTable;O.video!==null&&C.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.video,codec:"avc",type:"video"}),O.audio!==null&&C.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.audio,codec:"adts",type:"audio"}),c.trigger("data",C)}})[E.type]()},this.flush=function(){v(f,"video"),v(m,"audio"),v(g,"timed-metadata"),this.trigger("done")}},Jr.prototype=new me;var za={PAT_PID:0,MP2T_PACKET_LENGTH:Nt,TransportPacketStream:Qr,TransportParseStream:dr,ElementaryStream:Jr,TimestampRolloverStream:Dl,CaptionStream:Ha.CaptionStream,Cea608Stream:Ha.Cea608Stream,MetadataStream:Rl};for(var Gi in Ie)Ie.hasOwnProperty(Gi)&&(za[Gi]=Ie[Gi]);var ze=za,Zr,qa=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Zr=function(){var c;Zr.prototype.init.call(this),this.push=function(f){var m=0,g=0,T,v,E,_,C,O;if(f.type==="audio")for(c?(_=c,c=new Uint8Array(_.byteLength+f.data.byteLength),c.set(_),c.set(f.data,_.byteLength)):c=f.data;m+5<c.length;){if(c[m]!==255||(c[m+1]&246)!==240){m++;continue}if(v=(~c[m+1]&1)*2,T=(c[m+3]&3)<<11|c[m+4]<<3|(c[m+5]&224)>>5,C=((c[m+6]&3)+1)*1024,O=C*9e4/qa[(c[m+2]&60)>>>2],E=m+T,c.byteLength<E)return;if(this.trigger("data",{pts:f.pts+g*O,dts:f.dts+g*O,sampleCount:C,audioobjecttype:(c[m+2]>>>6&3)+1,channelcount:(c[m+2]&1)<<2|(c[m+3]&192)>>>6,samplerate:qa[(c[m+2]&60)>>>2],samplingfrequencyindex:(c[m+2]&60)>>>2,samplesize:16,data:c.subarray(m+7+v,E)}),c.byteLength===E){c=void 0;return}g++,c=c.subarray(E)}},this.flush=function(){this.trigger("done")}},Zr.prototype=new me;var Xa=Zr,Ya;Ya=function(c){var f=c.byteLength,m=0,g=0;this.length=function(){return 8*f},this.bitsAvailable=function(){return 8*f+g},this.loadWord=function(){var T=c.byteLength-f,v=new Uint8Array(4),E=Math.min(4,f);if(E===0)throw new Error("no bytes available");v.set(c.subarray(T,T+E)),m=new DataView(v.buffer).getUint32(0),g=E*8,f-=E},this.skipBits=function(T){var v;g>T?(m<<=T,g-=T):(T-=g,v=Math.floor(T/8),T-=v*8,f-=v,this.loadWord(),m<<=T,g-=T)},this.readBits=function(T){var v=Math.min(g,T),E=m>>>32-v;return g-=v,g>0?m<<=v:f>0&&this.loadWord(),v=T-v,v>0?E<<v|this.readBits(v):E},this.skipLeadingZeros=function(){var T;for(T=0;T<g;++T)if(m&2147483648>>>T)return m<<=T,g-=T,T;return this.loadWord(),T+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var T=this.skipLeadingZeros();return this.readBits(T+1)-1},this.readExpGolomb=function(){var T=this.readUnsignedExpGolomb();return 1&T?1+T>>>1:-1*(T>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ml=Ya,ei,hr,Ka;hr=function(){var c=0,f,m;hr.prototype.init.call(this),this.push=function(g){var T;for(m?(T=new Uint8Array(m.byteLength+g.data.byteLength),T.set(m),T.set(g.data,m.byteLength),m=T):m=g.data;c<m.byteLength-3;c++)if(m[c+2]===1){f=c+5;break}for(;f<m.byteLength;)switch(m[f]){case 0:if(m[f-1]!==0){f+=2;break}else if(m[f-2]!==0){f++;break}c+3!==f-2&&this.trigger("data",m.subarray(c+3,f-2));do f++;while(m[f]!==1&&f<m.length);c=f-2,f+=3;break;case 1:if(m[f-1]!==0||m[f-2]!==0){f+=3;break}this.trigger("data",m.subarray(c+3,f-2)),c=f-2,f+=3;break;default:f+=3;break}m=m.subarray(c),f-=c,c=0},this.flush=function(){m&&m.byteLength>3&&this.trigger("data",m.subarray(c+3)),m=null,c=0,this.trigger("done")}},hr.prototype=new me,Ka={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ei=function(){var c=new hr,f,m,g,T,v,E,_;ei.prototype.init.call(this),f=this,this.push=function(C){C.type==="video"&&(m=C.trackId,g=C.pts,T=C.dts,c.push(C))},c.on("data",function(C){var O={trackId:m,pts:g,dts:T,data:C};switch(C[0]&31){case 5:O.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:O.nalUnitType="sei_rbsp",O.escapedRBSP=v(C.subarray(1));break;case 7:O.nalUnitType="seq_parameter_set_rbsp",O.escapedRBSP=v(C.subarray(1)),O.config=E(O.escapedRBSP);break;case 8:O.nalUnitType="pic_parameter_set_rbsp";break;case 9:O.nalUnitType="access_unit_delimiter_rbsp";break}f.trigger("data",O)}),c.on("done",function(){f.trigger("done")}),this.flush=function(){c.flush()},_=function(O,L){var I=8,z=8,K,J;for(K=0;K<O;K++)z!==0&&(J=L.readExpGolomb(),z=(I+J+256)%256),I=z===0?I:z},v=function(O){for(var L=O.byteLength,I=[],z=1,K,J;z<L-2;)O[z]===0&&O[z+1]===0&&O[z+2]===3?(I.push(z+2),z+=2):z++;if(I.length===0)return O;K=L-I.length,J=new Uint8Array(K);var F=0;for(z=0;z<K;F++,z++)F===I[0]&&(F++,I.shift()),J[z]=O[F];return J},E=function(O){var L=0,I=0,z=0,K=0,J=1,F,it,nt,Qe,pr,nn,as,ss,os,an,us,ge,ls,Ct;if(F=new Ml(O),it=F.readUnsignedByte(),Qe=F.readUnsignedByte(),nt=F.readUnsignedByte(),F.skipUnsignedExpGolomb(),Ka[it]&&(pr=F.readUnsignedExpGolomb(),pr===3&&F.skipBits(1),F.skipUnsignedExpGolomb(),F.skipUnsignedExpGolomb(),F.skipBits(1),F.readBoolean()))for(us=pr!==3?8:12,Ct=0;Ct<us;Ct++)F.readBoolean()&&(Ct<6?_(16,F):_(64,F));if(F.skipUnsignedExpGolomb(),nn=F.readUnsignedExpGolomb(),nn===0)F.readUnsignedExpGolomb();else if(nn===1)for(F.skipBits(1),F.skipExpGolomb(),F.skipExpGolomb(),as=F.readUnsignedExpGolomb(),Ct=0;Ct<as;Ct++)F.skipExpGolomb();if(F.skipUnsignedExpGolomb(),F.skipBits(1),ss=F.readUnsignedExpGolomb(),os=F.readUnsignedExpGolomb(),an=F.readBits(1),an===0&&F.skipBits(1),F.skipBits(1),F.readBoolean()&&(L=F.readUnsignedExpGolomb(),I=F.readUnsignedExpGolomb(),z=F.readUnsignedExpGolomb(),K=F.readUnsignedExpGolomb()),F.readBoolean()&&F.readBoolean()){switch(ls=F.readUnsignedByte(),ls){case 1:ge=[1,1];break;case 2:ge=[12,11];break;case 3:ge=[10,11];break;case 4:ge=[16,11];break;case 5:ge=[40,33];break;case 6:ge=[24,11];break;case 7:ge=[20,11];break;case 8:ge=[32,11];break;case 9:ge=[80,33];break;case 10:ge=[18,11];break;case 11:ge=[15,11];break;case 12:ge=[64,33];break;case 13:ge=[160,99];break;case 14:ge=[4,3];break;case 15:ge=[3,2];break;case 16:ge=[2,1];break;case 255:{ge=[F.readUnsignedByte()<<8|F.readUnsignedByte(),F.readUnsignedByte()<<8|F.readUnsignedByte()];break}}ge&&(J=ge[0]/ge[1])}return{profileIdc:it,levelIdc:nt,profileCompatibility:Qe,width:Math.ceil(((ss+1)*16-L*2-I*2)*J),height:(2-an)*(os+1)*16-z*2-K*2}}},ei.prototype=new me;var Fl={H264Stream:ei,NalByteStream:hr},ti;ti=function(){var c=new Uint8Array,f=0;ti.prototype.init.call(this),this.setTimestamp=function(m){f=m},this.parseId3TagSize=function(m,g){var T=m[g+6]<<21|m[g+7]<<14|m[g+8]<<7|m[g+9],v=m[g+5],E=(v&16)>>4;return E?T+20:T+10},this.parseAdtsSize=function(m,g){var T=(m[g+5]&224)>>5,v=m[g+4]<<3,E=m[g+3]&6144;return E|v|T},this.push=function(m){var g=0,T=0,v,E,_,C;for(c.length?(C=c.length,c=new Uint8Array(m.byteLength+C),c.set(c.subarray(0,C)),c.set(m,C)):c=m;c.length-T>=3;){if(c[T]===73&&c[T+1]===68&&c[T+2]===51){if(c.length-T<10||(g=this.parseId3TagSize(c,T),g>c.length))break;E={type:"timed-metadata",data:c.subarray(T,T+g)},this.trigger("data",E),T+=g;continue}else if(c[T]&!0&&(c[T+1]&240)===240){if(c.length-T<7||(g=this.parseAdtsSize(c,T),g>c.length))break;_={type:"audio",data:c.subarray(T,T+g),pts:f,dts:f},this.trigger("data",_),T+=g;continue}T++}v=c.length-T,v>0?c=c.subarray(T):c=new Uint8Array}},ti.prototype=new me;var Bl=ti,mt=[33,16,5,32,164,27],zi=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ne=function(c){for(var f=[];c--;)f.push(0);return f},Nl=function(c){return Object.keys(c).reduce(function(f,m){return f[m]=new Uint8Array(c[m].reduce(function(g,T){return g.concat(T)},[])),f},{})},Ul={96e3:[mt,[227,64],ne(154),[56]],88200:[mt,[231],ne(170),[56]],64e3:[mt,[248,192],ne(240),[56]],48e3:[mt,[255,192],ne(268),[55,148,128],ne(54),[112]],44100:[mt,[255,192],ne(268),[55,163,128],ne(84),[112]],32e3:[mt,[255,192],ne(268),[55,234],ne(226),[112]],24e3:[mt,[255,192],ne(268),[55,255,128],ne(268),[111,112],ne(126),[224]],16e3:[mt,[255,192],ne(268),[55,255,128],ne(268),[111,255],ne(269),[223,108],ne(195),[1,192]],12e3:[zi,ne(268),[3,127,248],ne(268),[6,255,240],ne(268),[13,255,224],ne(268),[27,253,128],ne(259),[56]],11025:[zi,ne(268),[3,127,248],ne(268),[6,255,240],ne(268),[13,255,224],ne(268),[27,255,192],ne(268),[55,175,128],ne(108),[112]],8e3:[zi,ne(268),[3,121,16],ne(47),[7]]},jl=Nl(Ul),Qa=9e4,qi,Xi,Yi,Ki,Ja,Za;qi=function(c){return c*Qa},Xi=function(c,f){return c*f},Yi=function(c){return c/Qa},Ki=function(c,f){return c/f},Ja=function(c,f){return qi(Ki(c,f))},Za=function(c,f){return Xi(Yi(c),f)};var es={secondsToVideoTs:qi,secondsToAudioTs:Xi,videoTsToSeconds:Yi,audioTsToSeconds:Ki,audioTsToVideoTs:Ja,videoTsToAudioTs:Za},$l=Fl.H264Stream,Qi=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ji=["width","height","profileIdc","levelIdc","profileCompatibility"],Zi=9e4,fr,Ut,ri,jt,ts,rs,ii,$t,en,tn,is;ts=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},rs=function(c){return c[0]===73&&c[1]===68&&c[2]===51},tn=function(c,f){var m;if(c.length!==f.length)return!1;for(m=0;m<c.length;m++)if(c[m]!==f[m])return!1;return!0},is=function(c){var f,m,g=0;for(f=0;f<c.length;f++)m=c[f],g+=m.data.byteLength;return g},Ut=function(c,f){var m=[],g=0,T=0,v=0,E=1/0;f=f||{},Ut.prototype.init.call(this),this.push=function(_){ii(c,_),c&&Qi.forEach(function(C){c[C]=_[C]}),m.push(_)},this.setEarliestDts=function(_){T=_-c.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(_){E=_},this.setAudioAppendStart=function(_){v=_},this.flush=function(){var _,C,O,L;if(m.length===0){this.trigger("done","AudioSegmentStream");return}_=this.trimAdtsFramesByEarliestDts_(m),c.baseMediaDecodeTime=en(c,f.keepOriginalTimestamps),this.prefixWithSilence_(c,_),c.samples=this.generateSampleTable_(_),O=Ge.mdat(this.concatenateFrameData_(_)),m=[],C=Ge.moof(g,[c]),L=new Uint8Array(C.byteLength+O.byteLength),g++,L.set(C),L.set(O,C.byteLength),$t(c),this.trigger("data",{track:c,boxes:L}),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(_,C){var O,L=0,I=0,z=0,K=0,J,F;if(C.length&&(O=es.audioTsToVideoTs(_.baseMediaDecodeTime,_.samplerate),L=Math.ceil(Zi/(_.samplerate/1024)),v&&E&&(I=O-Math.max(v,E),z=Math.floor(I/L),K=z*L),!(z<1||K>Zi/2))){for(J=jl[_.samplerate],J||(J=C[0].data),F=0;F<z;F++)C.splice(F,0,{data:J});_.baseMediaDecodeTime-=Math.floor(es.videoTsToAudioTs(K,_.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(_){return c.minSegmentDts>=T?_:(c.minSegmentDts=1/0,_.filter(function(C){return C.dts>=T?(c.minSegmentDts=Math.min(c.minSegmentDts,C.dts),c.minSegmentPts=c.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(_){var C,O,L=[];for(C=0;C<_.length;C++)O=_[C],L.push({size:O.data.byteLength,duration:1024});return L},this.concatenateFrameData_=function(_){var C,O,L=0,I=new Uint8Array(is(_));for(C=0;C<_.length;C++)O=_[C],I.set(O.data,L),L+=O.data.byteLength;return I}},Ut.prototype=new me,fr=function(c,f){var m=0,g=[],T=[],v,E;f=f||{},fr.prototype.init.call(this),delete c.minPTS,this.gopCache_=[],this.push=function(_){ii(c,_),_.nalUnitType==="seq_parameter_set_rbsp"&&!v&&(v=_.config,c.sps=[_.data],Ji.forEach(function(C){c[C]=v[C]},this)),_.nalUnitType==="pic_parameter_set_rbsp"&&!E&&(E=_.data,c.pps=[_.data]),g.push(_)},this.flush=function(){for(var _,C,O,L,I,z;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(_=this.groupNalsIntoFrames_(g),O=this.groupFramesIntoGops_(_),O[0][0].keyFrame||(C=this.getGopForFusion_(g[0],c),C?(O.unshift(C),O.byteLength+=C.byteLength,O.nalCount+=C.nalCount,O.pts=C.pts,O.dts=C.dts,O.duration+=C.duration):O=this.extendFirstKeyFrame_(O)),T.length){var K;if(f.alignGopsAtEnd?K=this.alignGopsAtEnd_(O):K=this.alignGopsAtStart_(O),!K){this.gopCache_.unshift({gop:O.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}$t(c),O=K}ii(c,O),c.samples=this.generateSampleTable_(O),I=Ge.mdat(this.concatenateNalData_(O)),c.baseMediaDecodeTime=en(c,f.keepOriginalTimestamps),this.trigger("processedGopsInfo",O.map(function(J){return{pts:J.pts,dts:J.dts,byteLength:J.byteLength}})),this.gopCache_.unshift({gop:O.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime),this.trigger("timelineStartInfo",c.timelineStartInfo),L=Ge.moof(m,[c]),z=new Uint8Array(L.byteLength+I.byteLength),m++,z.set(L),z.set(I,L.byteLength),this.trigger("data",{track:c,boxes:z}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){$t(c),v=void 0,E=void 0},this.getGopForFusion_=function(_){var C=45e3,O=1e4,L=1/0,I,z,K,J,F;for(F=0;F<this.gopCache_.length;F++)J=this.gopCache_[F],K=J.gop,!(!(c.pps&&tn(c.pps[0],J.pps[0]))||!(c.sps&&tn(c.sps[0],J.sps[0])))&&(K.dts<c.timelineStartInfo.dts||(I=_.dts-K.dts-K.duration,I>=-O&&I<=C&&(!z||L>I)&&(z=J,L=I)));return z?z.gop:null},this.extendFirstKeyFrame_=function(_){var C;return!_[0][0].keyFrame&&_.length>1&&(C=_.shift(),_.byteLength-=C.byteLength,_.nalCount-=C.nalCount,_[0][0].dts=C.dts,_[0][0].pts=C.pts,_[0][0].duration+=C.duration),_},this.groupNalsIntoFrames_=function(_){var C,O,L=[],I=[];for(L.byteLength=0,C=0;C<_.length;C++)O=_[C],O.nalUnitType==="access_unit_delimiter_rbsp"?(L.length&&(L.duration=O.dts-L.dts,I.push(L)),L=[O],L.byteLength=O.data.byteLength,L.pts=O.pts,L.dts=O.dts):(O.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(L.keyFrame=!0),L.duration=O.dts-L.dts,L.byteLength+=O.data.byteLength,L.push(O));return I.length&&(!L.duration||L.duration<=0)&&(L.duration=I[I.length-1].duration),I.push(L),I},this.groupFramesIntoGops_=function(_){var C,O,L=[],I=[];for(L.byteLength=0,L.nalCount=0,L.duration=0,L.pts=_[0].pts,L.dts=_[0].dts,I.byteLength=0,I.nalCount=0,I.duration=0,I.pts=_[0].pts,I.dts=_[0].dts,C=0;C<_.length;C++)O=_[C],O.keyFrame?(L.length&&(I.push(L),I.byteLength+=L.byteLength,I.nalCount+=L.nalCount,I.duration+=L.duration),L=[O],L.nalCount=O.length,L.byteLength=O.byteLength,L.pts=O.pts,L.dts=O.dts,L.duration=O.duration):(L.duration+=O.duration,L.nalCount+=O.length,L.byteLength+=O.byteLength,L.push(O));return I.length&&L.duration<=0&&(L.duration=I[I.length-1].duration),I.byteLength+=L.byteLength,I.nalCount+=L.nalCount,I.duration+=L.duration,I.push(L),I},this.generateSampleTable_=function(_,C){var O,L,I,z,K,J=C||0,F=[];for(O=0;O<_.length;O++)for(z=_[O],L=0;L<z.length;L++)K=z[L],I=ts(),I.dataOffset=J,I.compositionTimeOffset=K.pts-K.dts,I.duration=K.duration,I.size=4*K.length,I.size+=K.byteLength,K.keyFrame&&(I.flags.dependsOn=2),J+=I.size,F.push(I);return F},this.concatenateNalData_=function(_){var C,O,L,I,z,K,J=0,F=_.byteLength,it=_.nalCount,nt=F+4*it,Qe=new Uint8Array(nt),pr=new DataView(Qe.buffer);for(C=0;C<_.length;C++)for(I=_[C],O=0;O<I.length;O++)for(z=I[O],L=0;L<z.length;L++)K=z[L],pr.setUint32(J,K.data.byteLength),J+=4,Qe.set(K.data,J),J+=K.data.byteLength;return Qe},this.alignGopsAtStart_=function(_){var C,O,L,I,z,K,J,F;for(z=_.byteLength,K=_.nalCount,J=_.duration,C=O=0;C<T.length&&O<_.length&&(L=T[C],I=_[O],L.pts!==I.pts);){if(I.pts>L.pts){C++;continue}O++,z-=I.byteLength,K-=I.nalCount,J-=I.duration}return O===0?_:O===_.length?null:(F=_.slice(O),F.byteLength=z,F.duration=J,F.nalCount=K,F.pts=F[0].pts,F.dts=F[0].dts,F)},this.alignGopsAtEnd_=function(_){var C,O,L,I,z,K;for(C=T.length-1,O=_.length-1,z=null,K=!1;C>=0&&O>=0;){if(L=T[C],I=_[O],L.pts===I.pts){K=!0;break}if(L.pts>I.pts){C--;continue}C===T.length-1&&(z=O),O--}if(!K&&z===null)return null;var J;if(K?J=O:J=z,J===0)return _;var F=_.slice(J),it=F.reduce(function(nt,Qe){return nt.byteLength+=Qe.byteLength,nt.duration+=Qe.duration,nt.nalCount+=Qe.nalCount,nt},{byteLength:0,duration:0,nalCount:0});return F.byteLength=it.byteLength,F.duration=it.duration,F.nalCount=it.nalCount,F.pts=F[0].pts,F.dts=F[0].dts,F},this.alignGopsWith=function(_){T=_}},fr.prototype=new me,ii=function(c,f){typeof f.pts=="number"&&(c.timelineStartInfo.pts===void 0&&(c.timelineStartInfo.pts=f.pts),c.minSegmentPts===void 0?c.minSegmentPts=f.pts:c.minSegmentPts=Math.min(c.minSegmentPts,f.pts),c.maxSegmentPts===void 0?c.maxSegmentPts=f.pts:c.maxSegmentPts=Math.max(c.maxSegmentPts,f.pts)),typeof f.dts=="number"&&(c.timelineStartInfo.dts===void 0&&(c.timelineStartInfo.dts=f.dts),c.minSegmentDts===void 0?c.minSegmentDts=f.dts:c.minSegmentDts=Math.min(c.minSegmentDts,f.dts),c.maxSegmentDts===void 0?c.maxSegmentDts=f.dts:c.maxSegmentDts=Math.max(c.maxSegmentDts,f.dts))},$t=function(c){delete c.minSegmentDts,delete c.maxSegmentDts,delete c.minSegmentPts,delete c.maxSegmentPts},en=function(c,f){var m,g,T=c.minSegmentDts;return f||(T-=c.timelineStartInfo.dts),m=c.timelineStartInfo.baseMediaDecodeTime,m+=T,m=Math.max(0,m),c.type==="audio"&&(g=c.samplerate/Zi,m*=g,m=Math.floor(m)),m},jt=function(c,f){this.numberOfTracks=0,this.metadataStream=f,typeof c.remux<"u"?this.remuxTracks=!!c.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,jt.prototype.init.call(this),this.push=function(m){if(m.text)return this.pendingCaptions.push(m);if(m.frames)return this.pendingMetadata.push(m);this.pendingTracks.push(m.track),this.pendingBoxes.push(m.boxes),this.pendingBytes+=m.boxes.byteLength,m.track.type==="video"&&(this.videoTrack=m.track),m.track.type==="audio"&&(this.audioTrack=m.track)}},jt.prototype=new me,jt.prototype.flush=function(S){var c=0,f={captions:[],captionStreams:{},metadata:[],info:{}},m,g,T,v=0,E;if(this.pendingTracks.length<this.numberOfTracks){if(S!=="VideoSegmentStream"&&S!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}for(this.videoTrack?(v=this.videoTrack.timelineStartInfo.pts,Ji.forEach(function(_){f.info[_]=this.videoTrack[_]},this)):this.audioTrack&&(v=this.audioTrack.timelineStartInfo.pts,Qi.forEach(function(_){f.info[_]=this.audioTrack[_]},this)),this.pendingTracks.length===1?f.type=this.pendingTracks[0].type:f.type="combined",this.emittedTracks+=this.pendingTracks.length,T=Ge.initSegment(this.pendingTracks),f.initSegment=new Uint8Array(T.byteLength),f.initSegment.set(T),f.data=new Uint8Array(this.pendingBytes),E=0;E<this.pendingBoxes.length;E++)f.data.set(this.pendingBoxes[E],c),c+=this.pendingBoxes[E].byteLength;for(E=0;E<this.pendingCaptions.length;E++)m=this.pendingCaptions[E],m.startTime=m.startPts-v,m.startTime/=9e4,m.endTime=m.endPts-v,m.endTime/=9e4,f.captionStreams[m.stream]=!0,f.captions.push(m);for(E=0;E<this.pendingMetadata.length;E++)g=this.pendingMetadata[E],g.cueTime=g.pts-v,g.cueTime/=9e4,f.metadata.push(g);f.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",f),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ri=function(c){var f=this,m=!0,g,T;ri.prototype.init.call(this),c=c||{},this.baseMediaDecodeTime=c.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var v={};this.transmuxPipeline_=v,v.type="aac",v.metadataStream=new ze.MetadataStream,v.aacStream=new Bl,v.audioTimestampRolloverStream=new ze.TimestampRolloverStream("audio"),v.timedMetadataTimestampRolloverStream=new ze.TimestampRolloverStream("timed-metadata"),v.adtsStream=new Xa,v.coalesceStream=new jt(c,v.metadataStream),v.headOfPipeline=v.aacStream,v.aacStream.pipe(v.audioTimestampRolloverStream).pipe(v.adtsStream),v.aacStream.pipe(v.timedMetadataTimestampRolloverStream).pipe(v.metadataStream).pipe(v.coalesceStream),v.metadataStream.on("timestamp",function(E){v.aacStream.setTimestamp(E.timeStamp)}),v.aacStream.on("data",function(E){E.type==="timed-metadata"&&!v.audioSegmentStream&&(T=T||{timelineStartInfo:{baseMediaDecodeTime:f.baseMediaDecodeTime},codec:"adts",type:"audio"},v.coalesceStream.numberOfTracks++,v.audioSegmentStream=new Ut(T,c),v.adtsStream.pipe(v.audioSegmentStream).pipe(v.coalesceStream))}),v.coalesceStream.on("data",this.trigger.bind(this,"data")),v.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var v={};this.transmuxPipeline_=v,v.type="ts",v.metadataStream=new ze.MetadataStream,v.packetStream=new ze.TransportPacketStream,v.parseStream=new ze.TransportParseStream,v.elementaryStream=new ze.ElementaryStream,v.videoTimestampRolloverStream=new ze.TimestampRolloverStream("video"),v.audioTimestampRolloverStream=new ze.TimestampRolloverStream("audio"),v.timedMetadataTimestampRolloverStream=new ze.TimestampRolloverStream("timed-metadata"),v.adtsStream=new Xa,v.h264Stream=new $l,v.captionStream=new ze.CaptionStream,v.coalesceStream=new jt(c,v.metadataStream),v.headOfPipeline=v.packetStream,v.packetStream.pipe(v.parseStream).pipe(v.elementaryStream),v.elementaryStream.pipe(v.videoTimestampRolloverStream).pipe(v.h264Stream),v.elementaryStream.pipe(v.audioTimestampRolloverStream).pipe(v.adtsStream),v.elementaryStream.pipe(v.timedMetadataTimestampRolloverStream).pipe(v.metadataStream).pipe(v.coalesceStream),v.h264Stream.pipe(v.captionStream).pipe(v.coalesceStream),v.elementaryStream.on("data",function(E){var _;if(E.type==="metadata"){for(_=E.tracks.length;_--;)!g&&E.tracks[_].type==="video"?(g=E.tracks[_],g.timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime):!T&&E.tracks[_].type==="audio"&&(T=E.tracks[_],T.timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime);g&&!v.videoSegmentStream&&(v.coalesceStream.numberOfTracks++,v.videoSegmentStream=new fr(g,c),v.videoSegmentStream.on("timelineStartInfo",function(C){T&&(T.timelineStartInfo=C,v.audioSegmentStream.setEarliestDts(C.dts))}),v.videoSegmentStream.on("processedGopsInfo",f.trigger.bind(f,"gopInfo")),v.videoSegmentStream.on("baseMediaDecodeTime",function(C){T&&v.audioSegmentStream.setVideoBaseMediaDecodeTime(C)}),v.h264Stream.pipe(v.videoSegmentStream).pipe(v.coalesceStream)),T&&!v.audioSegmentStream&&(v.coalesceStream.numberOfTracks++,v.audioSegmentStream=new Ut(T,c),v.adtsStream.pipe(v.audioSegmentStream).pipe(v.coalesceStream))}}),v.coalesceStream.on("data",this.trigger.bind(this,"data")),v.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(v){var E=this.transmuxPipeline_;this.baseMediaDecodeTime=v,T&&(T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,$t(T),T.timelineStartInfo.baseMediaDecodeTime=v,E.audioTimestampRolloverStream&&E.audioTimestampRolloverStream.discontinuity()),g&&(E.videoSegmentStream&&(E.videoSegmentStream.gopCache_=[],E.videoTimestampRolloverStream.discontinuity()),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,$t(g),E.captionStream.reset(),g.timelineStartInfo.baseMediaDecodeTime=v),E.timedMetadataTimestampRolloverStream&&E.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(v){T&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(v)},this.alignGopsWith=function(v){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(v)},this.push=function(v){if(m){var E=rs(v);E&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!E&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),m=!1}this.transmuxPipeline_.headOfPipeline.push(v)},this.flush=function(){m=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ri.prototype=new me;var rn={Transmuxer:ri,VideoSegmentStream:fr,AudioSegmentStream:Ut,AUDIO_PROPERTIES:Qi,VIDEO_PROPERTIES:Ji},Hl={generator:Ge,Transmuxer:rn.Transmuxer,AudioSegmentStream:rn.AudioSegmentStream,VideoSegmentStream:rn.VideoSegmentStream},Vl=function(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")},Wl=function(){function S(c,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}return function(c,f,m){return f&&S(c.prototype,f),m&&S(c,m),c}}(),Gl=function(c){c.on("data",function(f){var m=f.initSegment;f.initSegment={data:m.buffer,byteOffset:m.byteOffset,byteLength:m.byteLength};var g=f.data;f.data=g.buffer,a.postMessage({action:"data",segment:f,byteOffset:g.byteOffset,byteLength:g.byteLength},[f.data])}),c.captionStream&&c.captionStream.on("data",function(f){a.postMessage({action:"caption",data:f})}),c.on("done",function(f){a.postMessage({action:"done"})}),c.on("gopInfo",function(f){a.postMessage({action:"gopInfo",gopInfo:f})})},ns=function(){function S(c){Vl(this,S),this.options=c||{},this.init()}return Wl(S,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Hl.Transmuxer(this.options),Gl(this.transmuxer)}},{key:"push",value:function(f){var m=new Uint8Array(f.data,f.byteOffset,f.byteLength);this.transmuxer.push(m)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(f){var m=f.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(m*9e4))}},{key:"setAudioAppendStart",value:function(f){this.transmuxer.setAudioAppendStart(Math.ceil(f.appendStart*9e4))}},{key:"flush",value:function(f){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(f){this.transmuxer.alignGopsWith(f.gopsToAlignWith.slice())}}]),S}(),zl=function(c){c.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new ns(f.data.options);return}this.messageHandlers||(this.messageHandlers=new ns),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}},ql=new zl(r);return ql})()}),ll=function(t){return/mp4a\.\d+.\d+/i.test(t)},cl=function(t){return/avc1\.[\da-f]+/i.test(t)},Ep=function(t){var r={type:"",parameters:{}},e=t.trim().split(";");return r.type=e.shift().trim(),e.forEach(function(i){var a=i.trim().split("=");if(a.length>1){var s=a[0].replace(/"/g,"").trim(),o=a[1].replace(/"/g,"").trim();r.parameters[s]=o}}),r},dl=function(t){return t.map(function(r){return r.replace(/avc1\.(\d+)\.(\d+)/i,function(e,i,a){var s=("00"+Number(i).toString(16)).slice(-2),o=("00"+Number(a).toString(16)).slice(-2);return"avc1."+s+"00"+o})})},Cp=function(t,r){var e=t.addSourceBuffer(r),i=Object.create(null);i.updating=!1,i.realBuffer_=e;var a=function(u){typeof e[u]=="function"?i[u]=function(){return e[u].apply(e,arguments)}:typeof i[u]>"u"&&Object.defineProperty(i,u,{get:function(){return e[u]},set:function(h){return e[u]=h}})};for(var s in e)a(s);return i},kp=function(t,r,e){if(!r||!t.length)return[];var i=Math.ceil((r.currentTime()-e+3)*9e4),a=void 0;for(a=0;a<t.length&&!(t[a].pts>i);a++);return t.slice(a)},wp=function(t,r,e){if(!r.length)return t;if(e)return r.slice();var i=r[0].pts,a=0;for(a;a<t.length&&!(t[a].pts>=i);a++);return t.slice(0,a).concat(r)},Ap=function(t,r,e,i){for(var a=Math.ceil((r-i)*9e4),s=Math.ceil((e-i)*9e4),o=t.slice(),u=t.length;u--&&!(t[u].pts<=s););if(u===-1)return o;for(var l=u+1;l--&&!(t[l].pts<=a););return l=Math.max(l,0),o.splice(l,u-l+1),o},Pp=function(n){ht(t,n);function t(r,e){We(this,t);var i=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=r,i.codecs_=e,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=x.browser.IE_VERSION>=11;var a={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach(function(s){ll(s)?i.audioCodec_=s:cl(s)&&(i.videoCodec_=s)}),i.transmuxer_=new xp,i.transmuxer_.postMessage({action:"init",options:a}),i.transmuxer_.onmessage=function(s){if(s.data.action==="data")return i.data_(s);if(s.data.action==="done")return i.done_(s);if(s.data.action==="gopInfo")return i.appendGopInfo_(s)},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(o){typeof o=="number"&&o>=0&&(this.timestampOffset_=o,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:o}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(o){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=o),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=o)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){var o=null,u=null,l=0,h=[],d=[];if(!this.videoBuffer_&&!this.audioBuffer_)return x.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0)return x.createTimeRange();for(var p=this.videoBuffer_.buffered,y=this.audioBuffer_.buffered,b=p.length;b--;)h.push({time:p.start(b),type:"start"}),h.push({time:p.end(b),type:"end"});for(b=y.length;b--;)h.push({time:y.start(b),type:"start"}),h.push({time:y.end(b),type:"end"});for(h.sort(function(P,w){return P.time-w.time}),b=0;b<h.length;b++)h[b].type==="start"?(l++,l===2&&(o=h[b].time)):h[b].type==="end"&&(l--,l===1&&(u=h[b].time)),o!==null&&u!==null&&(d.push([o,u]),o=null,u=null);return x.createTimeRanges(d)}}),i}return Ke(t,[{key:"data_",value:function(e){var i=e.data.segment;i.data=new Uint8Array(i.data,e.data.byteOffset,e.data.byteLength),i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength),vp(this,this.mediaSource_,i),this.pendingBuffers_.push(i)}},{key:"done_",value:function(e){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var e=this,i=["audio","video"];i.forEach(function(a){if(e[a+"Codec_"]&&!e[a+"Buffer_"]){var s=null;if(e.mediaSource_[a+"Buffer_"])s=e.mediaSource_[a+"Buffer_"],s.updating=!1;else{var o=a+"Codec_",u=a+'/mp4;codecs="'+e[o]+'"';s=Cp(e.mediaSource_.nativeMediaSource_,u),e.mediaSource_[a+"Buffer_"]=s}e[a+"Buffer_"]=s,["update","updatestart","updateend"].forEach(function(l){s.addEventListener(l,function(){if(!(a==="audio"&&e.audioDisabled_)){l==="updateend"&&(e[a+"Buffer_"].updating=!1);var h=i.every(function(d){return d==="audio"&&e.audioDisabled_?!0:!(a!==d&&e[d+"Buffer_"]&&e[d+"Buffer_"].updating)});if(h)return e.trigger(l)}})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:kp(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=wp(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,i){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,i),this.gopBuffer_=Ap(this.gopBuffer_,e,i,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,i)),Rr(e,i,this.metadataTrack_),this.inbandTextTracks_)for(var a in this.inbandTextTracks_)Rr(e,i,this.inbandTextTracks_[a])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(a,s){var o=s.type,u=s.data,l=s.initSegment;return a[o].segments.push(u),a[o].bytes+=u.byteLength,a[o].initSegment=l,s.captions&&(a.captions=a.captions.concat(s.captions)),s.info&&(a[o].info=s.info),s.metadata&&(a.metadata=a.metadata.concat(s.metadata)),a},e),!this.videoBuffer_&&!this.audioBuffer_&&(e.video.bytes===0&&(this.videoCodec_=null),e.audio.bytes===0&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var i=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),_p(this,e.captions,e.metadata)):this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)&&(i=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,i&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,i){var a=0,s=void 0;if(e.bytes){s=new Uint8Array(e.bytes),e.segments.forEach(function(o){s.set(o,a),a+=o.byteLength});try{i.updating=!0,i.appendBuffer(s)}catch(o){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:o.message,originalError:o})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(x.EventTarget),jn=function(n){ht(t,n);function t(){We(this,t);var r=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e=void 0;r.nativeMediaSource_=new k.MediaSource;for(e in r.nativeMediaSource_)!(e in t.prototype)&&typeof r.nativeMediaSource_[e]=="function"&&(r[e]=r.nativeMediaSource_[e].bind(r.nativeMediaSource_));return r.duration_=NaN,Object.defineProperty(r,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(a){if(this.duration_=a,a!==1/0){this.nativeMediaSource_.duration=a;return}}}),Object.defineProperty(r,"seekable",{get:function(){return this.duration_===1/0?x.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(r,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(r,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),r.sourceBuffers=[],r.activeSourceBuffers_=[],r.updateActiveSourceBuffers_=function(){if(r.activeSourceBuffers_.length=0,r.sourceBuffers.length===1){var i=r.sourceBuffers[0];i.appendAudioInitSegment_=!0,i.audioDisabled_=!i.audioCodec_,r.activeSourceBuffers_.push(i);return}for(var a=!1,s=!0,o=0;o<r.player_.audioTracks().length;o++){var u=r.player_.audioTracks()[o];if(u.enabled&&u.kind!=="main"){a=!0,s=!1;break}}r.sourceBuffers.forEach(function(l,h){if(l.appendAudioInitSegment_=!0,l.videoCodec_&&l.audioCodec_)l.audioDisabled_=a;else if(l.videoCodec_&&!l.audioCodec_)l.audioDisabled_=!0,s=!1;else if(!l.videoCodec_&&l.audioCodec_&&(l.audioDisabled_=h?s:!s,l.audioDisabled_))return;r.activeSourceBuffers_.push(l)})},r.onPlayerMediachange_=function(){r.sourceBuffers.forEach(function(i){i.appendAudioInitSegment_=!0})},r.onHlsReset_=function(){r.sourceBuffers.forEach(function(i){i.transmuxer_&&i.transmuxer_.postMessage({action:"resetCaptions"})})},r.onHlsSegmentTimeMapping_=function(i){r.sourceBuffers.forEach(function(a){return a.timeMapping_=i.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(i){this.nativeMediaSource_.addEventListener(i,this.trigger.bind(this))},r),r.on("sourceopen",function(i){var a=j.querySelector('[src="'+r.url_+'"]');a&&(r.player_=x(a.parentNode),r.player_.tech_.on("hls-reset",r.onHlsReset_),r.player_.tech_.on("hls-segment-time-mapping",r.onHlsSegmentTimeMapping_),r.player_.audioTracks&&r.player_.audioTracks()&&(r.player_.audioTracks().on("change",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("addtrack",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("removetrack",r.updateActiveSourceBuffers_)),r.player_.on("mediachange",r.onPlayerMediachange_))}),r.on("sourceended",function(i){for(var a=sl(r.duration),s=0;s<r.sourceBuffers.length;s++){var o=r.sourceBuffers[s],u=o.metadataTrack_&&o.metadataTrack_.cues;u&&u.length&&(u[u.length-1].endTime=a)}}),r.on("sourceclose",function(i){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),r}return Ke(t,[{key:"addSeekableRange_",value:function(e,i){var a=void 0;if(this.duration!==1/0)throw a=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",a.code=11,a;(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=i)}},{key:"addSourceBuffer",value:function(e){var i=void 0,a=Ep(e);if(/^(video|audio)\/mp2t$/i.test(a.type)){var s=[];a.parameters&&a.parameters.codecs&&(s=a.parameters.codecs.split(","),s=dl(s),s=s.filter(function(o){return ll(o)||cl(o)})),s.length===0&&(s=["avc1.4d400d","mp4a.40.2"]),i=new Pp(this,s),this.sourceBuffers.length!==0&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(i),i}}]),t}(x.EventTarget),ro=0;x.mediaSources={};var hl=function(t,r){var e=x.mediaSources[t];if(e)e.trigger({type:"sourceopen",swfId:r});else throw new Error("Media Source not found (Video.js)")},$n=function(){return!!k.MediaSource&&!!k.MediaSource.isTypeSupported&&k.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Wr=function(){if(this.MediaSource={open:hl,supportsNativeMediaSources:$n},$n())return new jn;throw new Error("Cannot use create a virtual MediaSource for this video")};Wr.open=hl;Wr.supportsNativeMediaSources=$n;var fl={createObjectURL:function(t){var r="blob:vjs-media-source/",e=void 0;return t instanceof jn?(e=k.URL.createObjectURL(t.nativeMediaSource_),t.url_=e,e):t instanceof jn?(e=r+ro,ro++,x.mediaSources[e]=t,e):(e=k.URL.createObjectURL(t),t.url_=e,e)}};x.MediaSource=Wr;x.URL=fl;var Op=x.EventTarget,Lp=x.mergeOptions,io=function(t,r){for(var e=Lp(t,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod}),i=0;i<r.playlists.length;i++){var a=Nn(e,r.playlists[i]);a&&(e=a)}return Ma(r,function(s,o,u,l){if(s.playlists&&s.playlists.length){var h=s.playlists[0].uri,d=Nn(e,s.playlists[0]);d&&(e=d,e.mediaGroups[o][u][l].playlists[0]=e.playlists[h])}}),e},Hn=function(n){ht(t,n);function t(r,e,i,a){We(this,t);var s=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(s.hls_=e,s.withCredentials=i,!r)throw new Error("A non-empty playlist URL or playlist is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_()}),typeof r=="string"?(s.srcUrl=r,s.state="HAVE_NOTHING",et(s)):(s.masterPlaylistLoader_=a,s.state="HAVE_METADATA",s.started=!0,s.media(r),k.setTimeout(function(){s.trigger("loadedmetadata")},0),s)}return Ke(t,[{key:"dispose",value:function(){this.stopRequest(),k.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var a=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",a&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),i!=="HAVE_MASTER"&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1)}},{key:"load",value:function(){if(!this.started){this.start();return}this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function(){var e=Rd(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var i=0;i<e.playlists.length;i++){var a="placeholder-uri-"+i;e.playlists[i].uri=a,e.playlists[a]=e.playlists[i]}return Ma(e,function(s,o,u,l){if(s.playlists&&s.playlists.length){var h="placeholder-uri-"+o+"-"+u+"-"+l;s.playlists[0].uri=h,e.playlists[h]=s.playlists[0]}}),Gu(e),zu(e),e}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,a){if(e.request){if(e.request=null,i)return e.error={status:a.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:a.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.masterXml_=a.responseText,a.responseHeaders&&a.responseHeaders.date?e.masterLoaded_=Date.parse(a.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{key:"syncClientServerClock_",value:function(e){var i=this,a=Dd(this.masterXml_);if(a===null)return this.clientOffset_=this.masterLoaded_-Date.now(),e();if(a.method==="DIRECT")return this.clientOffset_=a.value-Date.now(),e();this.request=this.hls_.xhr({uri:ot(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(s,o){if(i.request){if(s)return i.clientOffset_=i.masterLoaded_-Date.now(),e();var u=void 0;a.method==="HEAD"?!o.responseHeaders||!o.responseHeaders.date?u=i.masterLoaded_:u=Date.parse(o.responseHeaders.date):u=Date.parse(o.responseText),i.clientOffset_=u-Date.now(),e()}})}},{key:"onClientServerClockSync_",value:function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),k.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&k.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,a){if(e.request){if(e.request=null,i)return e.error={status:a.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:a.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.masterXml_=a.responseText;var s=e.parseMasterXml();e.master=io(e.master,s),k.setTimeout(function(){e.trigger("minimumUpdatePeriod")},e.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var e=this,i=void 0,a=void 0;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,a=this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,a=this.parseMasterXml());var s=io(i,a);s?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=s:this.master=s,this.media_=s.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=k.setTimeout(function(){e.trigger("mediaupdatetimeout")},qu(this.media(),!!s))),this.trigger("loadedplaylist")}}]),t}(Op),Gr=function(t){return x.log.debug?x.log.debug.bind(x,"VHS:",t+" >"):function(){}};function xr(){}var Ip=function(){function n(t,r,e,i){We(this,n),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=e,this.mimeType_=r,this.logger_=Gr("SourceUpdater["+e+"]["+r+"]"),t.readyState==="closed"?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,r,i)):this.createSourceBuffer_(r,i)}return Ke(n,[{key:"createSourceBuffer_",value:function(r,e){var i=this;if(this.sourceBuffer_=this.mediaSource.addSourceBuffer(r),this.logger_("created SourceBuffer"),e&&(e.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)){e.on("sourcebufferadded",function(){i.start_()});return}this.start_()}},{key:"start_",value:function(){var r=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=r.pendingCallback_;r.pendingCallback_=null,r.logger_("buffered ["+Ba(r.buffered())+"]"),e&&e(),r.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(r){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},r)}},{key:"appendBuffer",value:function(r,e){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(r)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:x.createTimeRanges()}},{key:"remove",value:function(r,e){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+r+" => "+e+"]"),i.sourceBuffer_.remove(r,e)},xr)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(r){var e=this;return typeof r<"u"&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=r}),this.timestampOffset_=r),this.timestampOffset_}},{key:"queueCallback_",value:function(r,e){this.callbacks_.push([r.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var r=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(r=this.callbacks_.shift(),this.pendingCallback_=r[1],r[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&this.mediaSource.readyState==="open"&&this.sourceBuffer_.abort()}}]),n}(),qe={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},_t={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Rp=function(t){var r=void 0,e=void 0;return e=t.offset+t.length-1,r=t.offset,"bytes="+r+"-"+e},no=function(t){var r={};return t.byterange&&(r.Range=Rp(t.byterange)),r},pl=function(t){t.forEach(function(r){r.abort()})},Dp=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}},Mp=function(t){var r=t.target,e=Date.now()-r.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:e||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Na=function(t,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:_t.TIMEOUT,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:_t.ABORTED,xhr:r}:t?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:_t.FAILURE,xhr:r}:null},Fp=function(t,r){return function(e,i){var a=i.response,s=Na(e,i);if(s)return r(s,t);if(a.byteLength!==16)return r({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:_t.FAILURE,xhr:i},t);var o=new DataView(a);return t.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),r(null,t)}},Bp=function(t,r){return function(e,i){var a=i.response,s=Na(e,i);return s?r(s,t):a.byteLength===0?r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:_t.FAILURE,xhr:i},t):(t.map.bytes=new Uint8Array(i.response),r(null,t))}},Np=function(t,r){return function(e,i){var a=i.response,s=Na(e,i);return s?r(s,t):a.byteLength===0?r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:_t.FAILURE,xhr:i},t):(t.stats=Dp(i),t.key?t.encryptedBytes=new Uint8Array(i.response):t.bytes=new Uint8Array(i.response),r(null,t))}},Up=function(t,r,e){var i=function a(s){if(s.data.source===r.requestId){t.removeEventListener("message",a);var o=s.data.decrypted;return r.bytes=new Uint8Array(o.bytes,o.byteOffset,o.byteLength),e(null,r)}};t.addEventListener("message",i),t.postMessage(rl({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])},jp=function(t){return t.reduce(function(r,e){return e.code>r.code?e:r})},$p=function(t,r,e){var i=[],a=0;return function(s,o){if(s&&(pl(t),i.push(s)),a+=1,a===t.length){if(o.endOfAllRequests=Date.now(),i.length>0){var u=jp(i);return e(u,o)}return o.encryptedBytes?Up(r,o,e):e(null,o)}}},Hp=function(t,r){return function(e){return t.stats=x.mergeOptions(t.stats,Mp(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),r(e,t)}},Vp=function(t,r,e,i,a,s){var o=[],u=$p(o,e,s);if(i.key){var l=x.mergeOptions(r,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),h=Fp(i,u),d=t(l,h);o.push(d)}if(i.map&&!i.map.bytes){var p=x.mergeOptions(r,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:no(i.map)}),y=Bp(i,u),b=t(p,y);o.push(b)}var P=x.mergeOptions(r,{uri:i.resolvedUri,responseType:"arraybuffer",headers:no(i)}),w=Np(i,u),A=t(P,w);return A.addEventListener("progress",Hp(i,a)),o.push(A),function(){return pl(o)}},ml={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Dr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r={codecCount:0},e=void 0;return r.codecCount=t.split(",").length,r.codecCount=r.codecCount||2,e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t),e&&(r.videoCodec=e[2],r.videoObjectTypeIndicator=e[3]),r.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),r.audioProfile=r.audioProfile&&r.audioProfile[2],r},Wp=function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(r){return dl([r])[0]})},Cn=function(t,r,e){return t+"/"+r+'; codecs="'+e.filter(function(i){return!!i}).join(", ")+'"'},Gp=function(t){return t.segments&&t.segments.length&&t.segments[0].map?"mp4":"mp2t"},zp=function(t){var r=t.attributes||{};return r.CODECS?Dr(r.CODECS):ml},qp=function(t,r){if(!t.mediaGroups.AUDIO||!r)return null;var e=t.mediaGroups.AUDIO[r];if(!e)return null;for(var i in e){var a=e[i];if(a.default&&a.playlists)return Dr(a.playlists[0].attributes.CODECS).audioProfile}return null},Xp=function(t,r){var e=Gp(r),i=zp(r),a=r.attributes||{},s=!0,o=!1;if(!r)return[];if(t.mediaGroups.AUDIO&&a.AUDIO){var u=t.mediaGroups.AUDIO[a.AUDIO];if(u){o=!0,s=!1;for(var l in u)if(!u[l].uri&&!u[l].playlists){s=!0;break}}}o&&!i.audioProfile&&(s||(i.audioProfile=qp(t,a.AUDIO)),i.audioProfile||(x.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=ml.audioProfile));var h={};i.videoCodec&&(h.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(h.audio="mp4a.40."+i.audioProfile);var d=Cn("audio",e,[h.audio]),p=Cn("video",e,[h.video]),y=Cn("video",e,[h.video,h.audio]);return o?!s&&h.video?[p,d]:!s&&!h.video?[d,d]:[y,d]:h.video?[y]:[d]},ao=function(t,r){var e=void 0;return!t||(e=k.getComputedStyle(t),!e)?"":e[r]},Mr=function(t,r){var e=t.slice();t.sort(function(i,a){var s=r(i,a);return s===0?e.indexOf(i)-e.indexOf(a):s})},Ua=function(t,r){var e=void 0,i=void 0;return t.attributes.BANDWIDTH&&(e=t.attributes.BANDWIDTH),e=e||k.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(i=r.attributes.BANDWIDTH),i=i||k.Number.MAX_VALUE,e-i},Yp=function(t,r){var e=void 0,i=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(e=t.attributes.RESOLUTION.width),e=e||k.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(i=r.attributes.RESOLUTION.width),i=i||k.Number.MAX_VALUE,e===i&&t.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?t.attributes.BANDWIDTH-r.attributes.BANDWIDTH:e-i},Kp=function(t,r,e,i){var a=t.playlists.map(function(A){var B=void 0,Y=void 0,te=void 0;return B=A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,Y=A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height,te=A.attributes.BANDWIDTH,te=te||k.Number.MAX_VALUE,{bandwidth:te,width:B,height:Y,playlist:A}});Mr(a,function(A,B){return A.bandwidth-B.bandwidth}),a=a.filter(function(A){return!De.isIncompatible(A.playlist)});var s=a.filter(function(A){return De.isEnabled(A.playlist)});s.length||(s=a.filter(function(A){return!De.isDisabled(A.playlist)}));var o=s.filter(function(A){return A.bandwidth*qe.BANDWIDTH_VARIANCE<r}),u=o[o.length-1],l=o.filter(function(A){return A.bandwidth===u.bandwidth})[0],h=o.filter(function(A){return A.width&&A.height});Mr(h,function(A,B){return A.width-B.width});var d=h.filter(function(A){return A.width===e&&A.height===i});u=d[d.length-1];var p=d.filter(function(A){return A.bandwidth===u.bandwidth})[0],y=void 0,b=void 0,P=void 0;p||(y=h.filter(function(A){return A.width>e||A.height>i}),b=y.filter(function(A){return A.width===y[0].width&&A.height===y[0].height}),u=b[b.length-1],P=b.filter(function(A){return A.bandwidth===u.bandwidth})[0]);var w=P||p||l||s[0]||a[0];return w?w.playlist:null},Qp=function(){return Kp(this.playlists.master,this.systemBandwidth,parseInt(ao(this.tech_.el(),"width"),10),parseInt(ao(this.tech_.el(),"height"),10))},Jp=function(t){var r=t.master,e=t.currentTime,i=t.bandwidth,a=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,u=t.currentTimeline,l=t.syncController,h=r.playlists.filter(function(P){return!De.isIncompatible(P)}),d=h.filter(De.isEnabled);d.length||(d=h.filter(function(P){return!De.isDisabled(P)}));var p=d.filter(De.hasAttribute.bind(null,"BANDWIDTH")),y=p.map(function(P){var w=l.getSyncPoint(P,a,u,e),A=w?1:2,B=De.estimateSegmentRequestTime(s,i,P),Y=B*A-o;return{playlist:P,rebufferingImpact:Y}}),b=y.filter(function(P){return P.rebufferingImpact<=0});return Mr(b,function(P,w){return Ua(w.playlist,P.playlist)}),b.length?b[0]:(Mr(y,function(P,w){return P.rebufferingImpact-w.rebufferingImpact}),y[0]||null)},Zp=function(){var t=this.playlists.master.playlists.filter(De.isEnabled);Mr(t,function(e,i){return Ua(e,i)});var r=t.filter(function(e){return Dr(e.attributes.CODECS).videoCodec});return r[0]||null},em=500,so=function(t,r,e){if(!t||!r)return!1;var i=t.segments,a=e===i.length;return t.endList&&r.readyState==="open"&&a},oo=function(t){return typeof t=="number"&&isFinite(t)},tm=function(t,r,e){return t!=="main"||!r||!e?null:!e.containsAudio&&!e.containsVideo?"Neither audio nor video found in segment.":r.containsVideo&&!e.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.containsVideo&&e.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},rm=function(t,r,e){var i=void 0;return t.length&&t.start(0)>0&&t.start(0)<r?i=t.start(0):i=r-30,Math.min(i,r-e)},im=function(t){var r=t.segment,e=r.start,i=r.end,a=t.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=u===void 0?[]:u,h=t.mediaIndex,d=t.timeline;return["appending ["+h+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+e+" => "+i+"] in timeline ["+d+"]"].join(" ")},Vn=function(n){ht(t,n);function t(r){We(this,t);var e=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=r.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.hasPlayed_=r.hasPlayed,e.currentTime_=r.currentTime,e.seekable_=r.seekable,e.seeking_=r.seeking,e.duration_=r.duration,e.mediaSource_=r.mediaSource,e.hls_=r.hls,e.loaderType_=r.loaderType,e.startingMedia_=void 0,e.segmentMetadataTrack_=r.segmentMetadataTrack,e.goalBufferLength_=r.goalBufferLength,e.sourceType_=r.sourceType,e.state_="INIT",e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.mimeType_=null,e.sourceUpdater_=null,e.xhrOptions_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.decrypter_=r.decrypter,e.syncController_=r.syncController,e.syncPoint_={segmentIndex:0,time:0},e.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),e.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),e.fetchAtBuffer_=!1,e.logger_=Gr("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(e,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}}),e}return Ke(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return typeof e<"u"&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():x.createTimeRanges()}},{key:"initSegment",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e)return null;var a=Ei(e),s=this.initSegments_[a];return i&&!s&&e.bytes&&(this.initSegments_[a]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),s||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Ip(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){var a=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var o=a?a.id:null;if(this.logger_("playlist update ["+o+" => "+e.id+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri){this.mediaIndex!==null&&this.resyncLoader();return}var u=e.mediaSequence-a.mediaSequence;this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null&&(this.mediaIndex-=u),s&&(s.mediaIndex-=u,s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(a,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function(e,i){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,i){this.sourceUpdater_&&this.sourceUpdater_.remove(e,i),Rr(e,i,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=k.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=k.setTimeout(this.monitorBufferTick_.bind(this),em)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e){var i=so(this.playlist_,this.mediaSource_,e.mediaIndex);if(i){this.endOfStream();return}e.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()||((e.timeline!==this.currentTimeline_||e.startOfSegment!==null&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e))}}}},{key:"checkBuffer_",value:function(e,i,a,s,o,u){var l=0,h=void 0;e.length&&(l=e.end(e.length-1));var d=Math.max(0,l-o);if(!i.segments.length||d>=this.goalBufferLength_()||!s&&d>=1)return null;if(u===null)return a=this.getSyncSegmentCandidate_(i),this.generateSegmentInfo_(i,a,null,!0);if(a!==null){var p=i.segments[a];return p&&p.end?h=p.end:h=l,this.generateSegmentInfo_(i,a+1,h,!1)}if(this.fetchAtBuffer_){var y=De.getMediaInfoForTime(i,l,u.segmentIndex,u.time);a=y.mediaIndex,h=y.startTime}else{var b=De.getMediaInfoForTime(i,o,u.segmentIndex,u.time);a=b.mediaIndex,h=b.startTime}return this.generateSegmentInfo_(i,a,h,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var i=this;if(this.currentTimeline_===-1)return 0;var a=e.segments.map(function(s,o){return{timeline:s.timeline,segmentIndex:o}}).filter(function(s){return s.timeline===i.currentTimeline_});return a.length?a[Math.min(a.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,i,a,s){if(i<0||i>=e.segments.length)return null;var o=e.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:o.resolvedUri,mediaIndex:i,isSyncRequest:s,startOfSegment:a,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:o.timeline,duration:o.duration,segment:o}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var i=this.currentTime_(),a=e.bandwidth,s=this.pendingSegment_.duration,o=De.estimateSegmentRequestTime(s,a,this.playlist_,e.bytesReceived),u=gp(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(o<=u)return!1;var l=Jp({master:this.hls_.playlists.master,currentTime:i,bandwidth:a,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(l){var h=o-u,d=h-l.rebufferingImpact,p=.5;return u<=rr&&(p=1),!l.playlist||l.playlist.uri===this.playlist_.uri||d<p?!1:(this.bandwidth=l.playlist.attributes.BANDWIDTH*qe.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,i){!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(i.stats)||this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Vp(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var i=rm(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}},{key:"createSimplifiedSegmentObj_",value:function(e){var i=e.segment,a={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:e.requestId};if(i.key){var s=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key={resolvedUri:i.key.resolvedUri,iv:s}}return i.map&&(a.map=this.initSegment(i.map)),a}},{key:"segmentRequestFinished_",value:function(e,i){if(this.mediaRequests+=1,i.stats&&(this.mediaBytesTransferred+=i.stats.bytesReceived,this.mediaTransferDuration+=i.stats.roundTripTime),!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(i.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===_t.ABORTED){this.mediaRequestsAborted+=1;return}if(this.pause(),e.code===_t.TIMEOUT){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}this.bandwidth=i.stats.bandwidth,this.roundTrip=i.stats.roundTripTime,i.map&&(i.map=this.initSegment(i.map,!0)),this.processSegmentResponse_(i)}}},{key:"processSegmentResponse_",value:function(e){var i=this.pendingSegment_;i.bytes=e.bytes,e.map&&(i.segment.map.bytes=e.map.bytes),i.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_){this.state="READY";return}var i=this.pendingSegment_,a=i.segment,s=this.syncController_.probeSegmentInfo(i);typeof this.startingMedia_>"u"&&s&&(s.containsAudio||s.containsVideo)&&(this.startingMedia_={containsAudio:s.containsAudio,containsVideo:s.containsVideo});var o=tm(this.loaderType_,this.startingMedia_,s);if(o){this.error({message:o,blacklistDuration:1/0}),this.trigger("error");return}if(i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.timestampOffset!==null&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(i.timestampOffset),this.trigger("timestampoffset"));var u=this.syncController_.mappingForTimeline(i.timeline);if(u!==null&&this.trigger({type:"segmenttimemapping",mapping:u}),this.state="APPENDING",a.map){var l=Ei(a.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==l){var h=this.initSegment(a.map);this.sourceUpdater_.appendBuffer(h.bytes,function(){e.activeInitSegmentId_=l})}}i.byteLength=i.bytes.byteLength,typeof a.start=="number"&&typeof a.end=="number"?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration,this.logger_(im(i)),this.sourceUpdater_.appendBuffer(i.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_,i=e.segment,a=this.mediaIndex!==null;if(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3){this.resetEverything();return}a&&this.trigger("bandwidthupdate"),this.trigger("progress");var s=so(e.playlist,this.mediaSource_,e.mediaIndex+1);s&&this.endOfStream(),this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(e){var i=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/a*8*1e3);this.throughput.rate+=(s-i)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var i=e.segment,a=i.start,s=i.end;if(!(!oo(a)||!oo(s))){Rr(a,s,this.segmentMetadataTrack_);var o=k.WebKitDataCue||k.VTTCue,u={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:a,end:s},l=JSON.stringify(u),h=new o(a,s,l);h.value=u,this.segmentMetadataTrack_.addCue(h)}}}}]),t}(x.EventTarget),uo=new Uint8Array(`

`.split("").map(function(n){return n.charCodeAt(0)})),lo=function(t){return String.fromCharCode.apply(null,t)},nm=function(n){ht(t,n);function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};We(this,t);var i=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,e));return i.mediaSource_=null,i.subtitlesTrack_=null,i}return Ke(t,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return x.createTimeRanges();var e=this.subtitlesTrack_.cues,i=e[0].startTime,a=e[e.length-1].startTime;return x.createTimeRanges([[i,a]])}},{key:"initSegment",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e)return null;var a=Ei(e),s=this.initSegments_[a];if(i&&!s&&e.bytes){var o=uo.byteLength+e.bytes.byteLength,u=new Uint8Array(o);u.set(e.bytes),u.set(uo,e.bytes.byteLength),this.initSegments_[a]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:u}}return s||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(e,i){Rr(e,i,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(i=this.skipEmptySegments_(i),!!i){if(this.syncController_.timestampOffsetForTimeline(i.timeline)===null){var a=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(i)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var i=this.pendingSegment_,a=i.segment;if(typeof k.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s=function(){e.handleSegment_()};this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),this.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",s),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")});return}a.requested=!0;try{this.parseVTTCues_(i)}catch(o){return this.error({message:o.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach(function(o){e.subtitlesTrack_.addCue(o)}),this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function(e){var i=void 0,a=!1;typeof k.TextDecoder=="function"?i=new k.TextDecoder("utf8"):(i=k.WebVTT.StringDecoder(),a=!0);var s=new k.WebVTT.Parser(k,k.vttjs,i);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=function(l){return e.timestampmap=l},s.onparsingerror=function(l){x.log.warn("Error encountered when parsing cues: "+l.message)},e.segment.map){var o=e.segment.map.bytes;a&&(o=lo(o)),s.parse(o)}var u=e.bytes;a&&(u=lo(u)),s.parse(u),s.flush()}},{key:"updateTimeMapping_",value:function(e,i,a){var s=e.segment;if(i){if(!e.cues.length){s.empty=!0;return}var o=e.timestampmap,u=o.MPEGTS/9e4-o.LOCAL+i.mapping;if(e.cues.forEach(function(d){d.startTime+=u,d.endTime+=u}),!a.syncInfo){var l=e.cues[0].startTime,h=e.cues[e.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(l,h-s.duration)}}}}}]),t}(Vn),am=function(t,r){for(var e=t.cues,i=0;i<e.length;i++){var a=e[i];if(r>=a.adStartTime&&r<=a.adEndTime)return a}return null},sm=function(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(t.segments)for(var i=e,a=void 0,s=0;s<t.segments.length;s++){var o=t.segments[s];if(a||(a=am(r,i+o.duration/2)),a){if("cueIn"in o){a.endTime=i,a.adEndTime=i,i+=o.duration,a=null;continue}if(i<a.endTime){i+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new k.VTTCue(i,i+o.duration,o.cueOut),a.adStartTime=i,a.adEndTime=i+parseFloat(o.cueOut),r.addCue(a)),"cueOutCont"in o){var u=void 0,l=void 0,h=o.cueOutCont.split("/").map(parseFloat),d=zf(h,2);u=d[0],l=d[1],a=new k.VTTCue(i,i+o.duration,""),a.adStartTime=i-u,a.adEndTime=a.adStartTime+l,r.addCue(a)}i+=o.duration}},om=ph.inspect,co=[{name:"VOD",run:function(t,r,e,i,a){if(e!==1/0){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function(t,r,e,i,a){if(!t.datetimeToDisplayTime)return null;var s=r.segments||[],o=null,u=null;a=a||0;for(var l=0;l<s.length;l++){var h=s[l];if(h.dateTimeObject){var d=h.dateTimeObject.getTime()/1e3,p=d+t.datetimeToDisplayTime,y=Math.abs(a-p);if(u!==null&&u<y)break;u=y,o={time:p,segmentIndex:l}}}return o}},{name:"Segment",run:function(t,r,e,i,a){var s=r.segments||[],o=null,u=null;a=a||0;for(var l=0;l<s.length;l++){var h=s[l];if(h.timeline===i&&typeof h.start<"u"){var d=Math.abs(a-h.start);if(u!==null&&u<d)break;(!o||u===null||u>=d)&&(u=d,o={time:h.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(t,r,e,i,a){var s=null;if(a=a||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var o=null,u=0;u<r.discontinuityStarts.length;u++){var l=r.discontinuityStarts[u],h=r.discontinuitySequence+u+1,d=t.discontinuities[h];if(d){var p=Math.abs(a-d.time);if(o!==null&&o<p)break;(!s||o===null||o>=p)&&(o=p,s={time:d.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function(t,r,e,i,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence};return s}return null}}],um=function(n){ht(t,n);function t(){We(this,t);var r=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.inspectCache_=void 0,r.timelines=[],r.discontinuities=[],r.datetimeToDisplayTime=null,r.logger_=Gr("SyncController"),r}return Ke(t,[{key:"getSyncPoint",value:function(e,i,a,s){var o=this.runStrategies_(e,i,a,s);return o.length?this.selectSyncPoint_(o,{key:"time",value:s}):null}},{key:"getExpiredTime",value:function(e,i){if(!e||!e.segments)return null;var a=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!a.length)return null;var s=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+kr(e,s.segmentIndex,0))}},{key:"runStrategies_",value:function(e,i,a,s){for(var o=[],u=0;u<co.length;u++){var l=co[u],h=l.run(this,e,i,a,s);h&&(h.strategy=l.name,o.push({strategy:l.name,syncPoint:h}))}return o}},{key:"selectSyncPoint_",value:function(e,i){for(var a=e[0].syncPoint,s=Math.abs(e[0].syncPoint[i.key]-i.value),o=e[0].strategy,u=1;u<e.length;u++){var l=Math.abs(e[u].syncPoint[i.key]-i.value);l<s&&(s=l,a=e[u].syncPoint,o=e[u].strategy)}return this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy"+(" ["+o+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex+"]")),a}},{key:"saveExpiredSegmentInfo",value:function(e,i){for(var a=i.mediaSequence-e.mediaSequence,s=a-1;s>=0;s--){var o=e.segments[s];if(o&&typeof o.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+s,time:o.start},this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+","+(" mediaSequence: "+i.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var i=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var i=e.segment,a=e.playlist,s=void 0;return i.map?s=this.probeMp4Segment_(e):s=this.probeTsSegment_(e),s&&this.calculateSegmentTimeMapping_(e,s)&&(this.saveDiscontinuitySyncInfo_(e),a.syncInfo||(a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:i.start})),s}},{key:"probeMp4Segment_",value:function(e){var i=e.segment,a=Ts.timescale(i.map.bytes),s=Ts.startTime(a,e.bytes);return e.timestampOffset!==null&&(e.timestampOffset-=s),{start:s,end:s+i.duration}}},{key:"probeTsSegment_",value:function(e){var i=om(e.bytes,this.inspectCache_),a=void 0,s=void 0;return i?(i.video&&i.video.length===2?(this.inspectCache_=i.video[1].dts,a=i.video[0].dtsTime,s=i.video[1].dtsTime):i.audio&&i.audio.length===2&&(this.inspectCache_=i.audio[1].dts,a=i.audio[0].dtsTime,s=i.audio[1].dtsTime),{start:a,end:s,containsVideo:i.video&&i.video.length===2,containsAudio:i.audio&&i.audio.length===2}):null}},{key:"timestampOffsetForTimeline",value:function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,i){var a=e.segment,s=this.timelines[e.timeline];if(e.timestampOffset!==null)s={time:e.startOfSegment,mapping:e.startOfSegment-i.start},this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+s.time+"] [mapping: "+s.mapping+"]")),a.start=e.startOfSegment,a.end=i.end+s.mapping;else if(s)a.start=i.start+s.mapping,a.end=i.end+s.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var i=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(var s=0;s<i.discontinuityStarts.length;s++){var o=i.discontinuityStarts[s],u=i.discontinuitySequence+s+1,l=o-e.mediaIndex,h=Math.abs(l);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>h){var d=void 0;l<0?d=a.start-kr(i,e.mediaIndex,o):d=a.end+kr(i,e.mediaIndex+1,o),this.discontinuities[u]={time:d,accuracy:h}}}}}]),t}(x.EventTarget),lm=new ol("./decrypter-worker.worker.js",function(n,t){var r=this;(function(){var e=typeof n<"u"?n:typeof global<"u"?global:typeof r<"u"?r:{},i;typeof n<"u"?i=n:typeof e<"u"?i=e:typeof r<"u"?i=r:i={};var a=i;function s(q){return q.subarray(0,q.byteLength-q[q.byteLength-1])}var o=function(H,R){if(!(H instanceof R))throw new TypeError("Cannot call a class as a function")},u=function(){function q(H,R){for(var U=0;U<R.length;U++){var X=R[U];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(H,X.key,X)}}return function(H,R,U){return R&&q(H.prototype,R),U&&q(H,U),H}}(),l=function(H,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof R>"u"?"undefined":Ze(R)));H.prototype=Object.create(R&&R.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(H,R):H.__proto__=R)},h=function(H,R){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&((typeof R>"u"?"undefined":Ze(R))==="object"||typeof R=="function")?R:H},d=function(){var H=[[[],[],[],[],[]],[[],[],[],[],[]]],R=H[0],U=H[1],X=R[4],re=U[4],Q=void 0,D=void 0,W=void 0,Z=[],ae=[],de=void 0,ye=void 0,Pe=void 0,ve=void 0,Oe=void 0,oe=void 0;for(Q=0;Q<256;Q++)ae[(Z[Q]=Q<<1^(Q>>7)*283)^Q]=Q;for(D=W=0;!X[D];D^=de||1,W=ae[W]||1)for(ve=W^W<<1^W<<2^W<<3^W<<4,ve=ve>>8^ve&255^99,X[D]=ve,re[ve]=D,Pe=Z[ye=Z[de=Z[D]]],oe=Pe*16843009^ye*65537^de*257^D*16843008,Oe=Z[ve]*257^ve*16843008,Q=0;Q<4;Q++)R[Q][D]=Oe=Oe<<24^Oe>>>8,U[Q][ve]=oe=oe<<24^oe>>>8;for(Q=0;Q<5;Q++)R[Q]=R[Q].slice(0),U[Q]=U[Q].slice(0);return H},p=null,y=function(){function q(H){o(this,q),p||(p=d()),this._tables=[[p[0][0].slice(),p[0][1].slice(),p[0][2].slice(),p[0][3].slice(),p[0][4].slice()],[p[1][0].slice(),p[1][1].slice(),p[1][2].slice(),p[1][3].slice(),p[1][4].slice()]];var R=void 0,U=void 0,X=void 0,re=void 0,Q=void 0,D=this._tables[0][4],W=this._tables[1],Z=H.length,ae=1;if(Z!==4&&Z!==6&&Z!==8)throw new Error("Invalid aes key size");for(re=H.slice(0),Q=[],this._key=[re,Q],R=Z;R<4*Z+28;R++)X=re[R-1],(R%Z===0||Z===8&&R%Z===4)&&(X=D[X>>>24]<<24^D[X>>16&255]<<16^D[X>>8&255]<<8^D[X&255],R%Z===0&&(X=X<<8^X>>>24^ae<<24,ae=ae<<1^(ae>>7)*283)),re[R]=re[R-Z]^X;for(U=0;R;U++,R--)X=re[U&3?R:R-4],R<=4||U<4?Q[U]=X:Q[U]=W[0][D[X>>>24]]^W[1][D[X>>16&255]]^W[2][D[X>>8&255]]^W[3][D[X&255]]}return q.prototype.decrypt=function(R,U,X,re,Q,D){var W=this._key[1],Z=R^W[0],ae=re^W[1],de=X^W[2],ye=U^W[3],Pe=void 0,ve=void 0,Oe=void 0,oe=W.length/4-2,Ue=void 0,tt=4,ft=this._tables[1],xt=ft[0],Ge=ft[1],rt=ft[2],me=ft[3],Et=ft[4];for(Ue=0;Ue<oe;Ue++)Pe=xt[Z>>>24]^Ge[ae>>16&255]^rt[de>>8&255]^me[ye&255]^W[tt],ve=xt[ae>>>24]^Ge[de>>16&255]^rt[ye>>8&255]^me[Z&255]^W[tt+1],Oe=xt[de>>>24]^Ge[ye>>16&255]^rt[Z>>8&255]^me[ae&255]^W[tt+2],ye=xt[ye>>>24]^Ge[Z>>16&255]^rt[ae>>8&255]^me[de&255]^W[tt+3],tt+=4,Z=Pe,ae=ve,de=Oe;for(Ue=0;Ue<4;Ue++)Q[(3&-Ue)+D]=Et[Z>>>24]<<24^Et[ae>>16&255]<<16^Et[de>>8&255]<<8^Et[ye&255]^W[tt++],Pe=Z,Z=ae,ae=de,de=ye,ye=Pe},q}(),b=function(){function q(){o(this,q),this.listeners={}}return q.prototype.on=function(R,U){this.listeners[R]||(this.listeners[R]=[]),this.listeners[R].push(U)},q.prototype.off=function(R,U){if(!this.listeners[R])return!1;var X=this.listeners[R].indexOf(U);return this.listeners[R].splice(X,1),X>-1},q.prototype.trigger=function(R){var U=this.listeners[R];if(U)if(arguments.length===2)for(var X=U.length,re=0;re<X;++re)U[re].call(this,arguments[1]);else for(var Q=Array.prototype.slice.call(arguments,1),D=U.length,W=0;W<D;++W)U[W].apply(this,Q)},q.prototype.dispose=function(){this.listeners={}},q.prototype.pipe=function(R){this.on("data",function(U){R.push(U)})},q}(),P=function(q){l(H,q);function H(){o(this,H);var R=h(this,q.call(this,b));return R.jobs=[],R.delay=1,R.timeout_=null,R}return H.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},H.prototype.push=function(U){this.jobs.push(U),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},H}(b),w=function(H){return H<<24|(H&65280)<<8|(H&16711680)>>8|H>>>24},A=function(H,R,U){var X=new Int32Array(H.buffer,H.byteOffset,H.byteLength>>2),re=new y(Array.prototype.slice.call(R)),Q=new Uint8Array(H.byteLength),D=new Int32Array(Q.buffer),W=void 0,Z=void 0,ae=void 0,de=void 0,ye=void 0,Pe=void 0,ve=void 0,Oe=void 0,oe=void 0;for(W=U[0],Z=U[1],ae=U[2],de=U[3],oe=0;oe<X.length;oe+=4)ye=w(X[oe]),Pe=w(X[oe+1]),ve=w(X[oe+2]),Oe=w(X[oe+3]),re.decrypt(ye,Pe,ve,Oe,D,oe),D[oe]=w(D[oe]^W),D[oe+1]=w(D[oe+1]^Z),D[oe+2]=w(D[oe+2]^ae),D[oe+3]=w(D[oe+3]^de),W=ye,Z=Pe,ae=ve,de=Oe;return Q},B=function(){function q(H,R,U,X){o(this,q);var re=q.STEP,Q=new Int32Array(H.buffer),D=new Uint8Array(H.byteLength),W=0;for(this.asyncStream_=new P,this.asyncStream_.push(this.decryptChunk_(Q.subarray(W,W+re),R,U,D)),W=re;W<Q.length;W+=re)U=new Uint32Array([w(Q[W-4]),w(Q[W-3]),w(Q[W-2]),w(Q[W-1])]),this.asyncStream_.push(this.decryptChunk_(Q.subarray(W,W+re),R,U,D));this.asyncStream_.push(function(){X(null,s(D))})}return q.prototype.decryptChunk_=function(R,U,X,re){return function(){var Q=A(R,U,X);re.set(Q,R.byteOffset)}},u(q,null,[{key:"STEP",get:function(){return 32e3}}]),q}(),Y=function(H){var R={};return Object.keys(H).forEach(function(U){var X=H[U];ArrayBuffer.isView(X)?R[U]={bytes:X.buffer,byteOffset:X.byteOffset,byteLength:X.byteLength}:R[U]=X}),R},te=function(H){H.onmessage=function(R){var U=R.data,X=new Uint8Array(U.encrypted.bytes,U.encrypted.byteOffset,U.encrypted.byteLength),re=new Uint32Array(U.key.bytes,U.key.byteOffset,U.key.byteLength/4),Q=new Uint32Array(U.iv.bytes,U.iv.byteOffset,U.iv.byteLength/4);new B(X,re,Q,function(D,W){a.postMessage(Y({source:U.source,decrypted:W}),[W.buffer])})}},le=new te(r);return le})()}),cm=function(t){var r=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},Ci=function(t,r){t.abort(),t.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},Wn=function(t,r){r.activePlaylistLoader=t,t.load()},dm=function(t,r){return function(){var e=r.segmentLoaders,i=e[t],a=e.main,s=r.mediaTypes[t],o=s.activeTrack(),u=s.activeGroup(o),l=s.activePlaylistLoader;if(Ci(i,s),!!u){if(!u.playlistLoader){l&&a.resetEverything();return}i.resyncLoader(),Wn(u.playlistLoader,s)}}},hm=function(t,r){return function(){var e=r.segmentLoaders,i=e[t],a=e.main,s=r.mediaTypes[t],o=s.activeTrack(),u=s.activeGroup(o),l=s.activePlaylistLoader;if(Ci(i,s),!!u){if(!u.playlistLoader){a.resetEverything();return}if(l===u.playlistLoader){Wn(u.playlistLoader,s);return}i.track&&i.track(o),i.resetEverything(),Wn(u.playlistLoader,s)}}},ki={AUDIO:function(t,r){return function(){var e=r.segmentLoaders[t],i=r.mediaTypes[t],a=r.blacklistCurrentPlaylist;Ci(e,i);var s=i.activeTrack(),o=i.activeGroup(),u=(o.filter(function(d){return d.default})[0]||o[0]).id,l=i.tracks[u];if(s===l){a({message:"Problem encountered loading the default audio track."});return}x.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var h in i.tracks)i.tracks[h].enabled=i.tracks[h]===l;i.onTrackChanged()}},SUBTITLES:function(t,r){return function(){var e=r.segmentLoaders[t],i=r.mediaTypes[t];x.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ci(e,i);var a=i.activeTrack();a&&(a.mode="disabled"),i.onTrackChanged()}}},ho={AUDIO:function(t,r,e){if(r){var i=e.tech,a=e.requestOptions,s=e.segmentLoaders[t];r.on("loadedmetadata",function(){var o=r.media();s.playlist(o,a),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",ki[t](t,e))}},SUBTITLES:function(t,r,e){var i=e.tech,a=e.requestOptions,s=e.segmentLoaders[t],o=e.mediaTypes[t];r.on("loadedmetadata",function(){var u=r.media();s.playlist(u,a),s.track(o.activeTrack()),(!i.paused()||u.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",ki[t](t,e))}},fm=function(t,r){return function(e){return e.attributes[t]===r}},pm=function(t){return function(r){return r.resolvedUri===t}},mm={AUDIO:function(t,r){var e=r.hls,i=r.sourceType,a=r.segmentLoaders[t],s=r.requestOptions.withCredentials,o=r.master,u=o.mediaGroups,l=o.playlists,h=r.mediaTypes[t],d=h.groups,p=h.tracks,y=r.masterPlaylistLoader;(!u[t]||Object.keys(u[t]).length===0)&&(u[t]={main:{default:{default:!0}}});for(var b in u[t]){d[b]||(d[b]=[]);var P=l.filter(fm(t,b));for(var w in u[t][b]){var A=u[t][b][w],B=P.filter(pm(A.resolvedUri));B.length&&delete A.resolvedUri;var Y=void 0;if(A.resolvedUri?Y=new xi(A.resolvedUri,e,s):A.playlists&&i==="dash"?Y=new Hn(A.playlists[0],e,s,y):Y=null,A=x.mergeOptions({id:w,playlistLoader:Y},A),ho[t](t,A.playlistLoader,r),d[b].push(A),typeof p[w]>"u"){var te=new x.AudioTrack({id:w,kind:cm(A),enabled:!1,language:A.language,default:A.default,label:w});p[w]=te}}}a.on("error",ki[t](t,r))},SUBTITLES:function(t,r){var e=r.tech,i=r.hls,a=r.sourceType,s=r.segmentLoaders[t],o=r.requestOptions.withCredentials,u=r.master.mediaGroups,l=r.mediaTypes[t],h=l.groups,d=l.tracks,p=r.masterPlaylistLoader;for(var y in u[t]){h[y]||(h[y]=[]);for(var b in u[t][y])if(!u[t][y][b].forced){var P=u[t][y][b],w=void 0;if(a==="hls"?w=new xi(P.resolvedUri,i,o):a==="dash"&&(w=new Hn(P.playlists[0],i,o,p)),P=x.mergeOptions({id:b,playlistLoader:w},P),ho[t](t,P.playlistLoader,r),h[y].push(P),typeof d[b]>"u"){var A=e.addRemoteTextTrack({id:b,kind:"subtitles",enabled:!1,language:P.language,label:b},!1).track;d[b]=A}}}s.on("error",ki[t](t,r))},"CLOSED-CAPTIONS":function(t,r){var e=r.tech,i=r.master.mediaGroups,a=r.mediaTypes[t],s=a.groups,o=a.tracks;for(var u in i[t]){s[u]||(s[u]=[]);for(var l in i[t][u]){var h=i[t][u][l];if(h.instreamId.match(/CC\d/)&&(s[u].push(x.mergeOptions({id:l},h)),typeof o[l]>"u")){var d=e.addRemoteTextTrack({id:h.instreamId,kind:"captions",enabled:!1,language:h.language,label:l},!1).track;o[l]=d}}}}},gm=function(t,r){return function(e){var i=r.masterPlaylistLoader,a=r.mediaTypes[t].groups,s=i.media();if(!s)return null;var o=null;return s.attributes[t]&&(o=a[s.attributes[t]]),o=o||a.main,typeof e>"u"?o:e===null?null:o.filter(function(u){return u.id===e.id})[0]||null}},vm={AUDIO:function(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e)if(e[i].enabled)return e[i];return null}},SUBTITLES:function(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e)if(e[i].mode==="showing")return e[i];return null}}},ym=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(h){mm[h](h,t)});var r=t.mediaTypes,e=t.masterPlaylistLoader,i=t.tech,a=t.hls;["AUDIO","SUBTITLES"].forEach(function(h){r[h].activeGroup=gm(h,t),r[h].activeTrack=vm[h](h,t),r[h].onGroupChanged=dm(h,t),r[h].onTrackChanged=hm(h,t)});var s=r.AUDIO.activeGroup(),o=(s.filter(function(h){return h.default})[0]||s[0]).id;r.AUDIO.tracks[o].enabled=!0,r.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(h){return r[h].onGroupChanged()})});var u=function(){r.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),a.on("dispose",function(){i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var l in r.AUDIO.tracks)i.audioTracks().addTrack(r.AUDIO.tracks[l])},_m=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){t[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:xr,activeTrack:xr,onGroupChanged:xr,onTrackChanged:xr}}),t},Tm=60*2,gt=void 0,bm=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Sm=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},xm=function(n){ht(t,n);function t(r){We(this,t);var e=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=r.url,a=r.withCredentials,s=r.tech,o=r.bandwidth,u=r.externHls,l=r.useCueTags,h=r.blacklistDuration,d=r.enableLowInitialPlaylist,p=r.sourceType;if(!i)throw new Error("A non-empty playlist URL is required");gt=u,e.withCredentials=a,e.tech_=s,e.hls_=s.hls,e.sourceType_=p,e.useCueTags_=l,e.blacklistDuration=h,e.enableLowInitialPlaylist=d,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:e.withCredentials,timeout:null},e.mediaTypes_=_m(),e.mediaSource=new x.MediaSource,e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_.bind(e)),e.seekable_=x.createTimeRanges(),e.hasPlayed_=function(){return!1},e.syncController_=new um(r),e.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new lm;var y={hls:e.hls_,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.mediaSource.duration},hasPlayed:function(){return e.hasPlayed_()},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:o,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_};return e.masterPlaylistLoader_=e.sourceType_==="dash"?new Hn(i,e.hls_,e.withCredentials):new xi(i,e.hls_,e.withCredentials),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new Vn(x.mergeOptions(y,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new Vn(x.mergeOptions(y,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new nm(x.mergeOptions(y,{loaderType:"vtt"}),r),e.setupSegmentLoaderListeners_(),bm.forEach(function(b){e[b+"_"]=Sm.bind(e,b)}),e.logger_=Gr("MPC"),e.masterPlaylistLoader_.load(),e}return Ke(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var i=e.masterPlaylistLoader_.media(),a=e.masterPlaylistLoader_.targetDuration*1.5*1e3;Un(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=a,i.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load()),ym({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),i);try{e.setupSourceBuffers_()}catch(s){return x.log.warn("Failed to create SourceBuffers",s),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var i=e.masterPlaylistLoader_.media();if(!i){e.excludeUnsupportedVariants_();var a=void 0;e.enableLowInitialPlaylist&&(a=e.selectInitialPlaylist()),a||(a=e.selectPlaylist()),e.initialMedia_=a,e.masterPlaylistLoader_.media(e.initialMedia_);return}if(e.useCueTags_&&e.updateAdCues_(i),e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.updateDuration(),e.tech_.paused()||e.mainSegmentLoader_.load(),!i.endList){var s=function(){var l=e.seekable();l.length!==0&&e.mediaSource.addSeekableRange_(l.start(0),l.end(0))};if(e.duration()!==1/0){var o=function u(){e.duration()===1/0?s():e.tech_.one("durationchange",u)};e.tech_.one("durationchange",o)}else s()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var i=e.masterPlaylistLoader_.media(),a=e.masterPlaylistLoader_.targetDuration*1.5*1e3;Un(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=a,e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var i=e.masterPlaylistLoader_.media(),a=e.stuckAtPlaylistEnd_(i);a&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,i){var a=e.mediaGroups||{},s=!0,o=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var l in a.AUDIO[u]){var h=a.AUDIO[u][l];h.uri||(s=!1)}s&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),gt.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),gt.Playlist.isFmp4(i)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),o.length&&Object.keys(a.AUDIO[o[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var i=e.selectPlaylist(),a=e.masterPlaylistLoader_.media(),s=e.tech_.buffered(),o=s.length?s.end(s.length-1)-e.tech_.currentTime():0,u=e.bufferLowWaterLine();(!a.endList||e.duration()<qe.MAX_BUFFER_LOW_WATER_LINE||i.attributes.BANDWIDTH<a.attributes.BANDWIDTH||o>=u)&&e.masterPlaylistLoader_.media(i),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Tm)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(i){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:i.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}}},{key:"setupFirstPlay",value:function(){var e=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_())return!1;if(!i.endList){var a=this.seekable();if(!a.length)return!1;if(x.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(a.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(i){return x.log.warn("Failed to create Source Buffers",i),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,function(i){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){var i=this.seekable();if(!i.length)return!1;var a=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(a===null)return!1;var s=gt.Playlist.playlistEnd(e,a),o=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return s-o<=Ot;var l=u.end(u.length-1);return l-o<=Ot&&s-l<=Ot}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments[1],a=void 0,s=void 0;if(a=e.playlist||this.masterPlaylistLoader_.media(),i=i||e.blacklistDuration||this.blacklistDuration,!a){this.error=e;try{return this.mediaSource.endOfStream("network")}catch{return this.trigger("error")}}var o=this.masterPlaylistLoader_.master.playlists.filter(Hi).length===1;return o?(x.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o)):(a.excludeUntil=Date.now()+i*1e3,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),s=this.selectPlaylist(),x.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(s))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var i=al(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:gt.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,i=void 0;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var s=this.syncController_.getExpiredTime(a,this.mediaSource.duration);s!==null&&(e=gt.Playlist.seekable(a,s),e.length!==0&&(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.mediaSource.duration),s===null||(i=gt.Playlist.seekable(a,s),i.length===0))||(i?i.start(0)>e.end(0)||e.start(0)>i.end(0)?this.seekable_=e:this.seekable_=x.createTimeRanges([[i.start(0)>e.start(0)?i.start(0):e.start(0),i.end(0)<e.end(0)?i.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+Ba(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))))}}}},{key:"updateDuration",value:function(){var e=this,i=this.mediaSource.duration,a=gt.Playlist.duration(this.masterPlaylistLoader_.media()),s=this.tech_.buffered(),o=function u(){e.mediaSource.duration=a,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",u)};s.length>0&&(a=Math.max(a,s.end(s.length-1))),i!==a&&(this.mediaSource.readyState!=="open"?this.mediaSource.addEventListener("sourceopen",o):o())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(i){var a=e.mediaTypes_[i].groups;for(var s in a)a[s].forEach(function(o){o.playlistLoader&&o.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e=this.masterPlaylistLoader_.media(),i=void 0;if(!(!e||this.mediaSource.readyState!=="open")){if(i=Xp(this.masterPlaylistLoader_.master,e),i.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(i),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(e){var i=e.length>1&&e[0].indexOf(",")===-1&&e[0]!==e[1]?new x.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],i),e[1]&&this.audioSegmentLoader_.mimeType(e[1],i)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&k.MediaSource&&k.MediaSource.isTypeSupported&&!k.MediaSource.isTypeSupported('video/mp4; codecs="'+Wp(e.attributes.CODECS)+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var i=2,a=null,s=void 0;e.attributes.CODECS&&(s=Dr(e.attributes.CODECS),a=s.videoCodec,i=s.codecCount),this.master().playlists.forEach(function(o){var u={codecCount:2,videoCodec:null};o.attributes.CODECS&&(u=Dr(o.attributes.CODECS)),u.codecCount!==i&&(o.excludeUntil=1/0),u.videoCodec!==a&&(o.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var i=0,a=this.seekable();a.length&&(i=a.start(0)),sm(e,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),i=qe.GOAL_BUFFER_LENGTH,a=qe.GOAL_BUFFER_LENGTH_RATE,s=Math.max(i,qe.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*a,s)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),i=qe.BUFFER_LOW_WATER_LINE,a=qe.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(i,qe.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*a,s)}}]),t}(x.EventTarget),Em=function(t,r,e){return function(i){var a=t.master.playlists[r],s=Fa(a),o=Hi(a);return typeof i>"u"?o:(i?delete a.disabled:a.disabled=!0,i!==o&&!s&&(e(),i?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),i)}},Cm=function n(t,r,e){We(this,n);var i=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes.RESOLUTION){var a=r.attributes.RESOLUTION;this.width=a.width,this.height=a.height}this.bandwidth=r.attributes.BANDWIDTH,this.id=e,this.enabled=Em(t.playlists,r.uri,i)},km=function(t){var r=t.playlists;t.representations=function(){return r.master.playlists.filter(function(e){return!Fa(e)}).map(function(e,i){return new Cm(t,e,e.uri)})}},fo=["seeking","seeked","pause","playing","error"],wm=function(){function n(t){var r=this;We(this,n),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Gr("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},i=function(){return r.techWaiting_()},a=function(){return r.cancelTimer_()},s=function(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",i),this.tech_.on(fo,a),this.tech_.on("canplay",e),this.dispose=function(){r.logger_("dispose"),r.tech_.off("seekablechanged",s),r.tech_.off("waiting",i),r.tech_.off(fo,a),r.tech_.off("canplay",e),r.checkCurrentTimeTimeout_&&k.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}return Ke(n,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&k.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=k.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();return}if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+Ot>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var r=this.tech_.seeking(),e=this.seekable(),i=this.tech_.currentTime(),a=void 0;if(r&&this.afterSeekableWindow_(e,i)){var s=e.end(e.length-1);a=s}if(r&&this.beforeSeekableWindow_(e,i)){var o=e.start(0);a=o+Ot}return typeof a<"u"?(this.logger_("Trying to seek outside of seekable at time "+i+" with "+("seekable range "+Ba(e)+". Seeking to ")+(a+".")),this.tech_.setCurrentTime(a),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),i=al(e,r);if(i.length&&r+3<=i.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}}},{key:"techWaiting_",value:function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var i=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+i)),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.buffered(),s=Js(a,e);if(this.videoUnderflow_(s,a,e))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(s.length>0){var o=s.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+o+", seeking "+("to "+s.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),o*1e3,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(r,e){return r.length?e>r.end(r.length-1)+Ot:!1}},{key:"beforeSeekableWindow_",value:function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-Ot)}},{key:"videoUnderflow_",value:function(r,e,i){if(r.length===0){var a=this.gapFromVideoUnderflow_(e,i);if(a)return this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+i)),!0}return!1}},{key:"skipTheGap_",value:function(r){var e=this.tech_.buffered(),i=this.tech_.currentTime(),a=Js(e,i);this.cancelTimer_(),!(a.length===0||i!==r)&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",r,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+rr),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(r,e){for(var i=mp(r),a=0;a<i.length;a++){var s=i.start(a),o=i.end(a);if(e-s<4&&e-s>2)return{start:s,end:o}}return null}}]),n}(),Am={errorInterval:30,getSource:function(t){var r=this.tech({IWillNotUseThisInPlugins:!0}),e=r.currentSource_;return t(e)}},Pm=function n(t,r){var e=0,i=0,a=x.mergeOptions(Am,r);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){i&&t.currentTime(i)},o=function(p){p!=null&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(p),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){if(Date.now()-e<a.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){x.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return e=Date.now(),a.getSource.call(t,o)},l=function d(){t.off("loadedmetadata",s),t.off("error",u),t.off("dispose",d)},h=function(p){l(),n(t,p)};t.on("error",u),t.on("dispose",l),t.reloadSourceOnError=h},po=function(t){Pm(this,t)},Om="1.1.0",Le={PlaylistLoader:xi,Playlist:De,Decrypter:bh,AsyncStream:Io,decrypt:Ro,utils:pp,STANDARD_PLAYLIST_SELECTOR:Qp,INITIAL_PLAYLIST_SELECTOR:Zp,comparePlaylistBandwidth:Ua,comparePlaylistResolution:Yp,xhr:tl()},mo=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(n){Object.defineProperty(Le,n,{get:function(){return x.log.warn("using Hls."+n+" is UNSAFE be sure you know what you are doing"),qe[n]},set:function(r){if(x.log.warn("using Hls."+n+" is UNSAFE be sure you know what you are doing"),typeof r!="number"||r<0){x.log.warn("value of Hls."+n+" must be greater than or equal to 0");return}qe[n]=r}})});var gl=function(t){var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(r.test(t))return"hls";var e=/^application\/dash\+xml/i;return e.test(t)?"dash":null},vl=function(t,r){for(var e=r.media(),i=-1,a=0;a<t.length;a++)if(t[a].id===e.uri){i=a;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})},Lm=function(t,r){r.representations().forEach(function(e){t.addQualityLevel(e)}),vl(t,r.playlists)};Le.canPlaySource=function(){return x.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Im=function(t,r,e){if(!t)return t;var i={};for(var a in t)i[a]={audioContentType:'audio/mp4; codecs="'+e.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+r.attributes.CODECS+'"'},r.contentProtection&&r.contentProtection[a]&&r.contentProtection[a].pssh&&(i[a].pssh=r.contentProtection[a].pssh),typeof t[a]=="string"&&(i[a].url=t[a]);return x.mergeOptions(t,i)},Rm=function(t){if(t.options_.sourceType==="dash"){var r=x.players[t.tech_.options_.playerId];if(r.eme){var e=Im(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());e&&(r.currentSource().keySystems=e)}}};Le.supportsNativeHls=function(){var n=j.createElement("video");if(!x.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(r){return/maybe|probably/i.test(n.canPlayType(r))})}();Le.supportsNativeDash=function(){return x.getTech("Html5").isSupported()?/maybe|probably/i.test(j.createElement("video").canPlayType("application/dash+xml")):!1}();Le.supportsTypeNatively=function(n){return n==="hls"?Le.supportsNativeHls:n==="dash"?Le.supportsNativeDash:!1};Le.isSupported=function(){return x.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Dm=x.getComponent("Component"),yl=function(n){ht(t,n);function t(r,e,i){We(this,t);var a=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.hls));if(e.options_&&e.options_.playerId){var s=x(e.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return x.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),e.trigger({type:"usage",name:"hls-player-access"}),a}}),s.vhs=a,s.dash=a}if(a.tech_=e,a.source_=r,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(j,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(o){var u=j.fullscreenElement||j.webkitFullscreenElement||j.mozFullScreenElement||j.msFullscreenElement;u&&u.contains(a.tech_.el())&&a.masterPlaylistController_.fastQualityChange_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}return Ke(t,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=mo),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===mo,["withCredentials","bandwidth"].forEach(function(i){typeof e.source_[i]<"u"&&(e.options_[i]=e.source_[i])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e,i){var a=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Le,this.options_.sourceType=gl(i),this.masterPlaylistController_=new xm(this.options_),this.playbackWatcher_=new wm(x.mergeOptions(this.options_,{seekable:function(){return a.seekable()}})),this.masterPlaylistController_.on("error",function(){var s=x.players[a.tech_.options_.playerId];s.error(a.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Le.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Le.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(o){this.masterPlaylistController_.selectPlaylist=o.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(o){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=o,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(o){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=o,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var o=1/(this.bandwidth||1),u=void 0;this.throughput>0?u=1/this.throughput:u=0;var l=Math.floor(1/(o+u));return l},set:function(){x.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Zs(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Zs(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){km(a),Rm(a)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return a.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(x.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,i=x.players[this.tech_.options_.playerId];i&&i.qualityLevels&&(this.qualityLevels_=i.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Lm(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){vl(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),Gf(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(Dm),ja={name:"videojs-http-streaming",VERSION:Om,canHandleSource:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=x.mergeOptions(x.options,r);return ja.canPlayType(t.type,e)},handleSource:function(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.mergeOptions(x.options,e);return r.hls=new yl(t,r,i),r.hls.xhr=tl(),r.hls.src(t.src,t.type),r.hls},canPlayType:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=x.mergeOptions(x.options,r),i=e.hls.overrideNative,a=gl(t),s=a&&(!Le.supportsTypeNatively(a)||i);return s?"maybe":""}};(typeof x.MediaSource>"u"||typeof x.URL>"u")&&(x.MediaSource=Wr,x.URL=fl);Wr.supportsNativeMediaSources()&&x.getTech("Html5").registerSourceHandler(ja,0);x.HlsHandler=yl;x.HlsSourceHandler=ja;x.Hls=Le;x.use||x.registerComponent("Hls",Le);x.options.hls=x.options.hls||{};x.registerPlugin?x.registerPlugin("reloadSourceOnError",po):x.plugin("reloadSourceOnError",po);function kn(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(e=Object.getOwnPropertySymbols(n);i<e.length;i++)t.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(r[e[i]]=n[e[i]])}return r}var Mm={src:{type:String,onChange:function(n,t){return n.src(t)}},width:{type:Number,onChange:function(n,t){return n.width(t)},onEvent:function(n,t){n.on(["playerresize","resize"],function(){return t(n.width())})}},height:{type:Number,onChange:function(n,t){return n.height(t)},onEvent:function(n,t){n.on(["playerresize","resize"],function(){return t(n.height())})}},preload:{type:String,onChange:function(n,t){return n.preload(t)}},loop:{type:Boolean,onChange:function(n,t){return n.loop(t)}},muted:{type:Boolean,onChange:function(n,t){return n.muted(t)},onEvent:function(n,t){return n.on("volumechange",function(){return t(n.muted())})}},poster:{type:String,onChange:function(n,t){return n.poster(t)},onEvent:function(n,t){return n.on("posterchange",function(){return t(n.poster())})}},controls:{type:Boolean,onChange:function(n,t){return n.controls(t)},onEvent:function(n,t){n.on("controlsenabled",function(){return t(!0)}),n.on("controlsdisabled",function(){return t(!1)})}},autoplay:{type:[Boolean,String],onChange:function(n,t){return n.autoplay(t)}},crossorigin:{type:String,onChange:function(n,t){return n.crossOrigin(t)}},crossOrigin:{type:String,onChange:function(n,t){return n.crossOrigin(t)}},playsinline:{type:Boolean,onChange:function(n,t){return n.playsinline(t)}},playsInline:{type:Boolean,onChange:function(n,t){return n.playsinline(t)}}},Fm={id:{type:String},sources:{type:Array,onChange:function(n,t){return n.src(t)}},tracks:{type:Array,onChange:function(n,t){for(var r=n.remoteTextTracks(),e=(r==null?void 0:r.length)||0;e--;)n.removeRemoteTextTrack(r[e]);n.ready(function(){t.forEach(function(i){return n.addRemoteTextTrack(i,!1)})})}},textTrackSettings:{type:Object,onChange:function(n,t){return n.textTrackSettings.options(t)}},language:{type:String,onChange:function(n,t){return n.language(t)},onEvent:function(n,t){return n.on("languagechange",function(){return t(n.language())})}},languages:{type:Object},playbackRates:{type:Array,onChange:function(n,t){return n.playbackRates(t??[])},onEvent:function(n,t){n.on("playbackrateschange",function(){return t(n.playbackRates())})}},audioOnlyMode:{type:Boolean,onChange:function(n,t){return n.audioOnlyMode(t)}},audioPosterMode:{type:Boolean,onChange:function(n,t){return n.audioPosterMode(t)}},responsive:{type:Boolean,onChange:function(n,t){return n.responsive(t)}},breakpoints:{type:Object,onChange:function(n,t){return n.breakpoints(t)}},fluid:{type:Boolean,onChange:function(n,t){return n.fluid(t)}},fill:{type:Boolean,onChange:function(n,t){return n.fill(t)}},aspectRatio:{type:String,onChange:function(n,t){return n.aspectRatio(t)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(n,t){return n.disablePictureInPicture(t)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},Bm={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(n,t){return n.controlBar.options(t)}}},Nm={html5:{type:Object}},Um={volume:{type:Number,onChange:function(n,t){return n.volume(t)},onEvent:function(n,t){return n.on("volumechange",function(){return t(n.volume())})}},playbackRate:{type:Number,onChange:function(n,t){n.playbackRate(t),n.defaultPlaybackRate(t)},onEvent:function(n,t){n.on("ratechange",function(){t(n.playbackRate())})}},options:{type:Object}},Fr=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Mm),Fm),Bm),Nm),Um),$a=Object.keys(Fr),_l=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),Tl=Object.keys(_l);Object.values(_l);var wn=function(n){var t,r=n==null?void 0:n.trim().replace(/\s+/g," ");return r&&(t=r.split(" "))!==null&&t!==void 0?t:[]},An={src:{getter:function(n){return n.src()}},currentSrc:{getter:function(n){return n.currentSrc()}},currentSource:{getter:function(n){return n.currentSource()}},width:{events:["resize","playerresize"],getter:function(n){return n.width()}},height:{events:["resize","playerresize"],getter:function(n){return n.height()}},currentWidth:{events:["resize","playerresize"],getter:function(n){return n.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(n){return n.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(n){return n.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(n){return n.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(n){return n.controls()}},volume:{events:["volumechange"],getter:function(n){return n.volume()}},muted:{events:["volumechange"],getter:function(n){return n.muted()}},poster:{events:["posterchange"],getter:function(n){return n.poster()}},seeking:{events:["seeking"],getter:function(n){return n.seeking()}},paused:{events:["pause","play","playing"],getter:function(n){return n.paused()}},ended:{events:["ended","play"],getter:function(n){return n.ended()}},currentTime:{events:["timeupdate"],getter:function(n){return n.currentTime()}},duration:{events:["durationchange"],getter:function(n){return n.duration()}},playbackRate:{events:["ratechange"],getter:function(n){return n.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(n){return n.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(n){return n.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(n){return n.isInPictureInPicture()}},isLive:{getter:function(n){var t;return(t=n.liveTracker)===null||t===void 0?void 0:t.isLive()}},language:{events:["languagechange"],getter:function(n){return n.language()}},userActive:{events:["useractive","userinactive"],getter:function(n){return n.userActive()}},readyState:{events:["loadeddata"],getter:function(n){return n.readyState()}},networkState:{events:["loadeddata","error"],getter:function(n){return n.networkState()}},error:{events:["loadeddata","error"],getter:function(n){return n.error()}},buffered:{events:["progress"],getter:function(n){return n.buffered()}},bufferedPercent:{events:["progress"],getter:function(n){return n.bufferedPercent()}},played:{events:["timeupdate"],getter:function(n){return n.played()}},seekable:{events:["progress","seeked"],getter:function(n){return n.seekable()}},audioTracks:{getter:function(n){var t;return(t=n.audioTracks)===null||t===void 0?void 0:t.call(n)}},videoTracks:{getter:function(n){var t;return(t=n.videoTracks)===null||t===void 0?void 0:t.call(n)}},textTracks:{getter:function(n){var t;return(t=n.textTracks)===null||t===void 0?void 0:t.call(n)}}},bl=$a.filter(function(n){return!!Fr[n].onEvent}),Sl=function(n){return"update:"+n},jm=Tl.concat(bl.map(Sl)),$m=$a.reduce(function(n,t){var r,e=Fr[t],i=Array.isArray(e.type)?e.type:[e.type],a=Object.assign({},e);return i.includes(Boolean)&&(a.default=void 0),Object.assign(Object.assign({},n),((r={})[t]=a,r))},{}),Hm=Yl({name:"VueVideoPlayer",props:Object.assign(Object.assign({},$m),{class:[String,Object,Array]}),emits:jm.concat(["mounted"],["unmounted"]),setup:function(n,t){var r=Kl(n),e=r.class,i=kn(r,["class"]),a=sn(!1),s=sn(null),o=sn(null),u=cs(function(){return o.value?o.value.player:null}),l=Ql(null),h=cs(function(){return l.value?ec(l.value):null});return Jl(function(){var d,p=function(y){var b,P=y.props,w=y.element,A=y.className,B=y.onEvent,Y=P.options;Y===void 0&&(Y={});var te=kn(P,["options"]),le={};Object.keys(te).forEach(function(D){var W=te[D];W!==void 0&&(le[D]=W)});var q=Object.assign(Object.assign({},le),Y),H=q.volume,R=q.playbackRate,U=kn(q,["volume","playbackRate"]),X=Object.assign(Object.assign({},U),{playsinline:(b=U.playsinline)!==null&&b!==void 0?b:U.playsInline}),re=x(w,X,function(){var D=this;Tl.forEach(function(W){D.on(W,function(Z){B(W,Z)})}),U.src&&!U.sources&&this.src(U.src),H&&Number.isFinite(H)&&this.volume(H),R&&Number.isFinite(R)&&(this.defaultPlaybackRate(R),setTimeout(function(){D.playbackRate(R)},0))});A&&wn(A).map(function(D){return re.addClass(D)});var Q=function(D){var W;(W=re.options)===null||W===void 0||W.call(re,D??{})};return{player:re,dispose:function(){return re.dispose()},updateClassNames:function(D,W){wn(D).map(function(Z){return re.removeClass(Z)}),wn(W).map(function(Z){return re.addClass(Z)})},updateOptions:Q,updatePropOption:function(D,W){var Z,ae,de;Q(((Z={})[D]=W,Z)),(de=(ae=Fr[D])===null||ae===void 0?void 0:ae.onChange)===null||de===void 0||de.call(ae,re,W)}}}({element:s.value,props:i,onEvent:t.emit});d={player:p.player,onEvent:t.emit},bl.forEach(function(y){var b,P;(P=(b=Fr[y])===null||b===void 0?void 0:b.onEvent)===null||P===void 0||P.call(b,d.player,function(w){d.onEvent(Sl(y),w)})}),on(function(){return n.class},function(y,b){var P=un(b),w=un(y);p.updateClassNames(P,w)},{immediate:!0}),on(function(){return n.options},function(y){return p.updateOptions(y??{})},{deep:!0}),$a.filter(function(y){return y!=="options"}).forEach(function(y){on(function(){return n[y]},function(b){return p.updatePropOption(y,b)},{deep:!0})}),function(y,b){var P=Object.keys(An),w=P.reduce(function(B,Y){var te;return Object.assign(Object.assign({},B),((te={})[Y]=An[Y].getter(y),te))},{playing:!1,waiting:!1}),A=function(B,Y){w[B]=Y,b.onUpdate(B,Y,Object.assign({},w))};y.on(["pause","ended"],function(){A("playing",!1)}),y.on(["play","playing"],function(){A("playing",!0)}),y.on("waiting",function(){A("waiting",!0);var B=y.currentTime(),Y=function(){B!==y.currentTime()&&(A("waiting",!1),y.off("timeupdate",Y))};y.on("timeupdate",Y)}),P.forEach(function(B){var Y,te=An[B];y.on(["loadstart","loadedmetadata"].concat((Y=te.events)!==null&&Y!==void 0?Y:[]),function(){A(B,te.getter(y))})}),b.onInit(Object.assign({},w))}(p.player,{onInit:function(y){l.value=y},onUpdate:function(y,b){l.value&&(l.value[y]=b)}}),o.value=p,a.value=!0,t.emit("mounted",{video:s.value,player:u.value,state:h.value})}),Zl(function(){o.value&&(o.value.dispose(),o.value=null,l.value=null,t.emit("unmounted"))}),function(){var d,p;return ds("div",{"data-vjs-player":"",class:un(e)},[ds("video",{class:["video-js","v-video-player"],ref:s}),a.value&&((p=(d=t.slots).default)===null||p===void 0?void 0:p.call(d,{video:s.value,player:u.value,state:h.value}))])}}}),Wm=Hm;export{Wm as R};
