import{r as s}from"./validators-DodVsWjP.js";import{k as ye,r,a5 as ge,H as qe,a as W,o as E,c as Ce,f as G,e as o,d as U,b as t,J as be,a1 as B,z as M,K as ke,L as we,n as u,v as w,a7 as X,a6 as Z}from"./main-DYSjY2V3.js";import{_ as Ue}from"./AppCardActions-B12PoEw0.js";import{_ as _e}from"./TablePagination-BhUQ6CQY.js";import{_ as Fe}from"./AppSelect-DYC1_d_9.js";import{_ as Re}from"./AppTextField-BWfr7uEL.js";import{_ as Se}from"./AppAutocomplete-nNayl4M1.js";import{_ as x}from"./ShowMore-DIW8gLhn.js";import{c as he}from"./commonFunction-DK9I7L6z.js";import{u as Te}from"./recordStore-DIY_puJ9.js";/* empty css                         */import{S as H}from"./sweetalert2-z6gKu1nJ.js";import{V as ee,a as i}from"./VRow-BB7ODKef.js";import{V as $}from"./form-KXPpmlAe.js";import{V as te}from"./VForm-DEOEi-I4.js";import{V as le,b as Ae}from"./VCard-CiYH5VQe.js";import{V as Ie}from"./VCardText-BxWv1fYU.js";import{V as De}from"./VDataTableServer-Dz7-78TU.js";import"./helpers-D1bXR6is.js";import"./index-BWzO9ddJ.js";import"./VOverlay-Yt9LwXsZ.js";import"./easing-CjukEv2V.js";import"./lazy-V0kpBqvY.js";import"./scopeId-DW_WIG5W.js";import"./index-5A8LiR52.js";import"./VDivider-CH8Yhyyw.js";import"./VPagination-D6rZfFxn.js";import"./VSelect-DhcjVjRG.js";import"./VTextField-BVjexeS2.js";/* empty css                   */import"./VCounter-j5sdlGNz.js";import"./VField-BAih5TUr.js";import"./VInput-B3yaOjYZ.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-2j7MyfA6.js";import"./ssrBoot-BYPlKdcr.js";import"./VAvatar-QvG5RvO1.js";import"./VImg-Bfl9zub6.js";import"./dialog-transition-w05nU5OS.js";import"./VMenu-eeOjuncG.js";import"./VCheckboxBtn-DWuf6daV.js";import"./VSelectionControl-BlKyXb78.js";import"./VChip-DOF_MDg3.js";import"./VSlideGroup--tDWDzDB.js";import"./filter-CkQZNv4t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./api-Bx79Vctl.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-B3_BRcDF.js";import"./VTable-BTyO7JLd.js";const Ee={key:0},Be=U("span",null,"Edit Record",-1),Me={class:"d-flex justify-space-between flex-wrap gap-6"},$e={class:"d-flex flex-row gap-4 align-center flex-wrap"},Ne={class:"d-flex gap-1"},$t={__name:"index",setup(ze){ye();const n=he(),b=Te(),d=r("");r("");const m=r(""),V=r(""),p=r(""),v=r(""),y=r(""),g=r(""),J=r(null);r();const N=r(),z=r(),P=r(),ae=r(),q=r(""),C=r(""),K=r(),L=r(),_=r(10),h=r(1);r(),r();const T=r(!0),A=r(!1),F=r(!0),R=r(null),O=r(null),oe=r(!0);r(!1);const Y=["Graduate","Post Graduate"],re=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}];ge(()=>n.getFilteredCourseDetails(d.value,v.value,m.value,p.value));const S=async(a=1)=>{const l=await b.fetchRecord(a,j.value);K.value=l.data,L.value=l.total},Q=async()=>{d.value="",m.value="",V.value="",p.value="",v.value="",y.value="",g.value="",q.value=`
`,C.value=`
`,await R.value.resetValidation()},ie=async()=>{if(await R.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:C.value};await b.submitApplication(l)&&(console.log(b.successMessage),await Q(),S(),F.value=!0)}catch(l){console.error("Form submission error:",b.errors,l)}await R.value.resetValidation()}},ue=async()=>{if(await O.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:C.value},c=await b.submitEditApplication(J.value,l);c&&(console.log(c),Q(),A.value=!1,T.value=!0,S())}catch(l){console.error("Form submission error:",b.errors,l)}await R.value.resetValidation()}},ne=a=>{T.value=!1,J.value=a.id,d.value=a.country_id,m.value=a.intake_id,V.value=a.course.type,p.value=a.university_id,v.value=a.course.name,y.value=a.tuition_fee,g.value=a.course_duration,q.value=a.academic_requirement,C.value=a.english_requirement,A.value=!0},se=()=>{A.value=!1,T.value=!0,Q()},de=()=>{F.value=!F.value},me=async a=>{const l={...a};if((await H.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await b.deleteRecord(l.id),S(),H.fire("Deleted!","The item has been deleted.","success")}catch{H.fire("Error!","There was an error deleting the item.","error")}},I=r(!1),j=r(""),pe=a=>{S(a.page)};return qe(async()=>{I.value=!0,n.countries.length===0&&await n.getCountries(),n.courses.length===0&&await n.getCourses(),n.intakes.length===0&&await n.getIntakes(),n.universities.length===0&&await n.getUniversities(),n.courseDetails.length===0&&await n.getCourseDetails(),N.value=n.countries,ae.value=n.courses,z.value=n.intakes,P.value=n.universities,await S(),I.value=!1}),(a,l)=>{const c=W("IconBtn"),f=Se,k=Re,D=W("QuillEditor"),ve=Fe,ce=_e,fe=Ue;return oe.value?(E(),Ce("div",Ee,[T.value?(E(),G(le,{key:0,title:"Add Record"},{append:o(()=>[U("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(E(),G(c,{key:0,onClick:de},{default:o(()=>[t(B,{size:"20",icon:"tabler-chevron-up",style:be([{transform:F.value?"rotate(-180deg)":void 0},{"transition-duration":"0.28s"}])},null,8,["style"])]),_:1})):M("",!0)])]),default:o(()=>[ke(t(u(te),{ref_key:"refForm",ref:R,onSubmit:Z(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),items:z.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),items:Y,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e),items:P.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[w("Academic Requirement")]),_:1}),t(D,{theme:"snow",content:q.value,"onUpdate:content":l[7]||(l[7]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[w("English Requirement")]),_:1}),t(D,{theme:"snow",content:C.value,"onUpdate:content":l[8]||(l[8]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(X,{onClick:l[9]||(l[9]=e=>ie()),type:"submit",color:"primary",block:""},{default:o(()=>[w(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[we,!F.value]])]),_:1})):M("",!0),A.value?(E(),G(le,{key:1,class:"mt-2"},{default:o(()=>[t(Ae,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[Be,t(c,{onClick:se},{default:o(()=>[t(B,{icon:"tabler-x"})]),_:1})]),_:1}),t(u(te),{ref_key:"refFormEdit",ref:O,onSubmit:Z(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=e=>d.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e),items:z.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),items:Y,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=e=>p.value=e),items:P.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:v.value,"onUpdate:modelValue":l[14]||(l[14]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:g.value,"onUpdate:modelValue":l[16]||(l[16]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[w("Academic Requirement")]),_:1}),t(D,{theme:"snow",content:q.value,"onUpdate:content":l[17]||(l[17]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[w("English Requirement")]),_:1}),t(D,{theme:"snow",content:C.value,"onUpdate:content":l[18]||(l[18]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(X,{onClick:l[19]||(l[19]=e=>ue()),type:"submit",color:"primary",block:""},{default:o(()=>[w(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):M("",!0),t(fe,{title:"Course Details",class:"mt-2",loading:I.value,"no-actions":""},{default:o(()=>[t(Ie,null,{default:o(()=>[U("div",Me,[U("div",null,[t(k,{modelValue:j.value,"onUpdate:modelValue":l[20]||(l[20]=e=>j.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Review"},null,8,["modelValue"])]),U("div",$e,[t(ve,{modelValue:_.value,"onUpdate:modelValue":l[21]||(l[21]=e=>_.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(De,{"items-per-page":_.value,"onUpdate:itemsPerPage":l[23]||(l[23]=e=>_.value=e),page:h.value,"onUpdate:page":l[24]||(l[24]=e=>h.value=e),loading:I.value,"items-length":L.value,headers:re,items:K.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":pe},{"item.academic_requirement":o(({item:e})=>[t(x,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":o(({item:e})=>[t(x,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:o(()=>[t(ce,{page:h.value,"onUpdate:page":l[22]||(l[22]=e=>h.value=e),"items-per-page":_.value,"total-items":L.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[U("div",Ne,[t(c,{onClick:Ve=>ne(e)},{default:o(()=>[t(B,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(c,{onClick:Ve=>me(e)},{default:o(()=>[t(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items"])]),_:1},8,["loading"])])):M("",!0)}}};export{$t as default};
