import{r as m}from"./validators-DpYrMFzk.js";import{r,a5 as ae,H as oe,o as S,c as z,d as U,x as ye,a6 as K,k as ge,a as X,f as j,e as o,b as t,J as be,a1 as N,z as $,K as qe,L as Ce,n as s,v as _,a7 as Z}from"./main-Cp9dG1PD.js";import{_ as ke}from"./TablePagination-DX_nWBiv.js";import{_ as we}from"./AppSelect-BUWPQTAR.js";import{_ as he}from"./AppTextField-QLI0eGbt.js";import{_ as Te}from"./AppAutocomplete-VtvPh0Ab.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Se}from"./commonFunction-DoweIllw.js";import{u as Fe}from"./vue-quill.bubble-CJlRQ5NP.js";import{S as G}from"./sweetalert2-z6gKu1nJ.js";import{V as ee,a as u}from"./VRow-C9xg4e_4.js";import{V as x}from"./form-DLylvCmF.js";import{V as te}from"./VForm-DhqYr4Nn.js";import{V as J,b as _e}from"./VCard-MnRxjZLg.js";import{V as Re}from"./VCardText-DYpkl0R-.js";import{V as Ee}from"./VDataTableServer-CV7jtGeL.js";import"./helpers-DK5QwNv0.js";import"./VDivider-B1XOmZso.js";import"./VPagination-NYTCXfGb.js";import"./VSelect-C6BEpKiU.js";import"./VTextField-Cn1MpS--.js";/* empty css                   */import"./VCounter-DNQsw60t.js";import"./index-DvlZAASf.js";import"./index-D4FCR8tK.js";import"./VField-YMDU9n6j.js";import"./easing-CjukEv2V.js";import"./VInput-BcMNUFoy.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-B6f6HST6.js";import"./ssrBoot-Drj5g1Ob.js";import"./VAvatar-DSGXt4xi.js";import"./VImg-dpMoz2EA.js";import"./dialog-transition-fplM2IxZ.js";import"./VMenu-CXlpm8XW.js";import"./VOverlay-By-OqXs6.js";import"./lazy-DTl4D0Cw.js";import"./scopeId-DFXWZiY8.js";import"./VCheckboxBtn-DRd5gPXc.js";import"./VSelectionControl-Bi9K-2Hq.js";import"./VChip-CD_QJo-4.js";import"./VSlideGroup-BaZboaUQ.js";import"./filter-DxM-I3Hz.js";import"./api-BBGbjhZB.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-CGvijNyd.js";import"./VTable-C0YG6vCa.js";const Ie={props:{text:{type:String,required:!0},lines:{type:Number,default:3},characters:{type:Number,default:200}},setup(w){const i=r(!1),d=r(""),n=r(w.text),v=ae(()=>1.2),V=()=>{i.value=!i.value},c=()=>{const f=w.lines,y=w.characters,p=w.text.split(" ");let F=0,h=1;d.value="";for(let g=0;g<p.length;g++){if(F+=p[g].length+1,F>y||h>f){d.value+="...";break}d.value+=p[g]+" ",p[g].includes(`
`)&&h++}h<=f&&F<=y&&(d.value=w.text)};return oe(()=>{c()}),{isExpanded:i,truncatedText:d,fullText:n,toggle:V,lineHeight:v}}},Ae=["innerHTML"],De=["innerHTML"];function Me(w,i,d,n,v,V){return S(),z("div",null,[n.isExpanded?(S(),z("div",{key:1,innerHTML:n.fullText},null,8,De)):(S(),z("div",{key:0,innerHTML:n.truncatedText},null,8,Ae)),U("a",{onClick:i[0]||(i[0]=K((...c)=>n.toggle&&n.toggle(...c),["prevent"]))},ye(n.isExpanded?"Show Less":"Show More"),1)])}const le=Ue(Ie,[["render",Me],["__scopeId","data-v-3371d4c9"]]),Be={key:0},Le=U("span",null,"Edit Record",-1),Ne={class:"d-flex justify-space-between flex-wrap gap-6"},$e={class:"d-flex flex-row gap-4 align-center flex-wrap"},xe={class:"d-flex gap-1"},Mt={__name:"index",setup(w){ge();const i=Se(),d=Fe(),n=r("");r("");const v=r(""),V=r(""),c=r(""),f=r(""),y=r(""),p=r(""),F=r(null);r();const h=r(),g=r(),H=r(),re=r(),C=r(""),k=r(""),O=r(),P=r(),R=r(10),A=r(1);r(),r();const D=r(!0),M=r(!1),E=r(!0),I=r(null),Y=r(null),ie=r(!0);r(!1);const W=["Graduate","Post Graduate"],ue=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}];ae(()=>i.getFilteredCourseDetails(n.value,f.value,v.value,c.value));const B=async()=>{const a=await d.fetchRecord();O.value=a.data,P.value=a.total},Q=async()=>{n.value="",v.value="",V.value="",c.value="",f.value="",y.value="",p.value="",C.value=`
`,k.value=`
`,await I.value.resetValidation()},ne=async()=>{if(await I.value.validate()){try{const l={countryId:n.value,intakeId:v.value,courseType:V.value,universityId:c.value,course:f.value,tutionFee:y.value,courseDuration:p.value,academicRequirement:C.value,englishRequirement:k.value};await d.submitApplication(l)&&(console.log(d.successMessage),await Q(),B(),E.value=!0)}catch(l){console.error("Form submission error:",d.errors,l)}await I.value.resetValidation()}},se=async()=>{if(await Y.value.validate()){try{const l={countryId:n.value,intakeId:v.value,courseType:V.value,universityId:c.value,course:f.value,tutionFee:y.value,courseDuration:p.value,academicRequirement:C.value,englishRequirement:k.value},b=await d.submitEditApplication(F.value,l);b&&(console.log(b),Q(),M.value=!1,D.value=!0,B())}catch(l){console.error("Form submission error:",d.errors,l)}await I.value.resetValidation()}},de=a=>{D.value=!1,F.value=a.id,n.value=a.country_id,v.value=a.intake_id,V.value=a.course.type,c.value=a.university_id,f.value=a.course.name,y.value=a.tuition_fee,p.value=a.course_duration,C.value=a.academic_requirement,k.value=a.english_requirement,M.value=!0},me=()=>{M.value=!1,D.value=!0,Q()},ce=()=>{E.value=!E.value},pe=async a=>{const l={...a};if((await G.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await d.deleteRecord(l.id),B(),G.fire("Deleted!","The item has been deleted.","success")}catch{G.fire("Error!","There was an error deleting the item.","error")}};return oe(async()=>{i.countries.length===0&&await i.getCountries(),i.courses.length===0&&await i.getCourses(),i.intakes.length===0&&await i.getIntakes(),i.universities.length===0&&await i.getUniversities(),i.courseDetails.length===0&&await i.getCourseDetails(),h.value=i.countries,re.value=i.courses,g.value=i.intakes,H.value=i.universities,await B()}),(a,l)=>{const b=X("IconBtn"),q=Te,T=he,L=X("QuillEditor"),ve=we,fe=ke;return ie.value?(S(),z("div",Be,[D.value?(S(),j(J,{key:0,title:"Add Record"},{append:o(()=>[U("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(S(),j(b,{key:0,onClick:ce},{default:o(()=>[t(N,{size:"20",icon:"tabler-chevron-up",style:be([{transform:E.value?"rotate(-180deg)":void 0},{"transition-duration":"0.28s"}])},null,8,["style"])]),_:1})):$("",!0)])]),default:o(()=>[qe(t(s(te),{ref_key:"refForm",ref:I,onSubmit:K(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),items:g.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),items:W,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=e=>f.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=e=>p.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t(x,{class:"mb-2"},{default:o(()=>[_("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[7]||(l[7]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t(x,{class:"mb-2"},{default:o(()=>[_("English Requirement")]),_:1}),t(L,{theme:"snow",content:k.value,"onUpdate:content":l[8]||(l[8]=e=>k.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(Z,{onClick:l[9]||(l[9]=e=>ne()),type:"submit",color:"primary",block:""},{default:o(()=>[_(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[Ce,!E.value]])]),_:1})):$("",!0),M.value?(S(),j(J,{key:1,class:"mt-2"},{default:o(()=>[t(_e,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[Le,t(b,{onClick:me},{default:o(()=>[t(N,{icon:"tabler-x"})]),_:1})]),_:1}),t(s(te),{ref_key:"refFormEdit",ref:Y,onSubmit:K(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:n.value,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:v.value,"onUpdate:modelValue":l[11]||(l[11]=e=>v.value=e),items:g.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),items:W,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:c.value,"onUpdate:modelValue":l[13]||(l[13]=e=>c.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:f.value,"onUpdate:modelValue":l[14]||(l[14]=e=>f.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(T,{modelValue:p.value,"onUpdate:modelValue":l[16]||(l[16]=e=>p.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:s(m)]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t(x,{class:"mb-2"},{default:o(()=>[_("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[17]||(l[17]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t(x,{class:"mb-2"},{default:o(()=>[_("English Requirement")]),_:1}),t(L,{theme:"snow",content:k.value,"onUpdate:content":l[18]||(l[18]=e=>k.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(Z,{onClick:l[19]||(l[19]=e=>se()),type:"submit",color:"primary",block:""},{default:o(()=>[_(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):$("",!0),t(J,{title:"Course Details",class:"mt-2"},{default:o(()=>[t(Re,null,{default:o(()=>[U("div",Ne,[U("div",null,[t(T,{modelValue:a.searchQuery,"onUpdate:modelValue":l[20]||(l[20]=e=>a.searchQuery=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Review"},null,8,["modelValue"])]),U("div",$e,[t(ve,{modelValue:R.value,"onUpdate:modelValue":l[21]||(l[21]=e=>R.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(Ee,{"items-per-page":R.value,"onUpdate:itemsPerPage":l[23]||(l[23]=e=>R.value=e),page:A.value,"onUpdate:page":l[24]||(l[24]=e=>A.value=e),loading:a.isLoading,"items-length":P.value,headers:ue,items:O.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":a.updateOptions},{"item.academic_requirement":o(({item:e})=>[t(le,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":o(({item:e})=>[t(le,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:o(()=>[t(fe,{page:A.value,"onUpdate:page":l[22]||(l[22]=e=>A.value=e),"items-per-page":R.value,"total-items":P.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[U("div",xe,[t(b,{onClick:Ve=>de(e)},{default:o(()=>[t(N,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(b,{onClick:Ve=>pe(e)},{default:o(()=>[t(N,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items","onUpdate:options"])]),_:1})])):$("",!0)}}};export{Mt as default};
