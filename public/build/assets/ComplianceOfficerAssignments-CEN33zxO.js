import{m as Xe,b as Ze,u as et,c as he,f as tt,d as at,e as lt,V as fe}from"./VTextField-B0kT_0EX.js";import{aa as ne,ac as oe,ad as nt,a6 as k,r as y,ao as ke,ap as ot,H as Y,w as z,aq as st,af as se,ar as it,b as t,s as de,F as I,K as we,as as rt,at as ut,au as me,av as ct,aw as W,ax as dt,ay as Ae,o as h,c as S,n as H,f as B,z as Oe,am as mt,i as ee,e as a,A as ft,az as xe,aA as be,y as vt,d as g,v as f,x as V,aB as ve,aC as pt,aD as Ie,aE as gt,aF as _t,aG as yt,aH as Ct,aI as ht,a0 as X,aJ as Te,aK as Pe,aL as $e,aM as Be,aN as wt,aO as Ve,aP as At,aQ as xt,a2 as Z,aR as bt,aS as Vt,aT as St,a8 as E,a7 as De,an as Le,R as ze,U as Me}from"./main-BPPelI9H.js";import{f as kt}from"./forwardRefs-D3j0TLhE.js";import{I as Ot}from"./index-GNmTfxKB.js";import{_ as It}from"./TablePagination-BCm-tBjU.js";import{_ as Tt}from"./AppSelect-CQuCiQAG.js";import{u as Pt,f as Se}from"./format-CQodJUsZ.js";import{u as te}from"./applicationList-1jk6_oib.js";import{f as $t}from"./helpers-Cqs-n_M0.js";import{V as M}from"./VCardText-BZL2kt1Z.js";import{V as Bt}from"./VDivider-CDCc3yrt.js";import{V as Dt}from"./VDataTableServer-D9TRsTVD.js";import{V as pe}from"./VChip-Cml5IvXl.js";import{V as N,b as j,c as Ne}from"./VCard-D4vsFU88.js";/* empty css                         */import{a as D,V as Q}from"./VRow-XGatZJi8.js";import{V as Re}from"./VForm-D0x_Y1MO.js";import{V as Ue}from"./VSpacer-C43xKWUs.js";import{V as Fe}from"./VDialog-C4L2aGJV.js";import{_ as He}from"./AppAutocomplete-Dkki1YTb.js";import{S as K}from"./sweetalert2-z6gKu1nJ.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as je}from"./VTable-B5fVBBuG.js";import{V as qe}from"./VAlert-C7VwfYyW.js";const Lt=ne({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Xe(),...Ze()},"VTextarea"),zt=oe()({name:"VTextarea",directives:{Intersect:Ot},inheritAttrs:!1,props:Lt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,_){let{attrs:l,emit:n,slots:s}=_;const d=nt(e,"modelValue"),{isFocused:o,focus:r,blur:w}=et(e),A=k(()=>typeof e.counterValue=="function"?e.counterValue(d.value):(d.value||"").toString().length),m=k(()=>{if(l.maxlength)return l.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function v(x,$){var O,L;!e.autofocus||!x||(L=(O=$[0].target)==null?void 0:O.focus)==null||L.call(O)}const T=y(),i=y(),c=ke(""),P=y(),b=k(()=>e.persistentPlaceholder||o.value||e.active);function J(){var x;P.value!==document.activeElement&&((x=P.value)==null||x.focus()),o.value||r()}function ie(x){J(),n("click:control",x)}function p(x){n("mousedown:control",x)}function C(x){x.stopPropagation(),J(),me(()=>{d.value="",ct(e["onClick:clear"],x)})}function q(x){var O;const $=x.target;if(d.value=$.value,(O=e.modelModifiers)!=null&&O.trim){const L=[$.selectionStart,$.selectionEnd];me(()=>{$.selectionStart=L[0],$.selectionEnd=L[1]})}}const R=y(),u=y(+e.rows),re=k(()=>["plain","underlined"].includes(e.variant));ot(()=>{e.autoGrow||(u.value=+e.rows)});function G(){e.autoGrow&&me(()=>{if(!R.value||!i.value)return;const x=getComputedStyle(R.value),$=getComputedStyle(i.value.$el),O=parseFloat(x.getPropertyValue("--v-field-padding-top"))+parseFloat(x.getPropertyValue("--v-input-padding-top"))+parseFloat(x.getPropertyValue("--v-field-padding-bottom")),L=R.value.scrollHeight,ae=parseFloat(x.lineHeight),ue=Math.max(parseFloat(e.rows)*ae+O,parseFloat($.getPropertyValue("--v-input-control-height"))),ce=parseFloat(e.maxRows)*ae+O||1/0,F=dt(L??0,ue,ce);u.value=Math.floor((F-O)/ae),c.value=W(F)})}Y(G),z(d,G),z(()=>e.rows,G),z(()=>e.maxRows,G),z(()=>e.density,G);let U;return z(R,x=>{x?(U=new ResizeObserver(G),U.observe(R.value)):U==null||U.disconnect()}),st(()=>{U==null||U.disconnect()}),se(()=>{const x=!!(s.counter||e.counter||e.counterValue),$=!!(x||s.details),[O,L]=it(l),{modelValue:ae,...ue}=he.filterProps(e),ce=tt(e);return t(he,de({ref:T,modelValue:d.value,"onUpdate:modelValue":F=>d.value=F,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":re.value},e.class],style:e.style},O,ue,{centerAffix:u.value===1&&!re.value,focused:o.value}),{...s,default:F=>{let{id:le,isDisabled:ge,isDirty:_e,isReadonly:Qe,isValid:Ye}=F;return t(at,de({ref:i,style:{"--v-textarea-control-height":c.value},onClick:ie,onMousedown:p,"onClick:clear":C,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ce,{id:le.value,active:b.value||_e.value,centerAffix:u.value===1&&!re.value,dirty:_e.value||e.dirty,disabled:ge.value,focused:o.value,error:Ye.value===!1}),{...s,default:Je=>{let{props:{class:ye,...Ce}}=Je;return t(I,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),we(t("textarea",de({ref:P,class:ye,value:d.value,onInput:q,autofocus:e.autofocus,readonly:Qe.value,disabled:ge.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:J,onBlur:w},Ce,L),null),[[rt("intersect"),{handler:v},null,{once:!0}]]),e.autoGrow&&we(t("textarea",{class:[ye,"v-textarea__sizer"],id:`${Ce.id}-sizer`,"onUpdate:modelValue":We=>d.value=We,ref:R,readonly:!0,"aria-hidden":"true"},null),[[ut,d.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:$?F=>{var le;return t(I,null,[(le=s.details)==null?void 0:le.call(s,F),x&&t(I,null,[t("span",null,null),t(lt,{active:e.persistentCounter||o.value,value:A.value,max:m.value},s.counter)])])}:void 0})}),kt({},T,i,P)}}),ka=Object.assign({name:"AppTextarea",inheritAttrs:!1},{__name:"AppTextarea",setup(e){const _=k(()=>{const n=Ae(),s=n.id||n.label;return s?`app-textarea-${s}-${Math.random().toString(36).slice(2,7)}`:void 0}),l=k(()=>Ae().label);return(n,s)=>(h(),S("div",{class:vt(["app-textarea flex-grow-1",n.$attrs.class])},[H(l)?(h(),B(fe,{key:0,for:H(_),class:"mb-1 text-body-2",text:H(l)},null,8,["for","text"])):Oe("",!0),t(zt,xe(be({...n.$attrs,class:null,label:void 0,variant:"outlined",id:H(_)})),mt({_:2},[ee(n.$slots,(d,o)=>({name:o,fn:a(r=>[ft(n.$slots,o,xe(be(r||{})))])}))]),1040)],2))}}),Mt={class:"d-flex justify-space-between flex-wrap gap-6"},Nt={class:"me-3 d-flex gap-3"},Rt=g("br",null,null,-1),Ut={key:0},Oa={__name:"ApplicationActivityLog",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=Pt(),n=y([]),s=y(!1),d=y(0),o=y(1),r=y(10),w=y(""),A=y(null),m=[{title:"Date",key:"created_at",sortable:!0},{title:"User",key:"user",sortable:!0},{title:"Activity Type",key:"description",sortable:!0},{title:"Details",key:"details",sortable:!1},{title:"IP Address",key:"ip_address",sortable:!1}],v=async()=>{s.value=!0;try{l.setPage(o.value),l.setPerPage(r.value),l.setActivityType(A.value),l.setSearchQuery(w.value);const p=await l.fetchApplicationActivityLogs(_.applicationId);n.value=p.data.data.map(C=>({...C,created_at:Se(new Date(C.created_at),"yyyy-MM-dd HH:mm:ss"),ip_address:C.properties.ip||"N/A",details:c(C),user:C.user?C.user.name:"System"})),d.value=p.data.total}catch(p){console.error("Error fetching activity logs:",p)}finally{s.value=!1}},T=te(),i=y([]),c=p=>{switch(p.description){case"application_submit":return`Submitted application #${p.properties.application_id}`;case"application_update":return`Updated application #${p.properties.application_id}`;case"document_upload":return`Uploaded document: ${p.properties.document_name||"Unknown"}`;case"comment_added":return`Added comment to application #${p.properties.application_id||"Unknown"}`;case"application_status_update":const C=P(p.properties.old_status),q=P(p.properties.new_status);return`Updated status from ${C} to ${q}`;default:return p.description||"Performed an action"}},P=p=>{const C=i.value.find(q=>q.id===parseInt(p));return C?C.name:"Unknown"},b=p=>{switch(p){case"application_submit":return"primary";case"application_update":return"info";case"document_upload":return"success";case"comment_added":return"warning";case"application_status_update":return"error";default:return"default"}},J=p=>{o.value=p.page,r.value=p.itemsPerPage,p.sortBy&&p.sortBy.length>0&&l.setSorting(p.sortBy[0].key,p.sortBy[0].order),v()};z([w,A],()=>{o.value=1,v()}),Y(async()=>{await v(),await ie()});const ie=async()=>{const p=await T.getAllApplicationStatuses();i.value=p.data};return(p,C)=>{const q=Tt,R=It;return h(),B(N,{title:"Application Activity Log",class:"mt-5"},{default:a(()=>[t(M,null,{default:a(()=>[g("div",Mt,[g("div",Nt,[t(q,{modelValue:r.value,"onUpdate:modelValue":[C[0]||(C[0]=u=>r.value=u),C[1]||(C[1]=u=>r.value=parseInt(u,10))],items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(Bt),t(Dt,{"items-per-page":r.value,"onUpdate:itemsPerPage":C[3]||(C[3]=u=>r.value=u),page:o.value,"onUpdate:page":C[4]||(C[4]=u=>o.value=u),items:n.value,"items-length":d.value,headers:m,loading:s.value,class:"text-no-wrap","onUpdate:options":J},{"item.description":a(({item:u})=>[t(pe,{color:b(u.description),size:"small"},{default:a(()=>[f(V(H($t)(u.description)),1)]),_:2},1032,["color"])]),"item.user":a(({item:u})=>[f(V(u.user),1)]),"item.created_at":a(({item:u})=>[f(V(H(Se)(new Date(u.created_at),"dd MMM yyyy HH:mm:ss")),1)]),"item.ip_address":a(({item:u})=>[f(V(u.properties.ip),1)]),"item.details":a(({item:u})=>[u.description==="application_status_update"?(h(),S(I,{key:0},[f(" Updated "+V(u.properties.old_status)+" to "+V(u.properties.new_status)+" ",1),Rt,u.properties.comment?(h(),S("span",Ut," Comment: "+V(u.properties.comment),1)):Oe("",!0)],64)):u.description==="comment_added"?(h(),S(I,{key:1},[f(V(u.properties.comment),1)],64)):u.description==="university_communication_added"?(h(),S(I,{key:2},[f(" Subject: "+V(u.properties.subject),1)],64)):(h(),S(I,{key:3},[f(V(u.properties.details||"N/A"),1)],64))]),bottom:a(()=>[t(R,{page:o.value,"onUpdate:page":C[2]||(C[2]=u=>o.value=u),"items-per-page":r.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})}}},Ft=ne({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ve(),...pt(),...Ie(),...gt()},"VTimeline"),Ge=oe()({name:"VTimeline",props:Ft(),setup(e,_){let{slots:l}=_;const{themeClasses:n}=_t(e),{densityClasses:s}=yt(e),{rtlClasses:d}=Ct();ht({VTimelineDivider:{lineColor:X(e,"lineColor")},VTimelineItem:{density:X(e,"density"),lineInset:X(e,"lineInset")}});const o=k(()=>{const w=e.side?e.side:e.density!=="default"?"end":null;return w&&`v-timeline--side-${w}`}),r=k(()=>{const w=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return w;case"start":return w[0];case"end":return w[1];default:return null}});return se(()=>t(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,r.value,{"v-timeline--inset-line":!!e.lineInset},n.value,s.value,o.value,d.value,e.class],style:[{"--v-timeline-line-thickness":W(e.lineThickness)},e.style]},l)),{}}}),Ht=ne({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Te,iconColor:String,lineColor:String,...ve(),...Pe(),...$e(),...Be()},"VTimelineDivider"),Et=oe()({name:"VTimelineDivider",props:Ht(),setup(e,_){let{slots:l}=_;const{sizeClasses:n,sizeStyles:s}=wt(e,"v-timeline-divider__dot"),{backgroundColorStyles:d,backgroundColorClasses:o}=Ve(X(e,"dotColor")),{roundedClasses:r}=At(e,"v-timeline-divider__dot"),{elevationClasses:w}=xt(e),{backgroundColorClasses:A,backgroundColorStyles:m}=Ve(X(e,"lineColor"));return se(()=>t("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[t("div",{class:["v-timeline-divider__before",A.value],style:m.value},null),!e.hideDot&&t("div",{key:"dot",class:["v-timeline-divider__dot",w.value,r.value,n.value],style:s.value},[t("div",{class:["v-timeline-divider__inner-dot",o.value,r.value],style:d.value},[l.default?t(bt,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},l.default):t(Z,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),t("div",{class:["v-timeline-divider__after",A.value],style:m.value},null)])),{}}}),jt=ne({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Te,iconColor:String,lineInset:[Number,String],...ve(),...Vt(),...Be(),...Pe(),...$e(),...Ie()},"VTimelineItem"),Ke=oe()({name:"VTimelineItem",props:jt(),setup(e,_){let{slots:l}=_;const{dimensionStyles:n}=St(e),s=ke(0),d=y();return z(d,o=>{var r;o&&(s.value=((r=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:r.getBoundingClientRect().width)??0)},{flush:"post"}),se(()=>{var o,r;return t("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":W(s.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${W(e.lineInset)})`:W(0)},e.style]},[t("div",{class:"v-timeline-item__body",style:n.value},[(o=l.default)==null?void 0:o.call(l)]),t(Et,{ref:d,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:l.icon}),e.density!=="compact"&&t("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((r=l.opposite)==null?void 0:r.call(l))])])}),{}}}),qt={class:"comment-section"},Gt={class:"text-caption"},Kt=["innerHTML"],Ia={__name:"AcoAoCommunication",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(!1),s=y(""),d=y([]),o=y(!1),r=async()=>{try{o.value=!0,await l.addAcoAoCommunication(_.applicationId,s.value),s.value="",n.value=!1,await w()}catch(A){console.error("Error adding ACO & AO communication:",A)}finally{o.value=!1}},w=async()=>{await l.getAcoAoCommunications(_.applicationId),d.value=l.acoAoCommunications};return Y(w),(A,m)=>(h(),S(I,null,[t(Q,null,{default:a(()=>[t(D,{cols:"12",class:"d-flex justify-end mb-4"},{default:a(()=>[t(E,{color:"primary",onClick:m[0]||(m[0]=v=>n.value=!0)},{default:a(()=>[t(Z,{start:"",icon:"mdi-plus"}),f(" Add New Communication ")]),_:1})]),_:1}),t(D,{cols:"12"},{default:a(()=>[t(N,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[f(" ACO & AO Communications ")]),_:1}),t(M,null,{default:a(()=>[g("div",qt,[t(Ge,{density:A.dense},{default:a(()=>[(h(!0),S(I,null,ee(d.value,(v,T)=>(h(),B(Ke,{key:T,"dot-color":"primary",size:"small"},{opposite:a(()=>[g("div",Gt,V(v.created_at),1)]),default:a(()=>[t(N,{class:"elevation-1"},{default:a(()=>[t(j,{class:"text-subtitle-1"},{default:a(()=>[f(V(v.user.full_name),1)]),_:2},1024),t(M,null,{default:a(()=>[g("div",{innerHTML:v.message},null,8,Kt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),t(Fe,{modelValue:n.value,"onUpdate:modelValue":m[3]||(m[3]=v=>n.value=v),"max-width":"500px"},{default:a(()=>[t(N,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[f("Add a New ACO & AO Communication")]),_:1}),t(M,null,{default:a(()=>[t(Re,{onSubmit:De(r,["prevent"])},{default:a(()=>[t(fe,{class:"text-body-1 font-weight-medium mb-2"},{default:a(()=>[f(" Message ")]),_:1}),t(H(Le),{content:s.value,"onUpdate:content":m[1]||(m[1]=v=>s.value=v),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),t(Ne,{class:"pa-4"},{default:a(()=>[t(Ue),t(E,{color:"primary",loading:o.value,disabled:o.value,onClick:r},{default:a(()=>[t(Z,{start:"",icon:"mdi-send"}),f(" Submit Communication ")]),_:1},8,["loading","disabled"]),t(E,{color:"secondary",disabled:o.value,onClick:m[2]||(m[2]=v=>n.value=!1)},{default:a(()=>[f(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Qt={class:"comment-section"},Yt={class:"text-caption"},Jt=["innerHTML"],Ta={__name:"AcoCoCommunication",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(!1),s=y(""),d=y([]),o=y(!1),r=async()=>{try{o.value=!0,await l.addAcoCoCommunication(_.applicationId,s.value),s.value="",n.value=!1,await w()}catch(A){console.error("Error adding ACO & CO communication:",A)}finally{o.value=!1}},w=async()=>{await l.getAcoCoCommunications(_.applicationId),d.value=l.acoCoCommunications};return Y(w),(A,m)=>(h(),S(I,null,[t(Q,null,{default:a(()=>[t(D,{cols:"12",class:"d-flex justify-end mb-4"},{default:a(()=>[t(E,{color:"primary",onClick:m[0]||(m[0]=v=>n.value=!0)},{default:a(()=>[t(Z,{start:"",icon:"mdi-plus"}),f(" Add New Communication ")]),_:1})]),_:1}),t(D,{cols:"12"},{default:a(()=>[t(N,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[f(" ACO & CO Communications ")]),_:1}),t(M,null,{default:a(()=>[g("div",Qt,[t(Ge,{density:A.dense},{default:a(()=>[(h(!0),S(I,null,ee(d.value,(v,T)=>(h(),B(Ke,{key:T,"dot-color":"primary",size:"small"},{opposite:a(()=>[g("div",Yt,V(v.created_at),1)]),default:a(()=>[t(N,{class:"elevation-1"},{default:a(()=>[t(j,{class:"text-subtitle-1"},{default:a(()=>[f(V(v.user.full_name),1)]),_:2},1024),t(M,null,{default:a(()=>[g("div",{innerHTML:v.message},null,8,Jt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),t(Fe,{modelValue:n.value,"onUpdate:modelValue":m[3]||(m[3]=v=>n.value=v),"max-width":"500px"},{default:a(()=>[t(N,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[f("Add a New ACO & CO Communication")]),_:1}),t(M,null,{default:a(()=>[t(Re,{onSubmit:De(r,["prevent"])},{default:a(()=>[t(fe,{class:"text-body-1 font-weight-medium mb-2"},{default:a(()=>[f(" Message ")]),_:1}),t(H(Le),{content:s.value,"onUpdate:content":m[1]||(m[1]=v=>s.value=v),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),t(Ne,{class:"pa-4"},{default:a(()=>[t(Ue),t(E,{color:"primary",loading:o.value,disabled:o.value,onClick:r},{default:a(()=>[t(Z,{start:"",icon:"mdi-send"}),f(" Submit Communication ")]),_:1},8,["loading","disabled"]),t(E,{color:"secondary",disabled:o.value,onClick:m[2]||(m[2]=v=>n.value=!1)},{default:a(()=>[f(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Wt=e=>(ze("data-v-eca9312f"),e=e(),Me(),e),Xt=Wt(()=>g("thead",null,[g("tr",null,[g("th",null,"Name"),g("th",null,"Email"),g("th",null,"Status")])],-1)),Zt={__name:"ApplicationOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(null),s=y(""),d=k(()=>l.applicationOfficerOptions),o=k(()=>l.applicationOfficers),r=k(()=>{if(!s.value)return o.value;const i=s.value.toLowerCase();return o.value.filter(c=>c.full_name.toLowerCase().includes(i)||c.email.toLowerCase().includes(i)||c.pivot.status.toLowerCase().includes(i))}),w=async()=>{try{if(!n.value){errorMessage.value="Please select an officer before assigning.";return}if((await K.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this application officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const c=await l.assignApplicationOfficer(_.applicationId,n.value);if(c&&!c.status)throw console.log("hello"),console.log(c),new Error(c);K.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the application officer successfully!",confirmButtonText:"OK"}),n.value=null,await A()}}catch(i){console.log(i),K.fire({icon:"error",title:"Assignment Failed",text:i,confirmButtonText:"OK"})}},A=async()=>{await l.fetchApplicationOfficers(_.applicationId)};Y(async()=>{await Promise.all([A(),l.loadAllApplicationOfficers()])}),z(()=>_.applicationId,A);const m=i=>({accepted:"success",rejected:"error",pending:"warning"})[i.toLowerCase()]||"secondary",v=i=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[i.toLowerCase()]||i,T=i=>({success:"white",error:"white",warning:"black",secondary:"white"})[i]||"white";return(i,c)=>{const P=He;return h(),B(N,null,{default:a(()=>[t(j,null,{default:a(()=>[f("Application Officer Assignments")]),_:1}),t(M,null,{default:a(()=>[t(Q,null,{default:a(()=>[t(D,{cols:"12",md:"6"},{default:a(()=>[t(P,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),items:d.value,"item-title":"full_name","item-value":"id",label:"Select Application Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),t(D,{cols:"12",md:"6",class:"d-flex align-center"},{default:a(()=>[t(E,{class:"mt-6",color:"primary",disabled:!n.value,onClick:w},{default:a(()=>[f(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Q,{class:"mt-4"},{default:a(()=>[t(D,{cols:"12"},{default:a(()=>[r.value.length?(h(),B(je,{key:0},{default:a(()=>[Xt,g("tbody",null,[(h(!0),S(I,null,ee(r.value,b=>(h(),S("tr",{key:b.id},[g("td",null,V(b.user.full_name),1),g("td",null,V(b.user.email),1),g("td",null,[t(pe,{color:m(b.status),"text-color":T(m(b.status)),size:"small",label:""},{default:a(()=>[f(V(v(b.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(h(),B(qe,{key:1,type:"info",class:"mt-2"},{default:a(()=>[f(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},Pa=Ee(Zt,[["__scopeId","data-v-eca9312f"]]),ea=e=>(ze("data-v-aa458ed5"),e=e(),Me(),e),ta=ea(()=>g("thead",null,[g("tr",null,[g("th",null,"Name"),g("th",null,"Email"),g("th",null,"Status")])],-1)),aa={__name:"ComplianceOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(null),s=y(""),d=k(()=>l.complianceOfficerOptions),o=k(()=>l.complianceOfficers),r=k(()=>{if(!s.value)return o.value;const i=s.value.toLowerCase();return o.value.filter(c=>c.full_name.toLowerCase().includes(i)||c.email.toLowerCase().includes(i)||c.pivot.status.toLowerCase().includes(i))}),w=async()=>{try{if(!n.value){errorMessage.value="Please select an officer before assigning.";return}if((await K.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this compliance officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const c=await l.assignComplianceOfficer(_.applicationId,n.value);if(c&&!c.status)throw new Error(c);K.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the compliance officer successfully!",confirmButtonText:"OK"}),n.value=null,await A()}}catch(i){console.log(i),K.fire({icon:"error",title:"Assignment Failed",text:i,confirmButtonText:"OK"})}},A=async()=>{await l.fetchComplianceOfficers(_.applicationId)};Y(async()=>{await Promise.all([A(),l.loadAllComplianceOfficers()])}),z(()=>_.applicationId,A);const m=i=>({accepted:"success",rejected:"error",pending:"warning"})[i.toLowerCase()]||"secondary",v=i=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[i.toLowerCase()]||i,T=i=>({success:"white",error:"white",warning:"black",secondary:"white"})[i]||"white";return(i,c)=>{const P=He;return h(),B(N,null,{default:a(()=>[t(j,null,{default:a(()=>[f("Compliance Officer Assignments")]),_:1}),t(M,null,{default:a(()=>[t(Q,null,{default:a(()=>[t(D,{cols:"12",md:"6"},{default:a(()=>[t(P,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),items:d.value,"item-title":"full_name","item-value":"id",label:"Select Compliance Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),t(D,{cols:"12",md:"6",class:"d-flex align-center"},{default:a(()=>[t(E,{class:"mt-6",color:"primary",disabled:!n.value,onClick:w},{default:a(()=>[f(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Q,{class:"mt-4"},{default:a(()=>[t(D,{cols:"12"},{default:a(()=>[r.value.length?(h(),B(je,{key:0},{default:a(()=>[ta,g("tbody",null,[(h(!0),S(I,null,ee(r.value,b=>(h(),S("tr",{key:b.id},[g("td",null,V(b.user.full_name),1),g("td",null,V(b.user.email),1),g("td",null,[t(pe,{color:m(b.status),"text-color":T(m(b.status)),size:"small",label:""},{default:a(()=>[f(V(v(b.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(h(),B(qe,{key:1,type:"info",class:"mt-2"},{default:a(()=>[f(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},$a=Ee(aa,[["__scopeId","data-v-aa458ed5"]]);export{Pa as A,$a as C,Ia as _,Oa as a,Ta as b,ka as c};
