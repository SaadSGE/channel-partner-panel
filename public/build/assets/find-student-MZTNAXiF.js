import{_ as V}from"./AppAutocomplete-wdW9lDSd.js";import{c as v}from"./commonFunction-Wksw2UCG.js";import{u as B}from"./fileStore-DKc5mJ5y.js";import{u as I}from"./studentStore-42l65_zW.js";import{u as k}from"./submitApplication-DlWdABvP.js";import{S as u}from"./sweetalert2-z6gKu1nJ.js";import{r as o,k as A,w as g,H as T,o as _,f as N,e as s,b as i,v as c,n,a4 as F,c as D,x as E,z as U,d as K,a9 as S}from"./main-uJL88tY8.js";import{b as M,V as O}from"./VCard-dV1gqanN.js";import{V as P}from"./VCardText-Bhmj5y0R.js";import"./VInput-DGtzpz6e.js";import"./index-B8h7WhcK.js";import"./index-DZNL5-2P.js";import"./forwardRefs-D3j0TLhE.js";import"./VSelect-BXVa4Do2.js";import"./VTextField-DXICgvKZ.js";import"./VList-Dz1RgHZp.js";import"./ssrBoot-C4EhTpgH.js";import"./VAvatar-CO0XYxCh.js";import"./VImg-_gF7Gy9Z.js";import"./VDivider-CwJzVs_l.js";import"./dialog-transition-B5KncReu.js";import"./scopeId-DzcKD8W0.js";import"./VMenu-BRo4QQ5k.js";import"./VCheckboxBtn-BJwZr0TJ.js";import"./VChip-DnNZV3eL.js";import"./filter-C2zWIX4k.js";import"./helpers-DzMHmcSw.js";const R={key:0,class:"text-error"},Y={class:"d-flex justify-space-between mt-4"},St={__name:"find-student",setup($){o(0);const C=k(),m=B(),x=o([]),l=o(null),y=I(),t=v(),e=o(null),p=o([]),d=A();x.value=m.files,g(e,r=>{}),T(async()=>{p.value=await y.search()});const h=()=>{d.push("/application/new")},b=async()=>{try{if(!e.value){l.value="Please select a student before submitting the application.";return}(await u.fire({title:"Confirm Submission",text:"Are you sure you want to submit this application?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit it!"})).isConfirmed&&(await C.submitApplication(null,t.selectedCourseId,t.selectedIntakeId,t.selectedUniversityId,t.selectedCountryId,t.selectedCourseDetailsId,m.filePaths,e.value),u.fire({icon:"success",title:"Application Successful",text:"You have submitted the application successfully!",confirmButtonText:"OK"}),t.selectedCourseId=null,t.selectedIntakeId=null,t.selectedUniversityId=null,t.selectedCountryId=null,t.selectedCourseDetailsId=null,d.push({name:"application"}))}catch(r){u.fire({icon:"error",title:"Application Failed",text:r,confirmButtonText:"OK"})}};return(r,a)=>{const w=V;return _(),N(O,{class:"mb-6"},{default:s(()=>[i(M,null,{default:s(()=>[c("Select Existing Student")]),_:1}),i(P,null,{default:s(()=>[i(w,{modelValue:n(e),"onUpdate:modelValue":a[0]||(a[0]=f=>F(e)?e.value=f:null),items:n(p),"item-title":"student_name_with_email","item-value":"id",label:"Search Existing Student",placeholder:"Start typing to search..."},null,8,["modelValue","items"]),n(l)?(_(),D("p",R,E(n(l)),1)):U("",!0),K("div",Y,[i(S,{color:"secondary",onClick:a[1]||(a[1]=f=>h())},{default:s(()=>[c("Back")]),_:1}),i(S,{color:"primary",onClick:b},{default:s(()=>[c("Next")]),_:1})])]),_:1})]),_:1})}}};export{St as default};
