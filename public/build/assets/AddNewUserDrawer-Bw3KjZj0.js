import{r as m,e as L,c as T}from"./validators-Cf3ZnQJG.js";import{k as h,r as v,H as $,o as U,f as I,e as t,b as a,a8 as M,n as s,c as G,F as H,z as K,a9 as q,v as g,d as W,b3 as S}from"./main-BCmTos3f.js";import{_ as j}from"./AppAutocomplete-De5IHwov.js";import{_ as z}from"./AppSelect-DbuDf6vI.js";import{_ as J}from"./AppTextField-J76cNZnh.js";import{_ as Y}from"./AppDrawerHeaderSection-DJP3IGX6.js";import{u as Q}from"./auth-C4p6CGLO.js";import{u as X}from"./rolePermission-jrW__s-X.js";import{S as D}from"./sweetalert2-z6gKu1nJ.js";import{P as Z}from"./vue3-perfect-scrollbar.esm-CQdlFfpQ.js";import{V as _}from"./VNavigationDrawer-CbrIBMZS.js";import{V as x}from"./VDivider-PvQnd5Aw.js";import{V as ee}from"./VCard-BmtSm7XA.js";import{V as le}from"./VCardText-PvXVarQQ.js";import{V as ae}from"./VForm-1wvL4jh2.js";import{V as re,a as i}from"./VRow--It8L6PQ.js";import{V as B}from"./VFileInput-CFBm4DwI.js";import{V as p}from"./VCheckbox-CUiWX93V.js";import"./helpers-PNLn4zBH.js";import"./VInput-DE802IeU.js";import"./index-B-qwtkn3.js";import"./index-CV4TMRpG.js";import"./forwardRefs-D3j0TLhE.js";import"./VSelect-QqFDlzdg.js";import"./VTextField-dfijt52Z.js";import"./VList-BTHLVEst.js";import"./ssrBoot-CIcBb9jD.js";import"./VAvatar-CnKYZQXr.js";import"./VImg-CUGb7-hA.js";import"./dialog-transition-BRIlykKo.js";import"./scopeId-DG6bUfuL.js";import"./VMenu-DC-C_fjV.js";import"./VCheckboxBtn-KYwPyR71.js";import"./VChip-DnnrD6at.js";import"./filter-Bq3i_x3g.js";import"./VSpacer-CQXW2A-W.js";/* empty css              */const oe=W("label",null,"Country Recruit For",-1),He={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},branches:{type:Array,default:()=>[]}},emits:["update:isDrawerOpen","userData"],setup(F,{emit:k}){const b=F,c=k,w=X(),A=Q();h();const C=v(!1),V=v(),y=v([]),r=v({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",mobileNumber:"",whatsappNumber:"",branch_id:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",status:"",avatar:"",createForm:"admin",agreement:null,commission_structure:null}),d=v({recruitCountries:[]});$(async()=>{await w.getAllRoles(),y.value=w.roles});const N=()=>{c("update:isDrawerOpen",!1),S(()=>{var o,l;(o=V.value)==null||o.reset(),(l=V.value)==null||l.resetValidation()})},P=o=>o?o.toLowerCase():"",R=async()=>{var o;(o=V.value)==null||o.validate().then(async({valid:l})=>{if(l)try{const n=new FormData;for(const u in r.value)r.value[u]&&n.append(u,r.value[u]);for(const u of d.value.recruitCountries)n.append("recruitCountries[]",u);r.value.agreement&&(n.append("document_type","agreement"),n.append("agreement",r.value.agreement[0])),r.value.commission_structure&&(n.append("document_type","commission_structure"),n.append("commission_structure",r.value.commission_structure[0])),await A.register(n),console.log(n),D.fire({icon:"success",title:"Registration Successful",text:"You have been registered successfully!",confirmButtonText:"OK"}),c("userData",n),c("update:isDrawerOpen",!1),S(()=>{var u,f;(u=V.value)==null||u.reset(),(f=V.value)==null||f.resetValidation(),d.value.recruitCountries=[]})}catch(n){D.fire({icon:"error",title:"Registration Failed",text:n,confirmButtonText:"OK"})}})},E=o=>{c("update:isDrawerOpen",o)};return(o,l)=>{const n=Y,u=J,f=z,O=j;return U(),I(_,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":b.isDrawerOpen,"onUpdate:modelValue":E},{default:t(()=>[a(n,{title:"Add New User",onCancel:N}),a(x),a(s(Z),{options:{wheelPropagation:!1}},{default:t(()=>[a(ee,{flat:""},{default:t(()=>[a(le,null,{default:t(()=>[a(ae,{ref_key:"refForm",ref:V,modelValue:C.value,"onUpdate:modelValue":l[24]||(l[24]=e=>C.value=e),onSubmit:M(R,["prevent"])},{default:t(()=>[a(re,null,{default:t(()=>[a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.firstName,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.firstName=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.lastName,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.lastName=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.email,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.email=e),rules:["requiredValidator"in o?o.requiredValidator:s(m),"emailValidator"in o?o.emailValidator:s(L)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.password,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.password=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Password",type:"password",placeholder:"Enter your password"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.confirmPassword=e),rules:["requiredValidator"in o?o.requiredValidator:s(m),("confirmedValidator"in o?o.confirmedValidator:s(T))(r.value.confirmPassword,r.value.password)],label:"Confirm Password",type:"password",placeholder:"Confirm your password"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.mobileNumber,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.mobileNumber=e),label:"Mobile Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.whatsappNumber,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value.whatsappNumber=e),label:"WhatsApp Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(f,{modelValue:r.value.branch_id,"onUpdate:modelValue":l[7]||(l[7]=e=>r.value.branch_id=e),label:"Select Branch",placeholder:"Select Branch",rules:["requiredValidator"in o?o.requiredValidator:s(m)],items:b.branches,"item-title":e=>e.branch_name_with_country,"item-value":e=>e.id},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(f,{modelValue:r.value.role,"onUpdate:modelValue":l[8]||(l[8]=e=>r.value.role=e),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in o?o.requiredValidator:s(m)],items:y.value,"item-title":e=>e.role,"item-value":e=>e.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),P(r.value.role)==="channel partner"?(U(),G(H,{key:0},[a(i,{cols:"12"},{default:t(()=>[a(B,{chips:"",modelValue:r.value.agreement,"onUpdate:modelValue":l[9]||(l[9]=e=>r.value.agreement=e),label:"Upload Agreement"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(B,{chips:"",modelValue:r.value.commission_structure,"onUpdate:modelValue":l[10]||(l[10]=e=>r.value.commission_structure=e),label:"Upload Commission Structure"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.companyName,"onUpdate:modelValue":l[11]||(l[11]=e=>r.value.companyName=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.website,"onUpdate:modelValue":l[12]||(l[12]=e=>r.value.website=e),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.address,"onUpdate:modelValue":l[13]||(l[13]=e=>r.value.address=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.city,"onUpdate:modelValue":l[14]||(l[14]=e=>r.value.city=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.postCode,"onUpdate:modelValue":l[15]||(l[15]=e=>r.value.postCode=e),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(O,{modelValue:r.value.country,"onUpdate:modelValue":l[16]||(l[16]=e=>r.value.country=e),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in o?o.requiredValidator:s(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[oe,a(p,{value:"Nigeria",label:"Nigeria",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[17]||(l[17]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"India",label:"India",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[18]||(l[18]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"Bangladesh",label:"Bangladesh",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[19]||(l[19]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"Nepal",label:"Nepal",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[20]||(l[20]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"Bhutan",label:"Bhutan",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[21]||(l[21]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"Ghana",label:"Ghana",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[22]||(l[22]=e=>d.value.recruitCountries=e)},null,8,["modelValue"]),a(p,{value:"Sri Lanka",label:"Sri Lanka",modelValue:d.value.recruitCountries,"onUpdate:modelValue":l[23]||(l[23]=e=>d.value.recruitCountries=e)},null,8,["modelValue"])]),_:1})],64)):K("",!0),a(i,{cols:"12"},{default:t(()=>[a(q,{type:"submit",class:"me-3"},{default:t(()=>[g(" Submit ")]),_:1}),a(q,{type:"reset",variant:"tonal",color:"error",onClick:N},{default:t(()=>[g(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{He as default};
