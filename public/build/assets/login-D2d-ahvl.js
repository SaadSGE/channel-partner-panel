import{r as w,e as B}from"./validators-DpYrMFzk.js";import{r as g,j as S,k as F,a as M,o as T,c as j,b as a,e as t,d as s,n as e,I as V,x as v,v as c,a6 as D,a7 as A,F as N,ab as h,aA as P}from"./main-D1prPXqX.js";import{_ as U}from"./AppTextField-zWa813YV.js";import{u as E}from"./auth-BTyxQI3t.js";import{u as _}from"./useGenerateImageVariant-Bl-aB-LI.js";import{a as $,b as z,c as G,d as H}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as K,b as O}from"./misc-mask-light-Ha4lQOdV.js";import{V as W}from"./VNodeRenderer-BMDyOk-i.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{u as Q}from"./useAbility-DyQTxZFz.js";import{a as u,V as k}from"./VRow-nzmTulCZ.js";import{V as X}from"./VImg-B3z1M8B7.js";import{V as Y}from"./VCard-D1LN39aq.js";import{V as x}from"./VCardText-Cclq98po.js";import{V as Z}from"./VForm-DSbK4uOm.js";import{V as ee}from"./VCheckbox-BgyCX83X.js";import"./helpers-DK5QwNv0.js";import"./form-OhUJp5qd.js";import"./VTextField-CuuV1HrB.js";/* empty css                   */import"./VCounter-DqvKh7YN.js";import"./index-rMTdNfNS.js";import"./index-DqqQ86fa.js";import"./VField-DJo4U0zH.js";import"./easing-CjukEv2V.js";import"./VInput-DSOzclAP.js";import"./forwardRefs-C-GTDzx5.js";import"./api-BpUO-yym.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VAvatar-DZnZnC1i.js";import"./VCheckboxBtn-C54OFaY0.js";import"./VSelectionControl-ZP_O7rtw.js";const ae="/build/assets/login-image-BqaMlRfH.png",te={class:"auth-logo d-flex align-center gap-x-3"},oe={class:"auth-title"},re={class:"position-relative bg-background w-100 me-0"},se={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},le={class:"text-h4 mb-1"},ie={class:"text-capitalize"},ne=s("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),me={class:"d-flex align-center flex-wrap justify-space-between my-6"},ue=s("span",null,"New on our platform?",-1),He={__name:"login",setup(de){_(H,G,z,$,!0),_(O,K);const L=_(ae),d=g(!1),b=g(),m=E(),y=S(),C=F(),I=Q(),i=g({email:"test.admin@gmail.com",password:"password"}),R=()=>{var r;(r=b.value)==null||r.validate().then(async({valid:o})=>{if(o)try{const n=await m.login(i.value.email,i.value.password),{accessToken:p,userData:l,abilities:q}=n,f=[{action:"manage",subject:"all"}];console.log(f),console.log(q),h("userAbilityRules").value=f,I.update(f),h("userData").value=l,h("accessToken").value=p,await P(()=>{C.replace(y.query.to?String(y.query.to):"/")})}catch(n){J.fire({icon:"error",title:"Login Failed",text:"Credential not match",confirmButtonText:"OK"}),console.error("Login error:",n)}})};return(r,o)=>{const n=M("RouterLink"),p=U;return T(),j(N,null,[a(n,{to:"/"},{default:t(()=>[s("div",te,[a(e(W),{nodes:e(V).app.logo},null,8,["nodes"]),s("h1",oe,v(e(V).app.title),1)])]),_:1}),a(k,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(u,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[s("div",re,[s("div",se,[a(X,{src:e(L),class:"auth-illustration mt-16 mb-2"},null,8,["src"])])])]),_:1}),a(u,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(Y,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[a(x,null,{default:t(()=>[s("h4",le,[c(" Welcome to "),s("span",ie,v(e(V).app.title),1),c("! 👋🏻 ")]),ne]),_:1}),a(x,null,{default:t(()=>[a(e(Z),{ref_key:"refVForm",ref:b,onSubmit:D(R,["prevent"])},{default:t(()=>[a(k,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(p,{modelValue:e(i).email,"onUpdate:modelValue":o[0]||(o[0]=l=>e(i).email=l),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in r?r.requiredValidator:e(w),"emailValidator"in r?r.emailValidator:e(B)],"error-messages":e(m).errors.email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(u,{cols:"12"},{default:t(()=>[a(p,{modelValue:e(i).password,"onUpdate:modelValue":o[1]||(o[1]=l=>e(i).password=l),label:"Password",placeholder:"············",rules:["requiredValidator"in r?r.requiredValidator:e(w)],type:e(d)?"text":"password","error-messages":e(m).errors.password,"append-inner-icon":e(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[2]||(o[2]=l=>d.value=!e(d))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),s("div",me,[a(ee,{modelValue:e(m).rememberMe,"onUpdate:modelValue":o[3]||(o[3]=l=>e(m).rememberMe=l),label:"Remember Me"},null,8,["modelValue"])]),a(A,{block:"",type:"submit"},{default:t(()=>[c(" Login ")]),_:1})]),_:1}),a(u,{cols:"12",class:"text-center"},{default:t(()=>[ue,a(n,{class:"text-primary ms-1",to:{name:"register"}},{default:t(()=>[c(" Create an account ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{He as default};
