import{r as F,a as j}from"./helpers-Bzg9TCNL.js";import{_ as q}from"./AppCardActions-DhzAsSbR.js";import{_ as G}from"./TablePagination-QwDXvVnB.js";import{_ as J}from"./AppTextField-DC2x1dsw.js";import{_ as K}from"./AppSelect-CCci48xp.js";import{_ as M}from"./Filters-Dvjt-72t.js";import{u as Q}from"./applicationList-BZioye3k.js";import{c as W}from"./commonFunction-C4n_HNA0.js";import{u as X}from"./studentStore-CcmgmF2u.js";import{a6 as Z,r,k as ee,w as te,a as oe,o as v,c as k,b as a,e as l,n as s,d as n,a4 as y,x as p,F as U,i as se,y as ae,v as le,a2 as A,f as re,z as ne}from"./main-Z3go8Xzc.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as I}from"./VCardText-Bjotn_eE.js";import{V as ue}from"./VRow-eo7qXlZG.js";import{V as me}from"./VSpacer-DjAd7_Hm.js";import{V as ce}from"./VDataTableServer-_bBsEW4-.js";import{V as pe}from"./VChip-CISZQW4c.js";import{V as de}from"./VDivider-SUUc1KGp.js";import"./index-BgvB69-2.js";import"./VCard-B6jmDFyP.js";import"./VAvatar-DFwpysqo.js";import"./VImg-DvovO2d-.js";import"./index-CJOm_KJi.js";import"./dialog-transition-6CoWjX9C.js";import"./forwardRefs-D3j0TLhE.js";import"./scopeId-Brt4yQ2W.js";import"./VPagination-DvivjafL.js";import"./VInput-KBboyctu.js";import"./VTextField-B1_fIF9I.js";import"./VSelect-DZ8I6LSD.js";import"./VList-CuZQ3pYZ.js";import"./ssrBoot-CoAt9jNJ.js";import"./VMenu-CiscxyXl.js";import"./VCheckboxBtn-GLY3abaH.js";import"./AppDateTimePicker-BWnOzNRI.js";import"./AppAutocomplete-DVX6hFXO.js";import"./filter-CBgIupOh.js";import"./rolePermission-D2xSqWcF.js";import"./user-DCPorwEi.js";/* empty css              */import"./VDataTable-DjbBVbtI.js";import"./VTable-CvwxmxPq.js";const fe={class:"student-list-container"},_e={class:"me-3 d-flex gap-3"},ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ye={style:{"inline-size":"15.625rem"}},ge={class:"university-list ms-3"},he={class:"text-truncate text-high-emphasis"},Se={class:"d-flex flex-column ms-3"},ke={__name:"index",props:{userId:{type:String,default:null}},setup(Ce){const N=Z(()=>"calc(100vh - 200px)"),g=r(0),i=r(1),m=r(""),u=r(10),C=r(),w=r(),h=r(!1),d=r(null),f=r(null),V=r([]),_=r(null),x=W();Q();const P=X(),$=ee(),L=o=>{$.push({name:"student-record-details-id",params:{id:o}})},z=async o=>{const t={...o};if((await Swal.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await x.deleteAllStudent(t.id),students.value=x.students,Swal.fire("Deleted!","The item has been deleted.","success")}catch{Swal.fire("Error!","There was an error deleting the item.","error")}},E=o=>{var t,c;i.value=o.page,u.value=o.itemsPerPage,C.value=((t=o.sortBy[0])==null?void 0:t.key)||"",w.value=((c=o.sortBy[0])==null?void 0:c.order)||"",B()},B=async()=>{h.value=!0;try{const o=await P.getStudentList(i.value,u.value,m.value,C.value,w.value,_.value,d.value,f.value);V.value=o.data,g.value=o.total}catch(o){console.error("Error fetching applications:",o)}finally{h.value=!1}};te([m,_,d,f],()=>{B()});const R=r([{title:"Action",key:"action",sortable:!1},{title:"Student ID",key:"student_id"},{title:"Name",key:"full_name"},{title:"Email",key:"email"},{title:"Phone",key:"whatsapp_number"},{title:"Counsellor",key:"counsellor.full_name"},{title:"University",key:"university_intake_course_country"},{title:"Branch",key:"counsellor.branch.branch_name_with_country"},{title:"Status",key:"status"}]);return(o,t)=>{const c=M,b=K,H=J,T=oe("IconBtn"),O=G,Y=q;return v(),k("div",fe,[a(Y,{title:"Student List",loading:s(h),"no-actions":""},{default:l(()=>[a(I,null,{default:l(()=>[a(ue,null,{default:l(()=>[a(c,{"selected-status":s(_),onUpdateStatus:t[0]||(t[0]=e=>_.value=e),"selected-dateFrom":s(d),"selected-dateTo":s(f),onUpdateDateFrom:t[1]||(t[1]=e=>d.value=e),onUpdateDateTo:t[2]||(t[2]=e=>f.value=e)},null,8,["selected-status","selected-dateFrom","selected-dateTo"])]),_:1})]),_:1}),a(I,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[n("div",_e,[a(b,{"model-value":s(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=parseInt(e,10))},null,8,["model-value"])]),a(me),n("div",ve,[n("div",ye,[a(H,{modelValue:s(m),"onUpdate:modelValue":t[4]||(t[4]=e=>y(m)?m.value=e:null),placeholder:"Search Student"},null,8,["modelValue"])])])]),_:1}),a(ce,{"items-per-page":s(u),"onUpdate:itemsPerPage":t[6]||(t[6]=e=>y(u)?u.value=e:null),page:s(i),"onUpdate:page":t[7]||(t[7]=e=>y(i)?i.value=e:null),items:s(V),"items-length":s(g),headers:s(R),class:"text-no-wrap color-black student-table",height:s(N),"onUpdate:options":E},{"item.full_name":l(({item:e})=>[n("p",null,p(e.full_name),1)]),"item.email":l(({item:e})=>[n("p",null,p(e.email),1)]),"item.passport_no":l(({item:e})=>[n("p",null,p(e.passport_no),1)]),"item.university_intake_course_country":l(({item:e})=>[n("ul",ge,[(v(!0),k(U,null,se(e.university_intake_course_country,(S,D)=>(v(),k(U,{key:D},[n("li",he,p(S),1),D<e.university_intake_course_country.length-1?(v(),re(de,{key:0,class:"my-1"})):ne("",!0)],64))),128))])]),"item.status":l(({item:e})=>[a(pe,{color:("resolveStatusColor"in o?o.resolveStatusColor:s(F))(e.status),class:ae([`text-${("resolveStatusColor"in o?o.resolveStatusColor:s(F))(e.status)}`,"font-weight-medium"]),size:"small"},{default:l(()=>[le(p(("resolveStatusName"in o?o.resolveStatusName:s(j))(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":l(({item:e})=>[n("div",Se,[a(T,{onClick:S=>L(e.id)},{default:l(()=>[a(A,{color:"primary",icon:"tabler-eye"})]),_:2},1032,["onClick"]),a(T,{onClick:S=>z(e.id)},{default:l(()=>[a(A,{color:"error",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:l(()=>[a(O,{page:s(i),"onUpdate:page":t[5]||(t[5]=e=>y(i)?i.value=e:null),"items-per-page":s(u),"total-items":s(g)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers","height"])]),_:1},8,["loading"])])}}},mt=ie(ke,[["__scopeId","data-v-4a7f9633"]]);export{mt as default};
