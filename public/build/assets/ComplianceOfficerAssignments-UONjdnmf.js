import{m as Xe,b as Ze,u as et,c as he,f as tt,d as at,e as lt,V as fe}from"./VTextField-DsBnAchm.js";import{a9 as ne,ab as oe,ac as nt,a5 as O,r as y,az as ke,aA as ot,H as Y,w as z,aB as st,ae as se,aC as it,b as t,s as de,F as T,K as we,aD as rt,aE as ut,aF as me,aG as ct,aH as W,aI as dt,aJ as Ae,o as w,c as k,n as H,f as $,z as Oe,ak as mt,i as ee,e as a,A as ft,aK as xe,aL as be,y as vt,d as g,v as m,x as S,am as ve,aM as pt,ap as Ie,aq as gt,aN as _t,aO as yt,aP as Ct,aQ as ht,a0 as X,al as Te,ao as Pe,aR as De,aS as $e,aT as wt,ar as Se,as as At,aU as xt,a1 as Z,aV as bt,aW as St,aX as Vt,a7 as E,a6 as Le,ay as Be,R as ze,U as Me}from"./main-Cp2POdXb.js";import{f as kt}from"./forwardRefs-D9kYFWgq.js";import{I as Ot}from"./index-ClsSkh9w.js";import{_ as It}from"./TablePagination-BcAfm0K9.js";import{_ as Tt}from"./AppSelect-CwPVrUcc.js";import{u as Pt,f as Ve}from"./format-CmBD0T9Q.js";import{u as te}from"./applicationList-DsVvfxKP.js";import{f as Dt}from"./helpers-CwQmYJBr.js";import{V as M}from"./VCardText-DIkb2F71.js";import{V as $t}from"./VDivider-DEaYy4t1.js";import{V as Lt}from"./VDataTableServer-CFw024t0.js";import{V as pe}from"./VChip-ihqZWhi4.js";import{V as U,b as j,c as Ue}from"./VCard-oCmDgLNf.js";/* empty css                         */import{a as L,V as Q}from"./VRow-BcPNCwrl.js";import{V as Ne}from"./VForm-Bbw74UUt.js";import{V as Re}from"./VSpacer-i5anbK_5.js";import{V as Fe}from"./VDialog-uMvXWSQO.js";import{_ as He}from"./AppAutocomplete-BNiahicf.js";import{S as K}from"./sweetalert2-z6gKu1nJ.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as je}from"./VTable-7DamCojC.js";import{V as qe}from"./VAlert-D4djiukh.js";const Bt=ne({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Xe(),...Ze()},"VTextarea"),zt=oe()({name:"VTextarea",directives:{Intersect:Ot},inheritAttrs:!1,props:Bt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,_){let{attrs:l,emit:n,slots:i}=_;const d=nt(e,"modelValue"),{isFocused:o,focus:r,blur:A}=et(e),V=O(()=>typeof e.counterValue=="function"?e.counterValue(d.value):(d.value||"").toString().length),C=O(()=>{if(l.maxlength)return l.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function p(x,D){var I,B;!e.autofocus||!x||(B=(I=D[0].target)==null?void 0:I.focus)==null||B.call(I)}const v=y(),s=y(),c=ke(""),P=y(),b=O(()=>e.persistentPlaceholder||o.value||e.active);function J(){var x;P.value!==document.activeElement&&((x=P.value)==null||x.focus()),o.value||r()}function ie(x){J(),n("click:control",x)}function f(x){n("mousedown:control",x)}function h(x){x.stopPropagation(),J(),me(()=>{d.value="",ct(e["onClick:clear"],x)})}function q(x){var I;const D=x.target;if(d.value=D.value,(I=e.modelModifiers)!=null&&I.trim){const B=[D.selectionStart,D.selectionEnd];me(()=>{D.selectionStart=B[0],D.selectionEnd=B[1]})}}const N=y(),u=y(+e.rows),re=O(()=>["plain","underlined"].includes(e.variant));ot(()=>{e.autoGrow||(u.value=+e.rows)});function G(){e.autoGrow&&me(()=>{if(!N.value||!s.value)return;const x=getComputedStyle(N.value),D=getComputedStyle(s.value.$el),I=parseFloat(x.getPropertyValue("--v-field-padding-top"))+parseFloat(x.getPropertyValue("--v-input-padding-top"))+parseFloat(x.getPropertyValue("--v-field-padding-bottom")),B=N.value.scrollHeight,ae=parseFloat(x.lineHeight),ue=Math.max(parseFloat(e.rows)*ae+I,parseFloat(D.getPropertyValue("--v-input-control-height"))),ce=parseFloat(e.maxRows)*ae+I||1/0,F=dt(B??0,ue,ce);u.value=Math.floor((F-I)/ae),c.value=W(F)})}Y(G),z(d,G),z(()=>e.rows,G),z(()=>e.maxRows,G),z(()=>e.density,G);let R;return z(N,x=>{x?(R=new ResizeObserver(G),R.observe(N.value)):R==null||R.disconnect()}),st(()=>{R==null||R.disconnect()}),se(()=>{const x=!!(i.counter||e.counter||e.counterValue),D=!!(x||i.details),[I,B]=it(l),{modelValue:ae,...ue}=he.filterProps(e),ce=tt(e);return t(he,de({ref:v,modelValue:d.value,"onUpdate:modelValue":F=>d.value=F,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":re.value},e.class],style:e.style},I,ue,{centerAffix:u.value===1&&!re.value,focused:o.value}),{...i,default:F=>{let{id:le,isDisabled:ge,isDirty:_e,isReadonly:Qe,isValid:Ye}=F;return t(at,de({ref:s,style:{"--v-textarea-control-height":c.value},onClick:ie,onMousedown:f,"onClick:clear":h,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ce,{id:le.value,active:b.value||_e.value,centerAffix:u.value===1&&!re.value,dirty:_e.value||e.dirty,disabled:ge.value,focused:o.value,error:Ye.value===!1}),{...i,default:Je=>{let{props:{class:ye,...Ce}}=Je;return t(T,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),we(t("textarea",de({ref:P,class:ye,value:d.value,onInput:q,autofocus:e.autofocus,readonly:Qe.value,disabled:ge.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:J,onBlur:A},Ce,B),null),[[rt("intersect"),{handler:p},null,{once:!0}]]),e.autoGrow&&we(t("textarea",{class:[ye,"v-textarea__sizer"],id:`${Ce.id}-sizer`,"onUpdate:modelValue":We=>d.value=We,ref:N,readonly:!0,"aria-hidden":"true"},null),[[ut,d.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:D?F=>{var le;return t(T,null,[(le=i.details)==null?void 0:le.call(i,F),x&&t(T,null,[t("span",null,null),t(lt,{active:e.persistentCounter||o.value,value:V.value,max:C.value},i.counter)])])}:void 0})}),kt({},v,s,P)}}),ka=Object.assign({name:"AppTextarea",inheritAttrs:!1},{__name:"AppTextarea",setup(e){const _=O(()=>{const n=Ae(),i=n.id||n.label;return i?`app-textarea-${i}-${Math.random().toString(36).slice(2,7)}`:void 0}),l=O(()=>Ae().label);return(n,i)=>(w(),k("div",{class:vt(["app-textarea flex-grow-1",n.$attrs.class])},[H(l)?(w(),$(fe,{key:0,for:H(_),class:"mb-1 text-body-2",text:H(l)},null,8,["for","text"])):Oe("",!0),t(zt,xe(be({...n.$attrs,class:null,label:void 0,variant:"outlined",id:H(_)})),mt({_:2},[ee(n.$slots,(d,o)=>({name:o,fn:a(r=>[ft(n.$slots,o,xe(be(r||{})))])}))]),1040)],2))}}),Mt={class:"d-flex justify-space-between flex-wrap gap-6"},Ut={class:"me-3 d-flex gap-3"},Nt=g("br",null,null,-1),Rt={key:0},Oa={__name:"ApplicationActivityLog",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=Pt(),n=y([]),i=y(!1),d=y(0),o=y(1),r=y(10),A=y(""),V=y(null),C=[{title:"Date",key:"created_at",sortable:!0},{title:"User",key:"user",sortable:!0},{title:"Activity Type",key:"description",sortable:!0},{title:"Details",key:"details",sortable:!1},{title:"IP Address",key:"ip_address",sortable:!1}],p=async()=>{i.value=!0;try{l.setPage(o.value),l.setPerPage(r.value),l.setActivityType(V.value),l.setSearchQuery(A.value);const f=await l.fetchApplicationActivityLogs(_.applicationId);n.value=f.data.data.map(h=>({...h,created_at:Ve(new Date(h.created_at),"yyyy-MM-dd HH:mm:ss"),ip_address:h.properties.ip||"N/A",details:c(h),user:h.user?h.user.name:"System"})),d.value=f.data.total}catch(f){console.error("Error fetching activity logs:",f)}finally{i.value=!1}},v=te(),s=y([]),c=f=>{switch(f.description){case"application_submit":return`Submitted application #${f.properties.application_id}`;case"application_update":return`Updated application #${f.properties.application_id}`;case"document_upload":return`Uploaded document: ${f.properties.document_name||"Unknown"}`;case"comment_added":return`Added comment to application #${f.properties.application_id||"Unknown"}`;case"application_status_update":const h=P(f.properties.old_status),q=P(f.properties.new_status);return`Updated status from ${h} to ${q}`;default:return f.description||"Performed an action"}},P=f=>{const h=s.value.find(q=>q.id===parseInt(f));return h?h.name:"Unknown"},b=f=>{switch(f){case"application_submit":return"primary";case"application_update":return"info";case"document_upload":return"success";case"comment_added":return"warning";case"application_status_update":return"error";default:return"default"}},J=f=>{o.value=f.page,r.value=f.itemsPerPage,f.sortBy&&f.sortBy.length>0&&l.setSorting(f.sortBy[0].key,f.sortBy[0].order),p()};z([A,V],()=>{o.value=1,p()}),Y(async()=>{await p(),await ie()});const ie=async()=>{const f=await v.getAllApplicationStatuses();s.value=f.data};return(f,h)=>{const q=Tt,N=It;return w(),$(U,{title:"Application Activity Log",class:"mt-5"},{default:a(()=>[t(M,null,{default:a(()=>[g("div",Mt,[g("div",Ut,[t(q,{modelValue:r.value,"onUpdate:modelValue":[h[0]||(h[0]=u=>r.value=u),h[1]||(h[1]=u=>r.value=parseInt(u,10))],items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t($t),t(Lt,{"items-per-page":r.value,"onUpdate:itemsPerPage":h[3]||(h[3]=u=>r.value=u),page:o.value,"onUpdate:page":h[4]||(h[4]=u=>o.value=u),items:n.value,"items-length":d.value,headers:C,loading:i.value,class:"text-no-wrap","onUpdate:options":J},{"item.description":a(({item:u})=>[t(pe,{color:b(u.description),size:"small"},{default:a(()=>[m(S(H(Dt)(u.description)),1)]),_:2},1032,["color"])]),"item.user":a(({item:u})=>[m(S(u.user),1)]),"item.created_at":a(({item:u})=>[m(S(H(Ve)(new Date(u.created_at),"dd MMM yyyy HH:mm:ss")),1)]),"item.ip_address":a(({item:u})=>[m(S(u.properties.ip),1)]),"item.details":a(({item:u})=>[u.description==="application_status_update"?(w(),k(T,{key:0},[m(" Updated "+S(u.properties.old_status)+" to "+S(u.properties.new_status)+" ",1),Nt,u.properties.comment?(w(),k("span",Rt," Comment: "+S(u.properties.comment),1)):Oe("",!0)],64)):u.description==="comment_added"?(w(),k(T,{key:1},[m(S(u.properties.comment),1)],64)):u.description==="university_communication_added"?(w(),k(T,{key:2},[m(" Subject: "+S(u.properties.subject),1)],64)):(w(),k(T,{key:3},[m(S(u.properties.details||"N/A"),1)],64))]),bottom:a(()=>[t(N,{page:o.value,"onUpdate:page":h[2]||(h[2]=u=>o.value=u),"items-per-page":r.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})}}},Ft=ne({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ve(),...pt(),...Ie(),...gt()},"VTimeline"),Ge=oe()({name:"VTimeline",props:Ft(),setup(e,_){let{slots:l}=_;const{themeClasses:n}=_t(e),{densityClasses:i}=yt(e),{rtlClasses:d}=Ct();ht({VTimelineDivider:{lineColor:X(e,"lineColor")},VTimelineItem:{density:X(e,"density"),lineInset:X(e,"lineInset")}});const o=O(()=>{const A=e.side?e.side:e.density!=="default"?"end":null;return A&&`v-timeline--side-${A}`}),r=O(()=>{const A=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return A;case"start":return A[0];case"end":return A[1];default:return null}});return se(()=>t(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,r.value,{"v-timeline--inset-line":!!e.lineInset},n.value,i.value,o.value,d.value,e.class],style:[{"--v-timeline-line-thickness":W(e.lineThickness)},e.style]},l)),{}}}),Ht=ne({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Te,iconColor:String,lineColor:String,...ve(),...Pe(),...De(),...$e()},"VTimelineDivider"),Et=oe()({name:"VTimelineDivider",props:Ht(),setup(e,_){let{slots:l}=_;const{sizeClasses:n,sizeStyles:i}=wt(e,"v-timeline-divider__dot"),{backgroundColorStyles:d,backgroundColorClasses:o}=Se(X(e,"dotColor")),{roundedClasses:r}=At(e,"v-timeline-divider__dot"),{elevationClasses:A}=xt(e),{backgroundColorClasses:V,backgroundColorStyles:C}=Se(X(e,"lineColor"));return se(()=>t("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[t("div",{class:["v-timeline-divider__before",V.value],style:C.value},null),!e.hideDot&&t("div",{key:"dot",class:["v-timeline-divider__dot",A.value,r.value,n.value],style:i.value},[t("div",{class:["v-timeline-divider__inner-dot",o.value,r.value],style:d.value},[l.default?t(bt,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},l.default):t(Z,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),t("div",{class:["v-timeline-divider__after",V.value],style:C.value},null)])),{}}}),jt=ne({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Te,iconColor:String,lineInset:[Number,String],...ve(),...St(),...$e(),...Pe(),...De(),...Ie()},"VTimelineItem"),Ke=oe()({name:"VTimelineItem",props:jt(),setup(e,_){let{slots:l}=_;const{dimensionStyles:n}=Vt(e),i=ke(0),d=y();return z(d,o=>{var r;o&&(i.value=((r=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:r.getBoundingClientRect().width)??0)},{flush:"post"}),se(()=>{var o,r;return t("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":W(i.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${W(e.lineInset)})`:W(0)},e.style]},[t("div",{class:"v-timeline-item__body",style:n.value},[(o=l.default)==null?void 0:o.call(l)]),t(Et,{ref:d,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:l.icon}),e.density!=="compact"&&t("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((r=l.opposite)==null?void 0:r.call(l))])])}),{}}}),qt={class:"comment-section"},Gt={class:"text-caption"},Kt=["innerHTML"],Ia={__name:"AcoAoCommunication",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(!1),i=y(""),d=y([]),o=y(!1),r=async()=>{try{o.value=!0,await l.addAcoAoCommunication(_.applicationId,i.value),i.value="",n.value=!1,await A()}catch(C){console.error("Error adding ACO & AO communication:",C)}finally{o.value=!1}},A=async()=>{await l.getAcoAoCommunications(_.applicationId),d.value=l.acoAoCommunications},V=C=>new Date(C).toLocaleDateString();return Y(A),(C,p)=>(w(),k(T,null,[t(Q,null,{default:a(()=>[t(L,{cols:"12",class:"d-flex justify-end mb-4"},{default:a(()=>[t(E,{color:"primary",onClick:p[0]||(p[0]=v=>n.value=!0)},{default:a(()=>[t(Z,{start:"",icon:"mdi-plus"}),m(" Add New Communication ")]),_:1})]),_:1}),t(L,{cols:"12"},{default:a(()=>[t(U,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[m(" ACO & AO Communications ")]),_:1}),t(M,null,{default:a(()=>[g("div",qt,[t(Ge,{density:C.dense},{default:a(()=>[(w(!0),k(T,null,ee(d.value,(v,s)=>(w(),$(Ke,{key:s,"dot-color":"primary",size:"small"},{opposite:a(()=>[g("div",Gt,S(V(v.created_at)),1)]),default:a(()=>[t(U,{class:"elevation-1"},{default:a(()=>[t(j,{class:"text-subtitle-1"},{default:a(()=>[m(S(v.user.full_name),1)]),_:2},1024),t(M,null,{default:a(()=>[g("div",{innerHTML:v.message},null,8,Kt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),t(Fe,{modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=v=>n.value=v),"max-width":"500px"},{default:a(()=>[t(U,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[m("Add a New ACO & AO Communication")]),_:1}),t(M,null,{default:a(()=>[t(Ne,{onSubmit:Le(r,["prevent"])},{default:a(()=>[t(fe,{class:"text-body-1 font-weight-medium mb-2"},{default:a(()=>[m(" Message ")]),_:1}),t(H(Be),{content:i.value,"onUpdate:content":p[1]||(p[1]=v=>i.value=v),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),t(Ue,{class:"pa-4"},{default:a(()=>[t(Re),t(E,{color:"primary",loading:o.value,disabled:o.value,onClick:r},{default:a(()=>[t(Z,{start:"",icon:"mdi-send"}),m(" Submit Communication ")]),_:1},8,["loading","disabled"]),t(E,{color:"secondary",disabled:o.value,onClick:p[2]||(p[2]=v=>n.value=!1)},{default:a(()=>[m(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Qt={class:"comment-section"},Yt={class:"text-caption"},Jt=["innerHTML"],Ta={__name:"AcoCoCommunication",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(!1),i=y(""),d=y([]),o=y(!1),r=async()=>{try{o.value=!0,await l.addAcoCoCommunication(_.applicationId,i.value),i.value="",n.value=!1,await A()}catch(C){console.error("Error adding ACO & CO communication:",C)}finally{o.value=!1}},A=async()=>{await l.getAcoCoCommunications(_.applicationId),d.value=l.acoCoCommunications},V=C=>new Date(C).toLocaleDateString();return Y(A),(C,p)=>(w(),k(T,null,[t(Q,null,{default:a(()=>[t(L,{cols:"12",class:"d-flex justify-end mb-4"},{default:a(()=>[t(E,{color:"primary",onClick:p[0]||(p[0]=v=>n.value=!0)},{default:a(()=>[t(Z,{start:"",icon:"mdi-plus"}),m(" Add New Communication ")]),_:1})]),_:1}),t(L,{cols:"12"},{default:a(()=>[t(U,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[m(" ACO & CO Communications ")]),_:1}),t(M,null,{default:a(()=>[g("div",Qt,[t(Ge,{density:C.dense},{default:a(()=>[(w(!0),k(T,null,ee(d.value,(v,s)=>(w(),$(Ke,{key:s,"dot-color":"primary",size:"small"},{opposite:a(()=>[g("div",Yt,S(V(v.created_at)),1)]),default:a(()=>[t(U,{class:"elevation-1"},{default:a(()=>[t(j,{class:"text-subtitle-1"},{default:a(()=>[m(S(v.user.full_name),1)]),_:2},1024),t(M,null,{default:a(()=>[g("div",{innerHTML:v.message},null,8,Jt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])])]),_:1})]),_:1})]),_:1})]),_:1}),t(Fe,{modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=v=>n.value=v),"max-width":"500px"},{default:a(()=>[t(U,null,{default:a(()=>[t(j,{class:"text-h6 font-weight-bold pa-4"},{default:a(()=>[m("Add a New ACO & CO Communication")]),_:1}),t(M,null,{default:a(()=>[t(Ne,{onSubmit:Le(r,["prevent"])},{default:a(()=>[t(fe,{class:"text-body-1 font-weight-medium mb-2"},{default:a(()=>[m(" Message ")]),_:1}),t(H(Be),{content:i.value,"onUpdate:content":p[1]||(p[1]=v=>i.value=v),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),t(Ue,{class:"pa-4"},{default:a(()=>[t(Re),t(E,{color:"primary",loading:o.value,disabled:o.value,onClick:r},{default:a(()=>[t(Z,{start:"",icon:"mdi-send"}),m(" Submit Communication ")]),_:1},8,["loading","disabled"]),t(E,{color:"secondary",disabled:o.value,onClick:p[2]||(p[2]=v=>n.value=!1)},{default:a(()=>[m(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Wt=e=>(ze("data-v-eca9312f"),e=e(),Me(),e),Xt=Wt(()=>g("thead",null,[g("tr",null,[g("th",null,"Name"),g("th",null,"Email"),g("th",null,"Status")])],-1)),Zt={__name:"ApplicationOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(null),i=y(""),d=O(()=>l.applicationOfficerOptions),o=O(()=>l.applicationOfficers),r=O(()=>{if(!i.value)return o.value;const s=i.value.toLowerCase();return o.value.filter(c=>c.full_name.toLowerCase().includes(s)||c.email.toLowerCase().includes(s)||c.pivot.status.toLowerCase().includes(s))}),A=async()=>{try{if(!n.value){errorMessage.value="Please select an officer before assigning.";return}if((await K.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this application officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const c=await l.assignApplicationOfficer(_.applicationId,n.value);if(c&&!c.status)throw console.log("hello"),console.log(c),new Error(c);K.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the application officer successfully!",confirmButtonText:"OK"}),n.value=null,await V()}}catch(s){console.log(s),K.fire({icon:"error",title:"Assignment Failed",text:s,confirmButtonText:"OK"})}},V=async()=>{await l.fetchApplicationOfficers(_.applicationId)};Y(async()=>{await Promise.all([V(),l.loadAllApplicationOfficers()])}),z(()=>_.applicationId,V);const C=s=>({accepted:"success",rejected:"error",pending:"warning"})[s.toLowerCase()]||"secondary",p=s=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[s.toLowerCase()]||s,v=s=>({success:"white",error:"white",warning:"black",secondary:"white"})[s]||"white";return(s,c)=>{const P=He;return w(),$(U,null,{default:a(()=>[t(j,null,{default:a(()=>[m("Application Officer Assignments")]),_:1}),t(M,null,{default:a(()=>[t(Q,null,{default:a(()=>[t(L,{cols:"12",md:"6"},{default:a(()=>[t(P,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),items:d.value,"item-title":"full_name","item-value":"id",label:"Select Application Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),t(L,{cols:"12",md:"6",class:"d-flex align-center"},{default:a(()=>[t(E,{class:"mt-6",color:"primary",disabled:!n.value,onClick:A},{default:a(()=>[m(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Q,{class:"mt-4"},{default:a(()=>[t(L,{cols:"12"},{default:a(()=>[r.value.length?(w(),$(je,{key:0},{default:a(()=>[Xt,g("tbody",null,[(w(!0),k(T,null,ee(r.value,b=>(w(),k("tr",{key:b.id},[g("td",null,S(b.user.full_name),1),g("td",null,S(b.user.email),1),g("td",null,[t(pe,{color:C(b.status),"text-color":v(C(b.status)),size:"small",label:""},{default:a(()=>[m(S(p(b.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(w(),$(qe,{key:1,type:"info",class:"mt-2"},{default:a(()=>[m(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},Pa=Ee(Zt,[["__scopeId","data-v-eca9312f"]]),ea=e=>(ze("data-v-aa458ed5"),e=e(),Me(),e),ta=ea(()=>g("thead",null,[g("tr",null,[g("th",null,"Name"),g("th",null,"Email"),g("th",null,"Status")])],-1)),aa={__name:"ComplianceOfficerAssignments",props:{applicationId:{type:String,required:!0}},setup(e){const _=e,l=te(),n=y(null),i=y(""),d=O(()=>l.complianceOfficerOptions),o=O(()=>l.complianceOfficers),r=O(()=>{if(!i.value)return o.value;const s=i.value.toLowerCase();return o.value.filter(c=>c.full_name.toLowerCase().includes(s)||c.email.toLowerCase().includes(s)||c.pivot.status.toLowerCase().includes(s))}),A=async()=>{try{if(!n.value){errorMessage.value="Please select an officer before assigning.";return}if((await K.fire({title:"Confirm Assignment",text:"Are you sure you want to assign this compliance officer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign it!"})).isConfirmed){const c=await l.assignComplianceOfficer(_.applicationId,n.value);if(c&&!c.status)throw new Error(c);K.fire({icon:"success",title:"Assignment Successful",text:"You have assigned the compliance officer successfully!",confirmButtonText:"OK"}),n.value=null,await V()}}catch(s){console.log(s),K.fire({icon:"error",title:"Assignment Failed",text:s,confirmButtonText:"OK"})}},V=async()=>{await l.fetchComplianceOfficers(_.applicationId)};Y(async()=>{await Promise.all([V(),l.loadAllComplianceOfficers()])}),z(()=>_.applicationId,V);const C=s=>({accepted:"success",rejected:"error",pending:"warning"})[s.toLowerCase()]||"secondary",p=s=>({accepted:"Accepted",rejected:"Rejected",pending:"Pending"})[s.toLowerCase()]||s,v=s=>({success:"white",error:"white",warning:"black",secondary:"white"})[s]||"white";return(s,c)=>{const P=He;return w(),$(U,null,{default:a(()=>[t(j,null,{default:a(()=>[m("Compliance Officer Assignments")]),_:1}),t(M,null,{default:a(()=>[t(Q,null,{default:a(()=>[t(L,{cols:"12",md:"6"},{default:a(()=>[t(P,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),items:d.value,"item-title":"full_name","item-value":"id",label:"Select Compliance Officer",placeholder:"Search and select an officer",clearable:""},null,8,["modelValue","items"])]),_:1}),t(L,{cols:"12",md:"6",class:"d-flex align-center"},{default:a(()=>[t(E,{class:"mt-6",color:"primary",disabled:!n.value,onClick:A},{default:a(()=>[m(" Assign Officer ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Q,{class:"mt-4"},{default:a(()=>[t(L,{cols:"12"},{default:a(()=>[r.value.length?(w(),$(je,{key:0},{default:a(()=>[ta,g("tbody",null,[(w(!0),k(T,null,ee(r.value,b=>(w(),k("tr",{key:b.id},[g("td",null,S(b.user.full_name),1),g("td",null,S(b.user.email),1),g("td",null,[t(pe,{color:C(b.status),"text-color":v(C(b.status)),size:"small",label:""},{default:a(()=>[m(S(p(b.status)),1)]),_:2},1032,["color","text-color"])])]))),128))])]),_:1})):(w(),$(qe,{key:1,type:"info",class:"mt-2"},{default:a(()=>[m(" No assigned officers found. ")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}},Da=Ee(aa,[["__scopeId","data-v-aa458ed5"]]);export{Pa as A,Da as C,Ia as _,Oa as a,Ta as b,ka as c};
