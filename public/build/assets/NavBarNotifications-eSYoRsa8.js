import{a as H}from"./formatters-DULOiX1-.js";import{o as r,c as p,v as _,R as K,U as G,d as n,r as V,a6 as R,k as D,H as L,a7 as J,a as Q,F as b,i as B,x as u,b as t,e as s,n as f,a2 as S,K as y,L as N,f as F,z as $,y as M,a8 as W,a9 as X,a1 as Y}from"./main-DhAx2EoV.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as ee}from"./commonFunction-Drx-1dBU.js";import{P as te}from"./vue3-perfect-scrollbar.esm-B2Xd4MhL.js";import{V as ae}from"./VBadge-Dti1mD3B.js";import{V as oe}from"./VMenu-QBhXfN-J.js";import{V as se,a as ie,b as ne}from"./VCard-BO-l_J1e.js";import{V as re}from"./VChip-CIHthk_g.js";import{V as le}from"./VTooltip-BnZ0iBB8.js";import{V as T}from"./VDivider-u1PSuZkU.js";import{V as ce,a as U,b as de}from"./VList-DH3_F3pK.js";import{V as me}from"./VAvatar-jVIz9n9j.js";import{V as ue}from"./VSpacer-BO0ruGFA.js";import{V as pe}from"./VCardText-CTEBD-iV.js";import"./index-K-fs9iMx.js";import"./dialog-transition-C15OMZwk.js";import"./forwardRefs-D3j0TLhE.js";import"./scopeId-CkCSh17L.js";import"./VImg-jad4Tg-f.js";import"./index-DIBkNyHg.js";import"./ssrBoot-N7KHjHgb.js";/* empty css              */const fe=c=>(K("data-v-0c98b2f7"),c=c(),G(),c),_e={class:"daily-task-button d-print-none",role:"button",rel:"noopener noreferrer",target:"_blank"},he=fe(()=>n("span",{class:"button-inner"},null,-1)),ve={__name:"AddDailyTask",setup(c){return(d,o)=>(r(),p("a",_e,[_(" Add Daily Task "),he]))}},ke=Z(ve,[["__scopeId","data-v-0c98b2f7"]]),xe={class:"notice-container"},ge={class:"notice-ticker"},Ve={class:"notice-text"},be={class:"text-center"},ye={class:"d-flex align-start gap-3"},Ne={key:0},we={class:"text-sm font-weight-medium mb-1"},Ce={class:"text-body-2 mb-2",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},Ie={class:"text-sm text-disabled mb-0",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},Re={class:"d-flex flex-column align-end"},Se={__name:"Notifications",props:{notifications:{type:Array,required:!0},badgeProps:{type:Object,required:!1,default:void 0},location:{type:null,required:!1,default:"bottom end"}},emits:["read","unread","remove","click:notification"],setup(c,{emit:d}){const o=c;V(0);const h=ee(),m=d,w=V(!1),v=R(()=>o.notifications.some(i=>i.isSeen===!1)),e=()=>{const i=o.notifications.map(x=>x.id);v.value?m("read",i):m("unread",i)},l=R(()=>o.notifications&&o.notifications.length>0?o.notifications.filter(i=>!i.read).length:0),k=(i,x)=>{m(i?"unread":"read",x)},P=D(),q=()=>{P.push({name:"notifications"})},g=V([]),C=V(0);R(()=>g.value[C.value]);const O=()=>{C.value=(C.value+1)%g.value.length};let z;return L(async()=>{z=setInterval(O,2e3),h.activeNotices.length===0&&await h.getActiveNotices(),g.value=h.activeNotices,w.value=!1}),J(()=>{clearInterval(z)}),(i,x)=>{const j=ke,A=Q("IconBtn");return r(),p(b,null,[n("div",xe,[n("div",ge,[n("span",Ve,[(r(!0),p(b,null,B(g.value,(a,I)=>(r(),p("span",{key:I,class:"notice-item"},u(a.content),1))),128))])])]),n("div",be,[t(j)]),t(A,{id:"notification-btn"},{default:s(()=>[t(ae,{content:f(l),color:"error","offset-x":"2","offset-y":"3"},{default:s(()=>[t(S,{size:"28",icon:"tabler-bell"})]),_:1},8,["content"]),t(oe,{activator:"parent",width:"380px",location:o.location,offset:"12px","close-on-content-click":!0},{default:s(()=>[t(se,{class:"d-flex flex-column"},{default:s(()=>[t(ie,{class:"notification-section"},{append:s(()=>[y(t(re,{size:"small",color:"primary",class:"me-2"},{default:s(()=>[_(u(f(l))+" New ",1)]),_:1},512),[[N,o.notifications.some(a=>!a.isSeen)]]),y(t(A,{size:"34",onClick:e},{default:s(()=>[t(S,{size:"20",color:"high-emphasis",icon:f(v)?"tabler-mail-opened":"tabler-mail"},null,8,["icon"]),t(le,{activator:"parent",location:"start"},{default:s(()=>[_(u(f(v)?"Mark all as read":"Mark all as unread"),1)]),_:1})]),_:1},512),[[N,o.notifications.length]])]),default:s(()=>[t(ne,{class:"text-h6"},{default:s(()=>[_(" Notifications ")]),_:1})]),_:1}),t(T),t(f(te),{options:{wheelPropagation:!1},style:{"max-block-size":"23.75rem"}},{default:s(()=>[t(ce,{class:"notification-list rounded-0 py-0"},{default:s(()=>[(r(!0),p(b,null,B(o.notifications,(a,I)=>(r(),p(b,{key:a.id},[I>0?(r(),F(T,{key:0})):$("",!0),t(U,{link:"",lines:"one","min-height":"66px",class:M(["list-item-hover-class",{"unread-notification":!a.read}]),onClick:E=>i.$emit("click:notification",a)},{default:s(()=>[n("div",ye,[t(me,{size:"40",color:a.color&&a.icon?a.color:void 0,image:a.img||void 0,icon:a.icon||void 0,variant:a.img?void 0:"tonal"},{default:s(()=>[a.text?(r(),p("span",Ne,u(("avatarText"in i?i.avatarText:f(H))(a.text)),1)):$("",!0)]),_:2},1032,["color","image","icon","variant"]),n("div",null,[n("p",we,u(a.title),1),n("p",Ce,u(a.message),1),n("p",Ie,u(a.time),1)]),t(ue),n("div",Re,[t(S,{size:"10",icon:"tabler-circle-filled",color:a.read?"#a8aaae":"primary",class:M([`${a.read?"visible-in-hover":""}`,"mb-2"]),onClick:W(E=>k(a.read,a.id),["stop"])},null,8,["color","class","onClick"])])])]),_:2},1032,["class","onClick"])],64))),128)),y(t(U,{class:"text-center text-medium-emphasis",style:{"block-size":"56px"}},{default:s(()=>[t(de,null,{default:s(()=>[_("No Notification Found!")]),_:1})]),_:1},512),[[N,!o.notifications.length]])]),_:1})]),_:1}),t(T),y(t(pe,{class:"pa-4"},{default:s(()=>[t(X,{block:"",size:"small",onClick:q},{default:s(()=>[_(" View All Notifications ")]),_:1})]),_:1},512),[[N,o.notifications.length]])]),_:1})]),_:1},8,["location"])]),_:1})],64)}}},Ze={__name:"NavBarNotifications",setup(c){const d=Y(),o=D();L(()=>{});const h=e=>{d.notifications=d.notifications.filter(l=>l.id!==e)},m=e=>{d.markAsRead(e)},w=e=>{console.warn("Mark as unread not implemented")},v=e=>{if(e.read||m(e.id),e.notification_route){const l=o.currentRoute.value.name,k=o.currentRoute.value.params.id;l===e.notification_route&&k==e.application_id?(window.location.hash="#"+e.notification_hash,window.location.reload()):l==e.notification_route?o.push({name:e.notification_route,params:{id:e.application_id},hash:"#"+e.notification_hash}).then(()=>window.location.reload()):e.application_id?o.push({name:e.notification_route,params:{id:e.application_id},hash:"#"+e.notification_hash}):o.push({name:e.notification_route,hash:"#"+e.notification_hash})}};return(e,l)=>{const k=Se;return r(),F(k,{notifications:f(d).notifications,onRemove:h,onRead:m,onUnread:w,"onClick:notification":v},null,8,["notifications"])}}};export{Ze as default};
