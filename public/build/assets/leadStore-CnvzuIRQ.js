import{bg as w,bh as t}from"./main-rAiiXsdI.js";import{h as m}from"./helpers-Qc6KRDow.js";const f=w({id:"lead-store",state:()=>({errors:[],successMessage:""}),actions:{async getLeads(s=null,r=1,e=10,o="",a="",d="",c=null,l=null,i=null,p=null,u=null,h=null,y=null,g=null){try{return await t("/leads",{method:"GET",headers:{"Content-Type":"application/json"},params:{id:s,page:r,perPage:e,searchQuery:o,sortBy:a,orderBy:d,status:c,dateFrom:l,dateTo:i,assigned_status:p,lead_type:u,event:h,branch:y,lead_country:g}})}catch(n){throw console.error("Error getting leads list:",n),this.errors=n.response?n.response.data.errors:["An unexpected error occurred"],n}},async updateLeadStatus(s,r){var e,o;try{console.log("Updating lead with data:",s,r);const a=await t(`/leads/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:r});return console.log("Lead status updated successfully:",a),a.data}catch(a){throw console.error("Error updating lead status:",a),this.errors=((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.errors)||["An unexpected error occurred"],a}},async addNote(s,r){console.log("Adding note with:",r);try{return(await t(`/leads/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).data}catch(e){throw console.error("Error adding note:",e),this.errors=e.response?e.response.data.errors:["An unexpected error occurred"],e}},async uploadLeads(s){try{const r=await t("/leads/upload",{method:"POST",body:s});return this.successMessage=r.data.message,r.data}catch(r){m(r)}},async fetchLeadCount(s,r){try{return(await t("/leads/count",{method:"GET",params:{country:s,branch_id:r}})).data}catch(e){throw console.error("Error fetching lead count:",e),e}},async saveAssignedLeads(s,r,e){try{return await t("/leads/assign",{method:"POST",body:JSON.stringify({assigned_data:s,lead_country:r,branch_id:e}),headers:{"Content-Type":"application/json"}})}catch(o){throw console.error("Error saving assigned leads:",o),o}},async addNoteToLead(s,r){try{return(await t(`/leads/${s}/add-note`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:r})})).data}catch(e){throw console.error("Error adding note to lead:",e),this.errors=e.response?e.response.data.errors:["An unexpected error occurred"],e}}}});export{f as u};
