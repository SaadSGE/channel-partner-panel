import{_ as te}from"./AppCardActions-CGL-OoT2.js";import{_ as ae}from"./TablePagination-RBR5P6A0.js";import{_ as le}from"./AppTextField-BnctADyp.js";import{_ as oe}from"./AppSelect-BNGgR_83.js";import{_ as ie}from"./AppDateTimePicker-pAiNKDUI.js";import{_ as se}from"./AppAutocomplete-B8U_snpG.js";import{c as ne}from"./commonFunction-DhYSwvog.js";import{u as re}from"./user-DBuMEf9E.js";import{g as H}from"./helpers-Dc5gKyUW.js";import{a as b,V as de}from"./VRow-CVKu7ERN.js";import{r as l,w as V,H as M,o as D,c as Y,b as o,e as s,f as N,z as F,F as ue,k as me,a5 as ce,a as pe,v as E,d as u,x as A,y as fe,a1 as L}from"./main-C6ERgTiB.js";import{u as j}from"./applicationList-BLgf3Dr2.js";import{S as B}from"./sweetalert2-z6gKu1nJ.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as z}from"./VCardText-DyH2ky4x.js";import{V as ye}from"./VSpacer-TN90Hwmk.js";import{V as _e}from"./VDataTableServer-kaTTMO2G.js";import{V as ge}from"./VChip-BtIL2WSz.js";import"./index-DutjPwCM.js";import"./VCard-DLAhDs8-.js";import"./VAvatar-DylhPErE.js";import"./VImg-BqNHbiqg.js";import"./index-D6hiwHnT.js";import"./VOverlay-CABU05nN.js";import"./easing-CjukEv2V.js";import"./lazy-JjDbKxFe.js";import"./scopeId-ByQHvwr0.js";import"./VDivider-Dd16fJaD.js";import"./VPagination-Bqt_jUHu.js";import"./form-Cbq_eE9Q.js";import"./VTextField-9PZsapBG.js";/* empty css                   */import"./VCounter-BwcaoWKE.js";import"./VField-Cc-Llg4V.js";import"./VInput-DUF9xqc_.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CrMfWYZC.js";import"./VList-CUo5zzlX.js";import"./ssrBoot-z5WDRBPu.js";import"./dialog-transition-FOpiKdmf.js";import"./VMenu-iU7hwomi.js";import"./VCheckboxBtn-CFtVYsNM.js";import"./VSelectionControl-tgjQOBlh.js";import"./filter-DZ9tZ2Nl.js";import"./api-C64KqSnz.js";import"./index-Dz1rBMAR.js";/* empty css              */import"./VDataTable-DQAKqsVH.js";import"./VTable-BDnD0gFN.js";import"./VSlideGroup-KW1Ij6Qd.js";const he={__name:"Filters",props:{isAdmin:{type:Boolean,default:!1},selectedStatus:{type:Object,Required:!1},selectedChannelPartner:{type:Object,Required:!1},selectedUniversity:{type:Object,Required:!1},selectedApplicationOfficer:{type:Object,Required:!1},dateFrom:{type:Number,Required:!1},dateTo:{type:Number,Required:!1}},emits:["update-status","update-channel-partner","update-university","update-application-officer","update-date-from","update-date-to"],setup(I,{emit:O}){const T=l([{id:0,name:"Application Processing"},{id:1,name:"Application Submitted"},{id:2,name:"Pending Docs"},{id:3,name:"Offer Issue Conditional"},{id:4,name:"Offer Issue Unconditional"},{id:5,name:"Need Payment"},{id:6,name:"CAS Issued"},{id:7,name:"Additional Doc Needed"},{id:8,name:"Refund Required"},{id:9,name:"Application Rejected"},{id:10,name:"Session Expired"},{id:11,name:"Doc Received"},{id:12,name:"Partial Payment"}]),R=l([]),w=l([]),x=l([]),p=re(),S=ne(),P=l(H()==="admin"),f=I,m=O,v=l(f.selectedStatus),y=l(f.selectedChannelPartner),_=l(f.selectedUniversity),g=l(f.selectedApplicationOfficer),C=l(f.dateFrom),h=l(f.dateTo);V(v,i=>{m("update-status",i)}),V(y,i=>{m("update-channel-partner",i)}),V(_,i=>{m("update-university",i)}),V(g,i=>{m("update-application-officer",i)}),V(C,i=>{m("update-date-from",i)}),V(h,i=>{m("update-date-to",i)});const U=async()=>{try{const i=await S.getUniversities();R.value=i.data.map(d=>({id:d.id,name:d.name}));const r=await p.fetchUsers(1,"","channel partner","",!0);w.value=r.data.map(d=>({id:d.id,name:d.company_name_with_email}));const c=await p.fetchUsers(1,"","application control officer","",!0);x.value=c.data.map(d=>({id:d.id,name:d.name_with_email}))}catch(i){console.error("Error fetching filter options:",i)}};return M(()=>{U()}),(i,r)=>{const c=se,d=ie;return D(),Y(ue,null,[o(b,{cols:"12",md:"3"},{default:s(()=>[o(c,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t),items:T.value,"item-title":t=>t.name,"item-value":t=>t.id,label:"Status",placeholder:"Select Status",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),P.value?(D(),N(b,{key:0,cols:"12",md:"3"},{default:s(()=>[o(c,{modelValue:y.value,"onUpdate:modelValue":r[1]||(r[1]=t=>y.value=t),items:w.value,"item-title":t=>t.name,"item-value":t=>t.id,label:"Channel Partner",placeholder:"Select Channel Partner",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):F("",!0),o(b,{cols:"12",md:"3"},{default:s(()=>[o(c,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=t=>_.value=t),items:R.value,"item-title":t=>t.name,"item-value":t=>t.id,label:"University",placeholder:"Select University",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),P.value?(D(),N(b,{key:1,cols:"12",md:"3"},{default:s(()=>[o(c,{modelValue:g.value,"onUpdate:modelValue":r[3]||(r[3]=t=>g.value=t),items:x.value,"item-title":t=>t.name,"item-value":t=>t.id,label:"Application Officer",placeholder:"Select Application Officer",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):F("",!0),o(b,{cols:"12",md:"3"},{default:s(()=>[o(d,{modelValue:C.value,"onUpdate:modelValue":r[4]||(r[4]=t=>C.value=t),label:"From Date",placeholder:"Select From Date"},null,8,["modelValue"])]),_:1}),o(b,{cols:"12",md:"3"},{default:s(()=>[o(d,{modelValue:h.value,"onUpdate:modelValue":r[5]||(r[5]=t=>h.value=t),label:"To Date",placeholder:"Select To Date"},null,8,["modelValue"])]),_:1})],64)}}},Ae={class:"application-list-container"},Se={class:"me-3 d-flex gap-3"},Ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},xe={style:{"inline-size":"15.625rem"}},Ce={class:"d-flex flex-column"},Ue={class:"d-block font-weight-medium text-truncate text-high-emphasis"},be={class:"text-md"},we={class:"d-flex flex-column ms-3"},Pe={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ke={class:"text-md"},De={class:"text-md"},Oe={class:"d-flex flex-column ms-3"},Re={__name:"index",props:{userId:{type:String,default:null}},setup(I){const O=j(),T=me(),R=l(H()==="admin"),w=l([]),x=l(0),p=l(10),S=l(1),P=l(),f=l(),m=l(""),v=l(null),y=l(null),_=l(null),g=l(null),C=l(""),h=l(null),U=l(null),i=l(!1);j();const r=I,c=async()=>{i.value=!0;try{const n=await O.getApplicationList(r.userId,S.value,p.value,m.value,P.value,f.value,v.value,y.value,_.value,g.value,C.value,h.value,U.value);w.value=n.data,x.value=n.total}catch(n){console.error("Error fetching applications:",n)}finally{i.value=!1}},d=n=>{var a,k;P.value=(a=n.sortBy[0])==null?void 0:a.key,f.value=(k=n.sortBy[0])==null?void 0:k.order,c()},t=n=>{T.push({name:"application-details",params:{id:n}})},G=async n=>{if((await B.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await O.deleteItem(n),c(),B.fire("Deleted!","The item has been deleted.","success")}catch{B.fire("Error!","There was an error deleting the item.","error")}};V([m,v,y,_,g,C,h,U],()=>{c()}),M(()=>{c()});const J=l([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...R.value?[{title:"Application Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),$=n=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[n]||"secondary",K=n=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[n]||"Unknown Status",Q=ce(()=>"calc(100vh - 200px)");return(n,a)=>{const k=oe,W=le,q=pe("IconBtn"),X=ae,Z=te;return D(),Y("div",Ae,[o(Z,{title:"Application List",loading:i.value,"no-actions":""},{default:s(()=>[o(z,null,{default:s(()=>[o(de,null,{default:s(()=>[o(he,{"selected-status":v.value,onUpdateStatus:a[0]||(a[0]=e=>v.value=e),"selected-channel-partner":_.value,onUpdateChannelPartner:a[1]||(a[1]=e=>_.value=e),"selected-university":y.value,onUpdateUniversity:a[2]||(a[2]=e=>y.value=e),"selected-application-officer":g.value,onUpdateApplicationOfficer:a[3]||(a[3]=e=>g.value=e),"selected-date-from":h.value,onUpdateDateFrom:a[4]||(a[4]=e=>h.value=e),"selected-date-to":U.value,onUpdateDateTo:a[5]||(a[5]=e=>U.value=e)},{default:s(()=>[E(' :isAdmin = "isAdmin" ')]),_:1},8,["selected-status","selected-channel-partner","selected-university","selected-application-officer","selected-date-from","selected-date-to"])]),_:1})]),_:1}),o(z,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[u("div",Se,[o(k,{"model-value":p.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[6]||(a[6]=e=>p.value=parseInt(e,10))},null,8,["model-value"])]),o(ye),u("div",Ve,[u("div",xe,[o(W,{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=e=>m.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(_e,{"items-per-page":p.value,"onUpdate:itemsPerPage":a[9]||(a[9]=e=>p.value=e),page:S.value,"onUpdate:page":a[10]||(a[10]=e=>S.value=e),items:w.value,"items-length":x.value,headers:J.value,class:"text-no-wrap color-black application-table",height:Q.value,"onUpdate:options":d},{"item.student.name":s(({item:e})=>[u("p",null,A(e.student.first_name)+" "+A(e.student.last_name),1)]),"item.user.email":s(({item:e})=>[u("div",Ce,[u("span",Ue,A(e.user.company_name),1),u("span",be,A(e.user.email),1)])]),"item.university.name":s(({item:e})=>[u("div",we,[u("span",Pe,A(e.university.name),1),u("span",ke,A(e.course.name),1),u("span",De,A(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(ge,{color:$(e.status),class:fe([`text-${$(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[E(A(K(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[u("div",Oe,[o(q,{onClick:ee=>t(e.id)},{default:s(()=>[o(L,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),n.$can("delete","application")?(D(),N(q,{key:0,onClick:ee=>G(e.id)},{default:s(()=>[o(L,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):F("",!0)])]),bottom:s(()=>[o(X,{page:S.value,"onUpdate:page":a[8]||(a[8]=e=>S.value=e),"items-per-page":p.value,"total-items":x.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers","height"])]),_:1},8,["loading"])])}}},kt=ve(Re,[["__scopeId","data-v-041227c1"]]);export{kt as default};
