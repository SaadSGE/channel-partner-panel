import{_ as z}from"./AppCardActions-CiJYq8AN.js";import{_ as E}from"./TablePagination-BNzLhJcv.js";import{_ as L}from"./AppTextField-DbXpW9At.js";import{_ as R}from"./AppSelect-DplWb5_K.js";import{u as O}from"./applicationList-kMVSuDa3.js";import{S as f}from"./sweetalert2-z6gKu1nJ.js";import{k as Q,r as n,w as j,H as q,a as F,o as C,c as H,b as o,e as s,d as i,x as l,y as M,v as Y,a1 as A,f as G,z as J}from"./main-yD4EnXh9.js";import{V as K}from"./VCardText-DY3vSI4b.js";import{V as W}from"./VSpacer-D7udw4uy.js";import{V as X}from"./VDataTableServer-uWrvsn5l.js";import{V as Z}from"./VChip-D8mPDUPJ.js";import"./index-llkxpvrz.js";import"./VCard-D7HLNV7N.js";import"./VAvatar-BCBM3k-m.js";import"./VImg-BxR192JW.js";import"./index-CXSVH7Z7.js";import"./VOverlay-DKEGztqd.js";import"./easing-CjukEv2V.js";import"./lazy-C5m2HqU9.js";import"./scopeId-jtYTnjEt.js";import"./VDivider-DHcaf5yw.js";import"./VPagination-BRyoBZQ5.js";import"./form-Bj1B52v7.js";import"./VTextField-ABOdmTWx.js";/* empty css                   */import"./VCounter-CSCie7kc.js";import"./VField-uVOTwOLf.js";import"./VInput-DzQAjB29.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-dJ4QpSgj.js";import"./VList-LUmeNNyT.js";import"./ssrBoot-CpF6BP7J.js";import"./dialog-transition-DJm7G2Ms.js";import"./VMenu-E51Pw0He.js";import"./VCheckboxBtn-BVCkkTPI.js";import"./VSelectionControl-pElt910L.js";import"./api-D2KftyQH.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-BwoEPWMg.js";import"./VTable-PcxSJ4yn.js";import"./filter-Dlpxom_J.js";import"./VSlideGroup-DoaRo811.js";const ee={class:"me-3 d-flex gap-3"},te={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ae={style:{"inline-size":"15.625rem"}},oe={class:"d-flex flex-column ms-3"},se={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ie={class:"text-md"},ne={class:"text-md"},re={class:"d-flex flex-column ms-3"},We={__name:"index",props:{userId:{type:String,default:null}},setup(k){const v=O(),S=Q(),g=n([]),u=n(0),r=n(10),p=n(1),_=n(),y=n(),h=n(""),d=n(!1),B=k,m=async()=>{d.value=!0;try{const t=await v.getApplicationList({id:B.userId,page:p.value,itemsPerPage:r.value,sortBy:_.value,orderBy:y.value,search:h.value});g.value=t.data,u.value=t.total}catch(t){console.error("Error fetching applications:",t)}finally{d.value=!1}},V=t=>{var a,c;_.value=(a=t.sortBy[0])==null?void 0:a.key,y.value=(c=t.sortBy[0])==null?void 0:c.order,m()},I=t=>{S.push({name:"application-details",params:{id:t}})},P=async t=>{if((await f.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await v.deleteItem(t),m(),f.fire("Deleted!","The item has been deleted.","success")}catch{f.fire("Error!","There was an error deleting the item.","error")}};j([h],()=>{m()}),q(()=>{m()});const N=[{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}],x=t=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[t]||"secondary",b=t=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[t]||"Unknown Status";return(t,a)=>{const c=R,D=L,w=F("IconBtn"),T=E,U=z;return C(),H("div",null,[o(U,{title:"New Application",loading:d.value,"no-actions":""},{default:s(()=>[o(K,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",ee,[o(c,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),o(W),i("div",te,[i("div",ae,[o(D,{modelValue:t.searchQuery,"onUpdate:modelValue":a[1]||(a[1]=e=>t.searchQuery=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(X,{"items-per-page":r.value,"onUpdate:itemsPerPage":a[3]||(a[3]=e=>r.value=e),page:p.value,"onUpdate:page":a[4]||(a[4]=e=>p.value=e),items:g.value,"items-length":u.value,headers:N,class:"text-no-wrap color-black","onUpdate:options":V},{"item.student.name":s(({item:e})=>[i("p",null,l(e.student.first_name)+" "+l(e.student.last_name),1)]),"item.university.name":s(({item:e})=>[i("div",oe,[i("span",se,l(e.university.name),1),i("span",ie,l(e.course.name),1),i("span",ne,l(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(Z,{color:x(e.status),class:M([`text-${x(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[Y(l(b(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",re,[o(w,{onClick:$=>I(e.id)},{default:s(()=>[o(A,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),t.$can("delete","application")?(C(),G(w,{key:0,onClick:$=>P(e.id)},{default:s(()=>[o(A,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):J("",!0)])]),bottom:s(()=>[o(T,{page:p.value,"onUpdate:page":a[2]||(a[2]=e=>p.value=e),"items-per-page":r.value,"total-items":u.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"])])}}};export{We as default};
