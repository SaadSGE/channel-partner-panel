import{_ as oe}from"./AppCardActions-qUYDl-2T.js";import{_ as ie}from"./TablePagination-CpPqDfoT.js";import{_ as se}from"./AppTextField-Yonv2Qyc.js";import{_ as ne}from"./AppSelect-DkCCd5dC.js";import{_ as re}from"./AppDateTimePicker-DMP8jrGj.js";import{_ as me}from"./AppAutocomplete-Cim5h0Hh.js";import{u as F}from"./applicationList-C_v3ztzR.js";import{c as ue}from"./commonFunction-TsXHF4gC.js";import{u as ce}from"./user-qeLCFVaZ.js";import{S as C}from"./sweetalert2-z6gKu1nJ.js";import{k as de,r as o,w as pe,H as fe,a as ve,o as A,c as _e,b as a,e as i,f as k,z as P,d as s,x as m,y as ge,v as ye,a1 as L}from"./main-BBo-6eNA.js";import{g as he}from"./helpers-rAux4AnS.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as z}from"./VCardText-aCwsG8X3.js";import{V as Ae,a as c}from"./VRow-D33LYY5O.js";import{V as Se}from"./VSpacer-Cj2usb4E.js";import{V as xe}from"./VDataTableServer-CCRUvRa6.js";import{V as we}from"./VChip-VwiGSiGP.js";import"./index-CJB8HE_2.js";import"./VCard-BM0eIbfP.js";import"./VAvatar-C84ayrIi.js";import"./VImg-ipnCKibN.js";import"./index-CG3QqLMm.js";import"./VOverlay-AGQ6bkb6.js";import"./easing-CjukEv2V.js";import"./lazy-CFZH-YH1.js";import"./scopeId-B0a_he-n.js";import"./VDivider-gidOR7ss.js";import"./VPagination-DCgc0in7.js";import"./form-0Cp4tTr7.js";import"./VTextField-9Z72L1eZ.js";/* empty css                   */import"./VCounter-VNFLOE5U.js";import"./VField-BkbLvPrm.js";import"./VInput-CtuONeF4.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-BZiaD9hd.js";import"./VList-D5hlhAQ9.js";import"./ssrBoot-CA2J1Ud_.js";import"./dialog-transition-eb3gNKGd.js";import"./VMenu-bG-AsNiu.js";import"./VCheckboxBtn-DodGyQ7d.js";import"./VSelectionControl-pjgzXlvr.js";import"./filter-8M1qjwQR.js";import"./api-D2c06gKM.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-Cw0YaCWK.js";import"./VTable-CHgAGZy8.js";import"./VSlideGroup-C6S9ayX8.js";const Ce={class:"me-3 d-flex gap-3"},ke={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Pe={style:{"inline-size":"15.625rem"}},Ue={class:"d-flex flex-column"},be={class:"d-block font-weight-medium text-truncate text-high-emphasis"},De={class:"text-md"},Ie={class:"d-flex flex-column ms-3"},Be={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Ne={class:"text-md"},Te={class:"text-md"},Oe={class:"d-flex flex-column ms-3"},Re={__name:"index",props:{userId:{type:String,default:null}},setup(j){const U=F(),b=ce(),q=de(),S=o(he()==="admin"),D=o([]),x=o(0),u=o(10),d=o(1),I=o(),B=o(),p=o(""),f=o(null),v=o(null),_=o(null),g=o(null),N=o(""),y=o(null),h=o(null),w=o(!1),T=o([]),O=o([]),R=o([]);F();const H=ue(),M=o([{id:0,name:"Application Processing"},{id:1,name:"Application Submitted"},{id:2,name:"Pending Docs"},{id:3,name:"Offer Issue Conditional"},{id:4,name:"Offer Issue Unconditional"},{id:5,name:"Need Payment"},{id:6,name:"CAS Issued"},{id:7,name:"Additional Doc Needed"},{id:8,name:"Refund Required"},{id:9,name:"Application Rejected"},{id:10,name:"Session Expired"},{id:11,name:"Doc Received"},{id:12,name:"Partial Payment"}]),Y=j,V=async()=>{w.value=!0;try{const l=await U.getApplicationList(Y.userId,d.value,u.value,p.value,I.value,B.value,f.value,v.value,_.value,g.value,N.value,y.value,h.value);D.value=l.data,x.value=l.total}catch(l){console.error("Error fetching applications:",l)}finally{w.value=!1}},G=l=>{var t,r;I.value=(t=l.sortBy[0])==null?void 0:t.key,B.value=(r=l.sortBy[0])==null?void 0:r.order,V()},J=l=>{q.push({name:"application-details",params:{id:l}})},K=async l=>{if((await C.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await U.deleteItem(l),V(),C.fire("Deleted!","The item has been deleted.","success")}catch{C.fire("Error!","There was an error deleting the item.","error")}},Q=async()=>{try{const l=await H.getUniversities();T.value=l.data.map(n=>({id:n.id,name:n.name}));const t=await b.fetchUsers(1,"","channel partner","",!0);O.value=t.data.map(n=>({id:n.id,name:n.company_name_with_email}));const r=await b.fetchUsers(1,"","application control officer","",!0);R.value=r.data.map(n=>({id:n.id,name:n.name_with_email}))}catch(l){console.error("Error fetching filter options:",l)}};pe([p,f,v,_,g,N,y,h],()=>{V()}),fe(()=>{Q(),V()});const W=o([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...S.value?[{title:"Application Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),$=l=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[l]||"secondary",X=l=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[l]||"Unknown Status";return(l,t)=>{const r=me,n=re,Z=ne,ee=se,E=ve("IconBtn"),te=ie,ae=oe;return A(),_e("div",null,[a(ae,{title:"New Application",loading:w.value,"no-actions":""},{default:i(()=>[a(z,null,{default:i(()=>[a(Ae,null,{default:i(()=>[a(c,{cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),items:M.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Status",placeholder:"Select Status",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),S.value?(A(),k(c,{key:0,cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),items:O.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Channel Partner",placeholder:"Select Channel Partner",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):P("",!0),a(c,{cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),items:T.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),S.value?(A(),k(c,{key:1,cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),items:R.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Application Officer",placeholder:"Select Application Officer",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):P("",!0),a(c,{cols:"12",md:"3"},{default:i(()=>[a(n,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),label:"From Date",placeholder:"Select From Date"},null,8,["modelValue"])]),_:1}),a(c,{cols:"12",md:"3"},{default:i(()=>[a(n,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=e=>h.value=e),label:"To Date",placeholder:"Select To Date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(z,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[s("div",Ce,[a(Z,{"model-value":u.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[6]||(t[6]=e=>u.value=parseInt(e,10))},null,8,["model-value"])]),a(Se),s("div",ke,[s("div",Pe,[a(ee,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=e=>p.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),a(xe,{"items-per-page":u.value,"onUpdate:itemsPerPage":t[9]||(t[9]=e=>u.value=e),page:d.value,"onUpdate:page":t[10]||(t[10]=e=>d.value=e),items:D.value,"items-length":x.value,headers:W.value,class:"text-no-wrap color-black","onUpdate:options":G},{"item.student.name":i(({item:e})=>[s("p",null,m(e.student.first_name)+" "+m(e.student.last_name),1)]),"item.user.email":i(({item:e})=>[s("div",Ue,[s("span",be,m(e.user.company_name),1),s("span",De,m(e.user.email),1)])]),"item.university.name":i(({item:e})=>[s("div",Ie,[s("span",Be,m(e.university.name),1),s("span",Ne,m(e.course.name),1),s("span",Te,m(e.intake.name),1)])]),"item.status":i(({item:e})=>[a(we,{color:$(e.status),class:ge([`text-${$(e.status)}`,"font-weight-medium"]),size:"small"},{default:i(()=>[ye(m(X(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":i(({item:e})=>[s("div",Oe,[a(E,{onClick:le=>J(e.id)},{default:i(()=>[a(L,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),l.$can("delete","application")?(A(),k(E,{key:0,onClick:le=>K(e.id)},{default:i(()=>[a(L,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):P("",!0)])]),bottom:i(()=>[a(te,{page:d.value,"onUpdate:page":t[8]||(t[8]=e=>d.value=e),"items-per-page":u.value,"total-items":x.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers"])]),_:1},8,["loading"])])}}},Nt=Ve(Re,[["__scopeId","data-v-9ec70485"]]);export{Nt as default};
