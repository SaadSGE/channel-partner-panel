import{r as n}from"./validators-BFiGRe3y.js";import{k as qe,r as i,a5 as ke,w as we,H as Ue,a as le,o as Q,c as Fe,f as J,e as o,d as S,b as l,J as Se,a1 as j,z as G,K as Re,L as _e,n as r,v as F,a7 as te,a6 as ae}from"./main-JeqQMmwL.js";import{_ as Te}from"./AppCardActions-PeSRyoMU.js";import{_ as he}from"./TablePagination-Cdr84kWy.js";import{_ as Ie}from"./AppSelect-B5lFDM0q.js";import{_ as Ae}from"./AppTextField-DkyOzF4K.js";import{_ as Ee}from"./AppAutocomplete-DtgsWaYJ.js";import{_ as oe}from"./ShowMore-CAu1bglh.js";import{c as Be}from"./commonFunction-DATGb0E7.js";import{u as De}from"./recordStore-CdVpcI_9.js";/* empty css                         */import{S as K}from"./sweetalert2-z6gKu1nJ.js";import{V as W,a as u}from"./VRow-XonbfKIj.js";import{V as O}from"./form-CoN8BGU1.js";import{V as ie}from"./VForm-C_9WjByA.js";import{V as ue,b as Ne}from"./VCard-Bua5yW2h.js";import{V as Me}from"./VCardText-DwoObMNb.js";import{V as $e}from"./VDataTableServer-CJnQL4vp.js";import"./helpers-BJL85UA9.js";import"./index-C7Z3FfHW.js";import"./VOverlay-4C44LsMX.js";import"./easing-CjukEv2V.js";import"./lazy-DCvnru5p.js";import"./scopeId-D4-41dY0.js";import"./index-AORGi_uA.js";import"./VDivider-DFOEKbUK.js";import"./VPagination-x_yqUUV6.js";import"./VSelect-Bv_d0Orn.js";import"./VTextField-s0w8yvdP.js";/* empty css                   */import"./VCounter-C1ZtmHnM.js";import"./VField-Bv_JpsSw.js";import"./VInput-X8Rk_bMl.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BVi-OV8s.js";import"./ssrBoot-ClFHSiZX.js";import"./VAvatar-Tgh28dnY.js";import"./VImg-ObyGeY8j.js";import"./dialog-transition-C-2LiOZp.js";import"./VMenu-BI2dpZZA.js";import"./VCheckboxBtn-CXyd3DFt.js";import"./VSelectionControl-CEY3BFEN.js";import"./VChip-_ECrNTq0.js";import"./VSlideGroup-DZZzcosZ.js";import"./filter-RS9YeugG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./api-KOetWxHk.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-rWDDkoNw.js";import"./VTable-DV_Rb5f-.js";const Pe={key:0},ze=S("span",null,"Edit Record",-1),Le={class:"d-flex justify-space-between flex-wrap gap-6 mt-5"},Qe={class:"d-flex flex-row gap-4 align-center flex-wrap"},je={class:"d-flex gap-1"},Ql={__name:"index",setup(Ge){qe();const s=Be(),k=De(),m=i("");i("");const v=i(""),V=i(""),p=i(""),c=i(""),y=i(""),g=i(""),X=i(null);i();const h=i(),I=i(),A=i(),re=i(),b=i(""),C=i(""),Z=i(),Y=i(),R=i(10),E=i(1);i(),i();const B=i(!0),D=i(!1),_=i(!0),T=i(null),x=i(null),ne=i(!0);i(!1);const ee=["Graduate","Post Graduate","Foundation (Pathway)","International Year One (Pathway)"],se=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}],N=i(null),M=i(null),$=i(null),P=i("");ke(()=>s.getFilteredCourseDetails(m.value,c.value,v.value,p.value));const w=async(a=1)=>{U.value=!0;const t=await k.fetchRecord(a,z.value,N.value,M.value,$.value,P.value);Z.value=t.data,Y.value=t.total,U.value=!1},H=async()=>{m.value="",v.value="",V.value="",p.value="",c.value="",y.value="",g.value="",b.value=`
`,C.value=`
`,await T.value.resetValidation()},de=async()=>{if(await T.value.validate()){try{const t={countryId:m.value,intakeId:v.value,courseType:V.value,universityId:p.value,course:c.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:b.value,englishRequirement:C.value};await k.submitApplication(t)&&(console.log(k.successMessage),await H(),w(),_.value=!0)}catch(t){console.error("Form submission error:",k.errors,t)}await T.value.resetValidation()}},me=async()=>{if(await x.value.validate()){try{const t={countryId:m.value,intakeId:v.value,courseType:V.value,universityId:p.value,course:c.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:b.value,englishRequirement:C.value},f=await k.submitEditApplication(X.value,t);f&&(console.log(f),H(),D.value=!1,B.value=!0,w())}catch(t){console.error("Form submission error:",k.errors,t)}await T.value.resetValidation()}},ve=a=>{B.value=!1,X.value=a.id,m.value=a.country_id,v.value=a.intake_id,V.value=a.course.type,p.value=a.university_id,c.value=a.course.name,y.value=a.tuition_fee,g.value=a.course_duration,b.value=a.academic_requirement,C.value=a.english_requirement,D.value=!0},pe=()=>{D.value=!1,B.value=!0,H()},ce=()=>{_.value=!_.value},fe=async a=>{const t={...a};if((await K.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await k.deleteRecord(t.id),w(),K.fire("Deleted!","The item has been deleted.","success")}catch{K.fire("Error!","There was an error deleting the item.","error")}},U=i(!1),z=i(""),Ve=a=>{w(a.page)};return we([z,N,M,$,P],()=>{w()}),Ue(async()=>{U.value=!0,s.countries.length===0&&await s.getCountries(),s.courses.length===0&&await s.getCourses(),s.intakes.length===0&&await s.getIntakes(),s.universities.length===0&&await s.getUniversities(),h.value=s.countries,re.value=s.courses,I.value=s.intakes,A.value=s.universities,await w(),U.value=!1}),(a,t)=>{const f=le("IconBtn"),d=Ee,q=Ae,L=le("QuillEditor"),ye=Ie,ge=he,be=Te;return ne.value?(Q(),Fe("div",Pe,[B.value?(Q(),J(ue,{key:0,title:"Add Record"},{append:o(()=>[S("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(Q(),J(f,{key:0,onClick:ce},{default:o(()=>[l(j,{size:"20",icon:"tabler-chevron-up",style:Se({transform:_.value?"rotate(-180deg)":void 0})},null,8,["style"])]),_:1})):G("",!0)])]),default:o(()=>[Re(l(r(ie),{ref_key:"refForm",ref:T,onSubmit:ae(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[l(W,null,{default:o(()=>[l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),items:I.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),items:ee,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),items:A.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(O,{class:"mb-2"},{default:o(()=>[F("Academic Requirement")]),_:1}),l(L,{theme:"snow",content:b.value,"onUpdate:content":t[7]||(t[7]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(O,{class:"mb-2"},{default:o(()=>[F("English Requirement")]),_:1}),l(L,{theme:"snow",content:C.value,"onUpdate:content":t[8]||(t[8]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(u,{cols:"12"},{default:o(()=>[l(te,{onClick:t[9]||(t[9]=e=>de()),type:"submit",color:"primary",block:""},{default:o(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[_e,!_.value]])]),_:1})):G("",!0),D.value?(Q(),J(ue,{key:1,class:"mt-2"},{default:o(()=>[l(Ne,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[ze,l(f,{onClick:pe},{default:o(()=>[l(j,{icon:"tabler-x"})]),_:1})]),_:1}),l(r(ie),{ref_key:"refFormEdit",ref:x,onSubmit:ae(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[l(W,null,{default:o(()=>[l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=e=>m.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:v.value,"onUpdate:modelValue":t[11]||(t[11]=e=>v.value=e),items:I.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:V.value,"onUpdate:modelValue":t[12]||(t[12]=e=>V.value=e),items:ee,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(d,{modelValue:p.value,"onUpdate:modelValue":t[13]||(t[13]=e=>p.value=e),items:A.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:c.value,"onUpdate:modelValue":t[14]||(t[14]=e=>c.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:y.value,"onUpdate:modelValue":t[15]||(t[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:o(()=>[l(q,{modelValue:g.value,"onUpdate:modelValue":t[16]||(t[16]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:r(n)]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(O,{class:"mb-2"},{default:o(()=>[F("Academic Requirement")]),_:1}),l(L,{theme:"snow",content:b.value,"onUpdate:content":t[17]||(t[17]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(u,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(O,{class:"mb-2"},{default:o(()=>[F("English Requirement")]),_:1}),l(L,{theme:"snow",content:C.value,"onUpdate:content":t[18]||(t[18]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(u,{cols:"12"},{default:o(()=>[l(te,{onClick:t[19]||(t[19]=e=>me()),type:"submit",color:"primary",block:""},{default:o(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):G("",!0),l(be,{title:"Course Details",class:"mt-2",loading:U.value,"no-actions":""},{default:o(()=>[l(Me,null,{default:o(()=>[l(W,null,{default:o(()=>[l(u,{cols:"12",sm:"6",md:"3"},{default:o(()=>[l(d,{modelValue:N.value,"onUpdate:modelValue":t[20]||(t[20]=e=>N.value=e),items:h.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Filter by Country",placeholder:"Select Country",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(u,{cols:"12",sm:"6",md:"3"},{default:o(()=>[l(d,{modelValue:M.value,"onUpdate:modelValue":t[21]||(t[21]=e=>M.value=e),items:I.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Filter by Intake",placeholder:"Select Intake",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(u,{cols:"12",sm:"6",md:"3"},{default:o(()=>[l(d,{modelValue:$.value,"onUpdate:modelValue":t[22]||(t[22]=e=>$.value=e),items:A.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Filter by University",placeholder:"Select University",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(u,{cols:"12",sm:"6",md:"3"},{default:o(()=>[l(q,{modelValue:P.value,"onUpdate:modelValue":t[23]||(t[23]=e=>P.value=e),label:"Filter by Course Name",placeholder:"Enter Course Name",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),S("div",Le,[S("div",null,[l(q,{modelValue:z.value,"onUpdate:modelValue":t[24]||(t[24]=e=>z.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Record"},null,8,["modelValue"])]),S("div",Qe,[l(ye,{modelValue:R.value,"onUpdate:modelValue":t[25]||(t[25]=e=>R.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),l($e,{"items-per-page":R.value,"onUpdate:itemsPerPage":t[27]||(t[27]=e=>R.value=e),page:E.value,"onUpdate:page":t[28]||(t[28]=e=>E.value=e),loading:U.value,"items-length":Y.value,headers:se,items:Z.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":Ve},{"item.academic_requirement":o(({item:e})=>[l(oe,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":o(({item:e})=>[l(oe,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:o(()=>[l(ge,{page:E.value,"onUpdate:page":t[26]||(t[26]=e=>E.value=e),"items-per-page":R.value,"total-items":Y.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[S("div",je,[l(f,{onClick:Ce=>ve(e)},{default:o(()=>[l(j,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),l(f,{onClick:Ce=>fe(e)},{default:o(()=>[l(j,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items"])]),_:1},8,["loading"])])):G("",!0)}}};export{Ql as default};
