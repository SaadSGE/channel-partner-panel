import{u as j}from"./fileStore-B3QVvxwx.js";import{u as I}from"./submitApplication-CaHIKMEa.js";import{v as L,p as T,a as $,b as E}from"./filepond-plugin-image-preview.esm-DHnU2QnB.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{M as R,j as K,r as d,o as i,f as n,e as l,b as a,v as _,c as h,a7 as y,z as p,n as M,d as b,a1 as r,i as O,x as U,F as Z}from"./main-NF9u_1yR.js";import{b as q,V as w}from"./VCard-Cg3Tu40d.js";import{V as x}from"./VCardText-YnmWgeIC.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./api-CA6tqyl9.js";import"./index-B3bPRkoL.js";import"./helpers-CK0esMst.js";import"./VAvatar-DSBVedtG.js";import"./VImg-DHhU3XG1.js";import"./index-C2nxri_q.js";const H={key:0,class:"d-flex justify-end mt-2"},J={class:"d-flex justify-end mt-2 mb-2"},Q=["href"],W=R({__name:"details-document",props:{existingDocuments:{type:Array,default:()=>[]},zipLink:{type:String,default:""}},emits:["update:uploadDocumentShow","update:studentFormShow"],setup(g,{emit:X}){const C=K(),F=I(),s=j(),S=L(E,$,T),D=()=>{if(u.zipLink){const e=document.createElement("a");e.href=u.zipLink,e.target="_blank",e.download="documents.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)}else v.fire({icon:"error",title:"Download Failed",text:"No ZIP file available for download."})},V=e=>{const t=document.createElement("a");t.href=e,t.target="_blank",t.download="test",document.body.appendChild(t),t.click(),document.body.removeChild(t)},u=g;d(null);const z=d(u.existingDocuments),B=d([]);s.filePaths;const N=C.params.id,c=d(0),A=()=>{F.updateApplicationsFile(N,s.filePaths),v.fire({icon:"success",title:"Success",text:"New Document Added Successfully",confirmButtonText:"OK"}),c.value=0};s.resetFiles();const P={process:(e,t,o,m,k,Y,ee)=>{c.value+=1,s.uploadFile(e,t).then(f=>m(f)).catch(f=>k(f))},revert:(e,t,o)=>{c.value-=1,s.removeFile(e),t()}};return(e,t)=>(i(),n(w,{class:"mx-auto"},{default:l(()=>[a(q,null,{default:l(()=>[_("Please upload only color scan copy files")]),_:1}),c.value>0?(i(),h("div",H,[a(y,{color:"primary",onClick:t[0]||(t[0]=o=>A())},{default:l(()=>[_("Update New Document")]),_:1})])):p("",!0),a(x,null,{default:l(()=>[a(M(S),{ref:"pond",name:"student_document","allow-multiple":!0,allowRemove:"true",files:B.value,server:P,"label-idle":"Drop files here or <span class='filepond--label-action'>Browse</span>"},null,8,["files"]),b("div",J,[a(y,{color:"primary",onClick:D},{default:l(()=>[a(r,{size:"24",icon:"tabler-download"}),_(" Download All ")]),_:1})]),(i(!0),h(Z,null,O(z.value,(o,m)=>(i(),n(w,{key:m,class:"mb-2"},{default:l(()=>[a(x,{class:"d-flex justify-space-between align-center"},{default:l(()=>[b("div",null,[o.file_type=="pdf"?(i(),n(r,{key:0,size:"28",icon:"tabler-file-type-pdf"})):p("",!0),o.file_type=="image"?(i(),n(r,{key:1,size:"28",icon:"tabler-file-type-png"})):p("",!0),o.file_type=="document"?(i(),n(r,{key:2,size:"26",color:"red",icon:"tabler-file-type-doc"})):p("",!0),b("a",{href:o.path,target:"_blank"},U(o.file_name),9,Q)]),a(y,{icon:"",onClick:k=>V(o.path)},{default:l(()=>[a(r,{size:"24",icon:"tabler-eye"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}}),_e=G(W,[["__scopeId","data-v-689c1c51"]]);export{_e as default};
