import{r as i}from"./validators-DyxZXSIx.js";import{r as m,H as D,o as p,c as y,b as l,e as o,a8 as U,n,F as N,z as q,a9 as c,v as V,f as g,i as M,d as _,a2 as k,x as R}from"./main-Dpl_PrSZ.js";import{_ as z}from"./AppTextField-e5MN7EVX.js";import{u as L}from"./user-Bt-hnORm.js";import{e as x}from"./helpers-uVDOyrD2.js";import{S as f}from"./sweetalert2-z6gKu1nJ.js";import{V as w}from"./VCardText-CuVfc2Sr.js";import{V as F}from"./VForm-DFH01PP8.js";import{V as S,a as d}from"./VRow-D6QQdjp8.js";import{V as b,b as I}from"./VCard-lxmcs27k.js";import"./VInput-CX9WUMEv.js";import"./index-Blzd8bku.js";import"./index-CMsyvqWI.js";import"./forwardRefs-D3j0TLhE.js";import"./VTextField-x3W-5fdo.js";import"./VAvatar-C7sb39K_.js";import"./VImg-rmOc29B_.js";/* empty css              */const W=["href"],me={__name:"index",setup(Y){const v=L(),C=m(!1),P=m(),t=m({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:""}),u=m({currentPassword:"",newPassword:"",confirmPassword:""}),B=m(""),h=m([]),E=e=>e.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),T=e=>{const a=document.createElement("a");a.href=e,a.target="_blank",a.download="test",document.body.appendChild(a),a.click(),document.body.removeChild(a)};D(async()=>{const e=await v.getUserProfile();e&&(t.value={...t.value,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role},B.value=e.role,h.value=e.documents||[])});const K=async()=>{var e;(e=P.value)==null||e.validate().then(async({valid:a})=>{var s;if(a)try{await v.updateUserProfile(t.value),f.fire({icon:"success",title:"Profile Updated Successfully",text:"Your profile details have been updated!",confirmButtonText:"OK"})}catch(r){console.error("Error updating profile:",r),f.fire({icon:"error",title:"Update Failed",text:((s=r.response)==null?void 0:s.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},O=async()=>{if(u.value.newPassword!==u.value.confirmPassword){f.fire({icon:"error",title:"Password Mismatch",text:"New password and confirm password do not match.",confirmButtonText:"OK"});return}try{await v.changePassword({current_password:u.value.currentPassword,new_password:u.value.newPassword}),f.fire({icon:"success",title:"Password Changed Successfully",text:"Your password has been updated!",confirmButtonText:"OK"})}catch(e){f.fire({icon:"error",title:"Change Password Failed",text:e,confirmButtonText:"OK"})}};return(e,a)=>{const s=z;return p(),y(N,null,[l(b,{title:"General Information"},{default:o(()=>[l(w,null,{default:o(()=>[l(F,{ref_key:"refForm",ref:P,modelValue:C.value,"onUpdate:modelValue":a[9]||(a[9]=r=>C.value=r),onSubmit:U(K,["prevent"])},{default:o(()=>[l(S,null,{default:o(()=>[l(d,{cols:"12",md:"6"},{default:o(()=>[l(s,{modelValue:t.value.firstName,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value.firstName=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"6"},{default:o(()=>[l(s,{modelValue:t.value.lastName,"onUpdate:modelValue":a[1]||(a[1]=r=>t.value.lastName=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.mobileNumber,"onUpdate:modelValue":a[2]||(a[2]=r=>t.value.mobileNumber=r),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.whatsappNumber,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.whatsappNumber=r),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),t.value.role==="channel partner"?(p(),y(N,{key:0},[l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.companyName,"onUpdate:modelValue":a[4]||(a[4]=r=>t.value.companyName=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.website,"onUpdate:modelValue":a[5]||(a[5]=r=>t.value.website=r),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.address,"onUpdate:modelValue":a[6]||(a[6]=r=>t.value.address=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.city,"onUpdate:modelValue":a[7]||(a[7]=r=>t.value.city=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"4"},{default:o(()=>[l(s,{modelValue:t.value.postCode,"onUpdate:modelValue":a[8]||(a[8]=r=>t.value.postCode=r),rules:["requiredValidator"in e?e.requiredValidator:n(i)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1})],64)):q("",!0),l(d,{cols:"12"},{default:o(()=>[l(c,{type:"submit",class:"me-3"},{default:o(()=>[V(" Save Changes ")]),_:1}),l(c,{type:"reset",variant:"tonal",color:"error"},{default:o(()=>[V(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(b,{title:"Change Password",class:"mt-4"},{default:o(()=>[l(w,null,{default:o(()=>[l(F,{onSubmit:U(O,["prevent"])},{default:o(()=>[l(S,null,{default:o(()=>[l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.currentPassword,"onUpdate:modelValue":a[10]||(a[10]=r=>u.value.currentPassword=r),label:"Current Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:n(i)],placeholder:"Enter current password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.newPassword,"onUpdate:modelValue":a[11]||(a[11]=r=>u.value.newPassword=r),label:"New Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:n(i)],placeholder:"Enter new password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(s,{modelValue:u.value.confirmPassword,"onUpdate:modelValue":a[12]||(a[12]=r=>u.value.confirmPassword=r),label:"Confirm New Password",type:"password",rules:["requiredValidator"in e?e.requiredValidator:n(i)],placeholder:"Confirm new password"},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(c,{type:"submit",class:"me-3"},{default:o(()=>[V(" Change Password ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(x)(t.value.role,"channel partner")?(p(),g(b,{key:0,class:"mt-5"},{default:o(()=>[l(I,null,{default:o(()=>[V("Documents")]),_:1}),l(w,null,{default:o(()=>[(p(!0),y(N,null,M(h.value,(r,A)=>(p(),g(b,{key:A,class:"mb-2"},{default:o(()=>[l(w,{class:"d-flex justify-space-between align-center"},{default:o(()=>[_("div",null,[l(k,{size:"26",color:"red",icon:"tabler-file-type-doc"}),_("a",{href:r.document_path,target:"_blank"},R(E(r.document_type)),9,W)]),l(c,{icon:"",onClick:$=>T(r.document_path)},{default:o(()=>[l(k,{size:"24",icon:"tabler-eye"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):q("",!0)],64)}}};export{me as default};
