import{an as l}from"./main-DYSjY2V3.js";import{$ as o}from"./api-Bx79Vctl.js";const y=l({id:"application-list",state:()=>({errors:[],successMessage:"",applicationData:"",documents:[],students:[],statuses:[],allStatuses:[],comments:[],universityCommunications:[]}),actions:{async getApplicationList(e=null,r=1,t=10,s="",n="",i="",c="",p=null,d=null,u=null){try{return await o("/application",{method:"GET",headers:{"Content-Type":"application/json"},params:{id:e,page:r,perPage:t,searchQuery:s,role:n,sortBy:i,orderBy:c,status:p,university:d,channelPartner:u}})}catch(a){throw console.error("Error getting application list:",a),this.errors=a.response?a.response.data.errors:["An unexpected error occurred"],a}},async getApplicationDetails(e){try{const r=await o(`/application/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});return this.applicationData=r.data,this.documents=r.data.student.document.map(t=>t.path),this.students=r.data.student,this.comments=r.data.comments,this.universityCommunications=r.data.university_communications,r.data}catch(r){throw console.error("Error getting application details:",r),this.errors=r.response?r.response.data.errors:["An unexpected error occurred"],r}},async deleteItem(e){try{await o(`/application/${e}`,{method:"DELETE"}),await this.getApplicationList()}catch(r){console.error("Error deleting application:",r),this.errors=r.response?r.response.data.errors:["An unexpected error occurred"]}},async getApplicationStatusses(e){try{const r=await o(`/application-statuses/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});this.statuses=r.data}catch(r){throw console.error("Error getting application list:",r),this.errors=r.response?r.response.data.errors:["An unexpected error occurred"],r}},async getApplicationAllStatuses(){try{const e=await o("/application-all-statuses",{method:"GET",headers:{"Content-Type":"application/json"}});this.allStatuses=e.data}catch(e){throw console.error("Error getting application list:",e),this.errors=e.response?e.response.data.errors:["An unexpected error occurred"],e}},async updateStatus(e,r){try{return(await o(`/application/${e}/status`,{method:"POST",body:r})).data}catch(t){throw console.error("Error updating status:",t),this.errors=t.response?t.response.data.errors:["An unexpected error occurred"],t}},async addComment(e,r){try{return(await o(`/application/${e}/comment`,{method:"POST",body:JSON.stringify({comment:r})})).data}catch(t){throw console.error("Error adding comment:",t),this.errors=t.response?t.response.data.errors:["An unexpected error occurred"],t}},async getUniversityCommunications(e){try{const r=await o(`/application/${e}/university-communications`,{method:"GET",headers:{"Content-Type":"application/json"}});this.universityCommunications=r.data}catch(r){throw console.error("Error getting university communications:",r),this.errors=r.response?r.response.data.errors:["An unexpected error occurred"],r}},async addUniversityCommunication(e,{subject:r,message:t}){try{return(await o(`/application/${e}/university-communication`,{method:"POST",body:JSON.stringify({subject:r,message:t})})).data}catch(s){throw console.error("Error adding university communication:",s),this.errors=s.response?s.response.data.errors:["An unexpected error occurred"],s}}}});export{y as u};
