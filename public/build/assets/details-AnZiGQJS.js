import{r as lt}from"./validators-D_8q-QBt.js";import{j as at,r as s,H as ot,o as r,f as N,e,b as t,v as n,a6 as B,n as nt,a7 as p,d as l,x as d,z as k,c as _,i as E,F as z,R as ut,U as st}from"./main-bJ4agSI-.js";import{_ as dt}from"./AppTextarea-xE1wKJXA.js";import{_ as it}from"./AppAutocomplete-BSLvKG2w.js";import{u as rt}from"./applicationList-CTgq37lD.js";import mt from"./details-document-iCjXvlBr.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as $,V as I,d as P}from"./VCard-CCjmvWyT.js";import{V as q}from"./VDialog-Cpn-Iacf.js";import{V as D}from"./VCardText-C1GJVA-y.js";import{V as R}from"./VForm-vtmIWEij.js";import{V as A}from"./form-B5fhBPRU.js";import{V as pt}from"./VFileInput-N2294SFf.js";import{V as O}from"./VSpacer-Cbmqg2Tt.js";import{V as _t}from"./VTextField-CYrqHKJw.js";import{V as ft,a as U}from"./VTabs-Bdh07H_D.js";import{V as vt,a as x}from"./VWindowItem-BMgzphPk.js";import{V as L,a as v}from"./VRow-CtqID0gz.js";import{V as tt}from"./VTable-oCiSVK0K.js";import"./helpers-B885BWZi.js";/* empty css                   */import"./VCounter-fOZfcjGD.js";import"./index-9C_U-Biw.js";import"./index-CtOT8YI-.js";import"./VField-D2smdELq.js";import"./easing-CjukEv2V.js";import"./VInput-D_J1s8RR.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-DF1I_GsQ.js";import"./VList-zKnTejB5.js";import"./ssrBoot-Br8oFOoR.js";import"./VAvatar-BPxi-Qwx.js";import"./VImg-uAaF9xoV.js";import"./VDivider-DO81iEfj.js";import"./dialog-transition-DNTmiFVC.js";import"./VMenu-DbxfTaUz.js";import"./VOverlay-Ctm6T-bT.js";import"./lazy-DrLXrJlq.js";import"./scopeId-Dxqx7nCW.js";import"./VCheckboxBtn-BjTFjbz3.js";import"./VSelectionControl-CopW1Ji8.js";import"./VChip-6ZZhcqog.js";import"./VSlideGroup-Boal8kQ4.js";import"./filter-Be8QGxDb.js";import"./api-DaL6u9QC.js";import"./index-B3bPRkoL.js";import"./fileStore-DbfRIXQ0.js";import"./submitApplication-DDKETNFM.js";import"./filepond-plugin-image-preview.esm-DkjjDNpz.js";import"./sweetalert2-z6gKu1nJ.js";/* empty css              */const m=M=>(ut("data-v-d6e9a5b8"),M=M(),st(),M),Vt=m(()=>l("td",null,[l("strong",null,"Application Id")],-1)),Ct=m(()=>l("td",null,[l("strong",null,"Date Added")],-1)),yt=m(()=>l("td",null,[l("strong",null,"Student ID")],-1)),gt=m(()=>l("td",null,[l("strong",null,"Student Passport No.")],-1)),wt=m(()=>l("td",null,[l("strong",null,"Student Name")],-1)),bt=m(()=>l("td",null,[l("strong",null,"Student Date of Birth")],-1)),St=m(()=>l("td",null,[l("strong",null,"Student E-Mail")],-1)),ht=m(()=>l("td",null,[l("strong",null,"Student Phone No.")],-1)),kt=m(()=>l("td",null,[l("strong",null,"Communication E-Mail ID")],-1)),Dt=m(()=>l("td",null,[l("strong",null,"Communication Phone No.")],-1)),At=m(()=>l("thead",null,[l("tr",null,[l("th",null,"Date Added"),l("th",null,"Comment"),l("th",null,"Status and Document")])],-1)),Ut=["innerHTML"],xt={key:0,class:"current-status-label"},Mt={key:1},Tt=["href"],jt={class:"comment-section"},Nt={class:"comment-header"},$t={class:"comment-date"},It=["innerHTML"],Lt={class:"comment-section"},Ft={class:"comment-header"},Ht={class:"comment-date"},Bt={class:"communication-subject"},Et=m(()=>l("strong",null,"Subject:",-1)),zt={class:"comment-body"},Pt=["innerHTML"],qt={__name:"details",setup(M){const g=at().params.id,i=rt(),w=s("student-course-details"),b=s(!1),S=s(!1),h=s(!1),F=s(""),f=s(""),V=s({subject:"",message:""});s([{name:"Document1.pdf",progress:100},{name:"Document2.pdf",progress:100},{name:"Document3.pdf",progress:100},{name:"Document4.pdf",progress:100}]);const W=s([]),G=s([]),J=s([{created_at:"",comment:"",status_text:""}]),C=s({application_id:"",created_at:"",counsellor_email:"",counsellor_number:""}),T=s();s(!0);const c=s({id:null,student_id:null,first_name:null,last_name:null,passport_no:null,date_of_birth:null,whatsapp_number:null,email:null,address:null,city:null,country:null,region:null,state:null,gender:null,visa_refusal:null,created_at:null,updated_at:null,document:[{id:null,student_id:null,path:null,created_at:null,updated_at:null}]}),K=s([]),Q=s([]);ot(async()=>{await j()});const j=async()=>{await i.getApplicationDetails(g),await i.getApplicationStatusses(g),await i.getApplicationAllStatuses(),C.value=i.applicationData,K.value=i.documents,c.value=i.students,J.value=i.statuses,W.value=i.comments,G.value=i.universityCommunications,Q.value=i.allStatuses.filter(u=>u.id!==C.value.status)},X=async()=>{try{let u=new FormData;u.append("status",F.value),u.append("comment",f.value),T.value&&u.append("file",T.value[0]),await i.updateStatus(g,u),b.value=!1,await j()}catch(u){console.error("Error updating status:",u)}},Y=async()=>{try{await i.addComment(g,f.value),f.value="",S.value=!1,await j()}catch(u){console.error("Error adding comment:",u)}},Z=async()=>{try{await i.addUniversityCommunication(g,V.value),V.value={subject:"",message:""},h.value=!1,await j()}catch(u){console.error("Error adding university communication:",u)}};return(u,o)=>{const et=it,H=dt;return r(),N(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Application Details")]),_:1}),t(D,null,{default:e(()=>[t(q,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=a=>b.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Change Current Status")]),_:1}),t(D,null,{default:e(()=>[t(R,{onSubmit:B(X,["prevent"])},{default:e(()=>[t(et,{modelValue:F.value,"onUpdate:modelValue":o[0]||(o[0]=a=>F.value=a),items:Q.value,"item-title":a=>a.name,"item-value":a=>a.id,label:"Status",placeholder:"Select Status",rules:["requiredValidator"in u?u.requiredValidator:nt(lt)]},null,8,["modelValue","items","item-title","item-value","rules"]),t(A,{class:"mt-2"},{default:e(()=>[n("Add any necessary file (Optional)")]),_:1}),t(pt,{modelValue:T.value,"onUpdate:modelValue":o[1]||(o[1]=a=>T.value=a),color:"primary",label:"File input",variant:"outlined",class:"mt-2"},null,8,["modelValue"]),t(A,{class:"mt-2"},{default:e(()=>[n("Comment (Optional)")]),_:1}),t(H,{modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=a=>f.value=a),placeholder:"Place any comment regarding status"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(O),t(p,{color:"primary",onClick:X},{default:e(()=>[n("Submit")]),_:1}),t(p,{onClick:o[3]||(o[3]=a=>b.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(q,{modelValue:S.value,"onUpdate:modelValue":o[7]||(o[7]=a=>S.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Add a New Comment")]),_:1}),t(D,null,{default:e(()=>[t(R,{onSubmit:B(Y,["prevent"])},{default:e(()=>[t(A,{class:"mt-2"},{default:e(()=>[n("New Comment")]),_:1}),t(H,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=a=>f.value=a),placeholder:"Add a new comment",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(O),t(p,{color:"primary",onClick:Y},{default:e(()=>[n("Submit Comment")]),_:1}),t(p,{onClick:o[6]||(o[6]=a=>S.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(q,{modelValue:h.value,"onUpdate:modelValue":o[11]||(o[11]=a=>h.value=a),"max-width":"500px"},{default:e(()=>[t(I,null,{default:e(()=>[t($,null,{default:e(()=>[n("Add a New University Communication")]),_:1}),t(D,null,{default:e(()=>[t(R,{onSubmit:B(Z,["prevent"])},{default:e(()=>[t(A,{class:"mt-2"},{default:e(()=>[n("Subject")]),_:1}),t(_t,{modelValue:V.value.subject,"onUpdate:modelValue":o[8]||(o[8]=a=>V.value.subject=a),placeholder:"Subject",class:"mt-2"},null,8,["modelValue"]),t(A,{class:"mt-2"},{default:e(()=>[n("Message")]),_:1}),t(H,{modelValue:V.value.message,"onUpdate:modelValue":o[9]||(o[9]=a=>V.value.message=a),placeholder:"Message",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(O),t(p,{color:"primary",onClick:Z},{default:e(()=>[n("Submit Communication")]),_:1}),t(p,{onClick:o[10]||(o[10]=a=>h.value=!1)},{default:e(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ft,{modelValue:w.value,"onUpdate:modelValue":o[12]||(o[12]=a=>w.value=a)},{default:e(()=>[t(U,{value:"student-course-details"},{default:e(()=>[n("Student/Course Details")]),_:1}),t(U,{value:"upload-download"},{default:e(()=>[n("Upload/Download")]),_:1}),t(U,{value:"status"},{default:e(()=>[n("Status")]),_:1}),t(U,{value:"comments"},{default:e(()=>[n("Comments")]),_:1}),t(U,{value:"university-communication"},{default:e(()=>[n("University Communication")]),_:1})]),_:1},8,["modelValue"]),t(D,null,{default:e(()=>[t(vt,{modelValue:w.value,"onUpdate:modelValue":o[16]||(o[16]=a=>w.value=a)},{default:e(()=>[t(x,{value:"student-course-details"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(tt,null,{default:e(()=>[l("tbody",null,[l("tr",null,[Vt,l("td",null,d(C.value.application_id),1),Ct,l("td",null,d(C.value.created_at),1)]),l("tr",null,[yt,l("td",null,d(c.value.student_id??""),1),gt,l("td",null,d(c.value.passport_no),1)]),l("tr",null,[wt,l("td",null,d(c.value.first_name)+" "+d(c.value.last_name),1),bt,l("td",null,d(c.value.date_of_birth),1)]),l("tr",null,[St,l("td",null,d(c.value.email),1),ht,l("td",null,d(c.value.whatsapp_number),1)]),l("tr",null,[kt,l("td",null,d(C.value.counsellor_email),1),Dt,l("td",null,d(C.value.counsellor_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(x,{value:"upload-download"},{default:e(()=>[t(mt,{"existing-documents":K.value,"zip-link":c.value.document_zip_link},null,8,["existing-documents","zip-link"])]),_:1}),t(x,{value:"status"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[w.value==="status"&&u.$can("status","application")?(r(),N(p,{key:0,onClick:o[13]||(o[13]=a=>b.value=!0),color:"primary"},{default:e(()=>[n(" Change Current Status ")]),_:1})):k("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[t(tt,null,{default:e(()=>[At,l("tbody",null,[(r(!0),_(z,null,E(J.value,(a,y)=>(r(),_("tr",{key:y},[l("td",null,d(a.created_at),1),l("td",null,d(a.comment),1),l("td",null,[l("div",null,[l("span",{innerHTML:a.status_text},null,8,Ut),y===0?(r(),_("span",xt,"(Current Status)")):k("",!0),a.document?(r(),_("div",Mt,[l("div",null,d(a.file_name),1),l("a",{href:a.document,target:"_blank",class:"download-link"},"Document",8,Tt)])):k("",!0)])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),t(x,{value:"comments"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[u.$can("comment","application")?(r(),N(p,{key:0,onClick:o[14]||(o[14]=a=>S.value=!0),color:"primary"},{default:e(()=>[n("Add New Comment")]),_:1})):k("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[l("div",jt,[(r(!0),_(z,null,E(W.value,(a,y)=>(r(),_("div",{key:y,class:"comment"},[l("div",Nt,[l("span",$t,d(a.created_at),1)]),l("div",{class:"comment-body",innerHTML:a.comment_with_user},null,8,It)]))),128))])]),_:1})]),_:1})]),_:1}),t(x,{value:"university-communication"},{default:e(()=>[t(L,null,{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[u.$can("university_communication","application")?(r(),N(p,{key:0,onClick:o[15]||(o[15]=a=>h.value=!0),color:"primary"},{default:e(()=>[n("Add New Communication")]),_:1})):k("",!0)]),_:1}),t(v,{cols:"12"},{default:e(()=>[l("div",Lt,[(r(!0),_(z,null,E(G.value,(a,y)=>(r(),_("div",{key:y,class:"comment"},[l("div",Ft,[l("span",Ht,d(a.created_at),1)]),l("div",Bt,[Et,n(" "+d(a.subject),1)]),l("div",zt,[l("div",{innerHTML:a.message},null,8,Pt)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},Pe=ct(qt,[["__scopeId","data-v-d6e9a5b8"]]);export{Pe as default};
