import{_ as z}from"./AppCardActions-DyWd01F7.js";import{_ as j}from"./TablePagination-D0sOsHcs.js";import{_ as q}from"./AppTextField-BgMVzjhm.js";import{_ as F}from"./AppSelect-CGrTW4qd.js";import{u as H}from"./applicationList-CMqzq35t.js";import{g as M}from"./helpers-D1w8nmW1.js";import{S as f}from"./sweetalert2-z6gKu1nJ.js";import{k as Y,r as a,w as G,H as J,a as K,o as S,c as Q,b as s,e as n,d as i,x as r,y as W,v as X,a1 as P,f as Z,z as ee}from"./main-CI7cqQmu.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ae}from"./VCardText-DZfy_Rv4.js";import{V as oe}from"./VSpacer-BaJuzlRy.js";import{V as se}from"./VDataTableServer-DPcYZ5lv.js";import{V as ne}from"./VChip-CTz8yssI.js";import"./index-B1wexbwg.js";import"./VCard-Cf4_qgxv.js";import"./VAvatar-CNYpP6hL.js";import"./VImg-DqWFQaLG.js";import"./index-B6Vh99Qb.js";import"./VOverlay-yYNgwtxu.js";import"./easing-CjukEv2V.js";import"./lazy-Bk-4RCLW.js";import"./scopeId-CvFPnsJb.js";import"./VDivider-DMJBUiY2.js";import"./VPagination-B-QBStXP.js";import"./form-BVoxWKEV.js";import"./VTextField-CX1YN7H1.js";/* empty css                   */import"./VCounter-wsgXE4-H.js";import"./VField-DxlwWh6y.js";import"./VInput-1G8Ghd8F.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-D4W3r2YB.js";import"./VList-BiUuSPXD.js";import"./ssrBoot-BAQ8jU4G.js";import"./dialog-transition-DfQeTniO.js";import"./VMenu-G5HnfFBC.js";import"./VCheckboxBtn-Bw5_AlAC.js";import"./VSelectionControl-COpeYmnx.js";import"./api-DfxwZSPq.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-LtDacBOk.js";import"./VTable-C3ll8jOK.js";import"./filter-A62FnCQQ.js";import"./VSlideGroup-DYhhO-BK.js";const ie={class:"me-3 d-flex gap-3"},le={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},re={style:{"inline-size":"15.625rem"}},me={class:"d-flex flex-column ms-3"},ce={class:"d-block font-weight-medium text-truncate text-high-emphasis"},pe={class:"text-md"},ue={class:"text-md"},de={class:"d-flex flex-column ms-3"},ve={__name:"index",props:{userId:{type:String,default:null}},setup(I){const _=H(),V=Y(),b=a(M()==="admin"),g=a([]),d=a(0),l=a(10),m=a(1),y=a(),h=a(),p=a(""),A=a(),x=a(null),C=a(null),v=a(!1);a([]),a([]),a([{value:0,name:"Application Processing"},{value:1,name:"Application Submitted"},{value:2,name:"Pending Docs"},{value:3,name:"Offer Issue Conditional"},{value:4,name:"Offer Issue Unconditional"},{value:5,name:"Need Payment"},{value:6,name:"CAS Issued"},{value:7,name:"Additional Doc Needed"},{value:8,name:"Refund Required"},{value:9,name:"Application Rejected"},{value:10,name:"Session Expired"},{value:11,name:"Doc Received"},{value:12,name:"Partial Payment"}]);const B=I,u=async()=>{v.value=!0;try{const t=await _.getApplicationList(B.userId,m.value,l.value,p.value,y.value,h.value,A.value,x.value,C.value);g.value=t.data,d.value=t.total}catch(t){console.error("Error fetching applications:",t)}finally{v.value=!1}},D=t=>{var o,c;y.value=(o=t.sortBy[0])==null?void 0:o.key,h.value=(c=t.sortBy[0])==null?void 0:c.order,u()},N=t=>{V.push({name:"application-details",params:{id:t}})},U=async t=>{if((await f.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await _.deleteItem(t),u(),f.fire("Deleted!","The item has been deleted.","success")}catch{f.fire("Error!","There was an error deleting the item.","error")}};G([p,A,x,C],()=>{u()}),J(()=>{u()});const R=a([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...b.value?[{title:"Application Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),k=t=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[t]||"secondary",T=t=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[t]||"Unknown Status";return a(!0),(t,o)=>{const c=F,$=q,w=K("IconBtn"),O=j,E=z;return S(),Q("div",null,[s(E,{title:"New Application",loading:v.value,"no-actions":""},{default:n(()=>[s(ae,{class:"d-flex flex-wrap gap-4"},{default:n(()=>[i("div",ie,[s(c,{"model-value":l.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":o[0]||(o[0]=e=>l.value=parseInt(e,10))},null,8,["model-value"])]),s(oe),i("div",le,[i("div",re,[s($,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=e=>p.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),s(se,{"items-per-page":l.value,"onUpdate:itemsPerPage":o[3]||(o[3]=e=>l.value=e),page:m.value,"onUpdate:page":o[4]||(o[4]=e=>m.value=e),items:g.value,"items-length":d.value,headers:R.value,class:"text-no-wrap color-black","onUpdate:options":D},{"item.student.name":n(({item:e})=>[i("p",null,r(e.student.first_name)+" "+r(e.student.last_name),1)]),"item.university.name":n(({item:e})=>[i("div",me,[i("span",ce,r(e.university.name),1),i("span",pe,r(e.course.name),1),i("span",ue,r(e.intake.name),1)])]),"item.status":n(({item:e})=>[s(ne,{color:k(e.status),class:W([`text-${k(e.status)}`,"font-weight-medium"]),size:"small"},{default:n(()=>[X(r(T(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":n(({item:e})=>[i("div",de,[s(w,{onClick:L=>N(e.id)},{default:n(()=>[s(P,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),t.$can("delete","application")?(S(),Z(w,{key:0,onClick:L=>U(e.id)},{default:n(()=>[s(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):ee("",!0)])]),bottom:n(()=>[s(O,{page:m.value,"onUpdate:page":o[2]||(o[2]=e=>m.value=e),"items-per-page":l.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers"])]),_:1},8,["loading"])])}}},it=te(ve,[["__scopeId","data-v-062bb4bd"]]);export{it as default};
