import{r as m,e as R}from"./validators-CyxRyApg.js";import{r as V,w as L,H as T,o as C,f as _,e as t,b as r,a6 as P,n as d,c as $,F as I,z as M,a7 as w,v as S,d as G}from"./main-CSiErTrC.js";import{_ as W}from"./AppAutocomplete-CoK3r2uy.js";import{_ as j}from"./AppSelect-CVe9OyaJ.js";import{_ as H}from"./AppTextField-Ce_7aj-l.js";import{_ as J}from"./AppDrawerHeaderSection-DdsGZD7z.js";import{u as K}from"./auth-DuDby9oM.js";import{u as z}from"./rolePermission-DAXb0fXz.js";import{S as q}from"./sweetalert2-z6gKu1nJ.js";import{P as Q}from"./vue3-perfect-scrollbar.esm-C2zPO6yf.js";import{V as X}from"./VNavigationDrawer-D5AtBS9q.js";import{V as Y}from"./VDivider-CJXv-daG.js";import{V as Z}from"./VCard-Dyvot-OU.js";import{V as x}from"./VCardText-BbEmzcMK.js";import{V as ee}from"./VForm-D2vsoaeH.js";import{V as le,a as u}from"./VRow-pUYaZicq.js";import{V as g}from"./VFileInput-X5FwE30T.js";import{V as n}from"./VCheckbox-CVz_TdFz.js";import"./helpers-DTnLmPMO.js";import"./VTextField-BE_Olmik.js";import"./index-DfinjJ0j.js";import"./index-D0fdz3wH.js";import"./forwardRefs-D9kYFWgq.js";import"./VSelect-BcYBjzlz.js";import"./VList-ByOnc6tB.js";import"./ssrBoot-CaQoqm2n.js";import"./VAvatar-Bch8i2Kl.js";import"./VImg-DNzaKymM.js";import"./dialog-transition-D7_ipZkV.js";import"./scopeId-BtBFTQc-.js";import"./VMenu-BPuY_Q26.js";import"./VCheckboxBtn-42SIpkIn.js";import"./VChip-DmYAq59v.js";import"./filter-Db2PYUQe.js";import"./VSpacer-BeKQVHec.js";/* empty css              */import"./api-DWFqE0EF.js";import"./index-BYrzgnBV.js";const ae=G("label",null,"Country Recruit For",-1),Me={__name:"EditNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},editedUser:{type:Object},branches:{type:Array,default:()=>[]}},emits:["update:isDrawerOpen","userUpdated"],setup(B,{emit:D}){const f=B,s=D,v=z(),h=K(),b=V(!1),c=V(),y=V([]),a=V({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",branch_id:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[],agreement:null,commission_structure:null}),A=e=>{e&&(a.value={...a.value,id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,branch_id:e.branch_id,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role,plan:e.plan||"",status:e.status,recruitCountries:typeof e.recruit_countries=="string"?JSON.parse(e.recruit_countries):e.recruit_countries||[]})};L(()=>f.editedUser,e=>{console.log("props.editedUser:",e),A(e)},{immediate:!0}),T(async()=>{await v.getAllRoles(),y.value=v.roles});const N=()=>{s("update:isDrawerOpen",!1)},F=async()=>{var e;(e=c.value)==null||e.validate().then(async({valid:o})=>{var p;if(o)try{const i=await h.updateUser(a.value);q.fire({icon:"success",title:"User Updated Successfully",text:"The user details have been updated!",confirmButtonText:"OK"}),s("userUpdated",i),s("update:isDrawerOpen",!1)}catch(i){console.error("Error updating user:",i),q.fire({icon:"error",title:"Update Failed",text:((p=i.response)==null?void 0:p.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},E=e=>{s("update:isDrawerOpen",e)},k=e=>e?e.toLowerCase():"";return(e,o)=>{const p=J,i=H,U=j,O=W;return C(),_(X,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":E},{default:t(()=>[r(p,{title:"Edit User",onCancel:N}),r(Y),r(d(Q),{options:{wheelPropagation:!1}},{default:t(()=>[r(Z,{flat:""},{default:t(()=>[r(x,null,{default:t(()=>[r(ee,{ref_key:"refForm",ref:c,modelValue:b.value,"onUpdate:modelValue":o[22]||(o[22]=l=>b.value=l),onSubmit:P(F,["prevent"])},{default:t(()=>[r(le,null,{default:t(()=>[r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.firstName,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.firstName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12",md:"6"},{default:t(()=>[r(i,{modelValue:a.value.lastName,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.lastName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.email=l),rules:["requiredValidator"in e?e.requiredValidator:d(m),"emailValidator"in e?e.emailValidator:d(R)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.mobileNumber,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.mobileNumber=l),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.whatsappNumber,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.whatsappNumber=l),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(U,{modelValue:a.value.branch_id,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.branch_id=l),label:"Select Branch",placeholder:"Select Branch",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:f.branches,"item-title":l=>l.branch_name_with_country,"item-value":l=>l.id},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(U,{modelValue:a.value.role,"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.role=l),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:y.value,"item-title":l=>l.role,"item-value":l=>l.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),k(a.value.role)==="channel partner"?(C(),$(I,{key:0},[r(u,{cols:"12"},{default:t(()=>[r(g,{modelValue:a.value.agreement,"onUpdate:modelValue":o[7]||(o[7]=l=>a.value.agreement=l),label:"Upload Agreement"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(g,{modelValue:a.value.commission_structure,"onUpdate:modelValue":o[8]||(o[8]=l=>a.value.commission_structure=l),label:"Upload Commission Structure"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.companyName,"onUpdate:modelValue":o[9]||(o[9]=l=>a.value.companyName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.website,"onUpdate:modelValue":o[10]||(o[10]=l=>a.value.website=l),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.address,"onUpdate:modelValue":o[11]||(o[11]=l=>a.value.address=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.city,"onUpdate:modelValue":o[12]||(o[12]=l=>a.value.city=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(i,{modelValue:a.value.postCode,"onUpdate:modelValue":o[13]||(o[13]=l=>a.value.postCode=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[r(O,{modelValue:a.value.country,"onUpdate:modelValue":o[14]||(o[14]=l=>a.value.country=l),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:t(()=>[ae,r(n,{value:"Nigeria",label:"Nigeria",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[15]||(o[15]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"India",label:"India",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[16]||(o[16]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"Bangladesh",label:"Bangladesh",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[17]||(o[17]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"Nepal",label:"Nepal",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[18]||(o[18]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"Bhutan",label:"Bhutan",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[19]||(o[19]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"Ghana",label:"Ghana",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[20]||(o[20]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(n,{value:"Sri Lanka",label:"Sri Lanka",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[21]||(o[21]=l=>a.value.recruitCountries=l)},null,8,["modelValue"])]),_:1})],64)):M("",!0),r(u,{cols:"12"},{default:t(()=>[r(w,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),r(w,{type:"reset",variant:"tonal",color:"error",onClick:N},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{Me as default};
