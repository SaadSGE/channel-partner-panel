import{_ as J}from"./AppCardActions-DFAydMRu.js";import{_ as K}from"./TablePagination-BJAuaG3-.js";import{_ as Q}from"./AppTextField-CDNIz15Y.js";import{_ as W}from"./AppSelect-BYZUlbfh.js";import{_ as X}from"./Filters-C7A-9_WA.js";import{u as B}from"./applicationList-BZalZQjK.js";import{g as Z,r as T,a as ee}from"./helpers-B6UT3l9l.js";import{S as A}from"./sweetalert2-z6gKu1nJ.js";import{k as te,r as a,w as ae,H as oe,a5 as se,a as le,o as D,c as ie,b as o,e as s,v as I,d as i,x as n,n as k,y as ne,a1 as P,f as re,z as pe}from"./main-C74_jUeT.js";import{u as me}from"./useAbility-DrlqX2ye.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $}from"./VCardText-B7x7b_F3.js";import{V as ue}from"./VRow-26QtYvrR.js";import{V as de}from"./VSpacer-Db9bO5N5.js";import{V as ve}from"./VDataTableServer-Dz8NDwAY.js";import{V as fe}from"./VChip-CjcgH7Gn.js";import"./index-DT81gwx7.js";import"./VCard-N5Ac_lHY.js";import"./VAvatar-BSdqOW6E.js";import"./VImg-Dm111l4M.js";import"./index-ofTVLbpv.js";import"./VOverlay-CUiP3a4e.js";import"./easing-CjukEv2V.js";import"./lazy-BLiJZfkA.js";import"./scopeId-RgNzRTDA.js";import"./VDivider-DLQBYBVj.js";import"./VPagination-sGORSq9f.js";import"./form-Dm2p5Mi6.js";import"./VTextField-C640B_wh.js";/* empty css                   */import"./VCounter-Cri1LZbZ.js";import"./VField-fzvzWeo2.js";import"./VInput-DbiX_CVz.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-BIYCrRFf.js";import"./VList-B03_msnB.js";import"./ssrBoot-CQDlvTc3.js";import"./dialog-transition-CE5iBi5H.js";import"./VMenu-CszG6077.js";import"./VCheckboxBtn-Cph1Oy13.js";import"./VSelectionControl-DISd8ZlM.js";import"./AppDateTimePicker-uTnDqPAj.js";import"./AppAutocomplete-DmxyimUH.js";import"./filter-DJIuvWmB.js";import"./commonFunction-C3oCWhIz.js";import"./api-BIeHaLk3.js";import"./index-Dz1rBMAR.js";import"./rolePermission-BXl1ZSg9.js";import"./user-DFe5kRR_.js";/* empty css              */import"./VDataTable-BNwumn4c.js";import"./VTable-DSnnPAOF.js";import"./VSlideGroup-D6uk6wR3.js";const _e={class:"application-list-container"},ge={class:"me-3 d-flex gap-3"},ye={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},he={style:{"inline-size":"15.625rem"}},xe={class:"d-flex flex-column"},Ae={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ke={class:"text-md"},Ce={class:"d-flex flex-column ms-3"},we={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Ve={class:"text-md"},Se={class:"text-md"},be={class:"d-flex flex-column ms-3"},Ue={__name:"index",props:{userId:{type:String,default:null}},setup(L){const N=L,{can:z}=me(),C=B(),E=te();a(Z()==="admin");const w=a([]),h=a(0),r=a(10),p=a(1),V=a(),S=a(),c=a(""),u=a(null),d=a(null),v=a(null),f=a(null),b=a(""),_=a(null),g=a(null),x=a(!1);B();const y=async()=>{x.value=!0;try{const l=await C.getApplicationList(N.userId,p.value,r.value,c.value,V.value,S.value,u.value,d.value,v.value,f.value,b.value,_.value,g.value);w.value=l.data,h.value=l.total}catch(l){console.error("Error fetching applications:",l)}finally{x.value=!1}},F=l=>{var t,m;V.value=(t=l.sortBy[0])==null?void 0:t.key,S.value=(m=l.sortBy[0])==null?void 0:m.order,y()},O=l=>{E.push({name:"application-details",params:{id:l}})},R=async l=>{if((await A.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await C.deleteItem(l),y(),A.fire("Deleted!","The item has been deleted.","success")}catch{A.fire("Error!","There was an error deleting the item.","error")}};ae([c,u,d,v,f,b,_,g],()=>{y()}),oe(()=>{y()});const H=a([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...z("application-control-officer-view","application")?[{title:"Application Control Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),M=se(()=>"calc(100vh - 200px)");return(l,t)=>{const m=W,Y=Q,U=le("IconBtn"),j=K,q=J;return D(),ie("div",_e,[o(q,{title:"Application List",loading:x.value,"no-actions":""},{default:s(()=>[o($,null,{default:s(()=>[o(ue,null,{default:s(()=>[o(X,{"selected-status":u.value,"selected-channel-partner":v.value,"selected-university":d.value,"selected-application-officer":f.value,"selected-dateFrom":_.value,"selected-dateTo":g.value,onUpdateStatus:t[0]||(t[0]=e=>u.value=e),onUpdateChannelPartner:t[1]||(t[1]=e=>v.value=e),onUpdateUniversity:t[2]||(t[2]=e=>d.value=e),onUpdateApplicationOfficer:t[3]||(t[3]=e=>f.value=e),onUpdateDateFrom:t[4]||(t[4]=e=>_.value=e),onUpdateDateTo:t[5]||(t[5]=e=>g.value=e)},{default:s(()=>[I(' :isAdmin = "isAdmin" ')]),_:1},8,["selected-status","selected-channel-partner","selected-university","selected-application-officer","selected-dateFrom","selected-dateTo"])]),_:1})]),_:1}),o($,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",ge,[o(m,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),o(de),i("div",ye,[i("div",he,[o(Y,{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(ve,{"items-per-page":r.value,"onUpdate:itemsPerPage":t[9]||(t[9]=e=>r.value=e),page:p.value,"onUpdate:page":t[10]||(t[10]=e=>p.value=e),items:w.value,"items-length":h.value,headers:H.value,class:"text-no-wrap color-black application-table",height:M.value,"onUpdate:options":F},{"item.student.name":s(({item:e})=>[i("p",null,n(e.student.first_name)+" "+n(e.student.last_name),1)]),"item.user.email":s(({item:e})=>[i("div",xe,[i("span",Ae,n(e.user.company_name),1),i("span",ke,n(e.user.email),1)])]),"item.university.name":s(({item:e})=>[i("div",Ce,[i("span",we,n(e.university.name),1),i("span",Ve,n(e.course.name),1),i("span",Se,n(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(fe,{color:k(T)(e.status),class:ne([`text-${k(T)(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[I(n(k(ee)(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",be,[o(U,{onClick:G=>O(e.application_id)},{default:s(()=>[o(P,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),l.$can("delete","application")?(D(),re(U,{key:0,onClick:G=>R(e.id)},{default:s(()=>[o(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):pe("",!0)])]),bottom:s(()=>[o(j,{page:p.value,"onUpdate:page":t[8]||(t[8]=e=>p.value=e),"items-per-page":r.value,"total-items":h.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers","height"])]),_:1},8,["loading"])])}}},Ut=ce(Ue,[["__scopeId","data-v-06dbbea7"]]);export{Ut as default};
