import{_ as K}from"./AppAutocomplete-BHvoqZ3g.js";import{c as O}from"./commonFunction-BnqML39V.js";import{u as R}from"./fileStore-CblMnb7c.js";import{u as Y}from"./studentStore-Clo9es1j.js";import{u as q}from"./submitApplication-C6g5nG8r.js";import{V as H,p as L,a as G,b as J}from"./vue-filepond.esm-DN0c5KKh.js";import{S as C}from"./sweetalert2-z6gKu1nJ.js";import{r as d,k as Q,w as W,H as X,o as r,c as g,d as m,y as b,f as w,e as l,a9 as c,z as p,F as Z,v as a,b as s,x as V,n as ee}from"./main-DQDgXN-y.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as B,b as F}from"./VCard-BfJY9aZP.js";import{V as D}from"./VCardText-CD7wy7qh.js";import"./VInput-auQBWKMG.js";import"./index-10ytlc_v.js";import"./index-BINZB40w.js";import"./forwardRefs-D3j0TLhE.js";import"./VSelect-B7y4L8rV.js";import"./VTextField-Cp5v1yAY.js";import"./VList-BrI9BgdF.js";import"./ssrBoot-DvpuwInU.js";import"./VAvatar-D0VM7nju.js";import"./VImg-CQ-mzHLt.js";import"./VDivider-B7slKK8P.js";import"./dialog-transition-SYxJTnJP.js";import"./scopeId-EczZxsEl.js";import"./VMenu-Cnv1CEvj.js";import"./VCheckboxBtn-BQQB70Oo.js";import"./VChip-B563gMGy.js";import"./filter-BlyvBh0u.js";import"./helpers-Cuuhg20J.js";const oe={class:"button-container"},le={key:0,class:"text-error"},se={class:"d-flex justify-space-between mt-4"},ne={class:"flex-grow-1 text-center"},ae={key:0,class:"text-error"},ie={class:"d-flex justify-space-between mt-4"},ue={class:"flex-grow-1 text-center"},re={__name:"upload-document",emits:["update:uploadDocumentShow","update:studentFormShow","update:courseDetailsShow"],setup(ce,{emit:A}){const N=H(J,G,L),n=O(),v=A,u=d(null),x=d([]),t=d(null),S=o=>{t.value=o},_=R(),$=q(),E=Y(),P=Q();x.value=_.files;const f=d(null),k=d([]),I=d(0);W(f,o=>{o&&console.log("Selected student:",o)});const T=()=>{x.value.length===0?u.value="Please upload at least one file.":(u.value=null,v("update:uploadDocumentShow",!1),v("update:studentFormShow",!0))},M={process:(o,e,y,i,z,me,pe)=>{I.value+=1,_.uploadFile(o,e).then(h=>i(h)).catch(h=>z(h))},revert:(o,e,y)=>{I.value-=1,_.removeFile(o),e()}};X(async()=>{k.value=await E.search()}),document.querySelectorAll(".student-list-item").forEach(o=>{o.addEventListener("click",function(){console.log("Item selected:",this.textContent)})});const U=async()=>{try{if(!f.value){u.value="Please select a student before submitting the application.";return}(await C.fire({title:"Confirm Submission",text:"Are you sure you want to submit this application?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit it!"})).isConfirmed&&(await $.submitApplication(null,n.selectedCourseId,n.selectedIntakeId,n.selectedUniversityId,n.selectedCountryId,n.selectedCourseDetailsId,_.filePaths,f.value),C.fire({icon:"success",title:"Application Successful",text:"You have submitted the application successfully!",confirmButtonText:"OK"}),n.selectedCourseId=null,n.selectedIntakeId=null,n.selectedUniversityId=null,n.selectedCountryId=null,n.selectedCourseDetailsId=null,P.push({name:"application"}))}catch(o){C.fire({icon:"error",title:"Application Failed",text:o,confirmButtonText:"OK"})}},j=()=>{v("update:uploadDocumentShow",!1),v("update:courseDetailsShow",!0)};return(o,e)=>{const y=K;return r(),g(Z,null,[m("div",oe,[m("div",{class:b(["flex-button",{"single-button":t.value}])},[!t.value||t.value==="existingStudent"?(r(),w(c,{key:0,color:"primary",class:b({active:t.value==="newStudent","slide-in":t.value===null,"slide-out":t.value==="existingStudent"}),onClick:e[0]||(e[0]=i=>S("newStudent"))},{default:l(()=>[a(" Is this New Student? ")]),_:1},8,["class"])):p("",!0),!t.value||t.value==="newStudent"?(r(),w(c,{key:1,color:"secondary",class:b({active:t.value==="existingStudent","slide-in":t.value===null,"slide-out":t.value==="newStudent"}),onClick:e[1]||(e[1]=i=>S("existingStudent"))},{default:l(()=>[a(" Is this Existing Student? ")]),_:1},8,["class"])):p("",!0)],2)]),t.value==="existingStudent"?(r(),w(B,{key:0,class:"mb-6"},{default:l(()=>[s(F,null,{default:l(()=>[a("Select Existing Student")]),_:1}),s(D,null,{default:l(()=>[s(y,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=i=>f.value=i),items:k.value,"item-title":"student_name_with_email","item-value":"id",label:"Search Existing Student",placeholder:"Start typing to search..."},null,8,["modelValue","items"]),u.value?(r(),g("p",le,V(u.value),1)):p("",!0),m("div",se,[m("div",ne,[s(c,{color:"secondary",onClick:e[3]||(e[3]=i=>S("newStudent"))},{default:l(()=>[a("Move to New Student")]),_:1})]),s(c,{color:"primary",onClick:U},{default:l(()=>[a("Next")]),_:1})])]),_:1})]),_:1})):p("",!0),t.value==="newStudent"?(r(),w(B,{key:1},{default:l(()=>[s(F,null,{default:l(()=>[a("Please upload only color scan copy files for new student")]),_:1}),s(D,null,{default:l(()=>[s(ee(N),{ref:"pond",name:"student_document","allow-multiple":!0,allowRemove:"true",files:x.value,server:M,"label-idle":"Drop files here or <span class='filepond--label-action'>Browse</span>"},null,8,["files"]),u.value?(r(),g("p",ae,V(u.value),1)):p("",!0),m("div",ie,[s(c,{color:"secondary",onClick:j},{default:l(()=>[a("Back")]),_:1}),m("div",ue,[s(c,{color:"secondary",onClick:e[4]||(e[4]=i=>S("existingStudent"))},{default:l(()=>[a("Move to Existing Student")]),_:1})]),s(c,{color:"primary",onClick:e[5]||(e[5]=i=>T())},{default:l(()=>[a("Next")]),_:1})])]),_:1})]),_:1})):p("",!0)],64)}}},Re=te(re,[["__scopeId","data-v-c3a801f3"]]);export{Re as default};
