import{_ as z}from"./AppCardActions-B7CR_dbr.js";import{_ as E}from"./TablePagination-Cp-HZ9HZ.js";import{_ as L}from"./AppTextField-CfCw6ERl.js";import{_ as R}from"./AppSelect-bECRdv9h.js";import{u as O}from"./applicationList-BB1o1KiS.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{k as j,r as n,w as q,H as F,a as H,o as w,c as M,b as o,e as s,d as i,x as l,y as Y,v as G,a1 as k,f as J,z as K}from"./main-jqcjK7xp.js";import{V as Q}from"./VCardText-BQHWJznV.js";import{V as W}from"./VSpacer-DQoGO8EY.js";import{V as X}from"./VDataTableServer-BdR8mA0r.js";import{V as Z}from"./VChip-DL790JIu.js";import"./index-Dg7L1Y9a.js";import"./VCard-Yzth8Bbk.js";import"./VAvatar-CBFunosL.js";import"./VImg-Dq5o-FRb.js";import"./index-D-AQT_OO.js";import"./VOverlay-CTF_jnUR.js";import"./easing-CjukEv2V.js";import"./lazy-VPHKlAh0.js";import"./scopeId-ByoNz-06.js";import"./VDivider-aBk8hLGb.js";import"./VPagination-DSM4X0vk.js";import"./form-ShDWVo0T.js";import"./VTextField-CFP5Zjk9.js";/* empty css                   */import"./VCounter-CdEHqZJm.js";import"./VField-Cjl8U0U7.js";import"./VInput-6LqNuklE.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-C6ZNLmNQ.js";import"./VList-0NZSh-Ju.js";import"./ssrBoot-CiSfow5P.js";import"./dialog-transition-CwlZxf0Y.js";import"./VMenu-BW43W0Nv.js";import"./VCheckboxBtn-C8QY6kDe.js";import"./VSelectionControl-Dwhjizf1.js";import"./api-BeYU9BO0.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-DokGEkTA.js";import"./VTable-fN1-cPoX.js";import"./filter-shQ4wSId.js";import"./VSlideGroup-Cipbne6z.js";const ee={class:"me-3 d-flex gap-3"},te={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ae={style:{"inline-size":"15.625rem"}},oe={class:"d-flex flex-column ms-3"},se={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ie={class:"text-md"},ne={class:"text-md"},re={class:"d-flex flex-column ms-3"},We={__name:"index",props:{userId:{type:String,default:null}},setup(A){const _=O(),S=j(),g=n([]),d=n(0),r=n(10),p=n(1),y=n(),h=n(),c=n(""),f=n(!1),V=A,u=async()=>{f.value=!0;try{const t=await _.getApplicationList(V.userId,p.value,r.value,c.value,y.value,h.value);g.value=t.data,d.value=t.total}catch(t){console.error("Error fetching applications:",t)}finally{f.value=!1}},B=t=>{var a,m;y.value=(a=t.sortBy[0])==null?void 0:a.key,h.value=(m=t.sortBy[0])==null?void 0:m.order,u()},I=t=>{S.push({name:"application-details",params:{id:t}})},P=async t=>{if((await v.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await _.deleteItem(t),u(),v.fire("Deleted!","The item has been deleted.","success")}catch{v.fire("Error!","There was an error deleting the item.","error")}};q([c],()=>{u()}),F(()=>{u()});const N=[{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}],x=t=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[t]||"secondary",b=t=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[t]||"Unknown Status";return(t,a)=>{const m=R,D=L,C=H("IconBtn"),T=E,U=z;return w(),M("div",null,[o(U,{title:"New Application",loading:f.value,"no-actions":""},{default:s(()=>[o(Q,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",ee,[o(m,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),o(W),i("div",te,[i("div",ae,[o(D,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(X,{"items-per-page":r.value,"onUpdate:itemsPerPage":a[3]||(a[3]=e=>r.value=e),page:p.value,"onUpdate:page":a[4]||(a[4]=e=>p.value=e),items:g.value,"items-length":d.value,headers:N,class:"text-no-wrap color-black","onUpdate:options":B},{"item.student.name":s(({item:e})=>[i("p",null,l(e.student.first_name)+" "+l(e.student.last_name),1)]),"item.university.name":s(({item:e})=>[i("div",oe,[i("span",se,l(e.university.name),1),i("span",ie,l(e.course.name),1),i("span",ne,l(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(Z,{color:x(e.status),class:Y([`text-${x(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[G(l(b(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",re,[o(C,{onClick:$=>I(e.id)},{default:s(()=>[o(k,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),t.$can("delete","application")?(w(),J(C,{key:0,onClick:$=>P(e.id)},{default:s(()=>[o(k,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):K("",!0)])]),bottom:s(()=>[o(T,{page:p.value,"onUpdate:page":a[2]||(a[2]=e=>p.value=e),"items-per-page":r.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"])])}}};export{We as default};
