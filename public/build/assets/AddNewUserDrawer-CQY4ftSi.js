import{r as m,e as L,c as T}from"./validators-FrFcWkRg.js";import{k as $,r as f,H as I,o as U,f as M,e as t,b as a,a6 as G,n as s,c as H,F as K,z as W,a7 as g,v as q,d as j,aA as S}from"./main-15KFjogE.js";import{_ as z}from"./AppAutocomplete-CuFOMo1G.js";import{_ as J}from"./AppSelect-L1jtZNcJ.js";import{_ as Y}from"./AppTextField-CZq0aRyu.js";import{_ as Q}from"./AppDrawerHeaderSection-CLW-a6PX.js";import{u as X}from"./auth-CLEWprmL.js";import{u as Z}from"./rolePermission-BVTOvRHN.js";import{S as D}from"./sweetalert2-z6gKu1nJ.js";import{P as h}from"./vue3-perfect-scrollbar.esm-Df095_Ib.js";import{V as _}from"./VNavigationDrawer-Ce8SZSue.js";import{V as x}from"./VDivider-BfmRFN5b.js";import{V as ee}from"./VCard-DXrPaF3o.js";import{V as le}from"./VCardText-BUII6ExO.js";import{V as ae}from"./VForm-CfQPjH3R.js";import{V as re,a as i}from"./VRow-C8ecLgm4.js";import{V as A}from"./VFileInput-CjbAuM0p.js";import{V as p}from"./VCheckbox-vDHzbQIJ.js";import"./helpers-BlCShVO3.js";import"./form-B5069VtK.js";import"./VSelect-B_TqZZGB.js";import"./VTextField-Da2ikpu6.js";/* empty css                   */import"./VCounter-WCzF8qc_.js";import"./index-CqLoS_Tw.js";import"./index-BywMyx-L.js";import"./VField-BnlfoiQt.js";import"./easing-CjukEv2V.js";import"./VInput-DdRggOY-.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CAFdzFUq.js";import"./ssrBoot-CtNasRGc.js";import"./VAvatar-BZxRRe_G.js";import"./VImg-Bh6gilOl.js";import"./dialog-transition-BVTDiMXd.js";import"./VMenu-5qCR1DEp.js";import"./VOverlay-8IfTc10N.js";import"./lazy-Hc4MIGTj.js";import"./scopeId-CAtradTb.js";import"./VCheckboxBtn-P-Uk0ZBF.js";import"./VSelectionControl-jWafKC1v.js";import"./VChip-Cbn8Fd09.js";import"./VSlideGroup-D1VcRc8T.js";import"./filter-Dp01fkun.js";import"./VSpacer-BZQs6UQ2.js";/* empty css              */import"./api-DHc9yKBN.js";import"./index-B3bPRkoL.js";const oe=j("label",null,"Country Recruit For",-1),xe={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(B,{emit:F}){const k=B,v=F,w=Z(),P=X();$();const C=f(!1),V=f(),y=f([]),r=f({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",status:"",avatar:"",createForm:"admin",agreement:null,commission_structure:null}),d=f({recruitCountries:[]});I(async()=>{await w.getAllRoles(),y.value=w.roles});const N=()=>{v("update:isDrawerOpen",!1),S(()=>{var o,e;(o=V.value)==null||o.reset(),(e=V.value)==null||e.resetValidation()})},R=o=>o?o.toLowerCase():"",E=async()=>{var o;(o=V.value)==null||o.validate().then(async({valid:e})=>{var c;if(e)try{const u=new FormData;for(const n in r.value)r.value[n]&&u.append(n,r.value[n]);for(const n of d.value.recruitCountries)u.append("recruitCountries[]",n);r.value.agreement&&(u.append("document_type","agreement"),u.append("agreement",r.value.agreement[0])),r.value.commission_structure&&(u.append("document_type","commission_structure"),u.append("commission_structure",r.value.commission_structure[0])),await P.register(u),D.fire({icon:"success",title:"Registration Successful",text:"You have been registered successfully!",confirmButtonText:"OK"}),v("userData",u),v("update:isDrawerOpen",!1),S(()=>{var n,b;(n=V.value)==null||n.reset(),(b=V.value)==null||b.resetValidation(),d.value.recruitCountries=[]})}catch(u){console.error("Error in registration:",u),D.fire({icon:"error",title:"Registration Failed",text:((c=u.response)==null?void 0:c.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},O=o=>{v("update:isDrawerOpen",o)};return(o,e)=>{const c=Q,u=Y,n=J,b=z;return U(),M(_,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":k.isDrawerOpen,"onUpdate:modelValue":O},{default:t(()=>[a(c,{title:"Add New User",onCancel:N}),a(x),a(s(h),{options:{wheelPropagation:!1}},{default:t(()=>[a(ee,{flat:""},{default:t(()=>[a(le,null,{default:t(()=>[a(ae,{ref_key:"refForm",ref:V,modelValue:C.value,"onUpdate:modelValue":e[23]||(e[23]=l=>C.value=l),onSubmit:G(E,["prevent"])},{default:t(()=>[a(re,null,{default:t(()=>[a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.firstName,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.firstName=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.lastName,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.lastName=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.email,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.email=l),rules:["requiredValidator"in o?o.requiredValidator:s(m),"emailValidator"in o?o.emailValidator:s(L)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.password,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.password=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Password",type:"password",placeholder:"Enter your password"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.confirmPassword=l),rules:["requiredValidator"in o?o.requiredValidator:s(m),("confirmedValidator"in o?o.confirmedValidator:s(T))(r.value.confirmPassword,r.value.password)],label:"Confirm Password",type:"password",placeholder:"Confirm your password"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.mobileNumber,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.mobileNumber=l),label:"Mobile Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.whatsappNumber,"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.whatsappNumber=l),label:"WhatsApp Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(n,{modelValue:r.value.role,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.role=l),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in o?o.requiredValidator:s(m)],items:y.value,"item-title":l=>l.role,"item-value":l=>l.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),R(r.value.role)==="channel partner"?(U(),H(K,{key:0},[a(i,{cols:"12"},{default:t(()=>[a(A,{chips:"",modelValue:r.value.agreement,"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.agreement=l),label:"Upload Agreement"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(A,{chips:"",modelValue:r.value.commission_structure,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.commission_structure=l),label:"Upload Commission Structure"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.companyName,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.companyName=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.website,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.website=l),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.address,"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.address=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.city,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.city=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(u,{modelValue:r.value.postCode,"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.postCode=l),rules:["requiredValidator"in o?o.requiredValidator:s(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(b,{modelValue:r.value.country,"onUpdate:modelValue":e[15]||(e[15]=l=>r.value.country=l),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in o?o.requiredValidator:s(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[oe,a(p,{value:"Nigeria",label:"Nigeria",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[16]||(e[16]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"India",label:"India",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[17]||(e[17]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"Bangladesh",label:"Bangladesh",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[18]||(e[18]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"Nepal",label:"Nepal",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[19]||(e[19]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"Bhutan",label:"Bhutan",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[20]||(e[20]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"Ghana",label:"Ghana",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[21]||(e[21]=l=>d.value.recruitCountries=l)},null,8,["modelValue"]),a(p,{value:"Sri Lanka",label:"Sri Lanka",modelValue:d.value.recruitCountries,"onUpdate:modelValue":e[22]||(e[22]=l=>d.value.recruitCountries=l)},null,8,["modelValue"])]),_:1})],64)):W("",!0),a(i,{cols:"12"},{default:t(()=>[a(g,{type:"submit",class:"me-3"},{default:t(()=>[q(" Submit ")]),_:1}),a(g,{type:"reset",variant:"tonal",color:"error",onClick:N},{default:t(()=>[q(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{xe as default};
