import{r as de}from"./validators-B7jdOUXj.js";import{r as s,j as re,k as me,H as ce,o as i,f,e as t,b as e,a7 as _,a1 as pe,v as o,a6 as R,n as b,an as fe,z as c,d as l,x as d,c as C,i as z,F as P,R as _e,U as ve}from"./main-Dgk8I15v.js";import{_ as Ve}from"./AppTextarea-BU5ijbZx.js";import{_ as ge}from"./AppAutocomplete-Dw60voSQ.js";import{u as ye}from"./applicationList-BfNt0M2a.js";import{_ as Ce,a as be,A as we,C as Se,b as he}from"./ComplianceOfficerAssignments-D0rxD9Zf.js";/* empty css                         */import ke from"./details-document-CivX6I4a.js";import{g as Ae}from"./helpers-CDp6bGal.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as F,V as E,d as q}from"./VCard-c-r5JK0A.js";import{V as W}from"./VDialog-D9HUkvzh.js";import{V as N}from"./VCardText-DMQNFBgJ.js";import{V as Q}from"./VForm-Bhq8olDL.js";import{V as x}from"./form-DFtKZAJ8.js";import{V as Ue}from"./VFileInput-CufHl8jX.js";import{V as G}from"./VSpacer-CsR7R1fK.js";import{V as $e}from"./VTextField-C_S7-8qU.js";import{V as Te,a as v}from"./VTabs-f0pC4wuU.js";import{V as je,a as V}from"./VWindowItem-CIDXRjUs.js";import{V as H,a as w}from"./VRow-B4mMqxXB.js";import{V as ne}from"./VTable-DyWU0g_U.js";/* empty css                   */import"./VCounter-DcD9tbfe.js";import"./index-DaE5DWsu.js";import"./index-DBOczzj3.js";import"./VField-7y_0o5lb.js";import"./easing-CjukEv2V.js";import"./VInput-DlZKCIyO.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-7Ed78657.js";import"./VList-Yi4rF2xB.js";import"./ssrBoot-COy5RSjx.js";import"./VAvatar-7eBuq9vO.js";import"./VImg-DXa-yWZh.js";import"./VDivider-CCHSd8gC.js";import"./dialog-transition-CEenKo3l.js";import"./VMenu-BLSEMzyA.js";import"./VOverlay-BbiFofg2.js";import"./lazy-CxrRirQs.js";import"./scopeId-6dZn8heJ.js";import"./VCheckboxBtn-BzmDON6G.js";import"./VSelectionControl-CljtNY8B.js";import"./VChip-CJJfUQnn.js";import"./VSlideGroup-CtIhdzrn.js";import"./filter-Di6N0YHl.js";import"./api-A7vpMgEx.js";import"./index-Dz1rBMAR.js";import"./TablePagination-BXraA7z4.js";import"./VPagination-CKIGI4bn.js";import"./AppSelect-Ck9Klfyz.js";import"./format-DntCB9bz.js";import"./VDataTableServer-BJhaBw-w.js";import"./VDataTable-BIySJAyj.js";import"./VTimelineItem-C-A1Yxds.js";import"./sweetalert2-z6gKu1nJ.js";import"./VAlert-BndY1wY_.js";import"./submitApplication-B_ZbpkyY.js";import"./vue-filepond.esm-uA1kmzAY.js";/* empty css              */const m=I=>(_e("data-v-6c1f29b0"),I=I(),ve(),I),Me=m(()=>l("div",null,"Application Details",-1)),Le=m(()=>l("td",null,[l("strong",null,"Application Id")],-1)),Ne=m(()=>l("td",null,[l("strong",null,"Date Added")],-1)),xe=m(()=>l("td",null,[l("strong",null,"Student ID")],-1)),Ie=m(()=>l("td",null,[l("strong",null,"Student Passport No.")],-1)),Oe=m(()=>l("td",null,[l("strong",null,"Student Name")],-1)),Be=m(()=>l("td",null,[l("strong",null,"Student Date of Birth")],-1)),Fe=m(()=>l("td",null,[l("strong",null,"Student E-Mail")],-1)),Ee=m(()=>l("td",null,[l("strong",null,"Student Phone No.")],-1)),He=m(()=>l("td",null,[l("strong",null,"Communication E-Mail ID")],-1)),Re=m(()=>l("td",null,[l("strong",null,"Communication Phone No.")],-1)),ze=m(()=>l("thead",null,[l("tr",null,[l("th",null,"Date Added"),l("th",null,"Comment"),l("th",null,"Status and Document")])],-1)),Pe=["innerHTML"],qe={key:0,class:"current-status-label"},We={key:1},Qe=["href"],Ge={class:"comment-section"},Je={class:"comment-header"},Ke={class:"comment-date"},Xe=["innerHTML"],Ye={class:"comment-section"},Ze={class:"comment-header"},et={class:"comment-date"},tt={class:"communication-subject"},lt=m(()=>l("strong",null,"Subject:",-1)),at={class:"comment-body"},nt=["innerHTML"],ot={__name:"details",setup(I){const oe=s(Ae()==="admin"),p=re().params.id,r=ye(),A=s("student-course-details"),D=s(!1),U=s(!1),$=s(!1),O=s(""),y=s(""),S=s({subject:"",message:""});s([{name:"Document1.pdf",progress:100},{name:"Document2.pdf",progress:100},{name:"Document3.pdf",progress:100},{name:"Document4.pdf",progress:100}]);const J=s([]),K=s([]),X=s([{created_at:"",comment:"",status_text:""}]),h=s({application_id:"",created_at:"",counsellor_email:"",counsellor_number:""}),T=s();s(!0);const g=s({id:null,student_id:null,first_name:null,last_name:null,passport_no:null,date_of_birth:null,whatsapp_number:null,email:null,address:null,city:null,country:null,region:null,state:null,gender:null,visa_refusal:null,created_at:null,updated_at:null,document:[{id:null,student_id:null,path:null,created_at:null,updated_at:null}]}),Y=s([]),Z=s([]),ue=me(),se=()=>{ue.back()};ce(async()=>{await B()});const B=async()=>{await r.getApplicationDetails(p),await r.getApplicationStatusses(p),await r.getApplicationAllStatuses(),h.value=r.applicationData,Y.value=r.documents,g.value=r.students,X.value=r.statuses,J.value=r.comments,K.value=r.universityCommunications,Z.value=r.allStatuses.filter(u=>u.id!==h.value.status)},j=s(!1),M=s(!1),L=s(!1),ee=async()=>{try{j.value=!0;let u=new FormData;u.append("status",O.value),u.append("comment",y.value),T.value&&u.append("file",T.value[0]),await r.updateStatus(p,u),D.value=!1,O.value="",y.value="",T.value=null,await B()}catch(u){console.error("Error updating status:",u)}finally{j.value=!1}},te=async()=>{try{M.value=!0,await r.addComment(p,y.value),y.value="",U.value=!1,await B()}catch(u){console.error("Error adding comment:",u)}finally{M.value=!1}},le=async()=>{try{L.value=!0,await r.addUniversityCommunication(p,S.value),S.value={subject:"",message:""},$.value=!1,await B()}catch(u){console.error("Error adding university communication:",u)}finally{L.value=!1}};return(u,n)=>{const ie=ge,ae=Ve;return i(),f(E,null,{default:t(()=>[e(F,{class:"d-flex justify-space-between align-center"},{default:t(()=>[Me,e(_,{color:"primary",onClick:se},{default:t(()=>[e(pe,{icon:"tabler-arrow-left",class:"mr-2"}),o(" Back ")]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(W,{modelValue:D.value,"onUpdate:modelValue":n[4]||(n[4]=a=>D.value=a),"max-width":"500px"},{default:t(()=>[e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[o("Change Current Status")]),_:1}),e(N,null,{default:t(()=>[e(Q,{onSubmit:R(ee,["prevent"])},{default:t(()=>[e(ie,{modelValue:O.value,"onUpdate:modelValue":n[0]||(n[0]=a=>O.value=a),items:Z.value,"item-title":a=>a.name,"item-value":a=>a.id,label:"Status",placeholder:"Select Status",rules:["requiredValidator"in u?u.requiredValidator:b(de)]},null,8,["modelValue","items","item-title","item-value","rules"]),e(x,{class:"mt-2"},{default:t(()=>[o(" Add any necessary file (Optional) ")]),_:1}),e(Ue,{modelValue:T.value,"onUpdate:modelValue":n[1]||(n[1]=a=>T.value=a),color:"primary",label:"File input",variant:"outlined",class:"mt-2"},null,8,["modelValue"]),e(x,{class:"mt-2"},{default:t(()=>[o(" Comment (Optional) ")]),_:1}),e(ae,{modelValue:y.value,"onUpdate:modelValue":n[2]||(n[2]=a=>y.value=a),placeholder:"Place any comment regarding status"},null,8,["modelValue"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(G),e(_,{color:"primary",loading:j.value,disabled:j.value,onClick:ee},{default:t(()=>[o(" Submit ")]),_:1},8,["loading","disabled"]),e(_,{disabled:j.value,onClick:n[3]||(n[3]=a=>D.value=!1)},{default:t(()=>[o(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:U.value,"onUpdate:modelValue":n[7]||(n[7]=a=>U.value=a),"max-width":"500px"},{default:t(()=>[e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[o("Add a New Comment")]),_:1}),e(N,null,{default:t(()=>[e(Q,{onSubmit:R(te,["prevent"])},{default:t(()=>[e(x,{class:"mt-2"},{default:t(()=>[o(" New Comment ")]),_:1}),e(ae,{modelValue:y.value,"onUpdate:modelValue":n[5]||(n[5]=a=>y.value=a),placeholder:"Add a new comment",class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(G),e(_,{color:"primary",loading:M.value,disabled:M.value,onClick:te},{default:t(()=>[o(" Submit Comment ")]),_:1},8,["loading","disabled"]),e(_,{disabled:M.value,onClick:n[6]||(n[6]=a=>U.value=!1)},{default:t(()=>[o(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:$.value,"onUpdate:modelValue":n[11]||(n[11]=a=>$.value=a),"max-width":"500px"},{default:t(()=>[e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[o("Add a New University Communication")]),_:1}),e(N,null,{default:t(()=>[e(Q,{onSubmit:R(le,["prevent"])},{default:t(()=>[e(x,{class:"mt-2"},{default:t(()=>[o(" Subject ")]),_:1}),e($e,{modelValue:S.value.subject,"onUpdate:modelValue":n[8]||(n[8]=a=>S.value.subject=a),placeholder:"Subject",class:"mt-2"},null,8,["modelValue"]),e(x,{class:"mt-2"},{default:t(()=>[o(" Message ")]),_:1}),e(b(fe),{content:S.value.message,"onUpdate:content":n[9]||(n[9]=a=>S.value.message=a),theme:"snow","content-type":"html",class:"mt-2"},null,8,["content"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(G),e(_,{color:"primary",loading:L.value,disabled:L.value,onClick:le},{default:t(()=>[o(" Submit Communication ")]),_:1},8,["loading","disabled"]),e(_,{disabled:L.value,onClick:n[10]||(n[10]=a=>$.value=!1)},{default:t(()=>[o(" Cancel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Te,{modelValue:A.value,"onUpdate:modelValue":n[12]||(n[12]=a=>A.value=a)},{default:t(()=>[e(v,{value:"student-course-details"},{default:t(()=>[o(" Student/Course Details ")]),_:1}),e(v,{value:"upload-download"},{default:t(()=>[o(" Upload/Download ")]),_:1}),e(v,{value:"status"},{default:t(()=>[o(" Status ")]),_:1}),e(v,{value:"comments"},{default:t(()=>[o(" Comments ")]),_:1}),e(v,{value:"university-communication"},{default:t(()=>[o(" University Communication ")]),_:1}),u.$can("enable","aco-ao-communication")?(i(),f(v,{key:0,value:"aco-ao-communication"},{default:t(()=>[o(" ACO & AO Communication ")]),_:1})):c("",!0),u.$can("assign","application-officer")?(i(),f(v,{key:1,value:"assign-officer"},{default:t(()=>[o(" Assign Application Officer ")]),_:1})):c("",!0),u.$can("assign","compliance-officer")?(i(),f(v,{key:2,value:"assign-compliance-officer"},{default:t(()=>[o("Assign Compliance Officer ")]),_:1})):c("",!0),u.$can("enable","aco-co-communication")?(i(),f(v,{key:3,value:"aco-co-communication"},{default:t(()=>[o("ACO & CO Communication")]),_:1})):c("",!0),oe.value?(i(),f(v,{key:4,value:"activity-logs"},{default:t(()=>[o(" Activity Logs ")]),_:1})):c("",!0)]),_:1},8,["modelValue"]),e(N,null,{default:t(()=>[e(je,{modelValue:A.value,"onUpdate:modelValue":n[16]||(n[16]=a=>A.value=a)},{default:t(()=>[e(V,{value:"student-course-details"},{default:t(()=>[e(H,null,{default:t(()=>[e(w,{cols:"12"},{default:t(()=>[e(ne,null,{default:t(()=>[l("tbody",null,[l("tr",null,[Le,l("td",null,d(h.value.application_id),1),Ne,l("td",null,d(h.value.created_at),1)]),l("tr",null,[xe,l("td",null,d(g.value.student_id??""),1),Ie,l("td",null,d(g.value.passport_no),1)]),l("tr",null,[Oe,l("td",null,d(g.value.first_name)+" "+d(g.value.last_name),1),Be,l("td",null,d(g.value.date_of_birth),1)]),l("tr",null,[Fe,l("td",null,d(g.value.email),1),Ee,l("td",null,d(g.value.whatsapp_number),1)]),l("tr",null,[He,l("td",null,d(h.value.counsellor_email),1),Re,l("td",null,d(h.value.counsellor_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{value:"upload-download"},{default:t(()=>[e(ke,{"existing-documents":Y.value,"zip-link":g.value.document_zip_link},null,8,["existing-documents","zip-link"])]),_:1}),e(V,{value:"status"},{default:t(()=>[e(H,null,{default:t(()=>[e(w,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[A.value==="status"&&u.$can("status","application")?(i(),f(_,{key:0,color:"primary",onClick:n[13]||(n[13]=a=>D.value=!0)},{default:t(()=>[o(" Change Current Status ")]),_:1})):c("",!0)]),_:1}),e(w,{cols:"12"},{default:t(()=>[e(ne,null,{default:t(()=>[ze,l("tbody",null,[(i(!0),C(P,null,z(X.value,(a,k)=>(i(),C("tr",{key:k},[l("td",null,d(a.created_at),1),l("td",null,d(a.comment),1),l("td",null,[l("div",null,[l("span",{innerHTML:a.status_text},null,8,Pe),k===0?(i(),C("span",qe,"(Current Status)")):c("",!0),a.document?(i(),C("div",We,[l("div",null,d(a.file_name),1),l("a",{href:a.document,target:"_blank",class:"download-link"},"Document",8,Qe)])):c("",!0)])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{value:"comments"},{default:t(()=>[e(H,null,{default:t(()=>[e(w,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[u.$can("comment","application")?(i(),f(_,{key:0,color:"primary",onClick:n[14]||(n[14]=a=>U.value=!0)},{default:t(()=>[o(" Add New Comment ")]),_:1})):c("",!0)]),_:1}),e(w,{cols:"12"},{default:t(()=>[l("div",Ge,[(i(!0),C(P,null,z(J.value,(a,k)=>(i(),C("div",{key:k,class:"comment"},[l("div",Je,[l("span",Ke,d(a.created_at),1)]),l("div",{class:"comment-body",innerHTML:a.comment_with_user},null,8,Xe)]))),128))])]),_:1})]),_:1})]),_:1}),e(V,{value:"university-communication"},{default:t(()=>[e(H,null,{default:t(()=>[e(w,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[u.$can("university_communication","application")?(i(),f(_,{key:0,color:"primary",onClick:n[15]||(n[15]=a=>$.value=!0)},{default:t(()=>[o(" Add New Communication ")]),_:1})):c("",!0)]),_:1}),e(w,{cols:"12"},{default:t(()=>[l("div",Ye,[(i(!0),C(P,null,z(K.value,(a,k)=>(i(),C("div",{key:k,class:"comment"},[l("div",Ze,[l("span",et,d(a.created_at),1)]),l("div",tt,[lt,o(" "+d(a.subject),1)]),l("div",at,[l("div",{innerHTML:a.message},null,8,nt)])]))),128))])]),_:1})]),_:1})]),_:1}),u.$can("enable","aco-ao-communication")?(i(),f(V,{key:0,value:"aco-ao-communication"},{default:t(()=>[e(Ce,{"application-id":b(p)},null,8,["application-id"])]),_:1})):c("",!0),e(V,{value:"activity-logs"},{default:t(()=>[e(be,{"application-id":b(p)},null,8,["application-id"])]),_:1}),e(V,{value:"assign-officer"},{default:t(()=>[e(we,{"application-id":b(p)},null,8,["application-id"])]),_:1}),e(V,{value:"assign-compliance-officer"},{default:t(()=>[e(Se,{"application-id":b(p)},null,8,["application-id"])]),_:1}),e(V,{value:"aco-co-communication"},{default:t(()=>[e(he,{"application-id":b(p)},null,8,["application-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},pl=De(ot,[["__scopeId","data-v-6c1f29b0"]]);export{pl as default};
