import{_ as $}from"./AppAutocomplete-DmxyimUH.js";import{c as O}from"./commonFunction-C3oCWhIz.js";import{a as j,u as K}from"./submitApplication-CXXtGxpc.js";import{v as M,p as Y,a as q,b as z}from"./vue-filepond.esm-DiX7dRz7.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{r,k as H,w as L,H as G,o as h,c as S,b as t,e as l,d as p,F as J,v as m,x as w,z as I,a7 as b,n as Q,R as W,U as X}from"./main-C74_jUeT.js";import{u as Z}from"./studentStore-PhHLcGHf.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as g,b as V}from"./VCard-N5Ac_lHY.js";import{V as F}from"./VCardText-B7x7b_F3.js";import{V as B}from"./VDivider-DLQBYBVj.js";import"./form-Dm2p5Mi6.js";import"./VSelect-BIYCrRFf.js";import"./VTextField-C640B_wh.js";/* empty css                   */import"./VCounter-Cri1LZbZ.js";import"./index-DT81gwx7.js";import"./index-ofTVLbpv.js";import"./VField-fzvzWeo2.js";import"./easing-CjukEv2V.js";import"./VInput-DbiX_CVz.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-B03_msnB.js";import"./ssrBoot-CQDlvTc3.js";import"./VAvatar-BSdqOW6E.js";import"./VImg-Dm111l4M.js";import"./dialog-transition-CE5iBi5H.js";import"./VMenu-CszG6077.js";import"./VOverlay-CUiP3a4e.js";import"./lazy-BLiJZfkA.js";import"./scopeId-RgNzRTDA.js";import"./VCheckboxBtn-Cph1Oy13.js";import"./VSelectionControl-DISd8ZlM.js";import"./VChip-CjcgH7Gn.js";import"./VSlideGroup-D6uk6wR3.js";import"./filter-DJIuvWmB.js";import"./api-BIeHaLk3.js";import"./index-Dz1rBMAR.js";import"./helpers-B6UT3l9l.js";const te=n=>(W("data-v-ae8fb3ca"),n=n(),X(),n),oe={key:0,class:"text-error"},se={class:"d-flex justify-end mt-4"},le={class:"d-flex align-center my-6"},ae=te(()=>p("span",{class:"mx-4"},"OR",-1)),ie={key:0,class:"text-error"},re={class:"d-flex justify-end mt-4"},ne={__name:"upload-document",emits:["update:uploadDocumentShow","update:studentFormShow"],setup(n,{emit:k}){const A=M(z,q,Y),o=O(),x=k,a=r(null),d=r([]),u=j(),D=K(),N=Z(),P=H();d.value=u.files;const i=r(null),y=r([]),C=r(0);L(i,e=>{e&&console.log("Selected student:",e)});const T=()=>{d.value.length===0?a.value="Please upload at least one file.":(a.value=null,x("update:uploadDocumentShow",!1),x("update:studentFormShow",!0))},E={process:(e,s,f,c,R,ce,me)=>{C.value+=1,u.uploadFile(e,s).then(_=>c(_)).catch(_=>R(_))},revert:(e,s,f)=>{C.value-=1,u.removeFile(e),s()}};G(async()=>{y.value=await N.search()}),document.querySelectorAll(".student-list-item").forEach(e=>{e.addEventListener("click",function(){console.log("Item selected:",this.textContent)})});const U=async()=>{try{if(!i.value){a.value="Please select a student before submitting the application.";return}(await v.fire({title:"Confirm Submission",text:"Are you sure you want to submit this application?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit it!"})).isConfirmed&&(await D.submitApplication(null,o.selectedCourseId,o.selectedIntakeId,o.selectedUniversityId,o.selectedCountryId,o.selectedCourseDetailsId,u.filePaths,i.value),v.fire({icon:"success",title:"Application Successful",text:"You have submitted the application successfully!",confirmButtonText:"OK"}),o.selectedCourseId=null,o.selectedIntakeId=null,o.selectedUniversityId=null,o.selectedCountryId=null,o.selectedCourseDetailsId=null,P.push({name:"application"}))}catch(e){v.fire({icon:"error",title:"Application Failed",text:e,confirmButtonText:"OK"})}};return(e,s)=>{const f=$;return h(),S(J,null,[t(g,{class:"mb-6"},{default:l(()=>[t(V,null,{default:l(()=>[m("Select Existing Student")]),_:1}),t(F,null,{default:l(()=>[t(f,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=c=>i.value=c),items:y.value,"item-title":"student_name_with_email","item-value":"id",label:"Search Existing Student",placeholder:"Start typing to search..."},null,8,["modelValue","items"]),a.value?(h(),S("p",oe,w(a.value),1)):I("",!0),p("div",se,[t(b,{color:"primary",onClick:U},{default:l(()=>[m("Next")]),_:1})])]),_:1})]),_:1}),p("div",le,[t(B),ae,t(B)]),t(g,null,{default:l(()=>[t(V,null,{default:l(()=>[m("Please upload only color scan copy files for new student")]),_:1}),t(F,null,{default:l(()=>[t(Q(A),{ref:"pond",name:"student_document","allow-multiple":!0,allowRemove:"true",files:d.value,server:E,"label-idle":"Drop files here or <span class='filepond--label-action'>Browse</span>"},null,8,["files"]),a.value?(h(),S("p",ie,w(a.value),1)):I("",!0),p("div",re,[t(b,{color:"primary",onClick:s[1]||(s[1]=c=>T())},{default:l(()=>[m("Next")]),_:1})])]),_:1})]),_:1})],64)}}},We=ee(ne,[["__scopeId","data-v-ae8fb3ca"]]);export{We as default};
