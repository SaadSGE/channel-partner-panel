import{_ as L}from"./AppCardActions-Bun8bx88.js";import{_ as z}from"./TablePagination-BodS4_-I.js";import{_ as E}from"./AppTextField-BQq4AeDT.js";import{_ as R}from"./AppSelect-CvfWUJmG.js";import{u as O}from"./applicationList-C3A3Hj8n.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{k as j,r as n,w as q,H as F,a as H,o as w,c as M,b as o,e as s,d as i,x as l,y as Y,v as G,a1 as A,f as J,z as K}from"./main-NF9u_1yR.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as W}from"./VCardText-YnmWgeIC.js";import{V as X}from"./VSpacer-GmdRtiG5.js";import{V as Z}from"./VDataTableServer-DJvRD4Ca.js";import{V as ee}from"./VChip-BSqJXu8c.js";import"./index-DTzTflzC.js";import"./VCard-Cg3Tu40d.js";import"./VAvatar-DSBVedtG.js";import"./VImg-DHhU3XG1.js";import"./index-C2nxri_q.js";import"./VOverlay-B0ubJnkc.js";import"./easing-CjukEv2V.js";import"./lazy-DwBFzKYD.js";import"./scopeId-DSzGJmRL.js";import"./VDivider-DvXolMwv.js";import"./VPagination-DbBVMVAI.js";import"./form-C1-kTlqI.js";import"./VTextField-0TceEGUb.js";/* empty css                   */import"./VCounter-CdyBEaSt.js";import"./VField-BptFft_w.js";import"./VInput-CrA5l34t.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CIMZa409.js";import"./VList-DoCM2_o_.js";import"./ssrBoot-CSkgXs53.js";import"./dialog-transition-5ZjEfH5k.js";import"./VMenu-B-FadDfh.js";import"./VCheckboxBtn-BDjbjxhx.js";import"./VSelectionControl-C5YFPu_w.js";import"./api-CA6tqyl9.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-BmQ2mQs7.js";import"./VTable-CvTbLH0W.js";import"./filter-DvO2xyBq.js";import"./VSlideGroup-Ctde1b4_.js";const te={class:"me-3 d-flex gap-3"},ae={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},oe={style:{"inline-size":"15.625rem"}},se={class:"d-flex flex-column ms-3"},ie={class:"d-block font-weight-medium text-truncate text-high-emphasis"},ne={class:"text-md"},re={class:"text-md"},le={class:"d-flex flex-column ms-3"},pe={__name:"index",props:{userId:{type:String,default:null}},setup(k){const _=O(),S=j(),g=n([]),d=n(0),r=n(10),p=n(1),y=n(),h=n(),m=n(""),f=n(!1),V=k,u=async()=>{f.value=!0;try{const t=await _.getApplicationList(V.userId,p.value,r.value,m.value,y.value,h.value);g.value=t.data,d.value=t.total}catch(t){console.error("Error fetching applications:",t)}finally{f.value=!1}},B=t=>{var a,c;y.value=(a=t.sortBy[0])==null?void 0:a.key,h.value=(c=t.sortBy[0])==null?void 0:c.order,u()},I=t=>{S.push({name:"application-details",params:{id:t}})},P=async t=>{if((await v.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await _.deleteItem(t),u(),v.fire("Deleted!","The item has been deleted.","success")}catch{v.fire("Error!","There was an error deleting the item.","error")}};q([m],()=>{u()}),F(()=>{u()});const b=[{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}],x=t=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[t]||"secondary",N=t=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[t]||"Unknown Status";return(t,a)=>{const c=R,D=E,C=H("IconBtn"),T=z,U=L;return w(),M("div",null,[o(U,{title:"New Application",loading:f.value,"no-actions":""},{default:s(()=>[o(W,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",te,[o(c,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),o(X),i("div",ae,[i("div",oe,[o(D,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(Z,{"items-per-page":r.value,"onUpdate:itemsPerPage":a[3]||(a[3]=e=>r.value=e),page:p.value,"onUpdate:page":a[4]||(a[4]=e=>p.value=e),items:g.value,"items-length":d.value,headers:b,class:"text-no-wrap color-black","onUpdate:options":B},{"item.student.name":s(({item:e})=>[i("p",null,l(e.student.first_name)+" "+l(e.student.last_name),1)]),"item.university.name":s(({item:e})=>[i("div",se,[i("span",ie,l(e.university.name),1),i("span",ne,l(e.course.name),1),i("span",re,l(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(ee,{color:x(e.status),class:Y([`text-${x(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[G(l(N(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",le,[o(C,{onClick:$=>I(e.id)},{default:s(()=>[o(A,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),t.$can("delete","application")?(w(),J(C,{key:0,onClick:$=>P(e.id)},{default:s(()=>[o(A,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):K("",!0)])]),bottom:s(()=>[o(T,{page:p.value,"onUpdate:page":a[2]||(a[2]=e=>p.value=e),"items-per-page":r.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"])])}}},et=Q(pe,[["__scopeId","data-v-760e2b0d"]]);export{et as default};
