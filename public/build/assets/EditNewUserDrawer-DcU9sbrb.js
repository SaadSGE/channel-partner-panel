import{r as m,e as R}from"./validators-IgT9dpV5.js";import{r as V,w as h,H as L,o as C,f as T,e as t,b as r,a6 as P,n as d,c as $,F as M,z as G,a7 as w,v as U,d as I}from"./main-C4H_aAPa.js";import{_ as W}from"./AppAutocomplete-BtGVEtgy.js";import{_ as j}from"./AppSelect-CZ0tB0M6.js";import{_ as H}from"./AppTextField-DSMRVaEm.js";import{_ as J}from"./AppDrawerHeaderSection-DvfGZU_i.js";import{u as K}from"./auth-kZ0K9YU8.js";import{u as z}from"./rolePermission-DM_GloRQ.js";import{S}from"./sweetalert2-z6gKu1nJ.js";import{P as Q}from"./vue3-perfect-scrollbar.esm-SW7I_JOG.js";import{V as X}from"./VNavigationDrawer-DpKvq3tn.js";import{V as Y}from"./VDivider-DOTucSXQ.js";import{V as Z}from"./VCard-DoTFoNk5.js";import{V as _}from"./VCardText-Bhio1wW5.js";import{V as x}from"./VForm-Dw2H7zhP.js";import{V as ee,a as i}from"./VRow-Cp0Mf5wf.js";import{V as s}from"./VCheckbox--1Y01r9l.js";import"./helpers-CK0esMst.js";import"./form-DkfOYF43.js";import"./VSelect-Nbm5n_22.js";import"./VTextField-CeJKI7Tf.js";/* empty css                   */import"./VCounter-DpUHeUNo.js";import"./index-MnUENuId.js";import"./index-Datp2PP_.js";import"./VField-Bwr37GOJ.js";import"./easing-CjukEv2V.js";import"./VInput-BUsuNnQb.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BdKxrQit.js";import"./ssrBoot-BimPHYgT.js";import"./VAvatar-BbTok92G.js";import"./VImg-BcZf5OIA.js";import"./dialog-transition-1gm64aQb.js";import"./VMenu-DQOlkt7C.js";import"./VOverlay-LfA_Sks2.js";import"./lazy-CHY0ltdR.js";import"./scopeId-Dd6QYKlO.js";import"./VCheckboxBtn-rXtjrvL0.js";import"./VSelectionControl-DLlK2Rd0.js";import"./VChip-CXJkOmnO.js";import"./VSlideGroup-Da_F3j7_.js";import"./filter-Fo3HCTsN.js";import"./VSpacer-DuR7DSFa.js";/* empty css              */import"./api-CoQFY6CW.js";import"./index-B3bPRkoL.js";const le=I("label",null,"Country Recruit For",-1),Xe={__name:"EditNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},editedUser:{type:Object}},emits:["update:isDrawerOpen","userUpdated"],setup(q,{emit:g}){const f=q,n=g,v=z(),B=K(),b=V(!1),c=V(),N=V([]),a=V({firstName:"",lastName:"",email:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[]}),D=e=>{e&&(a.value={...a.value,id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,mobileNumber:e.mobile_number,whatsappNumber:e.whatsapp_number,companyName:e.company_name,website:e.website,address:e.address,city:e.city,postCode:e.post_code,country:e.country,role:e.role,plan:e.plan||"",status:e.status,recruitCountries:typeof e.recruit_countries=="string"?JSON.parse(e.recruit_countries):e.recruit_countries||[]})};h(()=>f.editedUser,e=>{console.log("props.editedUser:",e),D(e)},{immediate:!0}),L(async()=>{await v.getAllRoles(),N.value=v.roles});const y=()=>{n("update:isDrawerOpen",!1)},E=async()=>{var e;(e=c.value)==null||e.validate().then(async({valid:o})=>{var p;if(o)try{const u=await B.updateUser(a.value);S.fire({icon:"success",title:"User Updated Successfully",text:"The user details have been updated!",confirmButtonText:"OK"}),n("userUpdated",u),n("update:isDrawerOpen",!1)}catch(u){console.error("Error updating user:",u),S.fire({icon:"error",title:"Update Failed",text:((p=u.response)==null?void 0:p.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},F=e=>{n("update:isDrawerOpen",e)},k=e=>e?e.toLowerCase():"";return(e,o)=>{const p=J,u=H,A=j,O=W;return C(),T(X,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[r(p,{title:"Edit User",onCancel:y}),r(Y),r(d(Q),{options:{wheelPropagation:!1}},{default:t(()=>[r(Z,{flat:""},{default:t(()=>[r(_,null,{default:t(()=>[r(x,{ref_key:"refForm",ref:c,modelValue:b.value,"onUpdate:modelValue":o[19]||(o[19]=l=>b.value=l),onSubmit:P(E,["prevent"])},{default:t(()=>[r(ee,null,{default:t(()=>[r(i,{cols:"12",md:"6"},{default:t(()=>[r(u,{modelValue:a.value.firstName,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.firstName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12",md:"6"},{default:t(()=>[r(u,{modelValue:a.value.lastName,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.lastName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.email=l),rules:["requiredValidator"in e?e.requiredValidator:d(m),"emailValidator"in e?e.emailValidator:d(R)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.mobileNumber,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.mobileNumber=l),label:"Mobile Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.whatsappNumber,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.whatsappNumber=l),label:"WhatsApp Number",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(A,{modelValue:a.value.role,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.role=l),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:N.value,"item-title":l=>l.role,"item-value":l=>l.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),k(a.value.role)==="channel partner"?(C(),$(M,{key:0},[r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.companyName,"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.companyName=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.website,"onUpdate:modelValue":o[7]||(o[7]=l=>a.value.website=l),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.address,"onUpdate:modelValue":o[8]||(o[8]=l=>a.value.address=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.city,"onUpdate:modelValue":o[9]||(o[9]=l=>a.value.city=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(u,{modelValue:a.value.postCode,"onUpdate:modelValue":o[10]||(o[10]=l=>a.value.postCode=l),rules:["requiredValidator"in e?e.requiredValidator:d(m)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[r(O,{modelValue:a.value.country,"onUpdate:modelValue":o[11]||(o[11]=l=>a.value.country=l),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in e?e.requiredValidator:d(m)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),r(i,{cols:"12"},{default:t(()=>[le,r(s,{value:"Nigeria",label:"Nigeria",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[12]||(o[12]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"India",label:"India",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[13]||(o[13]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Bangladesh",label:"Bangladesh",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[14]||(o[14]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Nepal",label:"Nepal",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[15]||(o[15]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Bhutan",label:"Bhutan",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[16]||(o[16]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Ghana",label:"Ghana",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[17]||(o[17]=l=>a.value.recruitCountries=l)},null,8,["modelValue"]),r(s,{value:"Sri Lanka",label:"Sri Lanka",modelValue:a.value.recruitCountries,"onUpdate:modelValue":o[18]||(o[18]=l=>a.value.recruitCountries=l)},null,8,["modelValue"])]),_:1})],64)):G("",!0),r(i,{cols:"12"},{default:t(()=>[r(w,{type:"submit",class:"me-3"},{default:t(()=>[U(" Submit ")]),_:1}),r(w,{type:"reset",variant:"tonal",color:"error",onClick:y},{default:t(()=>[U(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{Xe as default};
