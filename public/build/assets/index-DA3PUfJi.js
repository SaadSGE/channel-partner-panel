import{_ as $}from"./AppCardActions-CLrm5x-n.js";import{_ as U}from"./TablePagination-swEBvePQ.js";import{_ as I}from"./AppTextField-CnwEBVtQ.js";import{_ as N}from"./AppSelect-BSpIYbp3.js";import{u as E}from"./rolePermission-B3iSjbEr.js";import{_ as z}from"./AddEditPermissionDialog-CzXhyzG9.js";import{S as _}from"./sweetalert2-z6gKu1nJ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as L}from"./VCardText-DYJRXWiR.js";import{V as H}from"./VSpacer-yMLGQxEy.js";import{r as i,w as M,H as O,a as Q,o as R,c as Y,b as o,e as a,d as c,a7 as j,v as q,x as G,a1 as V}from"./main-CpHMRegI.js";import{V as J}from"./VDataTableServer-B79M2aXO.js";import"./index-D1wMhv3I.js";import"./VCard-DU323yw9.js";import"./VAvatar-ByK8TLfF.js";import"./VImg-VuDMeB_W.js";import"./index-TmvMI5Gh.js";import"./VOverlay-DgCCgKW9.js";import"./easing-CjukEv2V.js";import"./lazy-CZ7hBknW.js";import"./scopeId-11ZwAH7l.js";import"./VDivider-BWvdxqvf.js";import"./VPagination-uJ_BTHTo.js";import"./form-Dqk-cy2_.js";import"./VTextField-BFFogjJp.js";/* empty css                   */import"./VCounter-R0U17ePR.js";import"./VField-BpyQI-aa.js";import"./VInput-CuZICg9D.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-Cak2_UbP.js";import"./VList-bDO2Ywqj.js";import"./ssrBoot-BpFV9X_u.js";import"./dialog-transition-DXaOTSrz.js";import"./VMenu-i0yaDKOL.js";import"./VCheckboxBtn-Bzg3yol5.js";import"./VSelectionControl-BoobZPwM.js";import"./VChip-C15vJjjm.js";import"./VSlideGroup-CstMTfmr.js";import"./helpers-D3Qj9y7W.js";import"./api-C2cEv5EJ.js";import"./index-Dz1rBMAR.js";import"./VForm-DyQZbs93.js";import"./VDialog-Dc6zw7fO.js";/* empty css              */import"./VDataTable-89fIheZt.js";import"./VTable-DvVALxgA.js";import"./filter-g7_iZzEX.js";const K={class:"permission-list-container"},W={class:"me-3 d-flex gap-3"},X={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Z={style:{"inline-size":"15.625rem"}},ee={class:"text-high-emphasis text-body-1"},te={class:"d-flex flex-column ms-3"},oe={__name:"index",setup(se){const g=E(),h=[{title:"Name",key:"name"},{title:"Actions",key:"actions",sortable:!1}],x=i([]),d=i(0),r=i(10),n=i(1),y=i("name"),b=i("asc"),u=i(""),v=i(!1),l=i(!1),f=i(null),m=async()=>{v.value=!0;try{const s=await g.getAllPermissionForTable({page:n.value,perPage:r.value,sortBy:y.value,orderBy:b.value,searchQuery:u.value});x.value=s.data,d.value=s.total}catch(s){console.error("Error fetching permissions:",s)}finally{v.value=!1}},B=s=>{var e,p;y.value=((e=s.sortBy[0])==null?void 0:e.key)||"name",b.value=((p=s.sortBy[0])==null?void 0:p.order)||"asc",m()},w=s=>{f.value={...s},l.value=!0},C=async s=>{if((await _.fire({title:"Are you sure?",text:"Do you want to delete this permission?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await g.deletePermission(s),m(),_.fire("Deleted!","The permission has been deleted.","success")}catch{_.fire("Error!","There was an error deleting the permission.","error")}},k=async()=>{m(),l.value=!1,f.value=null};return M([u],()=>{m()}),O(()=>{m()}),(s,e)=>{const p=N,S=I,P=Q("IconBtn"),T=U,A=$;return R(),Y("div",K,[o(A,{title:"Permission List",loading:v.value,"no-actions":""},{default:a(()=>[o(L,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[c("div",W,[o(p,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=parseInt(t,10))},null,8,["model-value"])]),o(H),c("div",X,[c("div",Z,[o(S,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),placeholder:"Search Permission"},null,8,["modelValue"])]),o(j,{density:"default","prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=t=>l.value=!0)},{default:a(()=>[q(" Add Permission ")]),_:1})])]),_:1}),o(J,{"items-per-page":r.value,"onUpdate:itemsPerPage":e[4]||(e[4]=t=>r.value=t),page:n.value,"onUpdate:page":e[5]||(e[5]=t=>n.value=t),items:x.value,"items-length":d.value,headers:h,class:"text-no-wrap color-black permission-table","onUpdate:options":B},{"item.name":a(({item:t})=>[c("div",ee,G(t.name),1)]),"item.actions":a(({item:t})=>[c("div",te,[o(P,{onClick:D=>w(t)},{default:a(()=>[o(V,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),o(P,{onClick:D=>C(t.id)},{default:a(()=>[o(V,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:a(()=>[o(T,{page:n.value,"onUpdate:page":e[3]||(e[3]=t=>n.value=t),"items-per-page":r.value,"total-items":d.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"]),o(z,{isDialogVisible:l.value,"onUpdate:isDialogVisible":e[6]||(e[6]=t=>l.value=t),permission:f.value,onSaved:k},null,8,["isDialogVisible","permission"])])}}},Xe=F(oe,[["__scopeId","data-v-b0026e3b"]]);export{Xe as default};
