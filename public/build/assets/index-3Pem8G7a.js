import{r as n}from"./validators-CZpaCUCV.js";import{k as Ue,r as o,a6 as Fe,w as Se,H as Te,a as oe,o as Q,c as Re,f as X,e as u,d as S,b as t,J as Ie,a2 as j,z as G,K as Ae,L as De,n as i,v as F,a9 as ue,a8 as re}from"./main-Bn7N3NvG.js";import{_ as Ee}from"./AppCardActions-DHx5gyBg.js";import{_ as _e}from"./TablePagination-MBn1udgI.js";import{_ as Be}from"./AppSelect-CdOzSNBp.js";import{_ as he}from"./AppTextField-FHOB24J6.js";import{_ as Ne}from"./AppAutocomplete-C1lHXICz.js";import{e as $e,_ as Me}from"./Filters-BKk4G58P.js";import{_ as ie}from"./ShowMore-Cm9XMsuj.js";import{u as Pe}from"./applicationList-0XE8kAmK.js";import{c as ze}from"./commonFunction-z8u_lMNh.js";import{u as Le}from"./recordStore-BEXDY-sX.js";/* empty css                         */import{S as Z}from"./sweetalert2-z6gKu1nJ.js";import{V as x,a as r}from"./VRow-D4rNl6Rs.js";import{V as O}from"./VInput-BQXqp1nY.js";import{V as ne}from"./VForm-Dn2io7Cf.js";import{V as se,b as Qe}from"./VCard-RkSWPWbO.js";import{V as je}from"./VCardText-BCUomBCf.js";import{V as Ge}from"./VDataTableServer-C8WxVDGQ.js";import"./helpers-BXUs3QXD.js";import"./index-C-d-RGG_.js";import"./dialog-transition-CzKY7LOL.js";import"./forwardRefs-D3j0TLhE.js";import"./scopeId-DB3P7OnF.js";import"./index-DHyAysHR.js";import"./VDivider-C5Lqhc7K.js";import"./VPagination-hGj95O27.js";import"./VSelect-CnfXuwCv.js";import"./VTextField-C6WJ4Lms.js";import"./VList-CK48eL9J.js";import"./ssrBoot-BiZZysHt.js";import"./VAvatar-DcHE5RhM.js";import"./VImg-CRMz--8Q.js";import"./VMenu-Cm-ub38I.js";import"./VCheckboxBtn-qMPYTT75.js";import"./VChip-Fk2lxuI6.js";import"./filter-DASC4bpv.js";import"./AppDateTimePicker-BqSXMgNu.js";import"./rolePermission-CAMk-PfI.js";import"./user-W_x7pRhC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */import"./VDataTable-Dll0x4AM.js";import"./VTable-D8uXeHAx.js";const Oe={key:0},Ye=S("span",null,"Edit Record",-1),He={class:"d-flex justify-space-between flex-wrap gap-6 mt-5"},Je={class:"d-flex flex-row gap-4 align-center flex-wrap"},Ke={class:"d-flex gap-1"},Ql={__name:"index",props:{userId:{type:String,default:null}},setup(We){Ue();const s=ze(),k=Le();Pe(),$e();const d=o("");o("");const m=o(""),V=o(""),v=o(""),p=o(""),y=o(""),g=o(""),ee=o(null);o();const Y=o(),H=o(),J=o(),de=o(),C=o(""),q=o(""),le=o(),K=o(),T=o(10),A=o(1);o(),o();const D=o(!0),E=o(!1),R=o(!0),I=o(null),te=o(null),me=o(!0);o(!1),o([]),o(0),o(),o(""),o(null);const ae=["Graduate","Post Graduate","Foundation (Pathway)","International Year One (Pathway)"],ve=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}],_=o(null),B=o(null),h=o(null),N=o("");o(null),o(null),o("");const $=o(null),M=o(null),P=o(null);Fe(()=>s.getFilteredCourseDetails(d.value,p.value,m.value,v.value));const w=async(a=1)=>{U.value=!0;const l=await k.fetchRecord(a,z.value,_.value,B.value,h.value,N.value,$.value,M.value,P.value);le.value=l.data,K.value=l.total,U.value=!1},W=async()=>{d.value="",m.value="",V.value="",v.value="",p.value="",y.value="",g.value="",C.value=`
`,q.value=`
`,await I.value.resetValidation()},pe=async()=>{if(await I.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:v.value,course:p.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:C.value,englishRequirement:q.value};await k.submitApplication(l)&&(console.log(k.successMessage),await W(),w(),R.value=!0)}catch(l){console.error("Form submission error:",k.errors,l)}await I.value.resetValidation()}},ce=async()=>{if(await te.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:v.value,course:p.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:C.value,englishRequirement:q.value},c=await k.submitEditApplication(ee.value,l);c&&(console.log(c),W(),E.value=!1,D.value=!0,w())}catch(l){console.error("Form submission error:",k.errors,l)}await I.value.resetValidation()}},fe=a=>{D.value=!1,ee.value=a.id,d.value=a.country_id,m.value=a.intake_id,V.value=a.course.type,v.value=a.university_id,p.value=a.course.name,y.value=a.tuition_fee,g.value=a.course_duration,C.value=a.academic_requirement,q.value=a.english_requirement,E.value=!0},Ve=()=>{E.value=!1,D.value=!0,W()},ye=()=>{R.value=!R.value},ge=async a=>{const l={...a};if((await Z.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await k.deleteRecord(l.id),w(),Z.fire("Deleted!","The item has been deleted.","success")}catch{Z.fire("Error!","There was an error deleting the item.","error")}},U=o(!1),z=o(""),Ce=a=>{w(a.page)};return Se([z,_,B,h,N,$,M,P],()=>{w()}),Te(async()=>{U.value=!0,s.countries.length===0&&await s.getCountries(),s.courses.length===0&&await s.getCourses(),s.intakes.length===0&&await s.getIntakes(),s.universities.length===0&&await s.getUniversities(),Y.value=s.countries,de.value=s.courses,H.value=s.intakes,J.value=s.universities,await w(),U.value=!1}),(a,l)=>{const c=oe("IconBtn"),f=Ne,b=he,L=oe("QuillEditor"),qe=Be,ke=_e,be=Ee;return me.value?(Q(),Re("div",Oe,[D.value?(Q(),X(se,{key:0,title:"Add Record"},{append:u(()=>[S("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(Q(),X(c,{key:0,onClick:ye},{default:u(()=>[t(j,{size:"20",icon:"tabler-chevron-up",style:Ie({transform:R.value?"rotate(-180deg)":void 0})},null,8,["style"])]),_:1})):G("",!0)])]),default:u(()=>[Ae(t(i(ne),{ref_key:"refForm",ref:I,onSubmit:re(()=>{},["prevent"]),class:"form-padding"},{default:u(()=>[t(x,null,{default:u(()=>[t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),items:Y.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),items:ae,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),items:J.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=e=>p.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"12",style:{margin:"auto"}},{default:u(()=>[t(O,{class:"mb-2"},{default:u(()=>[F("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[7]||(l[7]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(r,{cols:"12",md:"12",style:{margin:"auto"}},{default:u(()=>[t(O,{class:"mb-2"},{default:u(()=>[F("English Requirement")]),_:1}),t(L,{theme:"snow",content:q.value,"onUpdate:content":l[8]||(l[8]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(r,{cols:"12"},{default:u(()=>[t(ue,{onClick:l[9]||(l[9]=e=>pe()),type:"submit",color:"primary",block:""},{default:u(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[De,!R.value]])]),_:1})):G("",!0),E.value?(Q(),X(se,{key:1,class:"mt-2"},{default:u(()=>[t(Qe,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:u(()=>[Ye,t(c,{onClick:Ve},{default:u(()=>[t(j,{icon:"tabler-x"})]),_:1})]),_:1}),t(i(ne),{ref_key:"refFormEdit",ref:te,onSubmit:re(()=>{},["prevent"]),class:"form-padding"},{default:u(()=>[t(x,null,{default:u(()=>[t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=e=>d.value=e),items:Y.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e),items:H.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),items:ae,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(f,{modelValue:v.value,"onUpdate:modelValue":l[13]||(l[13]=e=>v.value=e),items:J.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:p.value,"onUpdate:modelValue":l[14]||(l[14]=e=>p.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"6"},{default:u(()=>[t(b,{modelValue:g.value,"onUpdate:modelValue":l[16]||(l[16]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"12",md:"12",style:{margin:"auto"}},{default:u(()=>[t(O,{class:"mb-2"},{default:u(()=>[F("Academic Requirement")]),_:1}),t(L,{theme:"snow",content:C.value,"onUpdate:content":l[17]||(l[17]=e=>C.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(r,{cols:"12",md:"12",style:{margin:"auto"}},{default:u(()=>[t(O,{class:"mb-2"},{default:u(()=>[F("English Requirement")]),_:1}),t(L,{theme:"snow",content:q.value,"onUpdate:content":l[18]||(l[18]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(r,{cols:"12"},{default:u(()=>[t(ue,{onClick:l[19]||(l[19]=e=>ce()),type:"submit",color:"primary",block:""},{default:u(()=>[F(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):G("",!0),t(be,{title:"Course Details",class:"mt-2",loading:U.value,"no-actions":""},{default:u(()=>[t(je,null,{default:u(()=>[t(x,null,{default:u(()=>[t(Me,{"selected-country":_.value,onUpdateCountry:l[20]||(l[20]=e=>_.value=e),"selected-intake":B.value,onUpdateIntake:l[21]||(l[21]=e=>B.value=e),"selected-university2":h.value,onUpdateUniversity2:l[22]||(l[22]=e=>h.value=e),"selected-courseName":N.value,onUpdateCourseName:l[23]||(l[23]=e=>N.value=e),"selected-dateFrom":M.value,onUpdateDateFrom:l[24]||(l[24]=e=>M.value=e),"selected-dateTo":P.value,onUpdateDateTo:l[25]||(l[25]=e=>P.value=e),"selected-editor":$.value,onUpdateEditor:l[26]||(l[26]=e=>$.value=e)},null,8,["selected-country","selected-intake","selected-university2","selected-courseName","selected-dateFrom","selected-dateTo","selected-editor"])]),_:1}),S("div",He,[S("div",null,[t(b,{modelValue:z.value,"onUpdate:modelValue":l[27]||(l[27]=e=>z.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Record"},null,8,["modelValue"])]),S("div",Je,[t(qe,{modelValue:T.value,"onUpdate:modelValue":l[28]||(l[28]=e=>T.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(Ge,{"items-per-page":T.value,"onUpdate:itemsPerPage":l[30]||(l[30]=e=>T.value=e),page:A.value,"onUpdate:page":l[31]||(l[31]=e=>A.value=e),loading:U.value,"items-length":K.value,headers:ve,items:le.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":Ce},{"item.academic_requirement":u(({item:e})=>[t(ie,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":u(({item:e})=>[t(ie,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:u(()=>[t(ke,{page:A.value,"onUpdate:page":l[29]||(l[29]=e=>A.value=e),"items-per-page":T.value,"total-items":K.value},null,8,["page","items-per-page","total-items"])]),"item.actions":u(({item:e})=>[S("div",Ke,[t(c,{onClick:we=>fe(e)},{default:u(()=>[t(j,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(c,{onClick:we=>ge(e)},{default:u(()=>[t(j,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items"])]),_:1},8,["loading"])])):G("",!0)}}};export{Ql as default};
