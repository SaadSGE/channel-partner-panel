import{r as n}from"./validators-DMAdxoaj.js";import{k as ye,r,a5 as ge,H as qe,a as W,o as B,c as be,f as G,e as o,d as _,b as t,J as Ce,a1 as D,z as M,K as ke,L as we,n as u,v as U,a7 as X,a6 as Z}from"./main-CI7cqQmu.js";import{_ as Ue}from"./AppCardActions-DyWd01F7.js";import{_ as _e}from"./TablePagination-D0sOsHcs.js";import{_ as Fe}from"./AppSelect-CGrTW4qd.js";import{_ as Re}from"./AppTextField-BgMVzjhm.js";import{_ as Se}from"./AppAutocomplete-BNAaxwp8.js";import{_ as x}from"./ShowMore-CKQvBDp3.js";import{c as he}from"./commonFunction-DRfxYnuB.js";import{u as Te}from"./recordStore-z19C4od6.js";/* empty css                         */import{S as H}from"./sweetalert2-z6gKu1nJ.js";import{V as ee,a as i}from"./VRow-D_bw-LeA.js";import{V as $}from"./form-BVoxWKEV.js";import{V as te}from"./VForm-B5Xl1FA6.js";import{V as le,b as Ae}from"./VCard-Cf4_qgxv.js";import{V as Ie}from"./VCardText-DZfy_Rv4.js";import{V as Ee}from"./VDataTableServer-DPcYZ5lv.js";import"./helpers-D1w8nmW1.js";import"./index-B1wexbwg.js";import"./VOverlay-yYNgwtxu.js";import"./easing-CjukEv2V.js";import"./lazy-Bk-4RCLW.js";import"./scopeId-CvFPnsJb.js";import"./index-B6Vh99Qb.js";import"./VDivider-DMJBUiY2.js";import"./VPagination-B-QBStXP.js";import"./VSelect-D4W3r2YB.js";import"./VTextField-CX1YN7H1.js";/* empty css                   */import"./VCounter-wsgXE4-H.js";import"./VField-DxlwWh6y.js";import"./VInput-1G8Ghd8F.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BiUuSPXD.js";import"./ssrBoot-BAQ8jU4G.js";import"./VAvatar-CNYpP6hL.js";import"./VImg-DqWFQaLG.js";import"./dialog-transition-DfQeTniO.js";import"./VMenu-G5HnfFBC.js";import"./VCheckboxBtn-Bw5_AlAC.js";import"./VSelectionControl-COpeYmnx.js";import"./VChip-CTz8yssI.js";import"./VSlideGroup-DYhhO-BK.js";import"./filter-A62FnCQQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./api-DfxwZSPq.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-LtDacBOk.js";import"./VTable-C3ll8jOK.js";const Be={key:0},De=_("span",null,"Edit Record",-1),Me={class:"d-flex justify-space-between flex-wrap gap-6"},$e={class:"d-flex flex-row gap-4 align-center flex-wrap"},Ne={class:"d-flex gap-1"},$t={__name:"index",setup(ze){ye();const s=he(),C=Te(),d=r("");r("");const m=r(""),V=r(""),p=r(""),v=r(""),y=r(""),g=r(""),J=r(null);r();const N=r(),z=r(),P=r(),ae=r(),q=r(""),b=r(""),K=r(),L=r(),F=r(10),T=r(1);r(),r();const A=r(!0),I=r(!1),R=r(!0),S=r(null),O=r(null),oe=r(!0);r(!1);const Y=["Graduate","Post Graduate"],re=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}];ge(()=>s.getFilteredCourseDetails(d.value,v.value,m.value,p.value));const h=async(a=1)=>{w.value=!0;const l=await C.fetchRecord(a,j.value);K.value=l.data,L.value=l.total,w.value=!1},Q=async()=>{d.value="",m.value="",V.value="",p.value="",v.value="",y.value="",g.value="",q.value=`
`,b.value=`
`,await S.value.resetValidation()},ie=async()=>{if(await S.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:b.value};await C.submitApplication(l)&&(console.log(C.successMessage),await Q(),h(),R.value=!0)}catch(l){console.error("Form submission error:",C.errors,l)}await S.value.resetValidation()}},ue=async()=>{if(await O.value.validate()){try{const l={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:b.value},c=await C.submitEditApplication(J.value,l);c&&(console.log(c),Q(),I.value=!1,A.value=!0,h())}catch(l){console.error("Form submission error:",C.errors,l)}await S.value.resetValidation()}},ne=a=>{A.value=!1,J.value=a.id,d.value=a.country_id,m.value=a.intake_id,V.value=a.course.type,p.value=a.university_id,v.value=a.course.name,y.value=a.tuition_fee,g.value=a.course_duration,q.value=a.academic_requirement,b.value=a.english_requirement,I.value=!0},se=()=>{I.value=!1,A.value=!0,Q()},de=()=>{R.value=!R.value},me=async a=>{const l={...a};if((await H.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await C.deleteRecord(l.id),h(),H.fire("Deleted!","The item has been deleted.","success")}catch{H.fire("Error!","There was an error deleting the item.","error")}},w=r(!1),j=r(""),pe=a=>{h(a.page)};return qe(async()=>{w.value=!0,s.countries.length===0&&await s.getCountries(),s.courses.length===0&&await s.getCourses(),s.intakes.length===0&&await s.getIntakes(),s.universities.length===0&&await s.getUniversities(),N.value=s.countries,ae.value=s.courses,z.value=s.intakes,P.value=s.universities,await h(),w.value=!1}),(a,l)=>{const c=W("IconBtn"),f=Se,k=Re,E=W("QuillEditor"),ve=Fe,ce=_e,fe=Ue;return oe.value?(B(),be("div",Be,[A.value?(B(),G(le,{key:0,title:"Add Record"},{append:o(()=>[_("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(B(),G(c,{key:0,onClick:de},{default:o(()=>[t(D,{size:"20",icon:"tabler-chevron-up",style:Ce([{transform:R.value?"rotate(-180deg)":void 0},{"transition-duration":"0.28s"}])},null,8,["style"])]),_:1})):M("",!0)])]),default:o(()=>[ke(t(u(te),{ref_key:"refForm",ref:S,onSubmit:Z(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),items:z.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),items:Y,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e),items:P.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[U("Academic Requirement")]),_:1}),t(E,{theme:"snow",content:q.value,"onUpdate:content":l[7]||(l[7]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[U("English Requirement")]),_:1}),t(E,{theme:"snow",content:b.value,"onUpdate:content":l[8]||(l[8]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(X,{onClick:l[9]||(l[9]=e=>ie()),type:"submit",color:"primary",block:""},{default:o(()=>[U(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[we,!R.value]])]),_:1})):M("",!0),I.value?(B(),G(le,{key:1,class:"mt-2"},{default:o(()=>[t(Ae,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[De,t(c,{onClick:se},{default:o(()=>[t(D,{icon:"tabler-x"})]),_:1})]),_:1}),t(u(te),{ref_key:"refFormEdit",ref:O,onSubmit:Z(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[t(ee,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=e=>d.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e),items:z.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),items:Y,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(f,{modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=e=>p.value=e),items:P.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:v.value,"onUpdate:modelValue":l[14]||(l[14]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:g.value,"onUpdate:modelValue":l[16]||(l[16]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[U("Academic Requirement")]),_:1}),t(E,{theme:"snow",content:q.value,"onUpdate:content":l[17]||(l[17]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[t($,{class:"mb-2"},{default:o(()=>[U("English Requirement")]),_:1}),t(E,{theme:"snow",content:b.value,"onUpdate:content":l[18]||(l[18]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(X,{onClick:l[19]||(l[19]=e=>ue()),type:"submit",color:"primary",block:""},{default:o(()=>[U(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):M("",!0),t(fe,{title:"Course Details",class:"mt-2",loading:w.value,"no-actions":""},{default:o(()=>[t(Ie,null,{default:o(()=>[_("div",Me,[_("div",null,[t(k,{modelValue:j.value,"onUpdate:modelValue":l[20]||(l[20]=e=>j.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Record"},null,8,["modelValue"])]),_("div",$e,[t(ve,{modelValue:F.value,"onUpdate:modelValue":l[21]||(l[21]=e=>F.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),t(Ee,{"items-per-page":F.value,"onUpdate:itemsPerPage":l[23]||(l[23]=e=>F.value=e),page:T.value,"onUpdate:page":l[24]||(l[24]=e=>T.value=e),loading:w.value,"items-length":L.value,headers:re,items:K.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":pe},{"item.academic_requirement":o(({item:e})=>[t(x,{text:e.academic_requirement,lines:3},null,8,["text"])]),"item.english_requirement":o(({item:e})=>[t(x,{text:e.english_requirement,lines:3},null,8,["text"])]),bottom:o(()=>[t(ce,{page:T.value,"onUpdate:page":l[22]||(l[22]=e=>T.value=e),"items-per-page":F.value,"total-items":L.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[_("div",Ne,[t(c,{onClick:Ve=>ne(e)},{default:o(()=>[t(D,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(c,{onClick:Ve=>me(e)},{default:o(()=>[t(D,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items"])]),_:1},8,["loading"])])):M("",!0)}}};export{$t as default};
