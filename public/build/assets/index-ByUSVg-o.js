import{r as s}from"./validators-DpYrMFzk.js";import{k as pe,r,a5 as ve,H as ce,a as Y,o as D,c as fe,f as H,e as o,z as E,b as l,d as C,J as Ve,a1 as B,K as ye,L as ge,n as u,v as U,a7 as W,a6 as X}from"./main-CuEp2Rjo.js";import{_ as qe}from"./TablePagination-r2rd_8UA.js";import{_ as be}from"./AppSelect-CK3YLZMe.js";import{_ as Ce}from"./AppTextField-BVNxjqao.js";import{_ as ke}from"./AppAutocomplete-B7Kxhu9p.js";import{c as we}from"./commonFunction-BdROjd8S.js";import{u as Ue}from"./vue-quill.bubble-Coz2wkEQ.js";import{S as Q}from"./sweetalert2-z6gKu1nJ.js";import{V as j,b as he}from"./VCard-BVEqIz-p.js";import{V as Z,a as i}from"./VRow-DJ5aEklL.js";import{V as M}from"./form-DbKLid4n.js";import{V as x}from"./VForm-CJCFj_KU.js";import{V as Fe}from"./VCardText-Bdy8NZrz.js";import{V as Te}from"./VDataTableServer-D9j6VT0-.js";import"./helpers-DK5QwNv0.js";import"./VDivider-DG0YTSCw.js";import"./VPagination-BVzTgtNm.js";import"./VSelect-CF8ATe9U.js";import"./VTextField-xI21LEdg.js";/* empty css                   */import"./VCounter-A9YJsj8n.js";import"./index-CQmDit-b.js";import"./index-Cv7X9AIL.js";import"./VField-FTOm8unL.js";import"./easing-CjukEv2V.js";import"./VInput-CDNNT-Hk.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-MKhZ7x0S.js";import"./ssrBoot-3OsFGZTR.js";import"./VAvatar-CPafjVa_.js";import"./VImg-CK9dEQAx.js";import"./dialog-transition-x37-8tAM.js";import"./VMenu-SXC3SDo7.js";import"./VOverlay-Bes2Jd1c.js";import"./lazy-DVaafe-Q.js";import"./scopeId-BlR2pDqp.js";import"./VCheckboxBtn-adPms6nT.js";import"./VSelectionControl-Jfv2ejNW.js";import"./VChip-BwS_ylbY.js";import"./VSlideGroup-C2-osNAb.js";import"./filter-CyHxoQUj.js";import"./api-E0f4vSzX.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-Cz6y4maS.js";import"./VTable-nca1m5Ub.js";const Re={key:0},Se=C("span",null,"Edit Record",-1),Ae={class:"d-flex justify-space-between flex-wrap gap-6"},Ie={class:"d-flex flex-row gap-4 align-center flex-wrap"},_e=["innerHTML"],De=["innerHTML"],Ee={class:"d-flex gap-1"},Sl={__name:"index",setup(Be){pe();const n=we(),k=Ue(),d=r("");r("");const m=r(""),V=r(""),p=r(""),v=r(""),y=r(""),g=r(""),G=r(null);r();const L=r(),$=r(),N=r(),ee=r(),q=r(""),b=r(""),J=r(),z=r(),h=r(10),R=r(1);r(),r();const S=r(!0),A=r(!1),F=r(!0),T=r(null),K=r(null),le=r(!0);r(!1);const O=["Graduate","Post Graduate"],te=[{title:"Country",key:"country.name"},{title:"Intake",key:"intake.name"},{title:"University",key:"university.name"},{title:"Course Type",key:"course.type"},{title:"Course Name",key:"course.name"},{title:"Tution Fee",key:"tuition_fee"},{title:"Course Duration",key:"course_duration"},{title:"Academic Requirement",key:"academic_requirement"},{title:"English Requirement",key:"english_requirement"},{title:"Actions",key:"actions",sortable:!1}];ve(()=>n.getFilteredCourseDetails(d.value,v.value,m.value,p.value));const I=async()=>{const a=await k.fetchRecord();J.value=a.data,z.value=a.total},P=async()=>{d.value="",m.value="",V.value="",p.value="",v.value="",y.value="",g.value="",q.value=`
`,b.value=`
`,await T.value.resetValidation()},ae=async()=>{if(await T.value.validate()){try{const t={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:b.value};await k.submitApplication(t)&&(console.log(k.successMessage),await P(),I(),F.value=!0)}catch(t){console.error("Form submission error:",k.errors,t)}await T.value.resetValidation()}},oe=async()=>{if(await K.value.validate()){try{const t={countryId:d.value,intakeId:m.value,courseType:V.value,universityId:p.value,course:v.value,tutionFee:y.value,courseDuration:g.value,academicRequirement:q.value,englishRequirement:b.value},c=await k.submitEditApplication(G.value,t);c&&(console.log(c),P(),A.value=!1,S.value=!0,I())}catch(t){console.error("Form submission error:",k.errors,t)}await T.value.resetValidation()}},re=a=>{S.value=!1,G.value=a.id,d.value=a.country_id,m.value=a.intake_id,V.value=a.course.type,p.value=a.university_id,v.value=a.course.name,y.value=a.tuition_fee,g.value=a.course_duration,q.value=a.academic_requirement,b.value=a.english_requirement,A.value=!0},ie=()=>{A.value=!1,S.value=!0,P()},ue=()=>{F.value=!F.value},ne=async a=>{const t={...a};if((await Q.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await k.deleteRecord(t.id),I(),Q.fire("Deleted!","The item has been deleted.","success")}catch{Q.fire("Error!","There was an error deleting the item.","error")}};return ce(async()=>{n.countries.length===0&&await n.getCountries(),n.courses.length===0&&await n.getCourses(),n.intakes.length===0&&await n.getIntakes(),n.universities.length===0&&await n.getUniversities(),n.courseDetails.length===0&&await n.getCourseDetails(),L.value=n.countries,ee.value=n.courses,$.value=n.intakes,N.value=n.universities,await I()}),(a,t)=>{const c=Y("IconBtn"),f=ke,w=Ce,_=Y("QuillEditor"),se=be,de=qe;return le.value?(D(),fe("div",Re,[S.value?(D(),H(j,{key:0,title:"Add Record"},{append:o(()=>[C("div",null,[(!(a.actionRemove||a.actionRefresh)||a.actionCollapsed)&&!a.noActions?(D(),H(c,{key:0,onClick:ue},{default:o(()=>[l(B,{size:"20",icon:"tabler-chevron-up",style:Ve([{transform:F.value?"rotate(-180deg)":void 0},{"transition-duration":"0.28s"}])},null,8,["style"])]),_:1})):E("",!0)])]),default:o(()=>[ye(l(u(x),{ref_key:"refForm",ref:T,onSubmit:X(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[l(Z,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),items:L.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),items:$.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),items:O,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(M,{class:"mb-2"},{default:o(()=>[U("Academic Requirement")]),_:1}),l(_,{theme:"snow",content:q.value,"onUpdate:content":t[7]||(t[7]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(M,{class:"mb-2"},{default:o(()=>[U("English Requirement")]),_:1}),l(_,{theme:"snow",content:b.value,"onUpdate:content":t[8]||(t[8]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(W,{onClick:t[9]||(t[9]=e=>ae()),type:"submit",color:"primary",block:""},{default:o(()=>[U(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512),[[ge,!F.value]])]),_:1})):E("",!0),A.value?(D(),H(j,{key:1,class:"mt-2"},{default:o(()=>[l(he,{class:"d-flex justify-space-between align-center mt-2 mb-2"},{default:o(()=>[Se,l(c,{onClick:ie},{default:o(()=>[l(B,{icon:"tabler-x"})]),_:1})]),_:1}),l(u(x),{ref_key:"refFormEdit",ref:K,onSubmit:X(()=>{},["prevent"]),class:"form-padding"},{default:o(()=>[l(Z,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:d.value,"onUpdate:modelValue":t[10]||(t[10]=e=>d.value=e),items:L.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Country to Apply",placeholder:"Select Country",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:m.value,"onUpdate:modelValue":t[11]||(t[11]=e=>m.value=e),items:$.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Intake",placeholder:"Select Intake",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:V.value,"onUpdate:modelValue":t[12]||(t[12]=e=>V.value=e),items:O,label:"Course Type",placeholder:"Select Course Type",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:p.value,"onUpdate:modelValue":t[13]||(t[13]=e=>p.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","items","item-title","item-value","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:v.value,"onUpdate:modelValue":t[14]||(t[14]=e=>v.value=e),label:"Course Name.",placeholder:"BSC in Machine Learning",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:y.value,"onUpdate:modelValue":t[15]||(t[15]=e=>y.value=e),label:"Tuttion Fee (Mention euro or dollar)",placeholder:"1000 euro",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(w,{modelValue:g.value,"onUpdate:modelValue":t[16]||(t[16]=e=>g.value=e),label:"Course Duration (Mention years)",placeholder:"2 years",rules:["requiredValidator"in a?a.requiredValidator:u(s)]},null,8,["modelValue","rules"])]),_:1}),l(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(M,{class:"mb-2"},{default:o(()=>[U("Academic Requirement")]),_:1}),l(_,{theme:"snow",content:q.value,"onUpdate:content":t[17]||(t[17]=e=>q.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(i,{cols:"12",md:"12",style:{margin:"auto"}},{default:o(()=>[l(M,{class:"mb-2"},{default:o(()=>[U("English Requirement")]),_:1}),l(_,{theme:"snow",content:b.value,"onUpdate:content":t[18]||(t[18]=e=>b.value=e),"content-type":"html"},null,8,["content"])]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(W,{onClick:t[19]||(t[19]=e=>oe()),type:"submit",color:"primary",block:""},{default:o(()=>[U(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})):E("",!0),l(j,{title:"Course Details",class:"mt-2"},{default:o(()=>[l(Fe,null,{default:o(()=>[C("div",Ae,[C("div",null,[l(w,{modelValue:a.searchQuery,"onUpdate:modelValue":t[20]||(t[20]=e=>a.searchQuery=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search Review"},null,8,["modelValue"])]),C("div",Ie,[l(se,{modelValue:h.value,"onUpdate:modelValue":t[21]||(t[21]=e=>h.value=e),items:[10,25,50,100],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])])])]),_:1}),l(Te,{"items-per-page":h.value,"onUpdate:itemsPerPage":t[23]||(t[23]=e=>h.value=e),page:R.value,"onUpdate:page":t[24]||(t[24]=e=>R.value=e),loading:a.isLoading,"items-length":z.value,headers:te,items:J.value,"item-value":"total",class:"text-no-wrap text-sm rounded-0","onUpdate:options":a.updateOptions},{"item.academic_requirement":o(({item:e})=>[C("div",{innerHTML:e.academic_requirement},null,8,_e)]),"item.english_requirement":o(({item:e})=>[C("div",{innerHTML:e.english_requirement},null,8,De)]),bottom:o(()=>[l(de,{page:R.value,"onUpdate:page":t[22]||(t[22]=e=>R.value=e),"items-per-page":h.value,"total-items":z.value},null,8,["page","items-per-page","total-items"])]),"item.actions":o(({item:e})=>[C("div",Ee,[l(c,{onClick:me=>re(e)},{default:o(()=>[l(B,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),l(c,{onClick:me=>ne(e)},{default:o(()=>[l(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","loading","items-length","items","onUpdate:options"])]),_:1})])):E("",!0)}}};export{Sl as default};
