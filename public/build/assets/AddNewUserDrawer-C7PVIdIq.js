import{r as s,e as E,c as O}from"./validators-VhKTRXrB.js";import{k as L,r as v,H as T,a as G,o as y,f as $,e as t,b as e,a6 as M,n as d,c as I,F as H,z as K,a7 as C,v as q,d as W,aA as U}from"./main-CQ6RMw7f.js";import{_ as j}from"./AppAutocomplete-Dar7kHOk.js";import{_ as z}from"./AppSelect-CrXdMY5U.js";import{_ as J}from"./AppTextField-hIpFVjuE.js";import{_ as Y}from"./AppDrawerHeaderSection-DdaEgWLI.js";import{u as Q}from"./auth-DThyLz_r.js";import{u as X}from"./rolePermission-BMgqJ2wX.js";import{S}from"./sweetalert2-z6gKu1nJ.js";import{P as Z}from"./vue3-perfect-scrollbar.esm-Bt2YSqJ4.js";import{V as _}from"./VNavigationDrawer-Bx0d8qnj.js";import{V as x}from"./VDivider-CsUZ561O.js";import{V as ee}from"./VCard-C8q_2osi.js";import{V as le}from"./VCardText-xoAlKIWP.js";import{V as ae}from"./VForm-DfslaEto.js";import{V as oe,a as i}from"./VRow-CSU18vtN.js";import{V as m}from"./VCheckbox-CG0pXWXL.js";import"./helpers-C9clgyYz.js";import"./form-B_fNFqDw.js";import"./VSelect-dwG4NO4N.js";import"./VTextField-BHXOjBSY.js";/* empty css                   */import"./VCounter-ZgHqPkAu.js";import"./index-CwnywqzV.js";import"./index-DM6_xADK.js";import"./VField-DUMgpBpA.js";import"./easing-CjukEv2V.js";import"./VInput-Ci-kqC-J.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BiOGhJ_q.js";import"./ssrBoot-DAFxA7I2.js";import"./VAvatar-0EHHS55N.js";import"./VImg-DGinniAa.js";import"./dialog-transition-DDVpsMxv.js";import"./VMenu-B7foPuod.js";import"./VOverlay-D5Xfs2VH.js";import"./lazy-BAvFpwwL.js";import"./scopeId-H0xqO7oH.js";import"./VCheckboxBtn-BmoCuxXl.js";import"./VSelectionControl-Bs7AgJ4D.js";import"./VChip-Nwakbiva.js";import"./VSlideGroup-DkDQ_wPQ.js";import"./filter-DwGnFa4L.js";import"./VSpacer-CHwqjbcZ.js";/* empty css              */import"./api-Bx-mEsKr.js";import"./index-B3bPRkoL.js";const re=W("label",null,"Country Recruit For",-1),_e={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(g,{emit:D}){const k=g,p=D,c=X(),B=Q();L();const b=v(!1),n=v(),w=v([]),o=v({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",mobileNumber:"",whatsappNumber:"",companyName:"",website:"",address:"",city:"",postCode:"",country:"",role:"",plan:"",status:"",recruitCountries:[],avatar:"",createForm:"admin"});T(async()=>{await c.getAllRoles(),w.value=c.roles});const N=()=>{p("update:isDrawerOpen",!1),U(()=>{var l,a;(l=n.value)==null||l.reset(),(a=n.value)==null||a.resetValidation()})},h=l=>l?l.toLowerCase():"",A=async()=>{var l;(l=n.value)==null||l.validate().then(async({valid:a})=>{var V;if(a)try{await B.register(o.value),S.fire({icon:"success",title:"Registration Successful",text:"You have been registered successfully!",confirmButtonText:"OK"}),p("userData",o.value),p("update:isDrawerOpen",!1),U(()=>{var u,f;(u=n.value)==null||u.reset(),(f=n.value)==null||f.resetValidation()})}catch(u){console.error("Error in registration:",u),S.fire({icon:"error",title:"Registration Failed",text:((V=u.response)==null?void 0:V.data.message)||"An unexpected error occurred",confirmButtonText:"OK"})}})},F=l=>{p("update:isDrawerOpen",l)};return(l,a)=>{const V=Y,u=J,f=z,P=j,R=G("VCheckboxGroup");return y(),$(_,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":k.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[e(V,{title:"Add New User",onCancel:N}),e(x),e(d(Z),{options:{wheelPropagation:!1}},{default:t(()=>[e(ee,{flat:""},{default:t(()=>[e(le,null,{default:t(()=>[e(ae,{ref_key:"refForm",ref:n,modelValue:b.value,"onUpdate:modelValue":a[15]||(a[15]=r=>b.value=r),onSubmit:M(A,["prevent"])},{default:t(()=>[e(oe,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:o.value.firstName,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value.firstName=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"First Name",placeholder:"John"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:o.value.lastName,"onUpdate:modelValue":a[1]||(a[1]=r=>o.value.lastName=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"Last Name",placeholder:"Doe"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.email,"onUpdate:modelValue":a[2]||(a[2]=r=>o.value.email=r),rules:["requiredValidator"in l?l.requiredValidator:d(s),"emailValidator"in l?l.emailValidator:d(E)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:o.value.password,"onUpdate:modelValue":a[3]||(a[3]=r=>o.value.password=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"Password",type:"password",placeholder:"Enter your password"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":a[4]||(a[4]=r=>o.value.confirmPassword=r),rules:["requiredValidator"in l?l.requiredValidator:d(s),("confirmedValidator"in l?l.confirmedValidator:d(O))(o.value.confirmPassword,o.value.password)],label:"Confirm Password",type:"password",placeholder:"Confirm your password"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.mobileNumber,"onUpdate:modelValue":a[5]||(a[5]=r=>o.value.mobileNumber=r),label:"Mobile Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.whatsappNumber,"onUpdate:modelValue":a[6]||(a[6]=r=>o.value.whatsappNumber=r),label:"WhatsApp Number (optional)",type:"tel",placeholder:"+1-541-754-3010"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(f,{modelValue:o.value.role,"onUpdate:modelValue":a[7]||(a[7]=r=>o.value.role=r),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in l?l.requiredValidator:d(s)],items:w.value,"item-title":r=>r.role,"item-value":r=>r.role},null,8,["modelValue","rules","items","item-title","item-value"])]),_:1}),h(o.value.role)==="channel partner"?(y(),I(H,{key:0},[e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.companyName,"onUpdate:modelValue":a[8]||(a[8]=r=>o.value.companyName=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.website,"onUpdate:modelValue":a[9]||(a[9]=r=>o.value.website=r),label:"Website",placeholder:"Enter website URL"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.address,"onUpdate:modelValue":a[10]||(a[10]=r=>o.value.address=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"Address",placeholder:"Enter address"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.city,"onUpdate:modelValue":a[11]||(a[11]=r=>o.value.city=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"City",placeholder:"Enter city"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(u,{modelValue:o.value.postCode,"onUpdate:modelValue":a[12]||(a[12]=r=>o.value.postCode=r),rules:["requiredValidator"in l?l.requiredValidator:d(s)],label:"Post Code",placeholder:"Enter post code"},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{modelValue:o.value.country,"onUpdate:modelValue":a[13]||(a[13]=r=>o.value.country=r),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in l?l.requiredValidator:d(s)],items:["India","Bangladesh","Nigeria","Nepal","Bhutan","Ghana","Sri Lanka"]},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[re,e(R,{modelValue:o.value.recruitCountries,"onUpdate:modelValue":a[14]||(a[14]=r=>o.value.recruitCountries=r)},{default:t(()=>[e(m,{value:"Nigeria",label:"Nigeria"}),e(m,{value:"India",label:"India"}),e(m,{value:"Bangladesh",label:"Bangladesh"}),e(m,{value:"Nepal",label:"Nepal"}),e(m,{value:"Bhutan",label:"Bhutan"}),e(m,{value:"Ghana",label:"Ghana"}),e(m,{value:"Sri Lanka",label:"Sri Lanka"})]),_:1},8,["modelValue"])]),_:1})],64)):K("",!0),e(i,{cols:"12"},{default:t(()=>[e(C,{type:"submit",class:"me-3"},{default:t(()=>[q(" Submit ")]),_:1}),e(C,{type:"reset",variant:"tonal",color:"error",onClick:N},{default:t(()=>[q(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{_e as default};
