import{_ as T}from"./AppCardActions-CoqUtthT.js";import{_ as U}from"./TablePagination-CViHA-yz.js";import{_ as $}from"./AppTextField-DrmolqLU.js";import{_ as E}from"./AppSelect-CyvI6GiH.js";import{u as L}from"./applicationList-BlGsI8M8.js";import{S as f}from"./sweetalert2-z6gKu1nJ.js";import{k as R,r as n,w as z,H as O,a as Q,o as j,c as q,b as o,e as s,d as i,x as l,y as F,v as H,a1 as A}from"./main-XJa5aX3I.js";import{V as M}from"./VCardText-P6OX4H04.js";import{V as Y}from"./VSpacer-CFgU9INv.js";import{V as G}from"./VDataTableServer-COWYxqZn.js";import{V as J}from"./VChip-DdQTJchV.js";import"./index-zEe2giix.js";import"./VCard-BFoj9BhB.js";import"./VAvatar-CX5r16Ti.js";import"./VImg-3ZTHbjf_.js";import"./index-zwv73YjU.js";import"./VOverlay-Bi2A_5bs.js";import"./easing-CjukEv2V.js";import"./lazy-BiNEa39J.js";import"./scopeId-CT2whC_9.js";import"./VDivider-BtvMDquf.js";import"./VPagination-BLWS_rEt.js";import"./form-Z5tG_ZG7.js";import"./VTextField-CSD0oQBT.js";/* empty css                   */import"./VCounter-Mm2vdIyV.js";import"./VField-Cobw2p2R.js";import"./VInput-BC1HEXL1.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-BKMDYlsV.js";import"./VList-D6tzqEvZ.js";import"./ssrBoot-Cs4BXTlO.js";import"./dialog-transition-CTiuRszX.js";import"./VMenu-Cpqavgja.js";import"./VCheckboxBtn-CP-3PHGB.js";import"./VSelectionControl-D6l_27o_.js";import"./api-J8nRVKeM.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-BJG3lirU.js";import"./VTable-DmShKz6R.js";import"./filter-Cav6n7Bq.js";import"./VSlideGroup-B-IflH2w.js";const K={class:"me-3 d-flex gap-3"},W={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},X={style:{"inline-size":"15.625rem"}},Z={class:"d-flex flex-column ms-3"},ee={class:"d-block font-weight-medium text-truncate text-high-emphasis"},te={class:"text-md"},ae={class:"text-md"},oe={class:"d-flex flex-column ms-3"},Ge={__name:"index",setup(se){const v=L(),C=R(),_=n([]),u=n(0),r=n(10),p=n(1),g=n(),y=n(),h=n(""),d=n(!1),c=async()=>{d.value=!0;try{const t=await v.getApplicationList({id:null,page:p.value,itemsPerPage:r.value,sortBy:g.value,orderBy:y.value,search:h.value});_.value=t.data,u.value=t.total}catch(t){console.error("Error fetching applications:",t)}finally{d.value=!1}},k=t=>{var a,m;g.value=(a=t.sortBy[0])==null?void 0:a.key,y.value=(m=t.sortBy[0])==null?void 0:m.order,c()},S=t=>{C.push({name:"application-details",params:{id:t}})},B=async t=>{if((await f.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await v.deleteItem(t),c(),f.fire("Deleted!","The item has been deleted.","success")}catch{f.fire("Error!","There was an error deleting the item.","error")}};z([h],()=>{c()}),O(()=>{c()});const V=[{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}],x=t=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[t]||"secondary",P=t=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[t]||"Unknown Status";return(t,a)=>{const m=E,I=$,w=Q("IconBtn"),b=U,D=T;return j(),q("div",null,[o(D,{title:"New Application",loading:d.value,"no-actions":""},{default:s(()=>[o(M,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[i("div",K,[o(m,{"model-value":r.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),o(Y),i("div",W,[i("div",X,[o(I,{modelValue:t.searchQuery,"onUpdate:modelValue":a[1]||(a[1]=e=>t.searchQuery=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),o(G,{"items-per-page":r.value,"onUpdate:itemsPerPage":a[3]||(a[3]=e=>r.value=e),page:p.value,"onUpdate:page":a[4]||(a[4]=e=>p.value=e),items:_.value,"items-length":u.value,headers:V,class:"text-no-wrap color-black","onUpdate:options":k},{"item.student.name":s(({item:e})=>[i("p",null,l(e.student.first_name)+" "+l(e.student.last_name),1)]),"item.university.name":s(({item:e})=>[i("div",Z,[i("span",ee,l(e.university.name),1),i("span",te,l(e.course.name),1),i("span",ae,l(e.intake.name),1)])]),"item.status":s(({item:e})=>[o(J,{color:x(e.status),class:F([`text-${x(e.status)}`,"font-weight-medium"]),size:"small"},{default:s(()=>[H(l(P(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":s(({item:e})=>[i("div",oe,[o(w,{onClick:N=>S(e.id)},{default:s(()=>[o(A,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),o(w,{onClick:N=>B(e.id)},{default:s(()=>[o(A,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:s(()=>[o(b,{page:p.value,"onUpdate:page":a[2]||(a[2]=e=>p.value=e),"items-per-page":r.value,"total-items":u.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"])])}}};export{Ge as default};
