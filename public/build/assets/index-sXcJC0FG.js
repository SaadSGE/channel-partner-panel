import{_ as ie}from"./AppCardActions-DweEdVXe.js";import{_ as se}from"./TablePagination-i6EOHHcV.js";import{_ as ne}from"./AppTextField-Df2aV9v4.js";import{_ as re}from"./AppSelect-7iWA4s_V.js";import{_ as me}from"./AppDateTimePicker-Bp0eXuN5.js";import{_ as ce}from"./AppAutocomplete-5GD2ryV-.js";import{u as L}from"./applicationList-Cjcje2Nf.js";import{c as ue}from"./commonFunction-CHP29IKT.js";import{u as de}from"./user-5TalWUBX.js";import{S as w}from"./sweetalert2-z6gKu1nJ.js";import{k as pe,r as o,w as fe,H as ve,a5 as _e,a as ge,o as A,c as he,b as a,e as i,f as k,z as b,d as s,x as m,y as ye,v as Ve,a1 as F}from"./main-ofHzgIAY.js";import{g as Ae}from"./helpers-BcZI4T5C.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as z}from"./VCardText-BfSV67Nj.js";import{V as Se,a as u}from"./VRow-BSMepRMa.js";import{V as Ce}from"./VSpacer-DJOSrz1J.js";import{V as we}from"./VDataTableServer-loj4mDA_.js";import{V as ke}from"./VChip-DRKWAif9.js";import"./index-B9Ps0IRj.js";import"./VCard-Dcfg7l83.js";import"./VAvatar-tRwKVM80.js";import"./VImg-2bZ6XQLP.js";import"./index-kQF1U3eN.js";import"./VOverlay-D6YSy_Pa.js";import"./easing-CjukEv2V.js";import"./lazy-BFXR_E98.js";import"./scopeId-BX1eUjKx.js";import"./VDivider-DuvArqZJ.js";import"./VPagination-iHEmpdX3.js";import"./form-CosX4zmS.js";import"./VTextField-xb93RgJj.js";/* empty css                   */import"./VCounter-DcoedzX4.js";import"./VField-CDlTq_pO.js";import"./VInput-XIWcCdwi.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-6arwgXOc.js";import"./VList-Chc-hTfA.js";import"./ssrBoot-CIGOgPPG.js";import"./dialog-transition-Cy9-7ZDO.js";import"./VMenu-CWgYdbXL.js";import"./VCheckboxBtn-C1PsweD_.js";import"./VSelectionControl-Bdfhjnto.js";import"./filter-D2fhUCr4.js";import"./api-BvrX7M5n.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VDataTable-BkB7kdrU.js";import"./VTable-BUuX575e.js";import"./VSlideGroup-DDsmIB84.js";const be={class:"application-list-container"},Pe={class:"me-3 d-flex gap-3"},Ue={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},De={style:{"inline-size":"15.625rem"}},Ie={class:"d-flex flex-column"},Be={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Te={class:"text-md"},Ne={class:"d-flex flex-column ms-3"},Oe={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Re={class:"text-md"},$e={class:"text-md"},Ee={class:"d-flex flex-column ms-3"},Le={__name:"index",props:{userId:{type:String,default:null}},setup(j){const P=L(),U=de(),q=pe(),x=o(Ae()==="admin"),D=o([]),S=o(0),c=o(10),d=o(1),I=o(),B=o(),p=o(""),f=o(null),v=o(null),_=o(null),g=o(null),T=o(""),h=o(null),y=o(null),C=o(!1),N=o([]),O=o([]),R=o([]);L();const H=ue(),M=o([{id:0,name:"Application Processing"},{id:1,name:"Application Submitted"},{id:2,name:"Pending Docs"},{id:3,name:"Offer Issue Conditional"},{id:4,name:"Offer Issue Unconditional"},{id:5,name:"Need Payment"},{id:6,name:"CAS Issued"},{id:7,name:"Additional Doc Needed"},{id:8,name:"Refund Required"},{id:9,name:"Application Rejected"},{id:10,name:"Session Expired"},{id:11,name:"Doc Received"},{id:12,name:"Partial Payment"}]),Y=j,V=async()=>{C.value=!0;try{const l=await P.getApplicationList(Y.userId,d.value,c.value,p.value,I.value,B.value,f.value,v.value,_.value,g.value,T.value,h.value,y.value);D.value=l.data,S.value=l.total}catch(l){console.error("Error fetching applications:",l)}finally{C.value=!1}},G=l=>{var t,r;I.value=(t=l.sortBy[0])==null?void 0:t.key,B.value=(r=l.sortBy[0])==null?void 0:r.order,V()},J=l=>{q.push({name:"application-details",params:{id:l}})},K=async l=>{if((await w.fire({title:"Are you sure?",text:"Do you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await P.deleteItem(l),V(),w.fire("Deleted!","The item has been deleted.","success")}catch{w.fire("Error!","There was an error deleting the item.","error")}},Q=async()=>{try{const l=await H.getUniversities();N.value=l.data.map(n=>({id:n.id,name:n.name}));const t=await U.fetchUsers(1,"","channel partner","",!0);O.value=t.data.map(n=>({id:n.id,name:n.company_name_with_email}));const r=await U.fetchUsers(1,"","application control officer","",!0);R.value=r.data.map(n=>({id:n.id,name:n.name_with_email}))}catch(l){console.error("Error fetching filter options:",l)}};fe([p,f,v,_,g,T,h,y],()=>{V()}),ve(()=>{Q(),V()});const W=o([{title:"APPLICATION ID",key:"application_id"},{title:"Student Name",key:"student.name"},{title:"Student Email",key:"student.email"},...x.value?[{title:"Application Officer",key:"user.parent.email"}]:[],{title:"Channel Partner",key:"user.email"},{title:"University/Course Details",key:"university.name"},{title:"Status",key:"status"},{title:"Date Added",key:"created_at"},{title:"Action",key:"action",sortable:!1}]),$=l=>({0:"primary",1:"success",2:"warning",3:"info",4:"info",5:"warning",6:"success",7:"warning",8:"danger",9:"danger",10:"secondary",11:"success",12:"warning"})[l]||"secondary",X=l=>({0:"Application Processing",1:"Application Submitted",2:"Pending Docs",3:"Offer Issue Conditional",4:"Offer Issue Unconditional",5:"Need Payment",6:"CAS Issued",7:"Additional Doc Needed",8:"Refund Required",9:"Application Rejected",10:"Session Expired",11:"Doc Received",12:"Partial Payment"})[l]||"Unknown Status",Z=_e(()=>"calc(100vh - 200px)");return(l,t)=>{const r=ce,n=me,ee=re,te=ne,E=ge("IconBtn"),ae=se,le=ie;return A(),he("div",be,[a(le,{title:"Application List",loading:C.value,"no-actions":""},{default:i(()=>[a(z,null,{default:i(()=>[a(Se,null,{default:i(()=>[a(u,{cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),items:M.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Status",placeholder:"Select Status",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),x.value?(A(),k(u,{key:0,cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),items:O.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Channel Partner",placeholder:"Select Channel Partner",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):b("",!0),a(u,{cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),items:N.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"University",placeholder:"Select University",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),x.value?(A(),k(u,{key:1,cols:"12",md:"3"},{default:i(()=>[a(r,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),items:R.value,"item-title":e=>e.name,"item-value":e=>e.id,label:"Application Officer",placeholder:"Select Application Officer",clearable:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})):b("",!0),a(u,{cols:"12",md:"3"},{default:i(()=>[a(n,{modelValue:h.value,"onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),label:"From Date",placeholder:"Select From Date"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"3"},{default:i(()=>[a(n,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),label:"To Date",placeholder:"Select To Date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(z,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[s("div",Pe,[a(ee,{"model-value":c.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:100},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[6]||(t[6]=e=>c.value=parseInt(e,10))},null,8,["model-value"])]),a(Ce),s("div",Ue,[s("div",De,[a(te,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=e=>p.value=e),placeholder:"Search Application"},null,8,["modelValue"])])])]),_:1}),a(we,{"items-per-page":c.value,"onUpdate:itemsPerPage":t[9]||(t[9]=e=>c.value=e),page:d.value,"onUpdate:page":t[10]||(t[10]=e=>d.value=e),items:D.value,"items-length":S.value,headers:W.value,class:"text-no-wrap color-black application-table",height:Z.value,"onUpdate:options":G},{"item.student.name":i(({item:e})=>[s("p",null,m(e.student.first_name)+" "+m(e.student.last_name),1)]),"item.user.email":i(({item:e})=>[s("div",Ie,[s("span",Be,m(e.user.company_name),1),s("span",Te,m(e.user.email),1)])]),"item.university.name":i(({item:e})=>[s("div",Ne,[s("span",Oe,m(e.university.name),1),s("span",Re,m(e.course.name),1),s("span",$e,m(e.intake.name),1)])]),"item.status":i(({item:e})=>[a(ke,{color:$(e.status),class:ye([`text-${$(e.status)}`,"font-weight-medium"]),size:"small"},{default:i(()=>[Ve(m(X(e.status)),1)]),_:2},1032,["color","class"])]),"item.action":i(({item:e})=>[s("div",Ee,[a(E,{onClick:oe=>J(e.id)},{default:i(()=>[a(F,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),l.$can("delete","application")?(A(),k(E,{key:0,onClick:oe=>K(e.id)},{default:i(()=>[a(F,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):b("",!0)])]),bottom:i(()=>[a(ae,{page:d.value,"onUpdate:page":t[8]||(t[8]=e=>d.value=e),"items-per-page":c.value,"total-items":S.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length","headers","height"])]),_:1},8,["loading"])])}}},Rt=xe(Le,[["__scopeId","data-v-85cb9fe2"]]);export{Rt as default};
