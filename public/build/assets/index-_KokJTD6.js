import{_ as M}from"./AppCardActions-kc0b_jTK.js";import{_ as O}from"./TablePagination-CfQEMVFQ.js";import{_ as j}from"./AppTextField-CkYfuaro.js";import{_ as q}from"./AppSelect-BZEZ65xi.js";import{u as D}from"./rolePermission-DyV_Qn8k.js";import{r as l,w as S,o as k,f as H,e as i,b as e,v as h,x as B,a8 as Q,a9 as T,H as R,a as Y,c as G,d as b,a2 as C}from"./main-Cc9ym1b4.js";import{S as x}from"./sweetalert2-z6gKu1nJ.js";import{V as J,b as K}from"./VCard-K6Atqr_5.js";import{V as A}from"./VCardText-C95nyFHd.js";import{V as W}from"./VForm-Dl8UzsZ8.js";import{V as X}from"./VTextField-NPbV2jFW.js";import{V as Z}from"./VDialog-CY3QhHNh.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as te}from"./VSpacer-KTNu1Dz4.js";import{V as se}from"./VDataTableServer-BB3nwmQf.js";import"./index-9_xD3HKr.js";import"./dialog-transition-BqdSwXsS.js";import"./forwardRefs-D3j0TLhE.js";import"./scopeId-DSwOxKvb.js";import"./index-CTlvPYU1.js";import"./VDivider-DIqqhsZs.js";import"./VPagination-CEYiZI_n.js";import"./VInput-D1FERqoD.js";import"./VSelect-BXLPibQk.js";import"./VList-BpqTLlop.js";import"./ssrBoot-BQI-WCFh.js";import"./VAvatar-By7U6YR5.js";import"./VImg-CuMeNFaz.js";import"./VMenu-1NDupjgg.js";import"./VCheckboxBtn-DyRRspFv.js";import"./VChip-Bl_Mp0g8.js";import"./helpers-EDWR3hkw.js";/* empty css              */import"./VDataTable-ZiP0-ktD.js";import"./VTable-DLWQ4zMh.js";import"./filter-C5W54F6o.js";const oe={__name:"AddEditPermissionDialog",props:{isDialogVisible:Boolean,permission:Object},emits:["update:isDialogVisible","saved"],setup(c,{emit:y}){const u=c,f=y,p=D(),o=l("");S(()=>u.permission,r=>{r?o.value=r.name:o.value=""},{immediate:!0});const n=async()=>{try{u.permission?await p.updatePermission({id:u.permission.id,name:o.value}):await p.createPermission({name:o.value}),d(),f("saved"),x.fire({icon:"success",title:"Success",text:u.permission?"Permission updated successfully":"Permission created successfully"})}catch(r){d(),x.fire({icon:"error",title:"Error",text:r})}},d=()=>{f("update:isDialogVisible",!1),o.value=""};return(r,m)=>(k(),H(Z,{"model-value":c.isDialogVisible,"onUpdate:modelValue":d,"max-width":"600px"},{default:i(()=>[e(J,null,{default:i(()=>[e(K,null,{default:i(()=>[h(B(c.permission?"Edit":"Add")+" Permission ",1)]),_:1}),e(A,null,{default:i(()=>[e(W,{onSubmit:Q(n,["prevent"])},{default:i(()=>[e(X,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),label:"Permission Name",required:""},null,8,["modelValue"]),e(T,{type:"submit",color:"primary",class:"mt-4"},{default:i(()=>[h(B(c.permission?"Update":"Create")+" Permission ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ie={class:"permission-list-container"},ae={class:"me-3 d-flex gap-3"},le={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},re={style:{"inline-size":"15.625rem"}},ne={class:"text-high-emphasis text-body-1"},me={class:"d-flex flex-column ms-3"},ue={__name:"index",setup(c){const y=D(),u=[{title:"Name",key:"name"},{title:"Actions",key:"actions",sortable:!1}],f=l([]),p=l(0),o=l(10),n=l(1),d=l("name"),r=l("asc"),m=l(""),v=l(!1),_=l(!1),P=l(null),g=async()=>{v.value=!0;try{const a=await y.getAllPermissionForTable({page:n.value,perPage:o.value,sortBy:d.value,orderBy:r.value,searchQuery:m.value});f.value=a.data,p.value=a.total}catch(a){console.error("Error fetching permissions:",a)}finally{v.value=!1}},U=a=>{var t,V;d.value=((t=a.sortBy[0])==null?void 0:t.key)||"name",r.value=((V=a.sortBy[0])==null?void 0:V.order)||"asc",g()},$=a=>{P.value={...a},_.value=!0},E=async a=>{if((await x.fire({title:"Are you sure?",text:"Do you want to delete this permission?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await y.deletePermission(a),g(),x.fire("Deleted!","The permission has been deleted.","success")}catch{x.fire("Error!","There was an error deleting the permission.","error")}},I=async()=>{g(),_.value=!1,P.value=null};return S([m],()=>{g()}),R(()=>{g()}),(a,t)=>{const V=q,N=j,w=Y("IconBtn"),F=O,z=M;return k(),G("div",ie,[e(z,{title:"Permission List",loading:v.value,"no-actions":""},{default:i(()=>[e(A,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[b("div",ae,[e(V,{"model-value":o.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=parseInt(s,10))},null,8,["model-value"])]),e(te),b("div",le,[b("div",re,[e(N,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),placeholder:"Search Permission"},null,8,["modelValue"])]),e(T,{density:"default","prepend-icon":"tabler-plus",onClick:t[2]||(t[2]=s=>_.value=!0)},{default:i(()=>[h(" Add Permission ")]),_:1})])]),_:1}),e(se,{"items-per-page":o.value,"onUpdate:itemsPerPage":t[4]||(t[4]=s=>o.value=s),page:n.value,"onUpdate:page":t[5]||(t[5]=s=>n.value=s),items:f.value,"items-length":p.value,headers:u,class:"text-no-wrap color-black permission-table","onUpdate:options":U},{"item.name":i(({item:s})=>[b("div",ne,B(s.name),1)]),"item.actions":i(({item:s})=>[b("div",me,[e(w,{onClick:L=>$(s)},{default:i(()=>[e(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(w,{onClick:L=>E(s.id)},{default:i(()=>[e(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:i(()=>[e(F,{page:n.value,"onUpdate:page":t[3]||(t[3]=s=>n.value=s),"items-per-page":o.value,"total-items":p.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1},8,["loading"]),e(oe,{isDialogVisible:_.value,"onUpdate:isDialogVisible":t[6]||(t[6]=s=>_.value=s),permission:P.value,onSaved:I},null,8,["isDialogVisible","permission"])])}}},Ye=ee(ue,[["__scopeId","data-v-b0026e3b"]]);export{Ye as default};
